import{c0 as cc,E as lc,z as rc,c as w,H as dc,_ as hc,L as re,c1 as Bi,V as Yt,U as an,Q as _e,c2 as j,W as uc,c3 as sl,c4 as cl,T as O,w as gc,c5 as Ei,c6 as pc,c7 as ll,a3 as rl,c8 as dl,a6 as hl,c9 as mc,u as Q,aL as ri,aJ as ul,ca as gl,cb as pl,cc as ml,cd as fc,b2 as $c,b1 as yc,ce as P,cf as fl,cg as $l,by as A,b7 as yl,b8 as _l,ch as Zt,ci as bl,cj as xl,ck as _c,cl as Qt,cm as wl,j as i,cn as Xt,co as le,bq as ee,bz as di,cp as vl,d as b,al as Y,ay as Ct,cq as en,h as W,av as G,bT as bc,cr as kl,cs as xc,ct as wc,cu as hi,cv as ae,ad as ui,n as R,cw as Sl,cx as vc,bG as Cl,k as kc,bX as Dl,e as te,G as H,C as be,S as de,N as Rl,bK as Il,be as ci,bY as Oi,bo as Sc,aV as $e,bZ as Ml,b_ as Tl,I as gi,q as pi,a1 as zl,cy as Bl,s as kt,M as mi,aK as on,ab as Cc,ac as Dc,cz as El,i as Ol,l as Pl,m as Vl,bd as ql,D as Al,b$ as Fl,cA as Ll,o as Rc,r as jl,a as Hl,b as Kl,g as Wl,bu as Ic,bC as Mc,bA as Tc,cB as Nl,y as Gl,cC as Ul,x as Dt,B as xe,cD as fi,F as Rt,cE as zc,cF as Jl,ag as $i,af as Yl,aW as ye,ao as Zl,b4 as Ql,cG as Xl,cH as er,cI as tr,aF as Bc,aD as Ut,ah as nr,cJ as ir,bw as ar,cK as or,aI as sr,cL as cr,cM as lr,bW as rr,cN as dr,cO as hr,cP as Z,cQ as Ec,a4 as Pi,b6 as Vi,cR as ur,cS as gr,bc as Oc,cT as pr,cU as _,cV as ue,aZ as p,aY as u,aw as T,aB as f,cW as mr,bF as fr}from"./index-DCGGyGO6.js";import{u as Pc}from"./useDataEntryBase-D205B4sX.js";import{i as $r,d as yr}from"./discSortUtil-BVEQ4qrB.js";function _r(e){const{badgeContent:t,invisible:n=!1,max:a=99,showZero:o=!1}=e,c=cc({badgeContent:t,max:a});let s=n;n===!1&&t===0&&!o&&(s=!0);const{badgeContent:r,max:d=a}=s?c:e,g=r&&Number(r)>d?`${d}+`:r;return{badgeContent:r,invisible:s,max:d,displayValue:g}}function br(e){return rc("MuiBadge",e)}const ne=lc("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),xr=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],Vn=10,qn=4,wr=e=>{const{color:t,anchorOrigin:n,invisible:a,overlap:o,variant:c,classes:s={}}=e,r={root:["root"],badge:["badge",c,a&&"invisible",`anchorOrigin${j(n.vertical)}${j(n.horizontal)}`,`anchorOrigin${j(n.vertical)}${j(n.horizontal)}${j(o)}`,`overlap${j(o)}`,t!=="default"&&`color${j(t)}`]};return uc(r,br,s)},vr=an("span",{name:"MuiBadge",slot:"Root",overridesResolver:(e,t)=>t.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),kr=an("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.badge,t[n.variant],t[`anchorOrigin${j(n.anchorOrigin.vertical)}${j(n.anchorOrigin.horizontal)}${j(n.overlap)}`],n.color!=="default"&&t[`color${j(n.color)}`],n.invisible&&t.invisible]}})(({theme:e})=>{var t;return{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(12),minWidth:Vn*2,lineHeight:1,padding:"0 6px",height:Vn*2,borderRadius:Vn,zIndex:1,transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.enteringScreen}),variants:[...Object.keys(((t=e.vars)!=null?t:e).palette).filter(n=>{var a,o;return((a=e.vars)!=null?a:e).palette[n].main&&((o=e.vars)!=null?o:e).palette[n].contrastText}).map(n=>({props:{color:n},style:{backgroundColor:(e.vars||e).palette[n].main,color:(e.vars||e).palette[n].contrastText}})),{props:{variant:"dot"},style:{borderRadius:qn,height:qn*2,minWidth:qn*2,padding:0}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${ne.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${ne.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${ne.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${ne.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${ne.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${ne.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${ne.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${ne.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.leavingScreen})}}]}}),qi=w.forwardRef(function(t,n){var a,o,c,s,r,d;const g=dc({props:t,name:"MuiBadge"}),{anchorOrigin:x={vertical:"top",horizontal:"right"},className:D,component:S,components:$={},componentsProps:y={},children:v,overlap:C="rectangular",color:V="default",invisible:U=!1,max:J=99,badgeContent:X,slots:L,slotProps:q,showZero:F=!1,variant:I="standard"}=g,E=hc(g,xr),{badgeContent:ge,invisible:Zc,max:Qc,displayValue:Xc}=_r({max:J,invisible:U,badgeContent:X,showZero:F}),el=cc({anchorOrigin:x,color:V,overlap:C,variant:I,badgeContent:X}),Di=Zc||ge==null&&I!=="dot",{color:tl=V,overlap:nl=C,anchorOrigin:il=x,variant:Ri=I}=Di?el:g,Ii=Ri!=="dot"?Xc:void 0,En=re({},g,{badgeContent:ge,invisible:Di,max:Qc,displayValue:Ii,showZero:F,anchorOrigin:il,color:tl,overlap:nl,variant:Ri}),Mi=wr(En),Ti=(a=(o=L==null?void 0:L.root)!=null?o:$.Root)!=null?a:vr,zi=(c=(s=L==null?void 0:L.badge)!=null?s:$.Badge)!=null?c:kr,On=(r=q==null?void 0:q.root)!=null?r:y.root,Pn=(d=q==null?void 0:q.badge)!=null?d:y.badge,al=Bi({elementType:Ti,externalSlotProps:On,externalForwardedProps:E,additionalProps:{ref:n,as:S},ownerState:En,className:Yt(On==null?void 0:On.className,Mi.root,D)}),ol=Bi({elementType:zi,externalSlotProps:Pn,ownerState:En,className:Yt(Mi.badge,Pn==null?void 0:Pn.className)});return _e.jsxs(Ti,re({},al,{children:[v,_e.jsx(zi,re({},ol,{children:Ii}))]}))});function Sr(e){return rc("MuiFormControlLabel",e)}const vt=lc("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),Cr=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],Dr=e=>{const{classes:t,disabled:n,labelPlacement:a,error:o,required:c}=e,s={root:["root",n&&"disabled",`labelPlacement${j(a)}`,o&&"error",c&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",o&&"error"]};return uc(s,Sr,t)},Rr=an("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${vt.label}`]:t.label},t.root,t[`labelPlacement${j(n.labelPlacement)}`]]}})(({theme:e,ownerState:t})=>re({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${vt.disabled}`]:{cursor:"default"}},t.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},t.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},t.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${vt.label}`]:{[`&.${vt.disabled}`]:{color:(e.vars||e).palette.text.disabled}}})),Ir=an("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${vt.error}`]:{color:(e.vars||e).palette.error.main}})),Mr=w.forwardRef(function(t,n){var a,o;const c=dc({props:t,name:"MuiFormControlLabel"}),{className:s,componentsProps:r={},control:d,disabled:g,disableTypography:x,label:D,labelPlacement:S="end",required:$,slotProps:y={}}=c,v=hc(c,Cr),C=sl(),V=(a=g??d.props.disabled)!=null?a:C==null?void 0:C.disabled,U=$??d.props.required,J={disabled:V,required:U};["checked","name","onChange","value","inputRef"].forEach(E=>{typeof d.props[E]>"u"&&typeof c[E]<"u"&&(J[E]=c[E])});const X=cl({props:c,muiFormControl:C,states:["error"]}),L=re({},c,{disabled:V,labelPlacement:S,required:U,error:X.error}),q=Dr(L),F=(o=y.typography)!=null?o:r.typography;let I=D;return I!=null&&I.type!==O&&!x&&(I=_e.jsx(O,re({component:"span"},F,{className:Yt(q.label,F==null?void 0:F.className),children:I}))),_e.jsxs(Rr,re({className:Yt(q.root,s),ownerState:L,ref:n},v,{children:[w.cloneElement(d,J),U?_e.jsxs(gc,{display:"block",children:[I,_e.jsxs(Ir,{ownerState:L,"aria-hidden":!0,className:q.asterisk,children:["â€‰","*"]})]}):I]}))}),Tr={};class Vc{constructor(t,n){this.root=new zr(t,n)}subset(t){const n=[];return this._subset(t,a=>n.push(...a[Ei].map(o=>o.value))),n}entries(t){const n=[];return this._subset(t,a=>n.push(...a[Ei])),n}_subset(t,n){const a=t.length;function o(c,s){c<a?s.subset(t[c]).forEach(r=>o(c+1,r)):n(s.leaf)}o(0,this.root)}}let zr=class qc{constructor(t,n){if(this.children=[],t>0)for(const[a,o]of Object.entries(n)){const c=new Map;for(const[s,r]of Object.entries(o))c.set(+s,new qc(t-1,r));this.children.push({mask:+a,map:c})}else this.leaf=n}subset(t){return this.children.map(({mask:n,map:a})=>a.get(t&n)).filter(n=>!!n)}};class Ai{constructor(t){this.root=new yi(void 0),this.keys=t}at(t){const n=this.keys.get(t),a=n.reduce((o,c)=>o.child(c),this.root);return a.leaf||(a.leaf=new _i(t,n,this.keys,a)),a.leaf}}class yi{constructor(t){this.children=new Map,this.parent=t}child(t){let n=this.children.get(t);return n||(n=new yi(this),this.children.set(t,n),n)}}class _i{constructor(t,n,a,o){this.tag=Object.fromEntries(Object.entries(t).filter(([c,s])=>s!=null)),this.id=n,this.keys=a,this.internal=o}with(t){const{keys:n}=this,{id:a,firstReplacedByte:o}=n.combine(this.id,t);let c=this.internal;for(let s=o;s<n.tagLen;s++)c=c.parent;for(let s=o;s<n.tagLen;s++)c=c.child(a[s]);return c.leaf||(c.leaf=new _i({...this.tag,...t},a,n,c)),c.leaf}}class Br{constructor(t,n){this.keys=new pc(t),this.values=new Vc(t.tagLen,n)}subset(t){return this.values.subset(this.keys.get(t))}}const St={sum:e=>e.reduce((t,n)=>t+n,0),prod:e=>e.reduce((t,n)=>t*n,1),min:e=>Math.min(...e),max:e=>Math.max(...e),sumfrac:([e,t])=>e/(e+t),unique:([e])=>e},Ac={match:([e,t])=>e===t?0:1,thres:([e,t])=>e>=t?0:1,lookup:([e],t)=>t[e]??0},jt=e=>dl(e,"val");let Fc=class{constructor(t,...n){const a=new pc(t);this.nodes=new Vc(a.tagLen,ll(n)),this.cache=new Ai(a).at({}),this.calc=new Ai(a).at({}),this.calc.val=this}withTag(t){const n=this.calc.with(t);return n.val??(n.val=Object.assign(new this.constructor(this.cache.keys),this,{cache:this.cache.with(t),calc:n}))}gather(t){return this._gather(this.cache.with(t)).pre}compute(t){return this._compute(t,this.cache)}_gather(t){if(t.val)return t.val;const n=this.nodes.entries(t.id).flatMap(({tag:a,value:o})=>o.op==="reread"?this._gather(t.with(o.tag)).pre:[this.markGathered(t.tag,a,o,this._compute(o,t))]);return t.val={pre:n}}_compute(t,n){const a=(c,s,r,d)=>Object.freeze({val:c,meta:this.computeMeta(t,c,s,r,d)}),{op:o}=t;switch(o){case"const":return a(t.ex,[],[]);case"sum":case"prod":case"min":case"max":case"sumfrac":{const c=t.x.map(s=>this._compute(s,n));return a(St[o](jt(c)),c,[])}case"thres":case"match":case"lookup":{const c=t.br.map(g=>this._compute(g,n)),s=Ac[o](jt(c),t.ex),r=[...Array(t.x.length)],d=r[s]=this._compute(t.x[s],n);return a(d.val,r,c)}case"subscript":{const c=this._compute(t.br[0],n);return a(t.ex[c.val],[],[c])}case"vtag":return a(n.tag[t.ex]??"",[],[]);case"tag":{const c=n.with(t.tag),s=this._compute(t.x[0],c);return a(s.val,[s],[],c.tag)}case"dtag":{const c=t.br.map(d=>this._compute(d,n)),s=n.with(Object.fromEntries(c.map((d,g)=>[t.ex[g],d.val]))),r=this._compute(t.x[0],s);return a(r.val,[r],c,s.tag)}case"read":{const c=n.with(t.tag),s=this._gather(c),{pre:r}=s,d=t.ex??this.defaultAccu(c.tag)??"unique";if(d!==t.ex&&(t={...t,ex:d}),s[d])return s[d];if(hl()&&d==="unique"&&r.length!==1)throw new Error(`Ill-form read for ${mc(c.tag)}`);const g=St[d](jt(r));return s[d]=a(g,r,[],c.tag)}case"custom":{const c=t.x.map(s=>this._compute(s,n));return a(Tr[t.ex].calc(jt(c)),c,[])}default:rl(o)}}defaultAccu(t){}markGathered(t,n,a,o){return o}computeMeta(t,n,a,o,c){}toDebug(){throw new Error("not implemented")}};const Er={arithmetic:St,branching:Ac};class Or extends Fc{constructor(t,n=mc,a=()=>!0){super(t.cache.keys),this.gathering=new Set,this.nodes=t.nodes,this.tagStr=n,this.filter=a,this.defaultAccu=o=>t.defaultAccu(o),this.cache=this.cache.with(t.cache.tag)}withTag(t){throw new Error("Unimplemented")}_gather(t){if(this.gathering.has(t))throw new Error(`Loop detected for ${this.tagStr(t.tag)}`);this.gathering.add(t);const n=this.__gather(t);return this.gathering.delete(t),n}__gather(t){if(t.val)return t.val;const n=this.nodes.entries(t.id).flatMap(({tag:a,value:o})=>o.op==="reread"?this._gather(t.with(o.tag)).pre.map(c=>{const s=`${this.tagStr(a)} <= ${this.tagStr(o.tag)} : ${c.meta.readSeq}`;return Object.freeze({...c,meta:{...c.meta,readSeq:s}})}):[this.markGathered(t.tag,a,o,this._compute(o,t))]);return t.val={pre:n}}_compute(t,n){try{return super._compute(t,n)}catch(a){return Object.freeze({val:NaN,meta:{formula:`${a}`,deps:[],omitted:[],val:NaN,x:[],br:[],comp:"ERR",pivot:!0,toJSON:Li}})}}markGathered(t,n,a,o){const c=`${this.tagStr(n)} <- ${this.tagStr(t)}`;return{...o,meta:{...o.meta,readSeq:c,pivot:!0}}}computeMeta(t,n,a,o,c){let s,r;const d=a.filter($=>$).map($=>$.meta),g=o.map($=>$.meta),x=[],D=t.op==="read"?t.ex:t.op,S=[];if(D in St){const $=St[D]([]);for(const y of[...g,...d])y.val!==$||this.filter(y)?x.push(y):S.push(y)}else x.push(...g,...d);switch(t.op){case"const":s=Fi(t.ex);break;case"read":r=`gather ${d.length} node(s)`,r+=` matching ${this.tagStr(c,t.ex)}`,r+=` (for ${this.tagStr(t.tag)})`,S.length&&(r+=` <${S.length} omitted>`),s=`${this.tagStr(t.tag)}`;break;default:{const $=[];t.ex&&t.op!=="subscript"&&$.push(JSON.stringify(t.ex)),t.tag&&$.push(this.tagStr(t.tag)),$.push(...x.map(y=>y.comp)),S.length&&$.push(`<${S.length} omitted>`),s=`${t.op}(`+$.join(", ")+")"}}return S.push(...x.flatMap($=>$.pivot?[]:$.omitted)),Object.freeze({formula:`[${Fi(n)}] ${r??s}`,deps:[...new Set(x.flatMap($=>$.pivot?[$]:$.deps))],omitted:[...new Set(S)],val:n,x:d,br:g,comp:s,pivot:t.op==="read",toJSON:Li})}}const Fi=e=>typeof e=="string"?`"${e}"`:e.toString();function Li(){const{formula:e,readSeq:t,deps:n}=this,a={readSeq:t,formula:e,deps:n};return a.readSeq||delete a.readSeq,a.deps.length||delete a.deps,Object.keys(a).length===1?a.formula:a}function sn(e){const{database:t}=Q();return ri(t.chars,e)}function Pr(e){const{database:t}=Q();return ri(t.charOpts,e)}function Vr(e){const{database:t}=Q();return ri(t.discs,e??"")}const{arithmetic:qr}=Er;let Ar=class extends Fc{computeMeta({op:t,ex:n,tag:a},o,c,s,r){let d=c.filter($=>!!$);const g=Fr(d,s);function x($){return Object.freeze(r&&!$.tag?{tag:r,...$}:$)}function D($,y){return x({op:$,ops:y,...g})}function S($,y){let{meta:v}=$;return y!=null&&y.some(C=>!v.usedCats.has(C))&&(v={...v,usedCats:new Set([...v.usedCats,...y])}),x(v.conds===g.conds?v:{...v,...g})}if(t==="read"&&(r==null?void 0:r.qt)==="cond"){const{src:$,dst:y,sheet:v,q:C}=r;$&&v&&C&&(g.conds=tn(g.conds,{[y??"All"]:{[$]:{[v]:{[C]:o}}}}))}switch(t==="read"&&n!=="unique"&&([t,n]=[n,void 0]),t){case"sum":case"prod":case"min":case"max":case"sumfrac":if(d.length>1){const $=qr[t]([]);d=d.filter(y=>y.val!==$)}return d.length===1?S(d[0]):D(d.length?t:"const",d);case"const":case"subscript":return D("const",[]);case"vtag":return g.usedCats=new Set([n]),D("const",[]);case"match":case"thres":case"lookup":case"read":return S(d[0]);case"tag":return S(d[0],Object.keys(a));case"dtag":return S(d[0],n);case"custom":return D(n,d);default:ul(t)}}markGathered(t,n,a,o){const{val:c}=o,s={...o.meta};let r=!1;const d=new Set([...s.usedCats,...Object.keys(n)]);return s.usedCats.size!==d.size&&(s.usedCats=d,r=!0),r?{val:c,meta:Object.freeze(s)}:o}listFormulas(t){return this.gather(t.tag).filter(n=>n.val).map(({val:n,meta:a})=>gl.withTag(a.tag)[n])}listCondFormulas(t){return this.listFormulas(t).map(n=>this.compute(n).meta.conds).reduce(tn,{})}};function Fr(e,t){var s;const n=[...e.map(r=>r.meta),...t.map(r=>r.meta)];let a={},o=new Set;for(const r of n)a=tn(a,r.conds),r.usedCats.forEach(d=>o.add(d));const c=o.size;return o=((s=n.find(r=>r.usedCats.size===c))==null?void 0:s.usedCats)??o,{usedCats:o,conds:a}}function tn(e,t){if(e===t)return e;if(typeof e!="object")throw new Error(`cannot merge ${e} and ${t}`);if(Object.keys(t).length>Object.keys(e).length&&([e,t]=[t,e]),!Object.keys(t).length)return e;let n=!1;const a={...e};for(const[o,c]of Object.entries(t)){const s=a[o],r=o in a?tn(s,c):c;s!==r&&(a[o]=r,n=!0)}return Object.freeze(n?a:e)}function Lr(e){const t=new Set(e);return n=>!jr(n,t)}function jr(e,t){const n=e.formula.match(/(\S+) (\S+) common.count/);if(!n)return!1;const[,a,o]=n;return o==="own"&&t.has(a)}class Hr extends Ar{toDebug(){return new Or(this,pl,Lr([...$c,...yc]))}defaultAccu(t){var o,c,s,r;const{qt:n,q:a}=t;if(!(!n||!a))switch(t.et){case"own":case"target":return(c=(o=fc[n])==null?void 0:o[a])==null?void 0:c.accu;case"enemy":return(r=(s=ml[n])==null?void 0:s[a])==null?void 0:r.accu;case"team":if(n==="common"&&a==="count")return"sum";throw new Error("non-explicit team value accumulator")}}listFormulas(t){return super.listFormulas(t).filter(n=>n.tag.qt!=="formula"||["standardDmgInst","sheerDmgInst","anomalyDmgInst","anomalyBuildupInst","dazeInst"].includes(n.tag.name??""))}}function Jt(e,...t){return t.map(({tag:n,value:a})=>({tag:{...n,preset:e},value:a}))}function Lc(e,...t){return t.map(({tag:n,value:a})=>({tag:{...n,src:e},value:a}))}function jc(e){const{lvl:t,promotion:n,basic:a,dodge:o,special:c,chain:s,assist:r,core:d,mindscape:g}=A.char,{char:x,iso:D,[e.key]:S}=P.withAll("sheet",[]);return[x.reread(S),D.reread(S),t.add(e.level),a.add(e.basic),o.add(e.dodge),c.add(e.special),s.add(e.chain),r.add(e.assist),d.add(e.core),n.add(e.promotion),g.add(e.mindscape),Zt.base.crit_.add(.05),Zt.base.crit_dmg_.add(.5)]}function Kr(e){return[P.sheet("agg").reread(P.sheet("wengine")),...e?[A.common.count.sheet(e.key).add(1),A.wengine.lvl.add(e.level),A.wengine.modification.add(e.modification),A.wengine.phase.add(e.phase)]:[]]}function Hc(e,t){const{common:{count:n},initial:a}=bl(fc,{sheet:"disc",et:"own"});return[P.sheet("agg").reread(P.sheet("disc")),P.withTag({sheet:"disc",qt:"initial"}).reread(P.sheet("dyn")),...Object.entries(e).map(([o,c])=>xl(a,o).sheet("dyn").add(c)),...Object.entries(t).map(([o,c])=>n.sheet(o).add(c))]}function Wr(e){const t={},n={};return e.forEach(({setKey:a,mainStatKey:o,substats:c,level:s,rarity:r})=>{t[a]=(t[a]??0)+1,n[o]=(n[o]??0)+yl(r,o,s),c.forEach(({key:d,upgrades:g})=>{!d||!g||(n[d]=(n[d]??0)+_l(d,r)*g)})}),Hc(n,t)}function Kc(e){const t=P.with("et","team"),{own:n,enemy:a,teamBuff:o,notOwnBuff:c}=P.sheet("agg").withAll("et",[]);return[e.map(s=>P.withTag({et:"target",dst:s}).reread(P.withTag({et:"own",dst:null,src:s}))),e.flatMap(s=>{const r=n.with("src",s);return e.map(d=>r.reread(o.withTag({dst:s,src:d,name:null})))}),e.flatMap(s=>{const r=n.with("src",s);return e.filter(d=>d!==s).map(d=>r.reread(c.withTag({dst:s,src:d,name:null})))}),e.map(s=>a.reread(P.withTag({et:"enemyDeBuff",dst:null,src:s,name:null}))),e.flatMap((s,r)=>{const{stackIn:d,stackTmp:g}=P.withAll("qt",[]),x=P.withTag({src:s,et:"own"});return[x.with("qt","stackTmp").add(fl(d,0,r+1)),x.with("qt","stackOut").add($l(g.max.with("et","team"),r+1,d))]}),e.map(s=>t.add(P.withTag({src:s,et:"own"})))].flat()}function Wc(e){const t=_c(Qt,e);return new Hr(Qt,wl,t)}function Nr(e){return new Br(Qt,_c(Qt,e))}function Gr({characterKey:e}){return i(Xt,{ns:"charNames_gen",key18:e})}function Ur({attribute:e}){return le[e]}function Jr({characterKey:e,onClick:t,charCardConfig:n}){const{level:a=0,promotion:o=0}=sn(e)??{},c=ee(e),s=n||{cardWidth:"100%",charImgWidth:"100%",iconsSize:1.7,isEditing:!1,charNameWidth:"191px",charNameVariant:"h6",scrollingBgSize:"200px"},r=w.useCallback(()=>e&&(t==null?void 0:t(e)),[e,t]),d=w.useCallback(g=>i(di,{onClick:r,sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:g}),[r]);return i(Ct,{children:i(vl,{condition:!!t,wrapper:d,children:b(Y,{sx:{display:"flex",flexDirection:"column",width:s.cardWidth},children:[i(Yr,{characterKey:e,characterStat:c,charCardConfig:s}),i(Zr,{characterKey:e,characterStat:c,promotion:o,level:a,charCardConfig:s})]})})})}function Yr({characterKey:e,characterStat:t,charCardConfig:n}){const{attribute:a,id:o}=t;return b(Y,{sx:s=>({width:"100%",height:"100%",position:"relative",display:"flex",background:`${s.palette[a].main}`,zIndex:1,overflow:"hidden"}),children:[b(Y,{sx:{position:"absolute",left:"0",right:"0",display:"flex",transform:"rotate(5deg) translateX(-50%)",zIndex:2},children:[i(ji,{characterKey:e,charCardConfig:n}),i(ji,{characterKey:e,charCardConfig:n})]}),i(Y,{src:`https://act-webstatic.hoyoverse.com/game_record/zzzv2/role_vertical_painting/role_vertical_painting_${o}.png`,component:en?en:"img",width:n.charImgWidth,height:"auto",position:"relative",zIndex:"2"})]})}function Zr({characterKey:e,characterStat:t,promotion:n,level:a,charCardConfig:o}){const{t:c}=W("page_characters"),{attribute:s,rarity:r,specialty:d}=t,g=sn(e);return i(Y,{sx:{width:"100%",height:"100%",padding:"8px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:b(Y,{sx:{display:"flex",flexDirection:"column"},children:[b(Y,{gap:1,sx:{display:"flex",alignItems:"center"},children:[i(G,{size:o.iconsSize,src:bc(r)}),i(O,{variant:o.charNameVariant,sx:{fontWeight:"900",maxWidth:o.charNameWidth,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:i(Gr,{characterKey:e})}),i(kl,{ele:s,iconProps:{sx:{fontSize:`${o.iconsSize}em`}}}),i(G,{size:o.iconsSize,src:xc(d)}),o.isEditing?"":i(O,{variant:"h5",color:"primary",sx:{fontWeight:"900"},children:c("mindscape",{level:g?g.mindscape:0})})]}),o.isEditing?"":b(Y,{sx:{mt:"12px",display:"flex",gap:"14px",flexWrap:"wrap"},children:[b(Y,{sx:x=>({border:`2px solid ${x.palette.contentZzz.main}`,borderRadius:"20px",display:"flex"}),children:[i(O,{sx:{fontWeight:"900",paddingLeft:"12px",fontSize:"16px"},children:c("charLevel",{level:a})}),b(O,{color:"primary",sx:{fontWeight:"900",paddingLeft:"4px",pr:"10px"},children:["/ ",wc[n]]})]}),b(Y,{gap:1.5,sx:{display:"flex",alignItems:"center"},children:[hi.map((x,D)=>i(qi,{anchorOrigin:{vertical:"bottom",horizontal:"left"},badgeContent:`${g?g[x]:0}`,color:"primary",children:i(G,{size:1.9,src:ae(x)})},D)),i(qi,{anchorOrigin:{vertical:"bottom",horizontal:"left"},badgeContent:`${g?g.core:0}`,color:"primary",children:i(G,{size:1.9,src:ae("core")})},6)]})]})]})})}function ji({characterKey:e,charCardConfig:t}){const{t:n}=W("charNames_gen"),a={animation:"scroll 16s infinite linear","@keyframes scroll":{"0%":{transform:"translateX(-100%)"},"100%":{transform:"translateX(0)"}}};return i(Y,{component:"span",sx:{color:"#000",marginTop:"20px",fontStyle:"italic",fontSize:t.scrollingBgSize,lineHeight:"150px",whiteSpace:"nowrap",textTransform:"uppercase",display:"flex",justifyContent:"center",fontFamily:"Impact",opacity:.1,...a},children:n(`${e}`)})}function Qr({mindscape:e,setMindscape:t}){const{t:n}=W("page_characters");return i(R,{sx:{display:"flex",flexWrap:"wrap",gap:2,mt:"12px"},children:ui(1,6).map(a=>i(R,{children:i(Ct,{sx:{position:"relative",borderRadius:"40px"},children:i(Mr,{control:i(Sl,{checked:e>=a,onChange:()=>t(a===e?a-1:a)}),label:b(R,{sx:{position:"absolute",top:9,left:e>=a?75:16,transition:"left 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",textAlign:"center"},children:[i(O,{variant:"subtitle1",sx:o=>({fontWeight:900,color:e>=a?o.palette.mindscapeActive.main:o.palette.mindscapeInactive.main}),children:n("mindscape",{level:a})}),i(O,{variant:"subtitle2",sx:o=>({lineHeight:.2,fontWeight:900,color:e>=a?o.palette.mindscapeActive.main:o.palette.mindscapeInactive.main}),children:n("mindscapeTitle")})]}),sx:{margin:0}})})},a))})}function Xr(e){return{new:t=>e.chars.get(t)?0:1,name:t=>vc.t(t).toString(),level:t=>{const n=e.chars.get(t);return n?n.level*(n.promotion+1):0},rarity:t=>ee(t).rarity??0}}function ed(e){return{attribute:(t,n)=>n.includes(ee(t).attribute),specialtyType:(t,n)=>n.includes(ee(t).specialty),rarity:(t,n)=>n.includes(ee(t).rarity),name:(t,n)=>n===void 0||vc.t(t).toLowerCase().includes(n.toLowerCase()),new:(t,n)=>n===void 0||n===(e.chars.get(t)?"no":"yes")}}const Nc={name:["name"],level:["level","rarity","name"],rarity:["rarity","level","name"]};function Ly({show:e,onHide:t,onSelect:n,newFirst:a=!1}){const{database:o}=Q(),c=Pc(o.displayCharacter),[s,r]=w.useState(""),d=w.useDeferredValue(s),g=w.useDeferredValue(c),x=w.useMemo(()=>{const{attribute:$,specialtyType:y,sortType:v,ascending:C}=g,V=[...a?["new"]:[],...Nc[v]??[]];return Cl.filter(kc({attribute:$,specialtyType:y,name:d},ed(o))).sort(Dl(V,C,Xr(o),["new"]))},[g,a,d,o]);return i(nd,{show:e,charactersToShow:x,filterSearchSortProps:{searchTerm:s,onChangeSpecialtyFilter:$=>{o.displayCharacter.set({specialtyType:$})},onChangeAttributeFilter:$=>{o.displayCharacter.set({attribute:$})},onChangeSearch:$=>{r($.target.value)},onChangeSort:$=>{o.displayCharacter.set({sortType:$})},onChangeAsc:$=>{o.displayCharacter.set({ascending:$})}},onClose:()=>{r(""),t()},children:i(te,{sx:{flex:"1",overflow:"auto"},children:i(w.Suspense,{fallback:i(de,{variant:"rectangular",width:"100%",height:1e3}),children:i(H,{container:!0,spacing:.5,columns:{xs:2,sm:3,md:4,lg:5},children:x.map($=>i(H,{item:!0,xs:1,children:i(be,{bgt:"light",sx:y=>({position:"relative",flexGrow:1,display:"flex",flexDirection:"column",borderRadius:"40px 16px 16px 40px",border:`3px solid ${y.palette.contentZzz.main}`}),children:i(id,{characterKey:$,onClick:()=>{t(),n($)}})})},$))})})})})}const td=Object.keys(Nc);function nd({show:e,charactersToShow:t,filterSearchSortProps:n,onClose:a,children:o}){const{t:c}=W("page_characters"),{database:s}=Q(),r=Pc(s.displayCharacter),d=w.useMemo(()=>Oi(Sc,y=>s.chars.entries.forEach(([v,C])=>{const V=ee(C.key).specialty;y[V].total++,t.includes(v)&&y[V].current++})),[t,s.chars.entries]),g=w.useMemo(()=>Oi($e,y=>Object.entries(s.chars.data).forEach(([v])=>{const C=ee(v).attribute;y[C].total++,t.includes(v)&&y[C].current++})),[t,s.chars.data]),{specialtyType:x,attribute:D,sortType:S,ascending:$}=r;return i(mi,{open:e,onClose:a,containerProps:{sx:{height:"100vh",p:{xs:1}}},children:b(be,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[b(te,{sx:{display:"flex",flexDirection:"column",gap:1},children:[b(R,{sx:{display:"flex",justifyContent:"space-between"},children:[b(R,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:[i(Ml,{onChange:y=>s.displayCharacter.set({specialtyType:y}),value:x,totals:d,size:"small"}),i(Tl,{onChange:y=>s.displayCharacter.set({attribute:y}),value:D,totals:g,size:"small"})]}),i(gi,{sx:{ml:"auto"},onClick:()=>a(),children:i(pi,{})})]}),b(R,{display:"flex",gap:1,children:[i(zl,{autoFocus:!0,value:n.searchTerm,onChange:y=>n.onChangeSearch(y),label:c("characterName"),size:"small",sx:{height:"100%",mr:"auto"},InputProps:{sx:{height:"100%"}}}),i(Bl,{sortKeys:td,value:S,onChange:y=>n.onChangeSort(y),ascending:$,onChangeAsc:y=>n.onChangeAsc(y)})]})]}),i(kt,{}),o]})})}function id({characterKey:e,onClick:t}){const{t:n}=W(["page_characters","charNames_gen"]),a=Rl(),o=sn(e),{rarity:c,attribute:s}=ee(e),{level:r=1,promotion:d=0,mindscape:g=0}=o??{},x=s==="electric"?a.palette[s].light:a.palette[s].main;return i(di,{onClick:t,children:b(R,{sx:{position:"relative",width:"100%",display:"flex",padding:"3px",gap:.5,"&::before":{content:'""',display:"block",position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:.7,background:x}},children:[i(R,{sx:{maxWidth:{xs:"33%",lg:"30%"},alignSelf:"flex-end",display:"flex",flexDirection:"column",zIndex:1,flexShrink:1},children:i(R,{component:en?en:"img",src:Il(e,"interknot")})}),b(R,{sx:{display:"flex",flexDirection:"column",zIndex:1,justifyContent:"space-evenly"},children:[b(R,{sx:{display:"flex",alignItems:"center",gap:.5},children:[i(G,{size:1.5,src:bc(c)}),i(O,{variant:"subtitle2",sx:D=>({flexGrow:1,color:D.palette.contentNormal.main,fontWeight:"900"}),children:n(`charNames_gen:${e}`)})]}),o?b(R,{sx:D=>({display:"flex",gap:1,alignItems:"center",background:D.palette.contentNormal.main,padding:"4px 12px",borderRadius:"20px"}),children:[b(R,{sx:{textShadow:"0 0 5px gray"},children:[i(O,{variant:"body2",component:"span",whiteSpace:"nowrap",children:n("charLevel",{level:r})}),b(O,{variant:"body2",component:"span",color:"text.secondary",children:["/",wc[d]]})]}),b(O,{variant:"body2",children:["M",g]})]}):i(O,{component:"span",variant:"body2",children:i(ci,{color:"electric",children:n("characterEditor.new")})})]})]})})}function ad(){const{t:e}=W("page_characters"),{database:t}=Q(),n=on(),{core:a=0,promotion:o=0,key:c}=n??{},s=w.useCallback(r=>c&&t.chars.set(c,{core:r}),[t,c]);return i(Dc,{fullWidth:!0,title:e("core",{level:a}),color:"primary",startIcon:i(G,{src:ae("core"),size:1.75,sideMargin:!0}),children:ui(0,El[o]).map(r=>i(Cc,{selected:a===r,disabled:a===r,onClick:()=>s(r),children:e("core",{level:r})},r))})}const od={xs:2*3,sm:2*3,md:3*3,lg:4*3,xl:4*3};function Gc({disc:e,onChangeId:t,slotKey:n,show:a,onClose:o}){const{t:c}=W(["page_characters","disc"]),{database:s}=Q(),r=e==null?void 0:e.id,d=w.useCallback((I,E)=>({...I,...E,slotKeys:[n]}),[n]),[g,x]=w.useReducer(d,{...$r(),slotKeys:[n]}),[D,S]=Ol();w.useEffect(()=>s.discs.followAny(S),[s,S]);const $=Pl(),y=w.useMemo(()=>yr(),[]),v=s.discs.values.filter(I=>I.slotKey===g.slotKeys[0]).length,C=w.useMemo(()=>{const I=kc(g,y);let E=s.discs.values.filter(I).map(ge=>ge.id);return r&&s.discs.get(r)&&(E=E.filter(ge=>ge!==r),E.unshift(r)),D&&E},[g,y,s.discs,r,D]),{numShow:V,setTriggerElement:U}=Vl(od[$],C.length),J=w.useMemo(()=>C.slice(0,V),[C,V]),X=C.length!==v?`${C.length}/${v}`:`${v}`,L={numShowing:J.length,total:X,t:c,namespace:"disc"},[q,F]=w.useState("");return w.useEffect(()=>{ql.includes(q)?(t(null),F(""),o()):q&&(t(q),F(""),o())},[t,o,q]),i(mi,{open:a,onClose:o,containerProps:{maxWidth:"xl"},children:b(be,{children:[b(te,{sx:{py:1,display:"flex",alignItems:"center"},children:[i(O,{variant:"h6",children:c("tabEquip.swapDisc")}),i(gi,{onClick:o,sx:{ml:"auto"},children:i(pi,{})})]}),i(kt,{}),i(te,{children:i(w.Suspense,{fallback:i(de,{variant:"rectangular",width:"100%",height:200}),children:i(Al,{filterOption:g,filterOptionDispatch:x,filteredIds:C,disableSlotFilter:!0})})}),i(kt,{}),b(te,{children:[i(R,{pb:1,display:"flex",justifyContent:"space-between",alignItems:"flex-end",flexWrap:"wrap",children:i(Fl,{showingTextProps:L})}),i(R,{mt:1,children:i(w.Suspense,{fallback:i(de,{variant:"rectangular",width:"100%",height:1e3}),children:b(H,{container:!0,spacing:1,columns:{xs:2,md:3,lg:4},children:[r&&i(H,{item:!0,xs:1,children:i(be,{bgt:"light",sx:{width:"100%",height:"100%"},children:i(di,{sx:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},onClick:()=>F(n),children:b(R,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[i(Ll,{sx:{fontSize:"10em"}}),i(O,{children:c("disc:button.unequipDisc")})]})})})}),J.map(I=>i(H,{item:!0,xs:1,sx:E=>({...r===I&&{"> .MuiCard-root":{outline:`${E.spacing(.5)} solid ${E.palette.warning.main}`}}}),children:i(Rc,{disc:s.discs.get(I),onClick:r===I?void 0:()=>F(I)})},I))]})})}),C.length!==J.length&&i(de,{ref:I=>{I&&U(I)},sx:{borderRadius:1,mt:1},variant:"rectangular",width:"100%",height:100})]})]})})}function sd(e){return"fieldRef"in e}var _t={},Hi;function cd(){if(Hi)return _t;Hi=1;var e=jl();Object.defineProperty(_t,"__esModule",{value:!0}),_t.default=void 0;var t=e(Hl()),n=Kl(),a=(0,t.default)((0,n.jsx)("path",{d:"M6.99 11 3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z"}),"SwapHoriz");return _t.default=a,_t}var ld=cd();const It=Wl(ld),rd={xs:1,sm:2,md:3,lg:3,xl:3};function dd({setWengine:e,setDisc:t}){const{database:n}=Q(),a=w.useContext(Ic),[o,c]=w.useState(),[s,r]=w.useState(""),d=w.useCallback(y=>{r(y)},[]),g=w.useCallback(y=>{c(y)},[]),x=Mc(a==null?void 0:a.equippedWengine),D=a?ee(a.key).specialty:Sc[0],S=Tc(a==null?void 0:a.equippedDiscs),$=Vr(o);return i(R,{children:b(gc,{spacing:2,children:[i(w.Suspense,{fallback:!1,children:s&&i(Nl,{wengineId:s,footer:!0,onClose:()=>r(""),extraButtons:i(md,{wengineId:(x==null?void 0:x.id)||"",wengineTypeKey:D,onChangeId:e})})}),i(w.Suspense,{fallback:!1,children:$&&i(Gl,{disc:$,show:!!o,onShow:()=>c(o),onClose:()=>c(void 0),cancelEdit:()=>c(void 0)})}),i(R,{children:x&&x.id&&n.wengines.keys.includes(x.id)?i(Ul,{wengineId:x.id,onEdit:()=>d(x.id),extraButtons:i(pd,{wengineId:x.id,wengineTypeKey:D,onChangeId:e})}):i(hd,{wengineId:"",wengineTypeKey:D,onChangeId:e})}),i(R,{children:i(H,{item:!0,columns:rd,container:!0,spacing:1,children:!!S&&Object.entries(S).map(([y,v])=>i(H,{item:!0,xs:1,children:v!=null&&v.id&&n.discs.keys.includes(v.id)?i(Rc,{disc:v,extraButtons:i(gd,{disc:v,slotKey:y,onChangeId:C=>t(y,C)}),onEdit:()=>g(v.id),onLockToggle:()=>n.discs.set(v.id,({lock:C})=>({lock:!C}))}):i(ud,{slotKey:y,onChangeId:C=>t(y,C)})},(v==null?void 0:v.id)||y))})})]})})}function hd({wengineId:e,wengineTypeKey:t,onChangeId:n}){const[a,o,c]=Dt();return b(Ct,{bgt:"light",sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[i(te,{children:b(O,{children:[i(G,{src:xc(t)})," "]})}),i(kt,{}),b(R,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:[i(fi,{wengineId:e,wengineTypeKey:t,show:a,onClose:c,onChangeId:n}),i(xe,{onClick:o,color:"info",sx:{borderRadius:"1em"},children:i(It,{sx:{height:100,width:100}})})]})]})}function ud({slotKey:e,onChangeId:t}){const[n,a,o]=Dt(),{t:c}=W("disc");return b(Ct,{bgt:"light",sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[i(te,{children:i(O,{children:c("slotName",{slotKey:e})})}),i(kt,{}),b(R,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:[i(Gc,{disc:void 0,slotKey:e,show:n,onClose:o,onChangeId:t}),i(xe,{onClick:a,color:"info",sx:{borderRadius:"1em"},children:i(It,{sx:{height:100,width:100}})})]})]})}function gd({disc:e,slotKey:t,onChangeId:n}){const{t:a}=W("page_characters"),[o,c,s]=Dt();return b(Rt,{children:[i(zc,{title:i(O,{children:a("tabEquip.swapDisc")}),placement:"top",arrow:!0,children:i(xe,{color:"info",size:"small",onClick:c,"aria-label":a("tabEquip.swapDisc"),children:i(It,{})})}),i(Gc,{disc:e,slotKey:t,show:o,onClose:s,onChangeId:n})]})}function pd({wengineId:e,wengineTypeKey:t,onChangeId:n}){const{t:a}=W("page_characters"),[o,c,s]=Dt();return b(Rt,{children:[i(zc,{title:i(O,{children:a("tabEquip.swapWengine")}),placement:"top",arrow:!0,children:i(xe,{color:"info",size:"small",onClick:c,children:i(It,{})})}),i(fi,{wengineId:e,wengineTypeKey:t,onChangeId:n,show:o,onClose:s})]})}function md({wengineId:e,wengineTypeKey:t,onChangeId:n}){const{t:a}=W("page_characters"),[o,c,s]=Dt();return b(Rt,{children:[i(xe,{color:"info",onClick:c,startIcon:i(It,{}),children:a("tabEquip.swapWengine")}),i(fi,{wengineId:e,wengineTypeKey:t,onChangeId:n,show:o,onClose:s})]})}function fd({skillKey:e}){const{database:t}=Q(),{t:n}=W("page_characters"),a=on(),{[e]:o=0,promotion:c=0,key:s}=a??{},r=w.useCallback(d=>s&&t.chars.set(s,{[e]:d}),[t,s,e]);return i(Dc,{fullWidth:!0,title:n(e,{level:o}),color:"primary",startIcon:i(G,{src:ae(e),size:1.75,sideMargin:!0}),children:ui(1,Jl[c]).map(d=>i(Cc,{selected:o===d,disabled:o===d,onClick:()=>r(d),children:n(e,{level:d})},d))})}function cn(){const e=w.useContext($i),t=w.useContext(Yl);return w.useMemo(()=>e==null?void 0:e.withTag(t),[e,t])}const K=(e,t)=>i(Xt,{ns:"sheet",key18:e,values:t});function h(e,t){return[(n,a)=>i(Xt,{ns:`${e}_${t}_gen`,key18:n,values:a}),(n,a)=>i(Xt,{ns:`${e}_${t}`,key18:n,values:a})]}function l(e){return{title:i(ln,{tag:e}),fieldRef:e}}function $d(e){if(!e)return"";const{et:t,q:n,qt:a,name:o}=e;return t==="own"&&a==="formula"&&n!=="base"?o??n??"":n??""}const yd={initial:"Initial",combat:"Combat",final:"Final",base:"Base"};function ln({tag:e,showPercent:t,preventRecursion:n}){return i(ye,{color:zy(e),children:i(xd,{tag:e,showPercent:t,preventRecursion:n})})}function jy({tag:e,showPercent:t}){return b(Rt,{children:[i(ln,{tag:e,showPercent:t}),Ey(e).map(n=>i(ci,{children:nn[n]},n)),e.attribute&&i(ci,{color:e.attribute,children:i(Ur,{attribute:e.attribute})})]})}const _d=["hp","hp_","atk","atk_","def","def_"],bd=e=>_d.includes(e),Ki={dmg_:"DMG",common_dmg_:"DMG",defIgn_:"DEF Ignore",resIgn_:"Res Ignore",dazeInc_:"Daze Increase"};function xd({tag:e,showPercent:t,preventRecursion:n}){var s;const a=cn(),o=(s=Oy.subset(e)[0])==null?void 0:s.title;if(o&&!n)return o;if(e.qt==="cond"&&e.q&&e.sheet&&a){const r=li.get(`${e.sheet}:${e.q}`);if(r)return Zl(r.label,a,a==null?void 0:a.compute(new Ql(e,"max")).val)}const c=$d(e);if(bd(c))return b("span",{children:[i(er,{statKey:c,iconProps:Xl})," ",b("span",{children:[(e.qt&&yd[e.qt])??e.qt," ",tr[c],t&&Bc(c)]})]});if(Ki[c]){const r=[...e.attribute?[le[e.attribute]]:[],...e.damageType1?[nn[e.damageType1]]:[],...e.damageType2?[nn[e.damageType2]]:[],Ki[c]];return i("span",{children:r.join(" ")})}return i(Ut,{statKey:c,showPercent:t})}function wd(){const e=cn();return i(Ct,{children:i(te,{children:e==null?void 0:e.listFormulas(A.listing.formulas).map((t,n)=>i(vd,{read:t},n))})})}function vd({read:e}){var v,C,V,U,J,X,L;const t=cn(),{setRead:n}=w.useContext(nr),a=on(),o=Pr(a==null?void 0:a.key),c=e.tag.sheet===((v=o==null?void 0:o.target)==null?void 0:v.sheet)&&e.tag.name===((C=o==null?void 0:o.target)==null?void 0:C.name)||((V=o==null?void 0:o.target)==null?void 0:V.q)===e.tag.q,s=w.useMemo(()=>{var q,F,I,E;return e.tag.sheet===((q=o==null?void 0:o.target)==null?void 0:q.sheet)&&e.tag.name===((F=o==null?void 0:o.target)==null?void 0:F.name)?ir(e.tag,(I=o==null?void 0:o.target)==null?void 0:I.damageType1,(E=o==null?void 0:o.target)==null?void 0:E.damageType2):e.tag},[e.tag,(U=o==null?void 0:o.target)==null?void 0:U.sheet,(J=o==null?void 0:o.target)==null?void 0:J.name,(X=o==null?void 0:o.target)==null?void 0:X.damageType1,(L=o==null?void 0:o.target)==null?void 0:L.damageType2]),r=w.useMemo(()=>({...e,tag:s}),[s,e]),d=t==null?void 0:t.compute(r),g=s.name||s.q,{statHighlight:x,setStatHighlight:D}=w.useContext(ar),S=s.name?"":s.attribute?`${s.attribute}_${s.q}`:s.q==="cappedCrit_"?"crit_":s.q,$=S?or(x,S):!1;if(!d)return null;const y=sr(d.val,Bc(g??""));return b(R,{onMouseEnter:()=>S&&D(S),onMouseLeave:()=>D(""),sx:{display:"flex",gap:1,alignItems:"center",p:.5,borderRadius:.5,backgroundColor:c?"rgba(0,200,0,0.2)":void 0,position:"relative","::after":{content:'""',position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:.5,backgroundColor:cr($),transition:"background-color 0.3s ease-in-out",pointerEvents:"none"}},children:[i(R,{sx:{flexGrow:1},children:i(ln,{tag:s})}),y,i(lr,{tag:s,onClick:()=>{}})]})}function Hy({characterKey:e,onClose:t}){return i(mi,{open:!!e,onClose:t,children:i(w.Suspense,{fallback:i(de,{variant:"rectangular",width:"100%",height:1e3}),children:e&&i(kd,{characterKey:e,onClose:t},e)})})}function kd({characterKey:e,onClose:t}){const n=sn(e);return i(be,{children:i(te,{sx:{display:"flex",flexDirection:"column",gap:1},children:i(w.Suspense,{fallback:i(de,{variant:"rectangular",width:"100%",height:1e3}),children:n?i(Ic.Provider,{value:n,children:i(Cd,{onClose:t})}):i(de,{variant:"rectangular",width:"100%",height:1e3})})})})}const Sd={cardWidth:"500px",charImgWidth:"75%",iconsSize:1.5,isEditing:!0,charNameWidth:"166px",charNameVariant:"h6",scrollingBgSize:"220px"};function Cd({onClose:e}){const{t}=W(["page_characters"]),n=rr(),{database:a}=Q(),o=on(),{key:c,equippedDiscs:s,equippedWengine:r}=o,d=w.useCallback(async()=>{const g=t(`${c}`);window.confirm(t("removeCharacter",{value:g}))&&(a.chars.remove(c),n("/characters"))},[a,n,c,t]);return b(R,{display:"flex",flexDirection:"column",gap:1,children:[b(R,{display:"flex",gap:1,children:[i(xe,{color:"error",onClick:()=>d(),startIcon:i(dr,{}),sx:{marginLeft:"auto"},children:t("characterEditor.delete")}),!!e&&i(gi,{onClick:e,children:i(pi,{})})]}),i(R,{children:b(H,{container:!0,spacing:1,sx:{justifyContent:"center"},children:[i(H,{item:!0,xs:6,sm:4,md:4,lg:4,xl:4,children:b(be,{sx:{height:"100%",display:"flex",flexDirection:"column",gap:1},children:[i(Jr,{characterKey:c,charCardConfig:Sd}),i(R,{sx:{px:1},children:i(hr,{level:o.level,milestone:o.promotion,setBoth:({level:g,milestone:x})=>a.chars.set(c,{level:g,promotion:x})})}),i(wd,{}),i(Qr,{mindscape:o.mindscape,setMindscape:g=>a.chars.set(c,{mindscape:g})})]})}),b(H,{item:!0,xs:6,sm:8,md:8,lg:8,xl:8,sx:{display:"flex",flexDirection:"column",gap:1},children:[i(R,{children:b(H,{container:!0,columns:3,spacing:1,children:[hi.map(g=>i(H,{item:!0,xs:1,children:i(fd,{skillKey:g},g)},g)),i(H,{item:!0,xs:1,children:i(ad,{})},"core")]})}),i(R,{children:i(dd,{setWengine:g=>{g?a.wengines.set(g,{location:c}):r&&a.wengines.set(r,{location:""})},setDisc:(g,x)=>{x?a.discs.set(x,{location:c}):s[g]&&a.discs.set(s[g],{location:""})}})})]})]})})]})}function Ky({character:e,charOpt:t,wengineId:n,discIds:a,children:o}){const c=Dd(e,n,a),s=w.useMemo(()=>Wc([...Kc([e.key]),...c,Zt.common.critMode.add(t.critMode),Z.common.lvl.add(t.enemyLvl),Z.common.def.add(t.enemyDef),Z.common.isStunned.add(t.enemyisStunned?1:0),Z.common.stun_.add(t.enemyStunMultiplier/100),Z.common.unstun_.add(1),...t.conditionals.flatMap(({sheet:d,src:g,dst:x,condKey:D,condValue:S})=>Jt("preset0",Ec(d,g,x)(D,S))),...t.bonusStats.filter(({disabled:d})=>!d).flatMap(({tag:d,value:g})=>Jt("preset0",{tag:{...d,src:e.key,sheet:"agg",et:"own"},value:Pi(Vi(g,d.q??""))})),...t.enemyStats.flatMap(({tag:d,value:g})=>Jt("preset0",{tag:{...d,qt:"common",et:"enemy",sheet:"agg"},value:Pi(Vi(g,d.q??""))}))]),[c,t,e.key]),r=w.useMemo(()=>s&&new Map,[s]);return i(ur.Provider,{value:r,children:i($i.Provider,{value:s,children:o})})}function Dd(e,t,n){const a=Mc(t),o=Tc(n),c=w.useMemo(()=>Kr(a),[a]),s=w.useMemo(()=>Wr(Object.values(o).filter(gr)),[o]);return w.useMemo(()=>Lc(e.key,...jc(e),...c,...s),[e,c,s])}function Wy({character:e,conditionals:t,children:n}){const a=w.useMemo(()=>Wc([...Kc([e.key]),...Lc(e.key,...jc(e),...Hc({},Oc(yc,()=>4)),P.sheet("agg").reread(P.sheet("wengine")),A.wengine.lvl.add(60),A.wengine.modification.add(5),A.wengine.phase.add(1),...$c.map(o=>A.common.count.sheet(o).add(1))),Zt.common.critMode.add("avg"),Z.common.lvl.add(100),Z.common.def.add(900),Z.common.isStunned.add(0),Z.common.stun_.add(1.5),Z.common.unstun_.add(1),...t.flatMap(({sheet:o,src:c,dst:s,condKey:r,condValue:d})=>Jt("preset0",Ec(o,c,s)(r,d)))]),[e,t]);return i($i.Provider,{value:a,children:n})}function k(e,t={}){return{...Rd(e,t==null?void 0:t.perSkillAbility),core:Md(e,t==null?void 0:t.core,t==null?void 0:t.ability),m1:pe(e,1,t==null?void 0:t.m1),m2:pe(e,2,t==null?void 0:t.m2),m3:pe(e,3,t==null?void 0:t.m3),m4:pe(e,4,t==null?void 0:t.m4),m5:pe(e,5,t==null?void 0:t.m5),m6:pe(e,6,t==null?void 0:t.m6)}}function M(e){return{title:i(ln,{tag:e.tag,preventRecursion:!0}),fieldRef:e.tag}}function Rd(e,t){const n=_.char[e],a=ue[e],[o,c]=h("char",e);return Oc(hi,s=>({title:s,img:ae(`${s}Flat`),documents:Object.keys(n[s]).flatMap(r=>{var d;return[{type:"text",header:{icon:i(G,{src:ae(`${s}Flat`),size:1.5}),text:o(`${s}.${r}.name`)},text:o(`${s}.${r}.desc`)},{type:"fields",fields:Object.values(a).filter(g=>g.name.includes(r)).map(g=>({title:Id(e,s,g.name),fieldRef:g.tag}))},...((d=t==null?void 0:t[s])==null?void 0:d[r])??[]]})}))}function Id(e,t,n){const[a,o,c]=n.split("_");return K(c,{val:`$t(char_${e}_gen:${t}.${a}.params.${o})`})}function Md(e,t=[],n=[]){const[a,o]=h("char",e);return{title:"core",documents:[{type:"text",header:{icon:i(G,{src:ae("coreFlat"),size:1.5}),text:a("core.name")},text:c=>a(`core.desc.${c.compute(A.char.core).val}`)},...t,{type:"text",header:{icon:i(G,{src:ae("coreFlat"),size:1.5}),text:a("ability.name")},text:a("ability.desc")},...n]}}function pe(e,t,n=[]){const[a,o]=h("char",e);return{title:`mindscape${t}`,documents:[{type:"text",header:{icon:i(G,{src:pr(t),size:1.5}),text:a(`mindscapes.${t}.name`)},text:b(Rt,{children:[a(`mindscapes.${t}.desc`),i("br",{}),i("br",{}),i("i",{children:a(`mindscapes.${t}.flavor`)})]})},...n]}}const rn="Anby",[,Ht]=h("char",rn),An=p[rn],me=u[rn],Td=k(rn,{core:[{type:"conditional",conditional:{label:Ht("coreCond"),metadata:An.core_after3rdBasic,fields:[{title:Ht("core_dazeInc_"),fieldRef:me.core_after3rdBasic_dazeInc_.tag}]}}],m1:[{type:"conditional",conditional:{label:Ht("m1Cond"),metadata:An.m1After4thBasicHit,fields:[M(me.m1_after4thHit_energyRegen_)]}}],m2:[{type:"fields",fields:[M(me.m2_stunned_basic_dmg_),M(me.m2_unstunned_ex_dazeInc_)]}],m6:[{type:"conditional",conditional:{label:Ht("m6Cond"),metadata:An.m6ChargeConsumed,fields:[M(me.m6_charge_basic_dmg_),M(me.m6_charge_exSpecial_dmg_)]}}]}),zd="Anton",Bd=k(zd),Ed="AstraYao",Od=k(Ed),Pd="Ben",Vd=k(Pd),qd="Billy",Ad=k(qd),we="Burnice",[,N]=h("char",we),Wi=p[we],ie=u[we],Kt=ue[we],Fd=_.char[we],Ld=k(we,{core:[{type:"fields",fields:[{title:N("core_afterburn_dmg"),fieldRef:Kt.core_afterburn_dmg.tag},{title:N("core_afterburn_anomBuildup"),fieldRef:Kt.core_afterburn_anomBuildup.tag},{title:N("core_afterburn_dmg_"),fieldRef:ie.core_afterburn_dmg_.tag}]}],ability:[{type:"fields",fields:[M(ie.ability_fire_anomBuildup_)]}],m1:[{type:"fields",fields:[{title:N("m1_afterburn_mv_mult"),fieldValue:Fd.m1.afterburn_dmg*100,unit:"%"},{title:N("m1_afterburn_anomBuildup"),fieldRef:ie.m1_afterburn_fire_anomBuildup_.tag}]}],m2:[{type:"conditional",conditional:{label:N("m2Cond"),metadata:Wi.thermal_penetration,fields:[M(ie.m2_pen_)]}}],m4:[{type:"fields",fields:[{title:N("m4_exSpecial_crit_"),fieldRef:ie.m4_exSpecial_crit_.tag},{title:N("m4_assistSkill_crit_"),fieldRef:ie.m4_assistSkill_crit_.tag}]}],m6:[{type:"fields",fields:[{title:N("m6_additional_afterburn_dmg"),fieldRef:Kt.m6_additional_afterburn_dmg.tag}]},{type:"conditional",conditional:{label:N("m6Cond"),metadata:Wi.exSpecial_active,fields:[M(ie.m6_burn_fire_resIgn_),{title:N("m6_fire_resIgn"),fieldRef:ie.m6_fire_resIgn_.tag},{title:N("m6_additional_burn_dmg"),fieldRef:Kt.m6_additional_burn_dmg.tag}]}}]}),jd="Caesar",Hd=k(jd),Kd="Corin",Wd=k(Kd),Nd="Ellen",Gd=k(Nd),Mt="Evelyn",[,oe]=h("char",Mt),Fn=p[Mt],fe=u[Mt],Ni=ue[Mt],Ud=k(Mt,{core:[{type:"conditional",conditional:{label:oe("coreCond"),metadata:Fn.binding_seal,fields:[M(fe.core_crit_)]}}],ability:[{type:"fields",fields:[{title:oe("ability_dmg_"),fieldRef:fe.ability_chain_ult_dmg_.tag},{title:oe("ability_mv_mult"),fieldRef:fe.ability_chainSkill_mv_mult.tag}]}],m1:[{type:"conditional",conditional:{label:oe("m1Cond"),metadata:Fn.enemy_bound,fields:[M(fe.m1_defIgn_)]}}],m2:[{type:"fields",fields:[M(fe.m2_atk_)]}],m4:[{type:"fields",fields:[{title:oe("m4_shield"),fieldRef:Ni.m4_shield.tag}]},{type:"conditional",conditional:{label:oe("m4Cond"),metadata:Fn.m4_shield_exists,fields:[M(fe.m4_crit_dmg_)]}}],m6:[{type:"fields",fields:[{title:oe("m6_follow_up_dmg"),fieldRef:Ni.m6_follow_up_dmg_.tag}]}]}),Jd="Grace",Yd=k(Jd),Zd="Harumasa",Qd=k(Zd),Xd="Hugo",eh=k(Xd),th="Jane",nh=k(th),ih="JuFufu",ah=k(ih),oh="Koleda",sh=k(oh),ch="Lighter",lh=k(ch),rh="Lucy",dh=k(rh),hh="Lycaon",uh=k(hh),gh="Miyabi",ph=k(gh),mh="Nekomata",fh=k(mh),dn="Nicole",[,Ln]=h("char",dn),Gi=p[dn],bt=u[dn],$h=k(dn,{core:[{type:"conditional",conditional:{label:Ln("coreCond"),metadata:Gi.bulletsOrFieldHit,fields:[M(bt.core_defRed_)]}}],ability:[{type:"fields",fields:[M(bt.ability_ether_dmg_)]}],m1:[{type:"fields",fields:[M(bt.m1_exSpecial_dmg_),{title:Ln("m1_exSpecial_anomBuildup"),fieldRef:bt.m1_exSpecial_anomBuildup_.tag}]}],m6:[{type:"conditional",conditional:{label:Ln("m6Cond"),metadata:Gi.fieldHitsEnemy,fields:[M(bt.m6_crit_)]}}]}),yh="PanYinhu",_h=k(yh),bh="Piper",xh=k(bh),wh="Pulchra",vh=k(wh),kh="Qingyi",Sh=k(kh),Ch="Rina",Dh=k(Ch),Rh="Seth",Ih=k(Rh),Mh="Soldier0Anby",Th=k(Mh),zh="Soldier11",Bh=k(zh),Eh="Soukaku",Oh=k(Eh),Tt="Trigger",[,se]=h("char",Tt),Ui=p[Tt],xt=u[Tt],jn=ue[Tt],Ph=k(Tt,{core:[{type:"conditional",conditional:{label:se("coreCond"),metadata:Ui.aftershock_hit,fields:[M(xt.core_stun_)]}}],ability:[{type:"fields",fields:[{title:se("ability_dazeInc_"),fieldRef:xt.ability_aftershock_dazeInc_.tag}]}],m1:[{type:"fields",fields:[M(xt.m1_stun_)]}],m2:[{type:"conditional",conditional:{label:se("m2Cond"),metadata:Ui.hunters_gaze,fields:[M(xt.m2_crit_dmg_)]}}],m4:[{type:"fields",fields:[{title:se("m4_disconnect_dmg"),fieldRef:jn.m4_disconnect_dmg.tag},{title:se("m4_disconnect_daze"),fieldRef:jn.m4_disconnect_daze.tag}]}],m6:[{type:"fields",fields:[{title:se("m6_armor_break_rounds_dmg"),fieldRef:jn.m6_armor_break_rounds_dmg.tag},{title:se("m6_armor_break_rounds_dmg_"),fieldRef:xt.m6_armor_break_rounds_dmg_.tag}]}]}),Vh="Vivian",qh=k(Vh),Ah="Yanagi",Fh=k(Ah),Lh="Yixuan",jh=k(Lh),zt="ZhuYuan",[,ce]=h("char",zt),Hn=p[zt],wt=u[zt],Hh=ue[zt],Kh=k(zt,{core:[{type:"fields",fields:[{title:ce("core_dmg_"),fieldRef:wt.core_dmg_.tag}]}],ability:[{type:"conditional",conditional:{label:ce("abilityCond"),metadata:Hn.ex_chain_ult_used,fields:[M(wt.ability_crit_)]}}],m2:[{type:"conditional",conditional:{label:ce("m2SuppresiveModeCond"),metadata:Hn.suppresive_mode,fields:[M(wt.m2_dmg_red_)]}},{type:"conditional",conditional:{label:ce("m2BasicDashEtherCond"),metadata:Hn.shotshells_hit,fields:[{title:ce("m2_basic_dash_ether_dmg_"),fieldRef:wt.m2_basic_dash_ether_dmg_.tag}]}}],m4:[{type:"fields",fields:[{title:ce("m4_ether_resIgn_"),fieldRef:wt.m4_basic_dash_ether_res_ign_.tag}]}],m6:[{type:"fields",fields:[{title:ce("m6_ether_afterglow"),fieldRef:Hh.m6_ether_afterglow.tag}]}]}),Wh={Anby:Td,Anton:Bd,AstraYao:Od,Ben:Vd,Billy:Ad,Burnice:Ld,Caesar:Hd,Corin:Wd,Ellen:Gd,Evelyn:Ud,Grace:Yd,Harumasa:Qd,Hugo:eh,Jane:nh,JuFufu:ah,Koleda:sh,Lighter:lh,Lucy:dh,Lycaon:uh,Miyabi:ph,Nekomata:fh,Nicole:$h,Piper:xh,Pulchra:vh,Qingyi:Sh,Rina:Dh,Seth:Ih,Soldier0Anby:Th,Soldier11:Bh,Soukaku:Oh,Trigger:Ph,Vivian:qh,Yanagi:Fh,PanYinhu:_h,Yixuan:jh,ZhuYuan:Kh},hn="AstralVoice",[Ji,Nh]=h("disc",hn),Yi=T(hn),Gh=p[hn],Uh=u[hn],Jh={2:{title:i(z,{}),img:Yi,documents:[{type:"text",text:Ji("desc2")}]},4:{title:i(B,{}),img:Yi,documents:[{type:"text",text:Ji("desc4")},{type:"conditional",conditional:{label:Nh("set4_cond"),metadata:Gh.astral,fields:[l(Uh.set4_team_dmg_.tag)]}}]}},un="BranchBladeSong",[Zi,Yh]=h("disc",un),Qi=T(un),Zh=p[un],Xi=u[un],Qh={2:{title:i(z,{}),img:Qi,documents:[{type:"text",text:Zi("desc2")}]},4:{title:i(B,{}),img:Qi,documents:[{type:"text",text:Zi("desc4")},{type:"fields",fields:[l(Xi.set4_passive.tag)]},{type:"conditional",conditional:{label:Yh("set4_cond"),metadata:Zh.apply_or_trigger,fields:[l(Xi.set4_cond.tag)]}}]}},gn="ChaosJazz",[ea,Xh]=h("disc",gn),ta=T(gn),eu=p[gn],Wt=u[gn],tu={2:{title:i(z,{}),img:ta,documents:[{type:"text",text:ea("desc2")}]},4:{title:i(B,{}),img:ta,documents:[{type:"text",text:ea("desc4")},{type:"fields",fields:[l(Wt.set4_passive_fire_dmg_.tag),l(Wt.set4_passive_electric_dmg_.tag)]},{type:"conditional",conditional:{label:Xh("set4_cond"),metadata:eu.while_off_field,fields:[{title:"EX Special Attack DMG",fieldRef:Wt.set4_off_field_special_dmg_.tag},{title:"Assist Attack Attack DMG",fieldRef:Wt.set4_off_field_assist_dmg_.tag}]}}]}},pn="ChaoticMetal",[na,nu]=h("disc",pn),ia=T(pn),iu=p[pn],aa=u[pn],au={2:{title:i(z,{}),img:ia,documents:[{type:"text",text:na("desc2")}]},4:{title:i(B,{}),img:ia,documents:[{type:"text",text:na("desc4")},{type:"fields",fields:[l(aa.set4_passive.tag)]},{type:"conditional",conditional:{label:nu("set4_cond"),metadata:iu.trigger_corruption,fields:[l(aa.set4_cond_trigger_corruption.tag)]}}]}},mn="FangedMetal",[oa,ou]=h("disc",mn),sa=T(mn),su=p[mn],cu=u[mn],lu={2:{title:i(z,{}),img:sa,documents:[{type:"text",text:oa("desc2")}]},4:{title:i(B,{}),img:sa,documents:[{type:"text",text:oa("desc4")},{type:"conditional",conditional:{label:ou("set4_cond"),metadata:su.inflict_assault,fields:[l(cu.set4_cond_inflict_assault.tag)]}}]}},fn="FreedomBlues",[ca,ru]=h("disc",fn),la=T(fn),du=p[fn],hu=u[fn],uu={2:{title:i(z,{}),img:la,documents:[{type:"text",text:ca("desc2")}]},4:{title:i(B,{}),img:la,documents:[{type:"text",text:ca("desc4")},{type:"conditional",conditional:{label:ru("set4_cond"),metadata:du.exSpecialHit,fields:[l(hu.anomBuildupRes_.tag)]}}]}},$n="HormonePunk",[ra,gu]=h("disc",$n),da=T($n),pu=p[$n],mu=u[$n],fu={2:{title:i(z,{}),img:da,documents:[{type:"text",text:ra("desc2")}]},4:{title:i(B,{}),img:da,documents:[{type:"text",text:ra("desc4")},{type:"conditional",conditional:{label:gu("set4_cond"),metadata:pu.entering_combat,fields:[l(mu.set4_cond_entering_combat.tag)]}}]}},yn="InfernoMetal",[ha,$u]=h("disc",yn),ua=T(yn),yu=p[yn],_u=u[yn],bu={2:{title:i(z,{}),img:ua,documents:[{type:"text",text:ha("desc2")}]},4:{title:i(B,{}),img:ua,documents:[{type:"text",text:ha("desc4")},{type:"conditional",conditional:{label:$u("set4_cond"),metadata:yu.hitting_burning_enemy,fields:[l(_u.set4_cond_hitting_burning_enemy.tag)]}}]}},_n="KingOfTheSummit",[ga,Ny]=h("disc",_n),pa=T(_n),xu=p[_n],ma=u[_n],wu={2:{title:i(z,{}),img:pa,documents:[{type:"text",text:ga("desc2")},{type:"fields",fields:[l(ma.set2.tag)]}]},4:{title:i(B,{}),img:pa,documents:[{type:"text",text:ga("desc4")},{type:"conditional",conditional:{metadata:xu.launchExSpecialOrChain,label:K("uponLaunch.2",{val1:"$t(skills.exSpecial)",val2:"$t(skills.chain)"}),fields:[l(ma.set4_team_launchExSpecialOrChain_crit_dmg_.tag)]}}]}},bn="PhaethonsMelody",[fa,$a]=h("disc",bn),ya=T(bn),_a=p[bn],ba=u[bn],vu={2:{title:i(z,{}),img:ya,documents:[{type:"text",text:fa("desc2")}]},4:{title:i(B,{}),img:ya,documents:[{type:"text",text:fa("desc4")},{type:"conditional",conditional:{label:$a("set4_cond_squad_use_ex"),metadata:_a.squad_use_ex,fields:[l(ba.set4_squad_anomProf.tag)]}},{type:"conditional",conditional:{label:$a("set4_cond_not_char_use_ex"),metadata:_a.not_char_use_ex,fields:[l(ba.set4_not_self_ether_.tag)]}}]}},xn="PolarMetal",[xa,ku]=h("disc",xn),wa=T(xn),Su=p[xn],va=u[xn],Cu={2:{title:i(z,{}),img:wa,documents:[{type:"text",text:xa("desc2")}]},4:{title:i(B,{}),img:wa,documents:[{type:"text",text:xa("desc4")},{type:"conditional",conditional:{label:ku("set4_cond"),metadata:Su.freeze_shatter}},{type:"fields",fields:[{title:"Basic Attack DMG",fieldRef:va.set4_basic_dmg_.tag},{title:"Dash Attack DMG",fieldRef:va.set4_dash_dmg_.tag}]}]}},wn="ProtoPunk",[ka,Du]=h("disc",wn),Sa=T(wn),Ru=p[wn],Iu=u[wn],Mu={2:{title:i(z,{}),img:Sa,documents:[{type:"text",text:ka("desc2")}]},4:{title:i(B,{}),img:Sa,documents:[{type:"text",text:ka("desc4")},{type:"conditional",conditional:{label:Du("set4_cond"),metadata:Ru.def_assist_or_evasive_assist,fields:[l(Iu.set4_cond_def_assist_or_evasive_assist_dmg_.tag)]}}]}},vn="PufferElectro",[Ca,Tu]=h("disc",vn),Da=T(vn),zu=p[vn],Ra=u[vn],Bu={2:{title:i(z,{}),img:Da,documents:[{type:"text",text:Ca("desc2")}]},4:{title:i(B,{}),img:Da,documents:[{type:"text",text:Ca("desc4")},{type:"fields",fields:[{title:"Ultimate DMG",fieldRef:Ra.set4_dmg_.tag}]},{type:"conditional",conditional:{label:Tu("set4_cond"),metadata:zu.launching_ult,fields:[l(Ra.set4_cond_launching_ult_atk_.tag)]}}]}},kn="ShadowHarmony",[Ia,Eu]=h("disc",kn),Ma=T(kn),Ou=p[kn],Ta=u[kn],Pu={2:{title:i(z,{}),img:Ma,documents:[{type:"text",text:Ia("desc2")}]},4:{title:i(B,{}),img:Ma,documents:[{type:"text",text:Ia("desc4")},{type:"conditional",conditional:{label:Eu("set4_cond_stacks"),metadata:Ou.stacks,fields:[l(Ta.set4_stack_atk_.tag),l(Ta.set4_stack_crit_.tag)]}}]}},bi="ShockstarDisco",[za,Gy]=h("disc",bi),Ba=T(bi),Kn=u[bi],Vu={2:{title:i(z,{}),img:Ba,documents:[{type:"text",text:za("desc2")}]},4:{title:i(B,{}),img:Ba,documents:[{type:"text",text:za("desc4")},{type:"fields",fields:[{title:"Basic Attack Daze",fieldRef:Kn.set4_basic_daze_.tag},{title:"Dash Attack Daze",fieldRef:Kn.set4_dash_daze_.tag},{title:"Dodge Counter Daze",fieldRef:Kn.set4_dodgeCounter_daze_.tag}]}]}},Uc="SoulRock",[Ea,Uy]=h("disc",Uc),Oa=T(Uc),qu={2:{title:i(z,{}),img:Oa,documents:[{type:"text",text:Ea("desc2")}]},4:{title:i(B,{}),img:Oa,documents:[{type:"text",text:Ea("desc4")}]}},Sn="SwingJazz",[Pa,Au]=h("disc",Sn),Va=T(Sn),Fu=p[Sn],Lu=u[Sn],ju={2:{title:i(z,{}),img:Va,documents:[{type:"text",text:Pa("desc2")}]},4:{title:i(B,{}),img:Va,documents:[{type:"text",text:Pa("desc4")},{type:"conditional",conditional:{label:Au("set4_cond"),metadata:Fu.chain_or_ult,fields:[l(Lu.set4_cond_chain_or_ult.tag)]}}]}},Cn="ThunderMetal",[qa,Hu]=h("disc",Cn),Aa=T(Cn),Ku=p[Cn],Wu=u[Cn],Nu={2:{title:i(z,{}),img:Aa,documents:[{type:"text",text:qa("desc2")}]},4:{title:i(B,{}),img:Aa,documents:[{type:"text",text:qa("desc4")},{type:"conditional",conditional:{label:Hu("set4_cond"),metadata:Ku.enemy_shocked,fields:[l(Wu.set4_cond_enemy_shocked_atk_.tag)]}}]}},Dn="WoodpeckerElectro",[Fa,Gu]=h("disc",Dn),La=T(Dn),Uu=p[Dn],Ju=u[Dn],Yu={2:{title:i(z,{}),img:La,documents:[{type:"text",text:Fa("desc2")}]},4:{title:i(B,{}),img:La,documents:[{type:"text",text:Fa("desc4")},{type:"conditional",conditional:{label:Gu("set4_cond"),metadata:Uu.crit_basic_dodge_ex,fields:[l(Ju.set4_cond_crit_basic_dodge_ex_atk_.tag)]}}]}},Rn="YunkuiTales",[ja,Jy]=h("disc",Rn),Ha=T(Rn),Zu=p[Rn],Wn=u[Rn],Qu={2:{title:i(z,{}),img:Ha,documents:[{type:"text",text:ja("desc2")},{type:"fields",fields:[l(Wn.set2.tag)]}]},4:{title:i(B,{}),img:Ha,documents:[{type:"text",text:ja("desc4")},{type:"conditional",conditional:{metadata:Zu.uponLaunchExSpecialChainOrUlt,label:K("uponLaunch.3",{val1:"$t(skills.exSpecial)",val2:"$t(skills.chain)",val3:"$t(skills.ult)"}),fields:[l(Wn.set4_crit_.tag),l(Wn.set4_sheer_dmg_.tag)]}}]}},Xu={AstralVoice:Jh,BranchBladeSong:Qh,ChaosJazz:tu,ChaoticMetal:au,FangedMetal:lu,FreedomBlues:uu,HormonePunk:fu,InfernoMetal:bu,KingOfTheSummit:wu,PhaethonsMelody:vu,PolarMetal:Cu,ProtoPunk:Mu,PufferElectro:Bu,ShadowHarmony:Pu,ShockstarDisco:Vu,SoulRock:qu,SwingJazz:ju,ThunderMetal:Nu,WoodpeckerElectro:Yu,YunkuiTales:Qu};function z(){return"2-Set"}function B(){return"4-Set"}function m({wKey:e,children:t}){const n=cn();let a=1;return n&&n.compute(A.common.count.sheet(e)).val&&(a=n.compute(A.wengine.phase).val??1),t(a)}const ve="BashfulDemon",[Ka,eg]=h("wengine",ve),tg=_.wengine[ve],ng=f(ve,"icon"),ig=p[ve],Wa=u[ve],ag={title:Ka("phase"),img:ng,documents:[{type:"text",text:i(m,{wKey:ve,children:e=>Ka(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Wa.passive_ice_dmg_.tag)]},{type:"conditional",conditional:{label:eg("cond"),metadata:ig.launch_ex_attack,fields:[l(Wa.team_atk_.tag),{title:"Duration",fieldValue:tg.duration}]}}]},ke="BigCylinder",[Na,Yy]=h("wengine",ke),og=_.wengine[ke],sg=f(ke,"icon"),cg=u[ke],lg=ue[ke],rg={title:Na("phase"),img:sg,documents:[{type:"text",text:i(m,{wKey:ke,children:e=>Na(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(cg.passive_dmg_red_.tag)]},{type:"fields",fields:[{title:"Additional DMG",fieldRef:lg.damage.tag},{title:"Cooldown",fieldValue:og.cooldown}]}]},Se="BlazingLaurel",[Ga,Ua]=h("wengine",Se),Ja=_.wengine[Se],dg=f(Se,"icon"),Ya=p[Se],Nn=u[Se],hg={title:Ga("phase"),img:dg,documents:[{type:"text",text:i(m,{wKey:Se,children:e=>Ga(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Ua("cond1"),metadata:Ya.quickOrPerfectAssistUsed,fields:[l(Nn.impact_.tag),{title:"Duration",fieldValue:Ja.duration}]}},{type:"conditional",conditional:{label:Ua("cond2"),metadata:Ya.wilt,fields:[l(Nn.crit_dmg_ice_.tag),l(Nn.crit_dmg_fire_.tag),{title:"Duration",fieldValue:Ja.wilt_duration}]}}]},Ce="BoxCutter",[Za,ug]=h("wengine",Ce),gg=_.wengine[Ce],pg=f(Ce,"icon"),mg=p[Ce],Qa=u[Ce],fg={title:Za("phase"),img:pg,documents:[{type:"text",text:i(m,{wKey:Ce,children:e=>Za(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:ug("cond"),metadata:mg.launchedAftershock,fields:[l(Qa.physical_dmg_.tag),l(Qa.daze_.tag),{title:"Duration",fieldValue:gg.duration}]}}]},Bt="BunnyBand",[Xa,$g]=h("wengine",Bt),yg=f(Bt,"icon"),_g=p[Bt],eo=u[Bt],bg={title:Xa("phase"),img:yg,documents:[{type:"text",text:i(m,{wKey:Bt,children:e=>Xa(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(eo.passive_hp_.tag)]},{type:"conditional",conditional:{label:$g("cond"),metadata:_g.wearerShielded,fields:[l(eo.atk_.tag)]}}]},he="CannonRotor",[to,Zy]=h("wengine",he),xg=_.wengine[he],wg=f(he,"icon"),vg=ue[he],kg=u[he],Sg={title:to("phase"),img:wg,documents:[{type:"text",text:i(m,{wKey:he,children:e=>to(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(kg.passive_atk_.tag)]},{type:"fields",fields:[{title:"Additional DMG",fieldRef:vg.damage.tag},{title:"Cooldown",fieldValue:i(m,{wKey:he,children:e=>xg.cooldown[e]})}]}]},De="CinderCobalt",[no]=h("wengine",De),io=_.wengine[De],Cg=f(De,"icon"),Dg=p[De],Rg=u[De],Ig={title:no("phase"),img:Cg,documents:[{type:"text",text:i(m,{wKey:De,children:e=>no(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:K("enterCombatOrSwitchIn"),metadata:Dg.enteringCombatOrSwitchingIn,fields:[l(Rg.enteringCombatOrSwitchingIn_atk_.tag),{title:K("duration"),fieldValue:io.duration},{title:K("cd"),fieldValue:io.cd}]}}]},Re="DeepSeaVisitor",[ao,oo]=h("wengine",Re),so=_.wengine[Re],Mg=f(Re,"icon"),co=p[Re],Gn=u[Re],Tg={title:ao("phase"),img:Mg,documents:[{type:"text",text:i(m,{wKey:Re,children:e=>ao(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Gn.passive_ice_dmg_.tag)]},{type:"conditional",conditional:{label:oo("cond1"),metadata:co.basicHit,fields:[l(Gn.crit_.tag),{title:"Duration",fieldValue:so.duration}]}},{type:"conditional",conditional:{label:oo("cond2"),metadata:co.iceDashAtkHit,fields:[l(Gn.extra_crit_.tag),{title:"Duration",fieldValue:so.extra_duration}]}}]},Ie="DemaraBatteryMarkII",[lo,zg]=h("wengine",Ie),Bg=_.wengine[Ie],Eg=f(Ie,"icon"),Og=p[Ie],ro=u[Ie],Pg={title:lo("phase"),img:Eg,documents:[{type:"text",text:i(m,{wKey:Ie,children:e=>lo(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(ro.passive_electric_dmg_.tag)]},{type:"conditional",conditional:{label:zg("cond"),metadata:Og.dodgeCounterOrAssistHit,fields:[l(ro.enerRegen_.tag),{title:"Duration",fieldValue:Bg.duration}]}}]},Me="DrillRigRedAxis",[ho,Vg]=h("wengine",Me),uo=_.wengine[Me],qg=f(Me,"icon"),Ag=p[Me],go=u[Me],Fg={title:ho("phase"),img:qg,documents:[{type:"text",text:i(m,{wKey:Me,children:e=>ho(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Vg("cond"),metadata:Ag.exSpecialOrChainUsed,fields:[l(go.basic_eletric_dmg_.tag),l(go.dash_eletric_dmg_.tag),{title:"Duration",fieldValue:uo.duration},{title:"Cooldown",fieldValue:uo.cooldown}]}}]},Et="ElectroLipGloss",[po,Lg]=h("wengine",Et),jg=f(Et,"icon"),Hg=p[Et],mo=u[Et],Kg={title:po("phase"),img:jg,documents:[{type:"text",text:i(m,{wKey:Et,children:e=>po(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Lg("cond"),metadata:Hg.anomalyOnEnemy,fields:[l(mo.atk_.tag),l(mo.common_dmg_.tag)]}}]},Te="ElegantVanity",[fo,Wg]=h("wengine",Te),Ng=_.wengine[Te],Gg=f(Te,"icon"),Ug=p[Te],Jg=u[Te],Yg={title:fo("phase"),img:Gg,documents:[{type:"text",text:i(m,{wKey:Te,children:e=>fo(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Wg("cond"),metadata:Ug.consumed25Energy,fields:[l(Jg.common_dmg_.tag),{title:"Duration",fieldValue:Ng.buffDuration}]}}]},ze="FlamemakerShaker",[$o,yo]=h("wengine",ze),Un=_.wengine[ze],Zg=f(ze,"icon"),_o=p[ze],Jn=u[ze],Qg={title:$o("phase"),img:Zg,documents:[{type:"text",text:i(m,{wKey:ze,children:e=>$o(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:yo("cond1"),metadata:_o.offField,fields:[l(Jn.enerRegen.tag)]}},{type:"conditional",conditional:{label:yo("cond2"),metadata:_o.exSpecialAssistHits,fields:[l(Jn.common_dmg_.tag),{title:"Duration",fieldValue:Un.duration},{title:"Cooldown",fieldValue:Un.cooldown},l(Jn.anomProf.tag),{title:"Duration",fieldValue:Un.anomProfDuration}]}}]},Be="FlightOfFancy",[bo,Xg]=h("wengine",Be),xo=_.wengine[Be],ep=f(Be,"icon"),tp=p[Be],wo=u[Be],np={title:bo("phase"),img:ep,documents:[{type:"text",text:i(m,{wKey:Be,children:e=>bo(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(wo.anomBuildup_.tag)]},{type:"conditional",conditional:{label:Xg("cond"),metadata:tp.etherDmg,fields:[l(wo.etherDmg_anomProf.tag),{title:"Duration",fieldValue:xo.duration},{title:"Cooldown",fieldValue:xo.cd}]}}]},Ee="FusionCompiler",[vo,ip]=h("wengine",Ee),ap=_.wengine[Ee],op=f(Ee,"icon"),sp=p[Ee],ko=u[Ee],cp={title:vo("phase"),img:op,documents:[{type:"text",text:i(m,{wKey:Ee,children:e=>vo(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(ko.passive_atk_.tag)]},{type:"conditional",conditional:{label:ip("cond"),metadata:sp.specialUsed,fields:[l(ko.anomProf.tag),{title:"Duration",fieldValue:ap.duration}]}}]},In="GildedBlossom",[So,Qy]=h("wengine",In),lp=f(In,"icon"),Co=u[In],rp={title:So("phase"),img:lp,documents:[{type:"text",text:i(m,{wKey:In,children:e=>So(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Co.passive_atk_.tag),l(Co.passive_exSpecial_dmg_.tag)]}]},Oe="HailstormShrine",[Do,dp]=h("wengine",Oe),hp=_.wengine[Oe],up=f(Oe,"icon"),gp=p[Oe],Ro=u[Oe],pp={title:Do("phase"),img:up,documents:[{type:"text",text:i(m,{wKey:Oe,children:e=>Do(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Ro.passive_crit_dmg_.tag)]},{type:"conditional",conditional:{label:dp("cond"),metadata:gp.exSpecialOrAnomaly,fields:[l(Ro.ice_dmg_.tag),{title:"Duration",fieldValue:hp.duration}]}}]},Pe="HeartstringNocturne",[Io,mp]=h("wengine",Pe),fp=_.wengine[Pe],$p=f(Pe,"icon"),yp=p[Pe],Yn=u[Pe],_p={title:Io("phase"),img:$p,documents:[{type:"text",text:i(m,{wKey:Pe,children:e=>Io(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Yn.passive_crit_dmg_.tag)]},{type:"conditional",conditional:{label:mp("cond"),metadata:yp.heartstring,fields:[l(Yn.chain_resIgn_fire_.tag),l(Yn.ult_resIgn_fire_.tag),{title:"Duration",fieldValue:fp.duration}]}}]},Ve="HellfireGears",[Mo,To]=h("wengine",Ve),bp=_.wengine[Ve],xp=f(Ve,"icon"),zo=p[Ve],Bo=u[Ve],wp={title:Mo("phase"),img:xp,documents:[{type:"text",text:i(m,{wKey:Ve,children:e=>Mo(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:To("cond1"),metadata:zo.offField,fields:[l(Bo.enerRegen.tag)]}},{type:"conditional",conditional:{label:To("cond1"),metadata:zo.exSpecialUsed,fields:[l(Bo.impact_.tag),{title:"Duration",fieldValue:bp.duration}]}}]},qe="Housekeeper",[Eo,Oo]=h("wengine",qe),vp=_.wengine[qe],kp=f(qe,"icon"),Po=p[qe],Vo=u[qe],Sp={title:Eo("phase"),img:kp,documents:[{type:"text",text:i(m,{wKey:qe,children:e=>Eo(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Oo("cond1"),metadata:Po.offField,fields:[l(Vo.enerRegen.tag)]}},{type:"conditional",conditional:{label:Oo("cond2"),metadata:Po.exSpecialHits,fields:[l(Vo.physical_dmg_.tag),{title:"Duration",fieldValue:vp.duration}]}}]},Ae="IceJadeTeapot",[qo,Cp]=h("wengine",Ae),Ao=_.wengine[Ae],Dp=f(Ae,"icon"),Rp=p[Ae],Fo=u[Ae],Ip={title:qo("phase"),img:Dp,documents:[{type:"text",text:i(m,{wKey:Ae,children:e=>qo(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Cp("cond"),metadata:Rp.teariffic,fields:[l(Fo.impact_.tag),{title:"Duration",fieldValue:Ao.duration},l(Fo.common_dmg_.tag),{title:"Duration",fieldValue:Ao.teamBuffDuration}]}}]},Fe="IdentityBase",[Lo,Mp]=h("wengine",Fe),Tp=_.wengine[Fe],zp=f(Fe,"icon"),Bp=p[Fe],Ep=u[Fe],Op={title:Lo("phase"),img:zp,documents:[{type:"text",text:i(m,{wKey:Fe,children:e=>Lo(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Mp("cond"),metadata:Bp.equipperAttacked,fields:[l(Ep.def_.tag),{title:"Duration",fieldValue:Tp.duration}]}}]},xi="IdentityInflection",[jo,Xy]=h("wengine",xi),Pp=f(xi,"icon"),Vp={title:jo("phase"),img:Pp,documents:[{type:"text",text:i(m,{wKey:xi,children:e=>jo(`phaseDescs.${e-1}`)})}]},Le="KaboomTheCannon",[Ho,qp]=h("wengine",Le),Ap=_.wengine[Le],Fp=f(Le,"icon"),Lp=p[Le],jp=u[Le],Hp={title:Ho("phase"),img:Fp,documents:[{type:"text",text:i(m,{wKey:Le,children:e=>Ho(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:qp("cond"),metadata:Lp.allyHitsEnemy,fields:[l(jp.atk_.tag),{title:"Duration",fieldValue:Ap.duration}]}}]},je="LunarDecrescent",[Ko,Kp]=h("wengine",je),Wp=_.wengine[je],Np=f(je,"icon"),Gp=p[je],Up=u[je],Jp={title:Ko("phase"),img:Np,documents:[{type:"text",text:i(m,{wKey:je,children:e=>Ko(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Kp("cond"),metadata:Gp.chainOrUltUsed,fields:[l(Up.common_dmg_.tag),{title:"Duration",fieldValue:Wp.duration}]}}]},wi="LunarNoviluna",[Wo,e_]=h("wengine",wi),Yp=f(wi,"icon"),Zp={title:Wo("phase"),img:Yp,documents:[{type:"text",text:i(m,{wKey:wi,children:e=>Wo(`phaseDescs.${e-1}`)})}]},Mn="LunarPleniluna",[No,t_]=h("wengine",Mn),Qp=f(Mn,"icon"),Zn=u[Mn],Xp={title:No("phase"),img:Qp,documents:[{type:"text",text:i(m,{wKey:Mn,children:e=>No(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Zn.basic_dmg_.tag),l(Zn.dash_dmg_.tag),l(Zn.dodgeCounter_dmg_.tag)]}]},He="MagneticStormAlpha",[Go,em]=h("wengine",He),Uo=_.wengine[He],tm=f(He,"icon"),nm=p[He],im=u[He],am={title:Go("phase"),img:tm,documents:[{type:"text",text:i(m,{wKey:He,children:e=>Go(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:em("cond"),metadata:nm.anomalyBuildupIncreased,fields:[l(im.anomMas.tag),{title:"Duration",fieldValue:Uo.duration},{title:"Cooldown",fieldValue:Uo.cooldown}]}}]},Ke="MagneticStormBravo",[Jo,om]=h("wengine",Ke),Yo=_.wengine[Ke],sm=f(Ke,"icon"),cm=p[Ke],lm=u[Ke],rm={title:Jo("phase"),img:sm,documents:[{type:"text",text:i(m,{wKey:Ke,children:e=>Jo(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:om("cond"),metadata:cm.anomalyBuildupIncreased,fields:[l(lm.anomProf.tag),{title:"Duration",fieldValue:Yo.duration},{title:"Cooldown",fieldValue:Yo.cooldown}]}}]},vi="MagneticStormCharlie",[Zo,n_]=h("wengine",vi),dm=f(vi,"icon"),hm={title:Zo("phase"),img:dm,documents:[{type:"text",text:i(m,{wKey:vi,children:e=>Zo(`phaseDescs.${e-1}`)})}]},We="MarcatoDesire",[Qo,Xo]=h("wengine",We),um=_.wengine[We],gm=f(We,"icon"),es=p[We],pm=u[We],mm={title:Qo("phase"),img:gm,documents:[{type:"text",text:i(m,{wKey:We,children:e=>Qo(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Xo("cond1"),metadata:es.exSpecialOrChainHitsEnemy,fields:[l(pm.atk_.tag),{title:"Duration",fieldValue:um.duration}]}},{type:"conditional",conditional:{label:Xo("cond2"),metadata:es.attributeAnomalyInflicted}}]},Ne="MyriadEclipse",[ts,fm]=h("wengine",Ne),$m=_.wengine[Ne],ym=f(Ne,"icon"),_m=p[Ne],ns=u[Ne],bm={title:ts("phase"),img:ym,documents:[{type:"text",text:i(m,{wKey:Ne,children:e=>ts(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(ns.crit_dmg_.tag)]},{type:"conditional",conditional:{label:fm("cond"),metadata:_m.deathSentence,fields:[l(ns.deathSentence_defIgn_.tag),{title:"Duration",fieldValue:$m.duration}]}}]},Ge="OriginalTransmorpher",[is,xm]=h("wengine",Ge),wm=_.wengine[Ge],vm=f(Ge,"icon"),km=p[Ge],as=u[Ge],Sm={title:is("phase"),img:vm,documents:[{type:"text",text:i(m,{wKey:Ge,children:e=>is(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(as.passive_hp_.tag)]},{type:"conditional",conditional:{label:xm("cond"),metadata:km.equipperHit,fields:[l(as.impact_.tag),{title:"Duration",fieldValue:wm.duration}]}}]},Ot="PeacekeeperSpecialized",[os,Cm]=h("wengine",Ot),Dm=f(Ot,"icon"),Rm=p[Ot],Qn=u[Ot],Im={title:os("phase"),img:Dm,documents:[{type:"text",text:i(m,{wKey:Ot,children:e=>os(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Cm("cond"),metadata:Rm.shielded,fields:[l(Qn.enerRegen.tag)]}},{type:"fields",fields:[l(Qn.passive_exSpecial_anomBuildup_.tag),l(Qn.passive_assist_anomBuildup_.tag)]}]},Pt="PreciousFossilizedCore",[ss,cs]=h("wengine",Pt),Mm=f(Pt,"icon"),ls=p[Pt],Tm=u[Pt],zm={title:ss("phase"),img:Mm,documents:[{type:"text",text:i(m,{wKey:Pt,children:e=>ss(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:cs("cond1"),metadata:ls.enemyHpGE50,fields:[l(Tm.daze_.tag)]}},{type:"conditional",conditional:{label:cs("cond2"),metadata:ls.enemyHpGE75}}]},Ue="PuzzleSphere",[rs]=h("wengine",Ue),ds=_.wengine[Ue],Bm=f(Ue,"icon"),hs=p[Ue],us=u[Ue],Em={title:rs("phase"),img:Bm,documents:[{type:"text",text:i(m,{wKey:Ue,children:e=>rs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:K("uponLaunch.1",{val1:"$t(skills.exSpecial)"}),metadata:hs.launchingExSpecial,fields:[l(us.launchingExSpecial_crit_dmg_.tag),{title:K("duration"),fieldValue:ds.duration}]}},{type:"conditional",conditional:{label:K("targetHpLe",{val:ds.hpThresh*100}),metadata:hs.targetHpBelow50,fields:[l(us.targetHpBelow50_exSpecial_dmg_.tag)]}}]},Je="QingmingBirdcage",[gs,Om]=h("wengine",Je),Pm=_.wengine[Je],Vm=f(Je,"icon"),qm=p[Je],Nt=u[Je],Am={title:gs("phase"),img:Vm,documents:[{type:"text",text:i(m,{wKey:Je,children:e=>gs(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Nt.crit_.tag)]},{type:"conditional",conditional:{metadata:qm.qingmingCompanionStacks,label:Om("cond"),fields:[l(Nt.qingmingCompanionStacks_ether_dmg_.tag),l(Nt.qingmingCompanionStacks_ult_ether_sheer_dmg_.tag),l(Nt.qingmingCompanionStacks_exSpecial_ether_sheer_dmg_.tag),{title:K("cd"),fieldValue:Pm.duration}]}}]},Ye="RadiowaveJourney",[ps]=h("wengine",Ye),Fm=_.wengine[Ye],Lm=f(Ye,"icon"),jm=p[Ye],Hm=u[Ye],Km={title:ps("phase"),img:Lm,documents:[{type:"text",text:i(m,{wKey:Ye,children:e=>ps(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{metadata:jm.launchingChainOrUlt,label:K("uponLaunch.2",{val1:"$t(skills.chain)",val2:"$t(skills.ult)"}),fields:[l(Hm.launchingChainOrUlt_sheerForce.tag),{title:K("duration"),fieldValue:Fm.duration}]}}]},Ze="RainforestGourmet",[ms,Wm]=h("wengine",Ze),Nm=_.wengine[Ze],Gm=f(Ze,"icon"),Um=p[Ze],Jm=u[Ze],Ym={title:ms("phase"),img:Gm,documents:[{type:"text",text:i(m,{wKey:Ze,children:e=>ms(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Wm("cond"),metadata:Um.energyConsumed,fields:[l(Jm.atk_.tag),{title:"Duration",fieldValue:Nm.duration}]}}]},ki="ReelProjector",[fs]=h("wengine",ki),Zm=f(ki,"icon"),Qm={title:fs("phase"),img:Zm,documents:[{type:"text",text:i(m,{wKey:ki,children:e=>fs(`phaseDescs.${e-1}`)})}]},Qe="ReverbMarkI",[$s,Xm]=h("wengine",Qe),ef=_.wengine[Qe],tf=f(Qe,"icon"),nf=p[Qe],af=u[Qe],of={title:$s("phase"),img:tf,documents:[{type:"text",text:i(m,{wKey:Qe,children:e=>$s(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Xm("cond"),metadata:nf.exSpecialUsed,fields:[l(af.impact_.tag),{title:"Duration",fieldValue:ef.duration}]}}]},Xe="ReverbMarkII",[ys,sf]=h("wengine",Xe),cf=_.wengine[Xe],lf=f(Xe,"icon"),rf=p[Xe],_s=u[Xe],df={title:ys("phase"),img:lf,documents:[{type:"text",text:i(m,{wKey:Xe,children:e=>ys(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:sf("cond"),metadata:rf.exSpecialOrChainUsed,fields:[l(_s.anomMas.tag),l(_s.anomProf.tag),{title:"Duration",fieldValue:cf.duration}]}}]},et="ReverbMarkIII",[bs,hf]=h("wengine",et),uf=_.wengine[et],gf=f(et,"icon"),pf=p[et],mf=u[et],ff={title:bs("phase"),img:gf,documents:[{type:"text",text:i(m,{wKey:et,children:e=>bs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:hf("cond"),metadata:pf.chainOrUltUsed,fields:[l(mf.atk_.tag),{title:"Duration",fieldValue:uf.duration}]}}]},Vt="RiotSuppressorMarkVI",[xs,$f]=h("wengine",Vt),yf=f(Vt,"icon"),_f=p[Vt],ws=u[Vt],bf={title:xs("phase"),img:yf,documents:[{type:"text",text:i(m,{wKey:Vt,children:e=>xs(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(ws.passive_crit_.tag)]},{type:"conditional",conditional:{label:$f("cond"),metadata:_f.charge,fields:[l(ws.basic_ether_dmg_.tag)]}}]},tt="RoaringFurnace",[vs,xf]=h("wengine",tt),wf=_.wengine[tt],vf=f(tt,"icon"),kf=p[tt],Gt=u[tt],Sf={title:vs("phase"),img:vf,documents:[{type:"text",text:i(m,{wKey:tt,children:e=>vs(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Gt.exSpecial_dazeInc_.tag),l(Gt.chain_dazeInc_.tag),l(Gt.ult_dazeInc_.tag)]},{type:"conditional",conditional:{metadata:kf.chainOrUlt,label:xf("cond"),fields:[l(Gt.team_chainOrUlt_fire_dmg_.tag),{title:K("duration"),fieldValue:wf.duration}]}}]},nt="RoaringRide",[ks,Xn]=h("wengine",nt),ei=_.wengine[nt],Cf=f(nt,"icon"),ti=p[nt],ni=u[nt],Df={title:ks("phase"),img:Cf,documents:[{type:"text",text:i(m,{wKey:nt,children:e=>ks(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Xn("cond_atk_"),metadata:ti.atk_,fields:[l(ni.atk_.tag),{title:"Duration",fieldValue:ei.duration}]}},{type:"conditional",conditional:{label:Xn("cond_anomProf"),metadata:ti.anomProf,fields:[l(ni.anomProf.tag),{title:"Duration",fieldValue:ei.duration}]}},{type:"conditional",conditional:{label:Xn("cond_anomBuildup_"),metadata:ti.anomBuildup_,fields:[l(ni.anomBuildup_.tag),{title:"Duration",fieldValue:ei.duration}]}}]},it="SeveredInnocence",[Ss,Rf]=h("wengine",it),If=_.wengine[it],Mf=f(it,"icon"),Tf=p[it],ii=u[it],zf={title:Ss("phase"),img:Mf,documents:[{type:"text",text:i(m,{wKey:it,children:e=>Ss(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(ii.passive_crit_dmg_.tag)]},{type:"conditional",conditional:{label:Rf("cond"),metadata:Tf.basicSpecialAftershockHit,fields:[l(ii.crit_dmg_.tag),l(ii.electric_dmg_.tag),{title:"Duration",fieldValue:If.duration}]}}]},at="SharpenedStinger",[Cs,Bf]=h("wengine",at),Ef=_.wengine[at],Of=f(at,"icon"),Pf=p[at],Ds=u[at],Vf={title:Cs("phase"),img:Of,documents:[{type:"text",text:i(m,{wKey:at,children:e=>Cs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Bf("cond"),metadata:Pf.predatoryInstinct,fields:[l(Ds.physical_dmg_.tag),{title:"Duration",fieldValue:Ef.duration}]}},{type:"fields",fields:[l(Ds.anomBuildup_.tag)]}]},qt="SixShooter",[Rs,qf]=h("wengine",qt),Af=f(qt,"icon"),Ff=p[qt],Lf=u[qt],jf={title:Rs("phase"),img:Af,documents:[{type:"text",text:i(m,{wKey:qt,children:e=>Rs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:qf("cond"),metadata:Ff.charge,fields:[l(Lf.exSpecial_daze_.tag)]}}]},Si="SliceOfTime",[Is,i_]=h("wengine",Si),Hf=f(Si,"icon"),Kf={title:Is("phase"),img:Hf,documents:[{type:"text",text:i(m,{wKey:Si,children:e=>Is(`phaseDescs.${e-1}`)})}]},ot="SpectralGaze",[Ms,Ts]=h("wengine",ot),zs=_.wengine[ot],Wf=f(ot,"icon"),Bs=p[ot],Es=u[ot],Nf={title:Ms("phase"),img:Wf,documents:[{type:"text",text:i(m,{wKey:ot,children:e=>Ms(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Ts("cond1"),metadata:Bs.hit_aftershock_electric,fields:[l(Es.cond_defRed_.tag),{title:"Duration",fieldValue:zs.duration1}]}},{type:"conditional",conditional:{label:Ts("cond2"),metadata:Bs.spiritLock,fields:[l(Es.cond_impact_.tag),{title:"Duration",fieldValue:zs.duration2}]}}]},st="SpringEmbrace",[Os,Gf]=h("wengine",st),Uf=_.wengine[st],Jf=f(st,"icon"),Yf=p[st],Ps=u[st],Zf={title:Os("phase"),img:Jf,documents:[{type:"text",text:i(m,{wKey:st,children:e=>Os(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Ps.passive_dmg_red_.tag)]},{type:"conditional",conditional:{label:Gf("cond"),metadata:Yf.when_attacked,fields:[l(Ps.cond_enerRegen_.tag),{title:"Duration",fieldValue:Uf.duration}]}}]},ct="StarlightEngine",[Vs,Qf]=h("wengine",ct),Xf=_.wengine[ct],e$=f(ct,"icon"),t$=p[ct],n$=u[ct],i$={title:Vs("phase"),img:e$,documents:[{type:"text",text:i(m,{wKey:ct,children:e=>Vs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Qf("cond"),metadata:t$.dodgecounter_quickassist,fields:[l(n$.cond_dmg_.tag),{title:"Duration",fieldValue:Xf.duration}]}}]},lt="StarlightEngineReplica",[qs,a$]=h("wengine",lt),o$=_.wengine[lt],s$=f(lt,"icon"),c$=p[lt],l$=u[lt],r$={title:qs("phase"),img:s$,documents:[{type:"text",text:i(m,{wKey:lt,children:e=>qs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:a$("cond"),metadata:c$.hit_away,fields:[l(l$.cond_dmg_.tag),{title:"Duration",fieldValue:o$.duration}]}}]},rt="SteamOven",[As,d$]=h("wengine",rt),h$=_.wengine[rt],u$=f(rt,"icon"),g$=p[rt],p$=u[rt],m$={title:As("phase"),img:u$,documents:[{type:"text",text:i(m,{wKey:rt,children:e=>As(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:d$("cond"),metadata:g$.stacks,fields:[l(p$.cond_impact_.tag),{title:"Duration",fieldValue:h$.duration}]}}]},At="SteelCushion",[Fs,f$]=h("wengine",At),$$=f(At,"icon"),y$=p[At],Ls=u[At],_$={title:Fs("phase"),img:$$,documents:[{type:"text",text:i(m,{wKey:At,children:e=>Fs(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Ls.passive_physical_dmg_.tag)]},{type:"conditional",conditional:{label:f$("cond"),metadata:y$.hit_behind,fields:[l(Ls.cond_dmg_.tag)]}}]},Ft="StreetSuperstar",[js,b$]=h("wengine",Ft),x$=f(Ft,"icon"),w$=p[Ft],v$=u[Ft],k$={title:js("phase"),img:x$,documents:[{type:"text",text:i(m,{wKey:Ft,children:e=>js(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:b$("cond"),metadata:w$.charge,fields:[l(v$.cond_ult_dmg_.tag)]}}]},dt="TheBrimstone",[Hs,S$]=h("wengine",dt),C$=_.wengine[dt],D$=f(dt,"icon"),R$=p[dt],I$=u[dt],M$={title:Hs("phase"),img:D$,documents:[{type:"text",text:i(m,{wKey:dt,children:e=>Hs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:S$("cond"),metadata:R$.hit_basic_dash_dodge,fields:[l(I$.cond_atk_.tag),{title:"Duration",fieldValue:C$.duration}]}}]},ht="TheRestrained",[Ks,T$]=h("wengine",ht),z$=_.wengine[ht],B$=f(ht,"icon"),E$=p[ht],Ws=u[ht],O$={title:Ks("phase"),img:B$,documents:[{type:"text",text:i(m,{wKey:ht,children:e=>Ks(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:T$("cond"),metadata:E$.dmg_daze_,fields:[l(Ws.basic_dmg_.tag),l(Ws.basic_daze_.tag),{title:"Duration",fieldValue:z$.duration}]}}]},ut="TheVault",[Ns,P$]=h("wengine",ut),V$=_.wengine[ut],q$=f(ut,"icon"),A$=p[ut],F$=u[ut],L$={title:Ns("phase"),img:q$,documents:[{type:"text",text:i(m,{wKey:ut,children:e=>Ns(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:P$("cond"),metadata:A$.ether_hit,fields:[l(F$.cond_dmg_.tag),{title:"Duration",fieldValue:V$.duration}]}}]},gt="Timeweaver",[Gs,j$]=h("wengine",gt),H$=_.wengine[gt],K$=f(gt,"icon"),W$=p[gt],ai=u[gt],N$={title:Gs("phase"),img:K$,documents:[{type:"text",text:i(m,{wKey:gt,children:e=>Gs(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(ai.passive_electric_anomBuildup_.tag),l(ai.passive_disorder_dmg_.tag)]},{type:"conditional",conditional:{label:j$("cond"),metadata:W$.hit_anomaly,fields:[l(ai.cond_anomProf.tag),{title:"Duration",fieldValue:H$.duration}]}}]},Tn="TremorTrigramVessel",[Us]=h("wengine",Tn),G$=f(Tn,"icon"),Js=u[Tn],U$={title:Us("phase"),img:G$,documents:[{type:"text",text:i(m,{wKey:Tn,children:e=>Us(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Js.exSpecial_dmg_.tag),l(Js.ult_dmg_.tag)]}]},pt="TusksOfFury",[Ys,J$]=h("wengine",pt),Y$=_.wengine[pt],Z$=f(pt,"icon"),Q$=p[pt],oi=u[pt],X$={title:Ys("phase"),img:Z$,documents:[{type:"text",text:i(m,{wKey:pt,children:e=>Ys(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(oi.passive_shield_.tag)]},{type:"conditional",conditional:{label:J$("cond"),metadata:Q$.interrupt_perfdodge,fields:[l(oi.cond_dmg_.tag),l(oi.daze_.tag),{title:"Duration",fieldValue:Y$.duration}]}}]},mt="UnfetteredGameBall",[Zs,ey]=h("wengine",mt),ty=_.wengine[mt],ny=f(mt,"icon"),iy=p[mt],ay=u[mt],oy={title:Zs("phase"),img:ny,documents:[{type:"text",text:i(m,{wKey:mt,children:e=>Zs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:ey("cond"),metadata:iy.anomaly_counter,fields:[l(ay.cond_crit_.tag),{title:"Duration",fieldValue:ty.duration}]}}]},zn="VortexArrow",[Qs,a_]=h("wengine",zn),sy=f(zn,"icon"),cy=u[zn],ly={title:Qs("phase"),img:sy,documents:[{type:"text",text:i(m,{wKey:zn,children:e=>Qs(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(cy.passive_daze_.tag)]}]},ft="VortexHatchet",[Xs,ry]=h("wengine",ft),ec=_.wengine[ft],dy=f(ft,"icon"),hy=p[ft],uy=u[ft],gy={title:Xs("phase"),img:dy,documents:[{type:"text",text:i(m,{wKey:ft,children:e=>Xs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:ry("cond"),metadata:hy.entering,fields:[l(uy.cond_impact_.tag),{title:"Duration",fieldValue:ec.duration},{title:"Cooldown",fieldValue:ec.cooldown}]}}]},Bn="VortexRevolver",[tc,o_]=h("wengine",Bn),py=f(Bn,"icon"),my=u[Bn],fy={title:tc("phase"),img:py,documents:[{type:"text",text:i(m,{wKey:Bn,children:e=>tc(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(my.passive_exSpecial_daze_.tag)]}]},$t="WeepingCradle",[nc,ic]=h("wengine",$t),$y=_.wengine[$t],yy=f($t,"icon"),ac=p[$t],_y=u[$t],by={title:nc("phase"),img:yy,documents:[{type:"text",text:i(m,{wKey:$t,children:e=>nc(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:ic("cond_atk"),metadata:ac.attack}},{type:"conditional",conditional:{label:ic("cond_stacks"),metadata:ac.stacks,fields:[l(_y.cond_dmg_.tag),{title:"Duration",fieldValue:$y.duration}]}}]},Lt="WeepingGemini",[oc,xy]=h("wengine",Lt),wy=f(Lt,"icon"),vy=p[Lt],ky=u[Lt],Sy={title:oc("phase"),img:wy,documents:[{type:"text",text:i(m,{wKey:Lt,children:e=>oc(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:xy("cond"),metadata:vy.anomaly_stack,fields:[l(ky.anomProf.tag)]}}]},yt="ZanshinHerbCase",[sc,Cy]=h("wengine",yt),Dy=_.wengine[yt],Ry=f(yt,"icon"),Iy=p[yt],si=u[yt],My={title:sc("phase"),img:Ry,documents:[{type:"text",text:i(m,{wKey:yt,children:e=>sc(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(si.passive_crit_.tag),l(si.passive_electric_dmg_.tag)]},{type:"conditional",conditional:{label:Cy("cond"),metadata:Iy.apply_anom_stun,fields:[l(si.cond_crit_.tag),{title:"Duration",fieldValue:Dy.duration}]}}]},Ty={BashfulDemon:ag,BigCylinder:rg,BlazingLaurel:hg,BoxCutter:fg,BunnyBand:bg,CannonRotor:Sg,CinderCobalt:Ig,DeepSeaVisitor:Tg,DemaraBatteryMarkII:Pg,DrillRigRedAxis:Fg,ElectroLipGloss:Kg,ElegantVanity:Yg,FlamemakerShaker:Qg,FlightOfFancy:np,FusionCompiler:cp,GildedBlossom:rp,HailstormShrine:pp,HeartstringNocturne:_p,HellfireGears:wp,Housekeeper:Sp,IceJadeTeapot:Ip,IdentityBase:Op,IdentityInflection:Vp,KaboomTheCannon:Hp,LunarDecrescent:Jp,LunarNoviluna:Zp,LunarPleniluna:Xp,MagneticStormAlpha:am,MagneticStormBravo:rm,MagneticStormCharlie:hm,MarcatoDesire:mm,MyriadEclipse:bm,OriginalTransmorpher:Sm,PeacekeeperSpecialized:Im,PreciousFossilizedCore:zm,PuzzleSphere:Em,QingmingBirdcage:Am,RadiowaveJourney:Km,RainforestGourmet:Ym,ReelProjector:Qm,ReverbMarkI:of,ReverbMarkII:df,ReverbMarkIII:ff,RiotSuppressorMarkVI:bf,RoaringFurnace:Sf,RoaringRide:Df,SeveredInnocence:zf,SharpenedStinger:Vf,SixShooter:jf,SliceOfTime:Kf,SpectralGaze:Nf,SpringEmbrace:Zf,StarlightEngine:i$,StarlightEngineReplica:r$,SteamOven:m$,SteelCushion:_$,StreetSuperstar:k$,TheBrimstone:M$,TheRestrained:O$,TheVault:L$,Timeweaver:N$,TremorTrigramVessel:U$,TusksOfFury:X$,UnfetteredGameBall:oy,VortexArrow:ly,VortexHatchet:gy,VortexRevolver:fy,WeepingCradle:by,WeepingGemini:Sy,ZanshinHerbCase:My};function zy(e){const{attribute:t}=e;if(t)return t}function By(e){const{q:t}=e;return["standardDmg","anomalyDmg"].includes(t)}function Ey(e){const{damageType1:t,damageType2:n}=e,a=[];return By(e)?(t&&a.push(t),n&&a.push(n),a):[]}const nn={basic:"Basic",dash:"Dash",dodgeCounter:"Dodge Counter",special:"Special",exSpecial:"EX Special",chain:"Chain",ult:"Ultimate",quickAssist:"Quick Assist",defensiveAssist:"Defensive Assist",evasiveAssist:"Evasive Assist",assistFollowUp:"Assist Follow Up",anomaly:"Anomaly",disorder:"Disorder",aftershock:"Aftershock",elemental:"Elemental",sheer:"Sheer"},Jc=["crit_","crit_dmg_","impact","pen","pen_","enerRegen","anomProf","anomMas"].map(e=>{if(mr.includes(e)){const t={...A.final.dmg_.tag,attribute:e.slice(0,-5)};return{title:i(Ut,{statKey:e}),fieldRef:t}}return e==="crit_"?{fieldRef:A.common.cappedCrit_.tag,title:i(Ut,{statKey:e})}:{fieldRef:A.final[e].tag,title:i(Ut,{statKey:e})}});Jc.push(...$e.map(e=>({fieldRef:{et:"own",qt:"formula",q:"standardDmg",attribute:e,name:"standardDmgInst"},title:b(ye,{color:e,children:[le[e]," Damage"]})})),...$e.map(e=>({fieldRef:{et:"own",qt:"formula",q:"sheerDmg",attribute:e,name:"sheerDmgInst"},title:b(ye,{color:e,children:[le[e]," Damage"]})})),...$e.flatMap(e=>fr.map(t=>({fieldRef:{et:"own",qt:"formula",q:"standardDmg",attribute:e,damageType1:t,name:"standardDmgInst"},title:b(ye,{color:e,children:[le[e]," ",nn[t]," Damage"]})}))),...$e.map(e=>({fieldRef:{et:"own",qt:"formula",q:"anomalyDmg",attribute:e,damageType1:"anomaly",name:"anomalyDmgInst"},title:b(ye,{color:e,children:[le[e]," Anomaly Damage"]})})),...$e.map(e=>({fieldRef:{et:"own",qt:"formula",q:"anomBuildup",attribute:e,name:"anomalyBuildupInst"},title:b(ye,{color:e,children:[le[e]," Anomaly Buildup"]})})),{fieldRef:{et:"own",qt:"formula",q:"dazeBuildup",name:"dazeInst"},title:"Daze Buildup"});const Ci=[];Object.values(Wh).forEach(e=>Object.values(e).forEach(t=>t.documents.forEach(n=>n.type==="fields"&&n.fields.forEach(a=>sd(a)&&Ci.push({tag:a.fieldRef,value:a})))));Jc.forEach(e=>{Ci.push({tag:e.fieldRef,value:e})});const Oy=Nr(Ci),li=new Map;function Yc(e,t){if(li.get(e))throw new Error(`Duplicate conditional ${e}`);li.set(e,t)}Object.values(Ty).forEach(({documents:e})=>{e.forEach(t=>{t.type==="conditional"&&Yc(`${t.conditional.metadata.sheet}:${t.conditional.metadata.name}`,t.conditional)})});Object.values(Xu).forEach(e=>Object.values(e).forEach(({documents:t})=>{t.forEach(n=>{n.type==="conditional"&&Yc(`${n.conditional.metadata.sheet}:${n.conditional.metadata.name}`,n.conditional)})}));export{Ur as A,Wy as C,Ai as D,jy as F,ln as T,St as a,Ac as b,Er as c,Tr as d,Xu as e,nn as f,$d as g,cn as h,wd as i,Ky as j,Hy as k,Jr as l,sn as m,Gr as n,Ly as o,ed as p,yd as q,Xr as r,Nc as s,Pr as u,Ty as w};
