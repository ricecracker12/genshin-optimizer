import{c0 as qs,E as As,z as Fs,c as w,H as Ls,_ as js,L as oe,c1 as mo,V as Ot,U as jt,Q as he,c2 as L,W as Hs,c3 as Vc,c4 as qc,T as E,w as Ks,c5 as fo,c6 as Ws,c7 as Ac,a3 as Fc,c8 as Lc,a6 as jc,c9 as Ns,u as Y,aL as Hn,aJ as Hc,ca as Kc,cb as Wc,cc as Nc,cd as Gs,b2 as Us,b1 as Js,ce as O,cf as Gc,cg as Uc,by as q,b7 as Jc,b8 as Yc,ch as Pt,ci as Zc,cj as Qc,ck as Ys,cl as Vt,cm as Xc,j as o,cn as qt,co as ne,bq as Q,bz as Kn,cp as el,d as x,al as U,ay as mt,cq as At,h as K,av as W,bT as Zs,cr as tl,cs as Qs,ct as Xs,cu as Wn,cv as te,ad as Nn,n as I,cw as nl,cx as ec,bG as ol,k as tc,bX as al,e as X,G as j,C as ue,S as ae,N as il,bK as sl,be as Ln,bY as $o,bo as nc,aV as re,bZ as cl,b_ as ll,I as Gn,q as Un,a1 as rl,cy as dl,s as gt,M as Jn,aK as Ht,ab as oc,ac,cz as hl,i as ul,l as gl,m as pl,bd as ml,D as fl,b$ as $l,cA as yl,o as ic,r as xl,a as bl,b as _l,g as wl,bu as sc,bC as cc,bA as lc,cB as vl,y as kl,cC as Sl,x as ft,B as ge,cD as Yn,F as $t,cE as rc,cF as Cl,ag as Zn,af as Dl,aW as de,ao as Il,b4 as Tl,cG as Ml,cH as Rl,cI as zl,aF as dc,aD as Bt,ah as Bl,cJ as El,bw as Ol,cK as Pl,aI as Vl,cL as ql,cM as Al,bW as Fl,cN as Ll,cO as jl,cP as J,cQ as hc,a4 as yo,b6 as xo,cR as Hl,cS as Kl,bc as uc,cT as Wl,cU as b,cV as Qn,aZ as p,aY as g,aw as M,aB as f,cW as Nl,bF as Gl}from"./index-DOZ16hsi.js";import{u as gc}from"./useDataEntryBase-Bky0A0pt.js";import{i as Ul,d as Jl}from"./discSortUtil-C4XW48Xy.js";function Yl(e){const{badgeContent:t,invisible:n=!1,max:a=99,showZero:i=!1}=e,c=qs({badgeContent:t,max:a});let s=n;n===!1&&t===0&&!i&&(s=!0);const{badgeContent:r,max:d=a}=s?c:e,u=r&&Number(r)>d?`${d}+`:r;return{badgeContent:r,invisible:s,max:d,displayValue:u}}function Zl(e){return Fs("MuiBadge",e)}const ee=As("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),Ql=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],_n=10,wn=4,Xl=e=>{const{color:t,anchorOrigin:n,invisible:a,overlap:i,variant:c,classes:s={}}=e,r={root:["root"],badge:["badge",c,a&&"invisible",`anchorOrigin${L(n.vertical)}${L(n.horizontal)}`,`anchorOrigin${L(n.vertical)}${L(n.horizontal)}${L(i)}`,`overlap${L(i)}`,t!=="default"&&`color${L(t)}`]};return Hs(r,Zl,s)},er=jt("span",{name:"MuiBadge",slot:"Root",overridesResolver:(e,t)=>t.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),tr=jt("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.badge,t[n.variant],t[`anchorOrigin${L(n.anchorOrigin.vertical)}${L(n.anchorOrigin.horizontal)}${L(n.overlap)}`],n.color!=="default"&&t[`color${L(n.color)}`],n.invisible&&t.invisible]}})(({theme:e})=>{var t;return{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(12),minWidth:_n*2,lineHeight:1,padding:"0 6px",height:_n*2,borderRadius:_n,zIndex:1,transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.enteringScreen}),variants:[...Object.keys(((t=e.vars)!=null?t:e).palette).filter(n=>{var a,i;return((a=e.vars)!=null?a:e).palette[n].main&&((i=e.vars)!=null?i:e).palette[n].contrastText}).map(n=>({props:{color:n},style:{backgroundColor:(e.vars||e).palette[n].main,color:(e.vars||e).palette[n].contrastText}})),{props:{variant:"dot"},style:{borderRadius:wn,height:wn*2,minWidth:wn*2,padding:0}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${ee.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${ee.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${ee.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${ee.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${ee.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${ee.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${ee.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${ee.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.leavingScreen})}}]}}),bo=w.forwardRef(function(t,n){var a,i,c,s,r,d;const u=Ls({props:t,name:"MuiBadge"}),{anchorOrigin:_={vertical:"top",horizontal:"right"},className:D,component:S,components:$={},componentsProps:y={},children:v,overlap:C="rectangular",color:P="default",invisible:N=!1,max:G=99,badgeContent:Z,slots:F,slotProps:V,showZero:A=!1,variant:T="standard"}=u,B=js(u,Ql),{badgeContent:se,invisible:Ic,max:Tc,displayValue:Mc}=Yl({max:G,invisible:N,badgeContent:Z,showZero:A}),Rc=qs({anchorOrigin:_,color:P,overlap:C,variant:T,badgeContent:Z}),lo=Ic||se==null&&T!=="dot",{color:zc=P,overlap:Bc=C,anchorOrigin:Ec=_,variant:ro=T}=lo?Rc:u,ho=ro!=="dot"?Mc:void 0,yn=oe({},u,{badgeContent:se,invisible:lo,max:Tc,displayValue:ho,showZero:A,anchorOrigin:Ec,color:zc,overlap:Bc,variant:ro}),uo=Xl(yn),go=(a=(i=F==null?void 0:F.root)!=null?i:$.Root)!=null?a:er,po=(c=(s=F==null?void 0:F.badge)!=null?s:$.Badge)!=null?c:tr,xn=(r=V==null?void 0:V.root)!=null?r:y.root,bn=(d=V==null?void 0:V.badge)!=null?d:y.badge,Oc=mo({elementType:go,externalSlotProps:xn,externalForwardedProps:B,additionalProps:{ref:n,as:S},ownerState:yn,className:Ot(xn==null?void 0:xn.className,uo.root,D)}),Pc=mo({elementType:po,externalSlotProps:bn,ownerState:yn,className:Ot(uo.badge,bn==null?void 0:bn.className)});return he.jsxs(go,oe({},Oc,{children:[v,he.jsx(po,oe({},Pc,{children:ho}))]}))});function nr(e){return Fs("MuiFormControlLabel",e)}const ut=As("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),or=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],ar=e=>{const{classes:t,disabled:n,labelPlacement:a,error:i,required:c}=e,s={root:["root",n&&"disabled",`labelPlacement${L(a)}`,i&&"error",c&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",i&&"error"]};return Hs(s,nr,t)},ir=jt("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${ut.label}`]:t.label},t.root,t[`labelPlacement${L(n.labelPlacement)}`]]}})(({theme:e,ownerState:t})=>oe({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${ut.disabled}`]:{cursor:"default"}},t.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},t.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},t.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${ut.label}`]:{[`&.${ut.disabled}`]:{color:(e.vars||e).palette.text.disabled}}})),sr=jt("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${ut.error}`]:{color:(e.vars||e).palette.error.main}})),cr=w.forwardRef(function(t,n){var a,i;const c=Ls({props:t,name:"MuiFormControlLabel"}),{className:s,componentsProps:r={},control:d,disabled:u,disableTypography:_,label:D,labelPlacement:S="end",required:$,slotProps:y={}}=c,v=js(c,or),C=Vc(),P=(a=u??d.props.disabled)!=null?a:C==null?void 0:C.disabled,N=$??d.props.required,G={disabled:P,required:N};["checked","name","onChange","value","inputRef"].forEach(B=>{typeof d.props[B]>"u"&&typeof c[B]<"u"&&(G[B]=c[B])});const Z=qc({props:c,muiFormControl:C,states:["error"]}),F=oe({},c,{disabled:P,labelPlacement:S,required:N,error:Z.error}),V=ar(F),A=(i=y.typography)!=null?i:r.typography;let T=D;return T!=null&&T.type!==E&&!_&&(T=he.jsx(E,oe({component:"span"},A,{className:Ot(V.label,A==null?void 0:A.className),children:T}))),he.jsxs(ir,oe({className:Ot(V.root,s),ownerState:F,ref:n},v,{children:[w.cloneElement(d,G),N?he.jsxs(Ks,{display:"block",children:[T,he.jsxs(sr,{ownerState:F,"aria-hidden":!0,className:V.asterisk,children:[" ","*"]})]}):T]}))}),lr={};class pc{constructor(t,n){this.root=new rr(t,n)}subset(t){const n=[];return this._subset(t,a=>n.push(...a[fo].map(i=>i.value))),n}entries(t){const n=[];return this._subset(t,a=>n.push(...a[fo])),n}_subset(t,n){const a=t.length;function i(c,s){c<a?s.subset(t[c]).forEach(r=>i(c+1,r)):n(s.leaf)}i(0,this.root)}}let rr=class mc{constructor(t,n){if(this.children=[],t>0)for(const[a,i]of Object.entries(n)){const c=new Map;for(const[s,r]of Object.entries(i))c.set(+s,new mc(t-1,r));this.children.push({mask:+a,map:c})}else this.leaf=n}subset(t){return this.children.map(({mask:n,map:a})=>a.get(t&n)).filter(n=>!!n)}};class _o{constructor(t){this.root=new Xn(void 0),this.keys=t}at(t){const n=this.keys.get(t),a=n.reduce((i,c)=>i.child(c),this.root);return a.leaf||(a.leaf=new eo(t,n,this.keys,a)),a.leaf}}class Xn{constructor(t){this.children=new Map,this.parent=t}child(t){let n=this.children.get(t);return n||(n=new Xn(this),this.children.set(t,n),n)}}class eo{constructor(t,n,a,i){this.tag=Object.fromEntries(Object.entries(t).filter(([c,s])=>s!=null)),this.id=n,this.keys=a,this.internal=i}with(t){const{keys:n}=this,{id:a,firstReplacedByte:i}=n.combine(this.id,t);let c=this.internal;for(let s=i;s<n.tagLen;s++)c=c.parent;for(let s=i;s<n.tagLen;s++)c=c.child(a[s]);return c.leaf||(c.leaf=new eo({...this.tag,...t},a,n,c)),c.leaf}}class dr{constructor(t,n){this.keys=new Ws(t),this.values=new pc(t.tagLen,n)}subset(t){return this.values.subset(this.keys.get(t))}}const pt={sum:e=>e.reduce((t,n)=>t+n,0),prod:e=>e.reduce((t,n)=>t*n,1),min:e=>Math.min(...e),max:e=>Math.max(...e),sumfrac:([e,t])=>e/(e+t),unique:([e])=>e},fc={match:([e,t])=>e===t?0:1,thres:([e,t])=>e>=t?0:1,lookup:([e],t)=>t[e]??0},It=e=>Lc(e,"val");let $c=class{constructor(t,...n){const a=new Ws(t);this.nodes=new pc(a.tagLen,Ac(n)),this.cache=new _o(a).at({}),this.calc=new _o(a).at({}),this.calc.val=this}withTag(t){const n=this.calc.with(t);return n.val??(n.val=Object.assign(new this.constructor(this.cache.keys),this,{cache:this.cache.with(t),calc:n}))}gather(t){return this._gather(this.cache.with(t)).pre}compute(t){return this._compute(t,this.cache)}_gather(t){if(t.val)return t.val;const n=this.nodes.entries(t.id).flatMap(({tag:a,value:i})=>i.op==="reread"?this._gather(t.with(i.tag)).pre:[this.markGathered(t.tag,a,i,this._compute(i,t))]);return t.val={pre:n}}_compute(t,n){const a=(c,s,r,d)=>Object.freeze({val:c,meta:this.computeMeta(t,c,s,r,d)}),{op:i}=t;switch(i){case"const":return a(t.ex,[],[]);case"sum":case"prod":case"min":case"max":case"sumfrac":{const c=t.x.map(s=>this._compute(s,n));return a(pt[i](It(c)),c,[])}case"thres":case"match":case"lookup":{const c=t.br.map(u=>this._compute(u,n)),s=fc[i](It(c),t.ex),r=[...Array(t.x.length)],d=r[s]=this._compute(t.x[s],n);return a(d.val,r,c)}case"subscript":{const c=this._compute(t.br[0],n);return a(t.ex[c.val],[],[c])}case"vtag":return a(n.tag[t.ex]??"",[],[]);case"tag":{const c=n.with(t.tag),s=this._compute(t.x[0],c);return a(s.val,[s],[],c.tag)}case"dtag":{const c=t.br.map(d=>this._compute(d,n)),s=n.with(Object.fromEntries(c.map((d,u)=>[t.ex[u],d.val]))),r=this._compute(t.x[0],s);return a(r.val,[r],c,s.tag)}case"read":{const c=n.with(t.tag),s=this._gather(c),{pre:r}=s,d=t.ex??this.defaultAccu(c.tag)??"unique";if(d!==t.ex&&(t={...t,ex:d}),s[d])return s[d];if(jc()&&d==="unique"&&r.length!==1)throw new Error(`Ill-form read for ${Ns(c.tag)}`);const u=pt[d](It(r));return s[d]=a(u,r,[],c.tag)}case"custom":{const c=t.x.map(s=>this._compute(s,n));return a(lr[t.ex].calc(It(c)),c,[])}default:Fc(i)}}defaultAccu(t){}markGathered(t,n,a,i){return i}computeMeta(t,n,a,i,c){}toDebug(){throw new Error("not implemented")}};const hr={arithmetic:pt,branching:fc};class ur extends $c{constructor(t,n=Ns,a=()=>!0){super(t.cache.keys),this.gathering=new Set,this.nodes=t.nodes,this.tagStr=n,this.filter=a,this.defaultAccu=i=>t.defaultAccu(i),this.cache=this.cache.with(t.cache.tag)}withTag(t){throw new Error("Unimplemented")}_gather(t){if(this.gathering.has(t))throw new Error(`Loop detected for ${this.tagStr(t.tag)}`);this.gathering.add(t);const n=this.__gather(t);return this.gathering.delete(t),n}__gather(t){if(t.val)return t.val;const n=this.nodes.entries(t.id).flatMap(({tag:a,value:i})=>i.op==="reread"?this._gather(t.with(i.tag)).pre.map(c=>{const s=`${this.tagStr(a)} <= ${this.tagStr(i.tag)} : ${c.meta.readSeq}`;return Object.freeze({...c,meta:{...c.meta,readSeq:s}})}):[this.markGathered(t.tag,a,i,this._compute(i,t))]);return t.val={pre:n}}_compute(t,n){try{return super._compute(t,n)}catch(a){return Object.freeze({val:NaN,meta:{formula:`${a}`,deps:[],omitted:[],val:NaN,x:[],br:[],comp:"ERR",pivot:!0,toJSON:vo}})}}markGathered(t,n,a,i){const c=`${this.tagStr(n)} <- ${this.tagStr(t)}`;return{...i,meta:{...i.meta,readSeq:c,pivot:!0}}}computeMeta(t,n,a,i,c){let s,r;const d=a.filter($=>$).map($=>$.meta),u=i.map($=>$.meta),_=[],D=t.op==="read"?t.ex:t.op,S=[];if(D in pt){const $=pt[D]([]);for(const y of[...u,...d])y.val!==$||this.filter(y)?_.push(y):S.push(y)}else _.push(...u,...d);switch(t.op){case"const":s=wo(t.ex);break;case"read":r=`gather ${d.length} node(s)`,r+=` matching ${this.tagStr(c,t.ex)}`,r+=` (for ${this.tagStr(t.tag)})`,S.length&&(r+=` <${S.length} omitted>`),s=`${this.tagStr(t.tag)}`;break;default:{const $=[];t.ex&&t.op!=="subscript"&&$.push(JSON.stringify(t.ex)),t.tag&&$.push(this.tagStr(t.tag)),$.push(..._.map(y=>y.comp)),S.length&&$.push(`<${S.length} omitted>`),s=`${t.op}(`+$.join(", ")+")"}}return S.push(..._.flatMap($=>$.pivot?[]:$.omitted)),Object.freeze({formula:`[${wo(n)}] ${r??s}`,deps:[...new Set(_.flatMap($=>$.pivot?[$]:$.deps))],omitted:[...new Set(S)],val:n,x:d,br:u,comp:s,pivot:t.op==="read",toJSON:vo})}}const wo=e=>typeof e=="string"?`"${e}"`:e.toString();function vo(){const{formula:e,readSeq:t,deps:n}=this,a={readSeq:t,formula:e,deps:n};return a.readSeq||delete a.readSeq,a.deps.length||delete a.deps,Object.keys(a).length===1?a.formula:a}function Kt(e){const{database:t}=Y();return Hn(t.chars,e)}function gr(e){const{database:t}=Y();return Hn(t.charOpts,e)}function pr(e){const{database:t}=Y();return Hn(t.discs,e??"")}const{arithmetic:mr}=hr;let fr=class extends $c{computeMeta({op:t,ex:n,tag:a},i,c,s,r){let d=c.filter($=>!!$);const u=$r(d,s);function _($){return Object.freeze(r&&!$.tag?{tag:r,...$}:$)}function D($,y){return _({op:$,ops:y,...u})}function S($,y){let{meta:v}=$;return y!=null&&y.some(C=>!v.usedCats.has(C))&&(v={...v,usedCats:new Set([...v.usedCats,...y])}),_(v.conds===u.conds?v:{...v,...u})}if(t==="read"&&(r==null?void 0:r.qt)==="cond"){const{src:$,dst:y,sheet:v,q:C}=r;$&&v&&C&&(u.conds=Ft(u.conds,{[y??"All"]:{[$]:{[v]:{[C]:i}}}}))}switch(t==="read"&&n!=="unique"&&([t,n]=[n,void 0]),t){case"sum":case"prod":case"min":case"max":case"sumfrac":if(d.length>1){const $=mr[t]([]);d=d.filter(y=>y.val!==$)}return d.length===1?S(d[0]):D(d.length?t:"const",d);case"const":case"subscript":return D("const",[]);case"vtag":return u.usedCats=new Set([n]),D("const",[]);case"match":case"thres":case"lookup":case"read":return S(d[0]);case"tag":return S(d[0],Object.keys(a));case"dtag":return S(d[0],n);case"custom":return D(n,d);default:Hc(t)}}markGathered(t,n,a,i){const{val:c}=i,s={...i.meta};let r=!1;const d=new Set([...s.usedCats,...Object.keys(n)]);return s.usedCats.size!==d.size&&(s.usedCats=d,r=!0),r?{val:c,meta:Object.freeze(s)}:i}listFormulas(t){return this.gather(t.tag).filter(n=>n.val).map(({val:n,meta:a})=>Kc.withTag(a.tag)[n])}listCondFormulas(t){return this.listFormulas(t).map(n=>this.compute(n).meta.conds).reduce(Ft,{})}};function $r(e,t){var s;const n=[...e.map(r=>r.meta),...t.map(r=>r.meta)];let a={},i=new Set;for(const r of n)a=Ft(a,r.conds),r.usedCats.forEach(d=>i.add(d));const c=i.size;return i=((s=n.find(r=>r.usedCats.size===c))==null?void 0:s.usedCats)??i,{usedCats:i,conds:a}}function Ft(e,t){if(e===t)return e;if(typeof e!="object")throw new Error(`cannot merge ${e} and ${t}`);if(Object.keys(t).length>Object.keys(e).length&&([e,t]=[t,e]),!Object.keys(t).length)return e;let n=!1;const a={...e};for(const[i,c]of Object.entries(t)){const s=a[i],r=i in a?Ft(s,c):c;s!==r&&(a[i]=r,n=!0)}return Object.freeze(n?a:e)}function yr(e){const t=new Set(e);return n=>!xr(n,t)}function xr(e,t){const n=e.formula.match(/(\S+) (\S+) common.count/);if(!n)return!1;const[,a,i]=n;return i==="own"&&t.has(a)}class br extends fr{toDebug(){return new ur(this,Wc,yr([...Us,...Js]))}defaultAccu(t){var i,c,s,r;const{qt:n,q:a}=t;if(!(!n||!a))switch(t.et){case"own":case"target":return(c=(i=Gs[n])==null?void 0:i[a])==null?void 0:c.accu;case"enemy":return(r=(s=Nc[n])==null?void 0:s[a])==null?void 0:r.accu;case"team":if(n==="common"&&a==="count")return"sum";throw new Error("non-explicit team value accumulator")}}listFormulas(t){return super.listFormulas(t).filter(n=>n.tag.qt!=="formula"||["standardDmgInst","sheerDmgInst","anomalyDmgInst","anomalyBuildupInst","dazeInst"].includes(n.tag.name??""))}}function Et(e,...t){return t.map(({tag:n,value:a})=>({tag:{...n,preset:e},value:a}))}function yc(e,...t){return t.map(({tag:n,value:a})=>({tag:{...n,src:e},value:a}))}function xc(e){const{lvl:t,promotion:n,basic:a,dodge:i,special:c,chain:s,assist:r,core:d,mindscape:u}=q.char,{char:_,iso:D,[e.key]:S}=O.withAll("sheet",[]);return[_.reread(S),D.reread(S),t.add(e.level),a.add(e.basic),i.add(e.dodge),c.add(e.special),s.add(e.chain),r.add(e.assist),d.add(e.core),n.add(e.promotion),u.add(e.mindscape),Pt.base.crit_.add(.05),Pt.base.crit_dmg_.add(.5)]}function _r(e){return[O.sheet("agg").reread(O.sheet("wengine")),...e?[q.common.count.sheet(e.key).add(1),q.wengine.lvl.add(e.level),q.wengine.modification.add(e.modification),q.wengine.phase.add(e.phase)]:[]]}function bc(e,t){const{common:{count:n},initial:a}=Zc(Gs,{sheet:"disc",et:"own"});return[O.sheet("agg").reread(O.sheet("disc")),O.withTag({sheet:"disc",qt:"initial"}).reread(O.sheet("dyn")),...Object.entries(e).map(([i,c])=>Qc(a,i).sheet("dyn").add(c)),...Object.entries(t).map(([i,c])=>n.sheet(i).add(c))]}function wr(e){const t={},n={};return e.forEach(({setKey:a,mainStatKey:i,substats:c,level:s,rarity:r})=>{t[a]=(t[a]??0)+1,n[i]=(n[i]??0)+Jc(r,i,s),c.forEach(({key:d,upgrades:u})=>{!d||!u||(n[d]=(n[d]??0)+Yc(d,r)*u)})}),bc(n,t)}function _c(e){const t=O.with("et","team"),{own:n,enemy:a,teamBuff:i,notOwnBuff:c}=O.sheet("agg").withAll("et",[]);return[e.map(s=>O.withTag({et:"target",dst:s}).reread(O.withTag({et:"own",dst:null,src:s}))),e.flatMap(s=>{const r=n.with("src",s);return e.map(d=>r.reread(i.withTag({dst:s,src:d,name:null})))}),e.flatMap(s=>{const r=n.with("src",s);return e.filter(d=>d!==s).map(d=>r.reread(c.withTag({dst:s,src:d,name:null})))}),e.map(s=>a.reread(O.withTag({et:"enemyDeBuff",dst:null,src:s,name:null}))),e.flatMap((s,r)=>{const{stackIn:d,stackTmp:u}=O.withAll("qt",[]),_=O.withTag({src:s,et:"own"});return[_.with("qt","stackTmp").add(Gc(d,0,r+1)),_.with("qt","stackOut").add(Uc(u.max.with("et","team"),r+1,d))]}),e.map(s=>t.add(O.withTag({src:s,et:"own"})))].flat()}function wc(e){const t=Ys(Vt,e);return new br(Vt,Xc,t)}function vr(e){return new dr(Vt,Ys(Vt,e))}function kr({characterKey:e}){return o(qt,{ns:"charNames_gen",key18:e})}function Sr({attribute:e}){return ne[e]}function Cr({characterKey:e,onClick:t,charCardConfig:n}){const{level:a=0,promotion:i=0}=Kt(e)??{},c=Q(e),s=n||{cardWidth:"100%",charImgWidth:"100%",iconsSize:1.7,isEditing:!1,charNameWidth:"191px",charNameVariant:"h6",scrollingBgSize:"200px"},r=w.useCallback(()=>e&&(t==null?void 0:t(e)),[e,t]),d=w.useCallback(u=>o(Kn,{onClick:r,sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:u}),[r]);return o(mt,{children:o(el,{condition:!!t,wrapper:d,children:x(U,{sx:{display:"flex",flexDirection:"column",width:s.cardWidth},children:[o(Dr,{characterKey:e,characterStat:c,charCardConfig:s}),o(Ir,{characterKey:e,characterStat:c,promotion:i,level:a,charCardConfig:s})]})})})}function Dr({characterKey:e,characterStat:t,charCardConfig:n}){const{attribute:a,id:i}=t;return x(U,{sx:s=>({width:"100%",height:"100%",position:"relative",display:"flex",background:`${s.palette[a].main}`,zIndex:1,overflow:"hidden"}),children:[x(U,{sx:{position:"absolute",left:"0",right:"0",display:"flex",transform:"rotate(5deg) translateX(-50%)",zIndex:2},children:[o(ko,{characterKey:e,charCardConfig:n}),o(ko,{characterKey:e,charCardConfig:n})]}),o(U,{src:`https://act-webstatic.hoyoverse.com/game_record/zzzv2/role_vertical_painting/role_vertical_painting_${i}.png`,component:At?At:"img",width:n.charImgWidth,height:"auto",position:"relative",zIndex:"2"})]})}function Ir({characterKey:e,characterStat:t,promotion:n,level:a,charCardConfig:i}){const{t:c}=K("page_characters"),{attribute:s,rarity:r,specialty:d}=t,u=Kt(e);return o(U,{sx:{width:"100%",height:"100%",padding:"8px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:x(U,{sx:{display:"flex",flexDirection:"column"},children:[x(U,{gap:1,sx:{display:"flex",alignItems:"center"},children:[o(W,{size:i.iconsSize,src:Zs(r)}),o(E,{variant:i.charNameVariant,sx:{fontWeight:"900",maxWidth:i.charNameWidth,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:o(kr,{characterKey:e})}),o(tl,{ele:s,iconProps:{sx:{fontSize:`${i.iconsSize}em`}}}),o(W,{size:i.iconsSize,src:Qs(d)}),i.isEditing?"":o(E,{variant:"h5",color:"primary",sx:{fontWeight:"900"},children:c("mindscape",{level:u?u.mindscape:0})})]}),i.isEditing?"":x(U,{sx:{mt:"12px",display:"flex",gap:"14px",flexWrap:"wrap"},children:[x(U,{sx:_=>({border:`2px solid ${_.palette.contentZzz.main}`,borderRadius:"20px",display:"flex"}),children:[o(E,{sx:{fontWeight:"900",paddingLeft:"12px",fontSize:"16px"},children:c("charLevel",{level:a})}),x(E,{color:"primary",sx:{fontWeight:"900",paddingLeft:"4px",pr:"10px"},children:["/ ",Xs[n]]})]}),x(U,{gap:1.5,sx:{display:"flex",alignItems:"center"},children:[Wn.map((_,D)=>o(bo,{anchorOrigin:{vertical:"bottom",horizontal:"left"},badgeContent:`${u?u[_]:0}`,color:"primary",children:o(W,{size:1.9,src:te(_)})},D)),o(bo,{anchorOrigin:{vertical:"bottom",horizontal:"left"},badgeContent:`${u?u.core:0}`,color:"primary",children:o(W,{size:1.9,src:te("core")})},6)]})]})]})})}function ko({characterKey:e,charCardConfig:t}){const{t:n}=K("charNames_gen"),a={animation:"scroll 16s infinite linear","@keyframes scroll":{"0%":{transform:"translateX(-100%)"},"100%":{transform:"translateX(0)"}}};return o(U,{component:"span",sx:{color:"#000",marginTop:"20px",fontStyle:"italic",fontSize:t.scrollingBgSize,lineHeight:"150px",whiteSpace:"nowrap",textTransform:"uppercase",display:"flex",justifyContent:"center",fontFamily:"Impact",opacity:.1,...a},children:n(`${e}`)})}function Tr({mindscape:e,setMindscape:t}){const{t:n}=K("page_characters");return o(I,{sx:{display:"flex",flexWrap:"wrap",gap:2,mt:"12px"},children:Nn(1,6).map(a=>o(I,{children:o(mt,{sx:{position:"relative",borderRadius:"40px"},children:o(cr,{control:o(nl,{checked:e>=a,onChange:()=>t(a===e?a-1:a)}),label:x(I,{sx:{position:"absolute",top:9,left:e>=a?75:16,transition:"left 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",textAlign:"center"},children:[o(E,{variant:"subtitle1",sx:i=>({fontWeight:900,color:e>=a?i.palette.mindscapeActive.main:i.palette.mindscapeInactive.main}),children:n("mindscape",{level:a})}),o(E,{variant:"subtitle2",sx:i=>({lineHeight:.2,fontWeight:900,color:e>=a?i.palette.mindscapeActive.main:i.palette.mindscapeInactive.main}),children:n("mindscapeTitle")})]}),sx:{margin:0}})})},a))})}function Mr(e){return{new:t=>e.chars.get(t)?0:1,name:t=>ec.t(t).toString(),level:t=>{const n=e.chars.get(t);return n?n.level*(n.promotion+1):0},rarity:t=>Q(t).rarity??0}}function Rr(e){return{attribute:(t,n)=>n.includes(Q(t).attribute),specialtyType:(t,n)=>n.includes(Q(t).specialty),rarity:(t,n)=>n.includes(Q(t).rarity),name:(t,n)=>n===void 0||ec.t(t).toLowerCase().includes(n.toLowerCase()),new:(t,n)=>n===void 0||n===(e.chars.get(t)?"no":"yes")}}const vc={name:["name"],level:["level","rarity","name"],rarity:["rarity","level","name"]};function _y({show:e,onHide:t,onSelect:n,newFirst:a=!1}){const{database:i}=Y(),c=gc(i.displayCharacter),[s,r]=w.useState(""),d=w.useDeferredValue(s),u=w.useDeferredValue(c),_=w.useMemo(()=>{const{attribute:$,specialtyType:y,sortType:v,ascending:C}=u,P=[...a?["new"]:[],...vc[v]??[]];return ol.filter(tc({attribute:$,specialtyType:y,name:d},Rr(i))).sort(al(P,C,Mr(i),["new"]))},[u,a,d,i]);return o(Br,{show:e,charactersToShow:_,filterSearchSortProps:{searchTerm:s,onChangeSpecialtyFilter:$=>{i.displayCharacter.set({specialtyType:$})},onChangeAttributeFilter:$=>{i.displayCharacter.set({attribute:$})},onChangeSearch:$=>{r($.target.value)},onChangeSort:$=>{i.displayCharacter.set({sortType:$})},onChangeAsc:$=>{i.displayCharacter.set({ascending:$})}},onClose:()=>{r(""),t()},children:o(X,{sx:{flex:"1",overflow:"auto"},children:o(w.Suspense,{fallback:o(ae,{variant:"rectangular",width:"100%",height:1e3}),children:o(j,{container:!0,spacing:.5,columns:{xs:2,sm:3,md:4,lg:5},children:_.map($=>o(j,{item:!0,xs:1,children:o(ue,{bgt:"light",sx:y=>({position:"relative",flexGrow:1,display:"flex",flexDirection:"column",borderRadius:"40px 16px 16px 40px",border:`3px solid ${y.palette.contentZzz.main}`}),children:o(Er,{characterKey:$,onClick:()=>{t(),n($)}})})},$))})})})})}const zr=Object.keys(vc);function Br({show:e,charactersToShow:t,filterSearchSortProps:n,onClose:a,children:i}){const{t:c}=K("page_characters"),{database:s}=Y(),r=gc(s.displayCharacter),d=w.useMemo(()=>$o(nc,y=>s.chars.entries.forEach(([v,C])=>{const P=Q(C.key).specialty;y[P].total++,t.includes(v)&&y[P].current++})),[t,s.chars.entries]),u=w.useMemo(()=>$o(re,y=>Object.entries(s.chars.data).forEach(([v])=>{const C=Q(v).attribute;y[C].total++,t.includes(v)&&y[C].current++})),[t,s.chars.data]),{specialtyType:_,attribute:D,sortType:S,ascending:$}=r;return o(Jn,{open:e,onClose:a,containerProps:{sx:{height:"100vh",p:{xs:1}}},children:x(ue,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[x(X,{sx:{display:"flex",flexDirection:"column",gap:1},children:[x(I,{sx:{display:"flex",justifyContent:"space-between"},children:[x(I,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:[o(cl,{onChange:y=>s.displayCharacter.set({specialtyType:y}),value:_,totals:d,size:"small"}),o(ll,{onChange:y=>s.displayCharacter.set({attribute:y}),value:D,totals:u,size:"small"})]}),o(Gn,{sx:{ml:"auto"},onClick:()=>a(),children:o(Un,{})})]}),x(I,{display:"flex",gap:1,children:[o(rl,{autoFocus:!0,value:n.searchTerm,onChange:y=>n.onChangeSearch(y),label:c("characterName"),size:"small",sx:{height:"100%",mr:"auto"},InputProps:{sx:{height:"100%"}}}),o(dl,{sortKeys:zr,value:S,onChange:y=>n.onChangeSort(y),ascending:$,onChangeAsc:y=>n.onChangeAsc(y)})]})]}),o(gt,{}),i]})})}function Er({characterKey:e,onClick:t}){const{t:n}=K(["page_characters","charNames_gen"]),a=il(),i=Kt(e),{rarity:c,attribute:s}=Q(e),{level:r=1,promotion:d=0,mindscape:u=0}=i??{},_=s==="electric"?a.palette[s].light:a.palette[s].main;return o(Kn,{onClick:t,children:x(I,{sx:{position:"relative",width:"100%",display:"flex",padding:"3px",gap:.5,"&::before":{content:'""',display:"block",position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:.7,background:_}},children:[o(I,{sx:{maxWidth:{xs:"33%",lg:"30%"},alignSelf:"flex-end",display:"flex",flexDirection:"column",zIndex:1,flexShrink:1},children:o(I,{component:At?At:"img",src:sl(e,"interknot")})}),x(I,{sx:{display:"flex",flexDirection:"column",zIndex:1,justifyContent:"space-evenly"},children:[x(I,{sx:{display:"flex",alignItems:"center",gap:.5},children:[o(W,{size:1.5,src:Zs(c)}),o(E,{variant:"subtitle2",sx:D=>({flexGrow:1,color:D.palette.contentNormal.main,fontWeight:"900"}),children:n(`charNames_gen:${e}`)})]}),i?x(I,{sx:D=>({display:"flex",gap:1,alignItems:"center",background:D.palette.contentNormal.main,padding:"4px 12px",borderRadius:"20px"}),children:[x(I,{sx:{textShadow:"0 0 5px gray"},children:[o(E,{variant:"body2",component:"span",whiteSpace:"nowrap",children:n("charLevel",{level:r})}),x(E,{variant:"body2",component:"span",color:"text.secondary",children:["/",Xs[d]]})]}),x(E,{variant:"body2",children:["M",u]})]}):o(E,{component:"span",variant:"body2",children:o(Ln,{color:"electric",children:n("characterEditor.new")})})]})]})})}function Or(){const{t:e}=K("page_characters"),{database:t}=Y(),n=Ht(),{core:a=0,promotion:i=0,key:c}=n??{},s=w.useCallback(r=>c&&t.chars.set(c,{core:r}),[t,c]);return o(ac,{fullWidth:!0,title:e("core",{level:a}),color:"primary",startIcon:o(W,{src:te("core"),size:1.75,sideMargin:!0}),children:Nn(0,hl[i]).map(r=>o(oc,{selected:a===r,disabled:a===r,onClick:()=>s(r),children:e("core",{level:r})},r))})}const Pr={xs:2*3,sm:2*3,md:3*3,lg:4*3,xl:4*3};function kc({disc:e,onChangeId:t,slotKey:n,show:a,onClose:i}){const{t:c}=K(["page_characters","disc"]),{database:s}=Y(),r=e==null?void 0:e.id,d=w.useCallback((T,B)=>({...T,...B,slotKeys:[n]}),[n]),[u,_]=w.useReducer(d,{...Ul(),slotKeys:[n]}),[D,S]=ul();w.useEffect(()=>s.discs.followAny(S),[s,S]);const $=gl(),y=w.useMemo(()=>Jl(),[]),v=s.discs.values.filter(T=>T.slotKey===u.slotKeys[0]).length,C=w.useMemo(()=>{const T=tc(u,y);let B=s.discs.values.filter(T).map(se=>se.id);return r&&s.discs.get(r)&&(B=B.filter(se=>se!==r),B.unshift(r)),D&&B},[u,y,s.discs,r,D]),{numShow:P,setTriggerElement:N}=pl(Pr[$],C.length),G=w.useMemo(()=>C.slice(0,P),[C,P]),Z=C.length!==v?`${C.length}/${v}`:`${v}`,F={numShowing:G.length,total:Z,t:c,namespace:"disc"},[V,A]=w.useState("");return w.useEffect(()=>{ml.includes(V)?(t(null),A(""),i()):V&&(t(V),A(""),i())},[t,i,V]),o(Jn,{open:a,onClose:i,containerProps:{maxWidth:"xl"},children:x(ue,{children:[x(X,{sx:{py:1,display:"flex",alignItems:"center"},children:[o(E,{variant:"h6",children:c("tabEquip.swapDisc")}),o(Gn,{onClick:i,sx:{ml:"auto"},children:o(Un,{})})]}),o(gt,{}),o(X,{children:o(w.Suspense,{fallback:o(ae,{variant:"rectangular",width:"100%",height:200}),children:o(fl,{filterOption:u,filterOptionDispatch:_,filteredIds:C,disableSlotFilter:!0})})}),o(gt,{}),x(X,{children:[o(I,{pb:1,display:"flex",justifyContent:"space-between",alignItems:"flex-end",flexWrap:"wrap",children:o($l,{showingTextProps:F})}),o(I,{mt:1,children:o(w.Suspense,{fallback:o(ae,{variant:"rectangular",width:"100%",height:1e3}),children:x(j,{container:!0,spacing:1,columns:{xs:2,md:3,lg:4},children:[r&&o(j,{item:!0,xs:1,children:o(ue,{bgt:"light",sx:{width:"100%",height:"100%"},children:o(Kn,{sx:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},onClick:()=>A(n),children:x(I,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[o(yl,{sx:{fontSize:"10em"}}),o(E,{children:c("disc:button.unequipDisc")})]})})})}),G.map(T=>o(j,{item:!0,xs:1,sx:B=>({...r===T&&{"> .MuiCard-root":{outline:`${B.spacing(.5)} solid ${B.palette.warning.main}`}}}),children:o(ic,{disc:s.discs.get(T),onClick:r===T?void 0:()=>A(T)})},T))]})})}),C.length!==G.length&&o(ae,{ref:T=>{T&&N(T)},sx:{borderRadius:1,mt:1},variant:"rectangular",width:"100%",height:100})]})]})})}function Vr(e){return"fieldRef"in e}var dt={},So;function qr(){if(So)return dt;So=1;var e=xl();Object.defineProperty(dt,"__esModule",{value:!0}),dt.default=void 0;var t=e(bl()),n=_l(),a=(0,t.default)((0,n.jsx)("path",{d:"M6.99 11 3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z"}),"SwapHoriz");return dt.default=a,dt}var Ar=qr();const yt=wl(Ar),Fr={xs:1,sm:2,md:3,lg:3,xl:3};function Lr({setWengine:e,setDisc:t}){const{database:n}=Y(),a=w.useContext(sc),[i,c]=w.useState(),[s,r]=w.useState(""),d=w.useCallback(y=>{r(y)},[]),u=w.useCallback(y=>{c(y)},[]),_=cc(a==null?void 0:a.equippedWengine),D=a?Q(a.key).specialty:nc[0],S=lc(a==null?void 0:a.equippedDiscs),$=pr(i);return o(I,{children:x(Ks,{spacing:2,children:[o(w.Suspense,{fallback:!1,children:s&&o(vl,{wengineId:s,footer:!0,onClose:()=>r(""),extraButtons:o(Nr,{wengineId:(_==null?void 0:_.id)||"",wengineTypeKey:D,onChangeId:e})})}),o(w.Suspense,{fallback:!1,children:$&&o(kl,{disc:$,show:!!i,onShow:()=>c(i),onClose:()=>c(void 0),cancelEdit:()=>c(void 0)})}),o(I,{children:_&&_.id&&n.wengines.keys.includes(_.id)?o(Sl,{wengineId:_.id,onEdit:()=>d(_.id),extraButtons:o(Wr,{wengineId:_.id,wengineTypeKey:D,onChangeId:e})}):o(jr,{wengineId:"",wengineTypeKey:D,onChangeId:e})}),o(I,{children:o(j,{item:!0,columns:Fr,container:!0,spacing:1,children:!!S&&Object.entries(S).map(([y,v])=>o(j,{item:!0,xs:1,children:v!=null&&v.id&&n.discs.keys.includes(v.id)?o(ic,{disc:v,extraButtons:o(Kr,{disc:v,slotKey:y,onChangeId:C=>t(y,C)}),onEdit:()=>u(v.id),onLockToggle:()=>n.discs.set(v.id,({lock:C})=>({lock:!C}))}):o(Hr,{slotKey:y,onChangeId:C=>t(y,C)})},(v==null?void 0:v.id)||y))})})]})})}function jr({wengineId:e,wengineTypeKey:t,onChangeId:n}){const[a,i,c]=ft();return x(mt,{bgt:"light",sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[o(X,{children:x(E,{children:[o(W,{src:Qs(t)})," "]})}),o(gt,{}),x(I,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:[o(Yn,{wengineId:e,wengineTypeKey:t,show:a,onClose:c,onChangeId:n}),o(ge,{onClick:i,color:"info",sx:{borderRadius:"1em"},children:o(yt,{sx:{height:100,width:100}})})]})]})}function Hr({slotKey:e,onChangeId:t}){const[n,a,i]=ft(),{t:c}=K("disc");return x(mt,{bgt:"light",sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[o(X,{children:o(E,{children:c("slotName",{slotKey:e})})}),o(gt,{}),x(I,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:[o(kc,{disc:void 0,slotKey:e,show:n,onClose:i,onChangeId:t}),o(ge,{onClick:a,color:"info",sx:{borderRadius:"1em"},children:o(yt,{sx:{height:100,width:100}})})]})]})}function Kr({disc:e,slotKey:t,onChangeId:n}){const{t:a}=K("page_characters"),[i,c,s]=ft();return x($t,{children:[o(rc,{title:o(E,{children:a("tabEquip.swapDisc")}),placement:"top",arrow:!0,children:o(ge,{color:"info",size:"small",onClick:c,"aria-label":a("tabEquip.swapDisc"),children:o(yt,{})})}),o(kc,{disc:e,slotKey:t,show:i,onClose:s,onChangeId:n})]})}function Wr({wengineId:e,wengineTypeKey:t,onChangeId:n}){const{t:a}=K("page_characters"),[i,c,s]=ft();return x($t,{children:[o(rc,{title:o(E,{children:a("tabEquip.swapWengine")}),placement:"top",arrow:!0,children:o(ge,{color:"info",size:"small",onClick:c,children:o(yt,{})})}),o(Yn,{wengineId:e,wengineTypeKey:t,onChangeId:n,show:i,onClose:s})]})}function Nr({wengineId:e,wengineTypeKey:t,onChangeId:n}){const{t:a}=K("page_characters"),[i,c,s]=ft();return x($t,{children:[o(ge,{color:"info",onClick:c,startIcon:o(yt,{}),children:a("tabEquip.swapWengine")}),o(Yn,{wengineId:e,wengineTypeKey:t,onChangeId:n,show:i,onClose:s})]})}function Gr({skillKey:e}){const{database:t}=Y(),{t:n}=K("page_characters"),a=Ht(),{[e]:i=0,promotion:c=0,key:s}=a??{},r=w.useCallback(d=>s&&t.chars.set(s,{[e]:d}),[t,s,e]);return o(ac,{fullWidth:!0,title:n(e,{level:i}),color:"primary",startIcon:o(W,{src:te(e),size:1.75,sideMargin:!0}),children:Nn(1,Cl[c]).map(d=>o(oc,{selected:i===d,disabled:i===d,onClick:()=>r(d),children:n(e,{level:d})},d))})}function Wt(){const e=w.useContext(Zn),t=w.useContext(Dl);return w.useMemo(()=>e==null?void 0:e.withTag(t),[e,t])}const H=(e,t)=>o(qt,{ns:"sheet",key18:e,values:t});function h(e,t){return[(n,a)=>o(qt,{ns:`${e}_${t}_gen`,key18:n,values:a}),(n,a)=>o(qt,{ns:`${e}_${t}`,key18:n,values:a})]}function l(e){return{title:o(Nt,{tag:e}),fieldRef:e}}function Ur(e){if(!e)return"";const{et:t,q:n,qt:a,name:i}=e;return t==="own"&&a==="formula"&&n!=="base"?i??n??"":n??""}const Jr={initial:"Initial",combat:"Combat",final:"Final",base:"Base"};function Nt({tag:e,showPercent:t,preventRecursion:n}){return o(de,{color:uy(e),children:o(Qr,{tag:e,showPercent:t,preventRecursion:n})})}function wy({tag:e,showPercent:t}){return x($t,{children:[o(Nt,{tag:e,showPercent:t}),py(e).map(n=>o(Ln,{children:Lt[n]},n)),e.attribute&&o(Ln,{color:e.attribute,children:o(Sr,{attribute:e.attribute})})]})}const Yr=["hp","hp_","atk","atk_","def","def_"],Zr=e=>Yr.includes(e),Co={dmg_:"DMG",common_dmg_:"DMG",defIgn_:"DEF Ignore",resIgn_:"Res Ignore",dazeInc_:"Daze Increase"};function Qr({tag:e,showPercent:t,preventRecursion:n}){var s;const a=Wt(),i=(s=my.subset(e)[0])==null?void 0:s.title;if(i&&!n)return i;if(e.qt==="cond"&&e.q&&e.sheet&&a){const r=jn.get(`${e.sheet}:${e.q}`);if(r)return Il(r.label,a,a==null?void 0:a.compute(new Tl(e,"max")).val)}const c=Ur(e);if(Zr(c))return x("span",{children:[o(Rl,{statKey:c,iconProps:Ml})," ",x("span",{children:[(e.qt&&Jr[e.qt])??e.qt," ",zl[c],t&&dc(c)]})]});if(Co[c]){const r=[...e.attribute?[ne[e.attribute]]:[],...e.damageType1?[Lt[e.damageType1]]:[],...e.damageType2?[Lt[e.damageType2]]:[],Co[c]];return o("span",{children:r.join(" ")})}return o(Bt,{statKey:c,showPercent:t})}function Xr(){const e=Wt();return o(mt,{children:o(X,{children:e==null?void 0:e.listFormulas(q.listing.formulas).map((t,n)=>o(ed,{read:t},n))})})}function ed({read:e}){var v,C,P,N,G,Z,F;const t=Wt(),{setRead:n}=w.useContext(Bl),a=Ht(),i=gr(a==null?void 0:a.key),c=e.tag.sheet===((v=i==null?void 0:i.target)==null?void 0:v.sheet)&&e.tag.name===((C=i==null?void 0:i.target)==null?void 0:C.name)||((P=i==null?void 0:i.target)==null?void 0:P.q)===e.tag.q,s=w.useMemo(()=>{var V,A,T,B;return e.tag.sheet===((V=i==null?void 0:i.target)==null?void 0:V.sheet)&&e.tag.name===((A=i==null?void 0:i.target)==null?void 0:A.name)?El(e.tag,(T=i==null?void 0:i.target)==null?void 0:T.damageType1,(B=i==null?void 0:i.target)==null?void 0:B.damageType2):e.tag},[e.tag,(N=i==null?void 0:i.target)==null?void 0:N.sheet,(G=i==null?void 0:i.target)==null?void 0:G.name,(Z=i==null?void 0:i.target)==null?void 0:Z.damageType1,(F=i==null?void 0:i.target)==null?void 0:F.damageType2]),r=w.useMemo(()=>({...e,tag:s}),[s,e]),d=t==null?void 0:t.compute(r),u=s.name||s.q,{statHighlight:_,setStatHighlight:D}=w.useContext(Ol),S=s.name?"":s.attribute?`${s.attribute}_${s.q}`:s.q==="cappedCrit_"?"crit_":s.q,$=S?Pl(_,S):!1;if(!d)return null;const y=Vl(d.val,dc(u??""));return x(I,{onMouseEnter:()=>S&&D(S),onMouseLeave:()=>D(""),sx:{display:"flex",gap:1,alignItems:"center",p:.5,borderRadius:.5,backgroundColor:c?"rgba(0,200,0,0.2)":void 0,position:"relative","::after":{content:'""',position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:.5,backgroundColor:ql($),transition:"background-color 0.3s ease-in-out",pointerEvents:"none"}},children:[o(I,{sx:{flexGrow:1},children:o(Nt,{tag:s})}),y,o(Al,{tag:s,onClick:()=>{}})]})}function vy({characterKey:e,onClose:t}){return o(Jn,{open:!!e,onClose:t,children:o(w.Suspense,{fallback:o(ae,{variant:"rectangular",width:"100%",height:1e3}),children:e&&o(td,{characterKey:e,onClose:t},e)})})}function td({characterKey:e,onClose:t}){const n=Kt(e);return o(ue,{children:o(X,{sx:{display:"flex",flexDirection:"column",gap:1},children:o(w.Suspense,{fallback:o(ae,{variant:"rectangular",width:"100%",height:1e3}),children:n?o(sc.Provider,{value:n,children:o(od,{onClose:t})}):o(ae,{variant:"rectangular",width:"100%",height:1e3})})})})}const nd={cardWidth:"500px",charImgWidth:"75%",iconsSize:1.5,isEditing:!0,charNameWidth:"166px",charNameVariant:"h6",scrollingBgSize:"220px"};function od({onClose:e}){const{t}=K(["page_characters"]),n=Fl(),{database:a}=Y(),i=Ht(),{key:c,equippedDiscs:s,equippedWengine:r}=i,d=w.useCallback(async()=>{const u=t(`${c}`);window.confirm(t("removeCharacter",{value:u}))&&(a.chars.remove(c),n("/characters"))},[a,n,c,t]);return x(I,{display:"flex",flexDirection:"column",gap:1,children:[x(I,{display:"flex",gap:1,children:[o(ge,{color:"error",onClick:()=>d(),startIcon:o(Ll,{}),sx:{marginLeft:"auto"},children:t("characterEditor.delete")}),!!e&&o(Gn,{onClick:e,children:o(Un,{})})]}),o(I,{children:x(j,{container:!0,spacing:1,sx:{justifyContent:"center"},children:[o(j,{item:!0,xs:6,sm:4,md:4,lg:4,xl:4,children:x(ue,{sx:{height:"100%",display:"flex",flexDirection:"column",gap:1},children:[o(Cr,{characterKey:c,charCardConfig:nd}),o(I,{sx:{px:1},children:o(jl,{level:i.level,milestone:i.promotion,setBoth:({level:u,milestone:_})=>a.chars.set(c,{level:u,promotion:_})})}),o(Xr,{}),o(Tr,{mindscape:i.mindscape,setMindscape:u=>a.chars.set(c,{mindscape:u})})]})}),x(j,{item:!0,xs:6,sm:8,md:8,lg:8,xl:8,sx:{display:"flex",flexDirection:"column",gap:1},children:[o(I,{children:x(j,{container:!0,columns:3,spacing:1,children:[Wn.map(u=>o(j,{item:!0,xs:1,children:o(Gr,{skillKey:u},u)},u)),o(j,{item:!0,xs:1,children:o(Or,{})},"core")]})}),o(I,{children:o(Lr,{setWengine:u=>{u?a.wengines.set(u,{location:c}):r&&a.wengines.set(r,{location:""})},setDisc:(u,_)=>{_?a.discs.set(_,{location:c}):s[u]&&a.discs.set(s[u],{location:""})}})})]})]})})]})}function ky({character:e,charOpt:t,wengineId:n,discIds:a,children:i}){const c=ad(e,n,a),s=w.useMemo(()=>wc([..._c([e.key]),...c,Pt.common.critMode.add(t.critMode),J.common.lvl.add(t.enemyLvl),J.common.def.add(t.enemyDef),J.common.isStunned.add(t.enemyisStunned?1:0),J.common.stun_.add(t.enemyStunMultiplier/100),J.common.unstun_.add(1),...t.conditionals.flatMap(({sheet:d,src:u,dst:_,condKey:D,condValue:S})=>Et("preset0",hc(d,u,_)(D,S))),...t.bonusStats.filter(({disabled:d})=>!d).flatMap(({tag:d,value:u})=>Et("preset0",{tag:{...d,src:e.key,sheet:"agg",et:"own"},value:yo(xo(u,d.q??""))})),...t.enemyStats.flatMap(({tag:d,value:u})=>Et("preset0",{tag:{...d,qt:"common",et:"enemy",sheet:"agg"},value:yo(xo(u,d.q??""))}))]),[c,t,e.key]),r=w.useMemo(()=>s&&new Map,[s]);return o(Hl.Provider,{value:r,children:o(Zn.Provider,{value:s,children:i})})}function ad(e,t,n){const a=cc(t),i=lc(n),c=w.useMemo(()=>_r(a),[a]),s=w.useMemo(()=>wr(Object.values(i).filter(Kl)),[i]);return w.useMemo(()=>yc(e.key,...xc(e),...c,...s),[e,c,s])}function Sy({character:e,conditionals:t,children:n}){const a=w.useMemo(()=>wc([..._c([e.key]),...yc(e.key,...xc(e),...bc({},uc(Js,()=>4)),O.sheet("agg").reread(O.sheet("wengine")),q.wengine.lvl.add(60),q.wengine.modification.add(5),q.wengine.phase.add(1),...Us.map(i=>q.common.count.sheet(i).add(1))),Pt.common.critMode.add("avg"),J.common.lvl.add(100),J.common.def.add(900),J.common.isStunned.add(0),J.common.stun_.add(1.5),J.common.unstun_.add(1),...t.flatMap(({sheet:i,src:c,dst:s,condKey:r,condValue:d})=>Et("preset0",hc(i,c,s)(r,d)))]),[e,t]);return o(Zn.Provider,{value:a,children:n})}function k(e,t={}){return{...id(e,t==null?void 0:t.perSkillAbility),core:cd(e,t==null?void 0:t.core,t==null?void 0:t.ability),m1:ce(e,1,t==null?void 0:t.m1),m2:ce(e,2,t==null?void 0:t.m2),m3:ce(e,3,t==null?void 0:t.m3),m4:ce(e,4,t==null?void 0:t.m4),m5:ce(e,5,t==null?void 0:t.m5),m6:ce(e,6,t==null?void 0:t.m6)}}function ht(e){return{title:o(Nt,{tag:e.tag,preventRecursion:!0}),fieldRef:e.tag}}function id(e,t){const n=b.char[e],a=Qn[e],[i,c]=h("char",e);return uc(Wn,s=>({title:s,img:te(`${s}Flat`),documents:Object.keys(n[s]).flatMap(r=>{var d;return[{type:"text",header:{icon:o(W,{src:te(`${s}Flat`),size:1.5}),text:i(`${s}.${r}.name`)},text:i(`${s}.${r}.desc`)},{type:"fields",fields:Object.values(a).filter(u=>u.name.includes(r)).map(u=>({title:sd(e,s,u.name),fieldRef:u.tag}))},...((d=t==null?void 0:t[s])==null?void 0:d[r])??[]]})}))}function sd(e,t,n){const[a,i,c]=n.split("_");return H(c,{val:`$t(char_${e}_gen:${t}.${a}.params.${i})`})}function cd(e,t=[],n=[]){const[a,i]=h("char",e);return{title:"core",documents:[{type:"text",header:{icon:o(W,{src:te("coreFlat"),size:1.5}),text:a("core.name")},text:c=>a(`core.desc.${c.compute(q.char.core).val}`)},...t,{type:"text",header:{icon:o(W,{src:te("coreFlat"),size:1.5}),text:a("ability.name")},text:a("ability.desc")},...n]}}function ce(e,t,n=[]){const[a,i]=h("char",e);return{title:`mindscape${t}`,documents:[{type:"text",header:{icon:o(W,{src:Wl(t),size:1.5}),text:a(`mindscapes.${t}.name`)},text:x($t,{children:[a(`mindscapes.${t}.desc`),o("br",{}),o("br",{}),o("i",{children:a(`mindscapes.${t}.flavor`)})]})},...n]}}const Gt="Anby",[,Tt]=h("char",Gt),vn=p[Gt],le=g[Gt],ld=k(Gt,{core:[{type:"conditional",conditional:{label:Tt("coreCond"),metadata:vn.core_after3rdBasic,fields:[{title:Tt("core_dazeInc_"),fieldRef:le.core_after3rdBasic_dazeInc_.tag}]}}],m1:[{type:"conditional",conditional:{label:Tt("m1Cond"),metadata:vn.m1After4thBasicHit,fields:[ht(le.m1_after4thHit_energyRegen_)]}}],m2:[{type:"fields",fields:[ht(le.m2_stunned_basic_dmg_),ht(le.m2_unstunned_ex_dazeInc_)]}],m6:[{type:"conditional",conditional:{label:Tt("m6Cond"),metadata:vn.m6ChargeConsumed,fields:[ht(le.m6_charge_basic_dmg_),ht(le.m6_charge_exSpecial_dmg_)]}}]}),rd="Anton",dd=k(rd),hd="AstraYao",ud=k(hd),gd="Ben",pd=k(gd),md="Billy",fd=k(md),$d="Burnice",yd=k($d),xd="Caesar",bd=k(xd),_d="Corin",wd=k(_d),vd="Ellen",kd=k(vd),Sd="Evelyn",Cd=k(Sd),Dd="Grace",Id=k(Dd),Td="Harumasa",Md=k(Td),Rd="Hugo",zd=k(Rd),Bd="Jane",Ed=k(Bd),Od="JuFufu",Pd=k(Od),Vd="Koleda",qd=k(Vd),Ad="Lighter",Fd=k(Ad),Ld="Lucy",jd=k(Ld),Hd="Lycaon",Kd=k(Hd),Wd="Miyabi",Nd=k(Wd),Gd="Nekomata",Ud=k(Gd),Jd="Nicole",Yd=k(Jd),Zd="PanYinhu",Qd=k(Zd),Xd="Piper",eh=k(Xd),th="Pulchra",nh=k(th),oh="Qingyi",ah=k(oh),ih="Rina",sh=k(ih),ch="Seth",lh=k(ch),rh="Soldier0Anby",dh=k(rh),hh="Soldier11",uh=k(hh),gh="Soukaku",ph=k(gh),mh="Trigger",fh=k(mh),$h="Vivian",yh=k($h),xh="Yanagi",bh=k(xh),_h="Yixuan",wh=k(_h),vh="ZhuYuan",kh=k(vh),Sh={Anby:ld,Anton:dd,AstraYao:ud,Ben:pd,Billy:fd,Burnice:yd,Caesar:bd,Corin:wd,Ellen:kd,Evelyn:Cd,Grace:Id,Harumasa:Md,Hugo:zd,Jane:Ed,JuFufu:Pd,Koleda:qd,Lighter:Fd,Lucy:jd,Lycaon:Kd,Miyabi:Nd,Nekomata:Ud,Nicole:Yd,Piper:eh,Pulchra:nh,Qingyi:ah,Rina:sh,Seth:lh,Soldier0Anby:dh,Soldier11:uh,Soukaku:ph,Trigger:fh,Vivian:yh,Yanagi:bh,PanYinhu:Qd,Yixuan:wh,ZhuYuan:kh},Ut="AstralVoice",[Do,Ch]=h("disc",Ut),Io=M(Ut),Dh=p[Ut],Ih=g[Ut],Th={2:{title:o(R,{}),img:Io,documents:[{type:"text",text:Do("desc2")}]},4:{title:o(z,{}),img:Io,documents:[{type:"text",text:Do("desc4")},{type:"conditional",conditional:{label:Ch("set4_cond"),metadata:Dh.astral,fields:[l(Ih.set4_team_dmg_.tag)]}}]}},Jt="BranchBladeSong",[To,Mh]=h("disc",Jt),Mo=M(Jt),Rh=p[Jt],Ro=g[Jt],zh={2:{title:o(R,{}),img:Mo,documents:[{type:"text",text:To("desc2")}]},4:{title:o(z,{}),img:Mo,documents:[{type:"text",text:To("desc4")},{type:"fields",fields:[l(Ro.set4_passive.tag)]},{type:"conditional",conditional:{label:Mh("set4_cond"),metadata:Rh.apply_or_trigger,fields:[l(Ro.set4_cond.tag)]}}]}},Yt="ChaosJazz",[zo,Bh]=h("disc",Yt),Bo=M(Yt),Eh=p[Yt],Mt=g[Yt],Oh={2:{title:o(R,{}),img:Bo,documents:[{type:"text",text:zo("desc2")}]},4:{title:o(z,{}),img:Bo,documents:[{type:"text",text:zo("desc4")},{type:"fields",fields:[l(Mt.set4_passive_fire_dmg_.tag),l(Mt.set4_passive_electric_dmg_.tag)]},{type:"conditional",conditional:{label:Bh("set4_cond"),metadata:Eh.while_off_field,fields:[{title:"EX Special Attack DMG",fieldRef:Mt.set4_off_field_special_dmg_.tag},{title:"Assist Attack Attack DMG",fieldRef:Mt.set4_off_field_assist_dmg_.tag}]}}]}},Zt="ChaoticMetal",[Eo,Ph]=h("disc",Zt),Oo=M(Zt),Vh=p[Zt],Po=g[Zt],qh={2:{title:o(R,{}),img:Oo,documents:[{type:"text",text:Eo("desc2")}]},4:{title:o(z,{}),img:Oo,documents:[{type:"text",text:Eo("desc4")},{type:"fields",fields:[l(Po.set4_passive.tag)]},{type:"conditional",conditional:{label:Ph("set4_cond"),metadata:Vh.trigger_corruption,fields:[l(Po.set4_cond_trigger_corruption.tag)]}}]}},Qt="FangedMetal",[Vo,Ah]=h("disc",Qt),qo=M(Qt),Fh=p[Qt],Lh=g[Qt],jh={2:{title:o(R,{}),img:qo,documents:[{type:"text",text:Vo("desc2")}]},4:{title:o(z,{}),img:qo,documents:[{type:"text",text:Vo("desc4")},{type:"conditional",conditional:{label:Ah("set4_cond"),metadata:Fh.inflict_assault,fields:[l(Lh.set4_cond_inflict_assault.tag)]}}]}},Xt="FreedomBlues",[Ao,Hh]=h("disc",Xt),Fo=M(Xt),Kh=p[Xt],Wh=g[Xt],Nh={2:{title:o(R,{}),img:Fo,documents:[{type:"text",text:Ao("desc2")}]},4:{title:o(z,{}),img:Fo,documents:[{type:"text",text:Ao("desc4")},{type:"conditional",conditional:{label:Hh("set4_cond"),metadata:Kh.exSpecialHit,fields:[l(Wh.anomBuildupRes_.tag)]}}]}},en="HormonePunk",[Lo,Gh]=h("disc",en),jo=M(en),Uh=p[en],Jh=g[en],Yh={2:{title:o(R,{}),img:jo,documents:[{type:"text",text:Lo("desc2")}]},4:{title:o(z,{}),img:jo,documents:[{type:"text",text:Lo("desc4")},{type:"conditional",conditional:{label:Gh("set4_cond"),metadata:Uh.entering_combat,fields:[l(Jh.set4_cond_entering_combat.tag)]}}]}},tn="InfernoMetal",[Ho,Zh]=h("disc",tn),Ko=M(tn),Qh=p[tn],Xh=g[tn],eu={2:{title:o(R,{}),img:Ko,documents:[{type:"text",text:Ho("desc2")}]},4:{title:o(z,{}),img:Ko,documents:[{type:"text",text:Ho("desc4")},{type:"conditional",conditional:{label:Zh("set4_cond"),metadata:Qh.hitting_burning_enemy,fields:[l(Xh.set4_cond_hitting_burning_enemy.tag)]}}]}},nn="KingOfTheSummit",[Wo,Cy]=h("disc",nn),No=M(nn),tu=p[nn],Go=g[nn],nu={2:{title:o(R,{}),img:No,documents:[{type:"text",text:Wo("desc2")},{type:"fields",fields:[l(Go.set2.tag)]}]},4:{title:o(z,{}),img:No,documents:[{type:"text",text:Wo("desc4")},{type:"conditional",conditional:{metadata:tu.launchExSpecialOrChain,label:H("uponLaunch.2",{val1:"$t(skills.exSpecial)",val2:"$t(skills.chain)"}),fields:[l(Go.set4_team_launchExSpecialOrChain_crit_dmg_.tag)]}}]}},on="PhaethonsMelody",[Uo,Jo]=h("disc",on),Yo=M(on),Zo=p[on],Qo=g[on],ou={2:{title:o(R,{}),img:Yo,documents:[{type:"text",text:Uo("desc2")}]},4:{title:o(z,{}),img:Yo,documents:[{type:"text",text:Uo("desc4")},{type:"conditional",conditional:{label:Jo("set4_cond_squad_use_ex"),metadata:Zo.squad_use_ex,fields:[l(Qo.set4_squad_anomProf.tag)]}},{type:"conditional",conditional:{label:Jo("set4_cond_not_char_use_ex"),metadata:Zo.not_char_use_ex,fields:[l(Qo.set4_not_self_ether_.tag)]}}]}},an="PolarMetal",[Xo,au]=h("disc",an),ea=M(an),iu=p[an],ta=g[an],su={2:{title:o(R,{}),img:ea,documents:[{type:"text",text:Xo("desc2")}]},4:{title:o(z,{}),img:ea,documents:[{type:"text",text:Xo("desc4")},{type:"conditional",conditional:{label:au("set4_cond"),metadata:iu.freeze_shatter}},{type:"fields",fields:[{title:"Basic Attack DMG",fieldRef:ta.set4_basic_dmg_.tag},{title:"Dash Attack DMG",fieldRef:ta.set4_dash_dmg_.tag}]}]}},sn="ProtoPunk",[na,cu]=h("disc",sn),oa=M(sn),lu=p[sn],ru=g[sn],du={2:{title:o(R,{}),img:oa,documents:[{type:"text",text:na("desc2")}]},4:{title:o(z,{}),img:oa,documents:[{type:"text",text:na("desc4")},{type:"conditional",conditional:{label:cu("set4_cond"),metadata:lu.def_assist_or_evasive_assist,fields:[l(ru.set4_cond_def_assist_or_evasive_assist_dmg_.tag)]}}]}},cn="PufferElectro",[aa,hu]=h("disc",cn),ia=M(cn),uu=p[cn],sa=g[cn],gu={2:{title:o(R,{}),img:ia,documents:[{type:"text",text:aa("desc2")}]},4:{title:o(z,{}),img:ia,documents:[{type:"text",text:aa("desc4")},{type:"fields",fields:[{title:"Ultimate DMG",fieldRef:sa.set4_dmg_.tag}]},{type:"conditional",conditional:{label:hu("set4_cond"),metadata:uu.launching_ult,fields:[l(sa.set4_cond_launching_ult_atk_.tag)]}}]}},ln="ShadowHarmony",[ca,pu]=h("disc",ln),la=M(ln),mu=p[ln],ra=g[ln],fu={2:{title:o(R,{}),img:la,documents:[{type:"text",text:ca("desc2")}]},4:{title:o(z,{}),img:la,documents:[{type:"text",text:ca("desc4")},{type:"conditional",conditional:{label:pu("set4_cond_stacks"),metadata:mu.stacks,fields:[l(ra.set4_stack_atk_.tag),l(ra.set4_stack_crit_.tag)]}}]}},to="ShockstarDisco",[da,Dy]=h("disc",to),ha=M(to),kn=g[to],$u={2:{title:o(R,{}),img:ha,documents:[{type:"text",text:da("desc2")}]},4:{title:o(z,{}),img:ha,documents:[{type:"text",text:da("desc4")},{type:"fields",fields:[{title:"Basic Attack Daze",fieldRef:kn.set4_basic_daze_.tag},{title:"Dash Attack Daze",fieldRef:kn.set4_dash_daze_.tag},{title:"Dodge Counter Daze",fieldRef:kn.set4_dodgeCounter_daze_.tag}]}]}},Sc="SoulRock",[ua,Iy]=h("disc",Sc),ga=M(Sc),yu={2:{title:o(R,{}),img:ga,documents:[{type:"text",text:ua("desc2")}]},4:{title:o(z,{}),img:ga,documents:[{type:"text",text:ua("desc4")}]}},rn="SwingJazz",[pa,xu]=h("disc",rn),ma=M(rn),bu=p[rn],_u=g[rn],wu={2:{title:o(R,{}),img:ma,documents:[{type:"text",text:pa("desc2")}]},4:{title:o(z,{}),img:ma,documents:[{type:"text",text:pa("desc4")},{type:"conditional",conditional:{label:xu("set4_cond"),metadata:bu.chain_or_ult,fields:[l(_u.set4_cond_chain_or_ult.tag)]}}]}},dn="ThunderMetal",[fa,vu]=h("disc",dn),$a=M(dn),ku=p[dn],Su=g[dn],Cu={2:{title:o(R,{}),img:$a,documents:[{type:"text",text:fa("desc2")}]},4:{title:o(z,{}),img:$a,documents:[{type:"text",text:fa("desc4")},{type:"conditional",conditional:{label:vu("set4_cond"),metadata:ku.enemy_shocked,fields:[l(Su.set4_cond_enemy_shocked_atk_.tag)]}}]}},hn="WoodpeckerElectro",[ya,Du]=h("disc",hn),xa=M(hn),Iu=p[hn],Tu=g[hn],Mu={2:{title:o(R,{}),img:xa,documents:[{type:"text",text:ya("desc2")}]},4:{title:o(z,{}),img:xa,documents:[{type:"text",text:ya("desc4")},{type:"conditional",conditional:{label:Du("set4_cond"),metadata:Iu.crit_basic_dodge_ex,fields:[l(Tu.set4_cond_crit_basic_dodge_ex_atk_.tag)]}}]}},un="YunkuiTales",[ba,Ty]=h("disc",un),_a=M(un),Ru=p[un],Sn=g[un],zu={2:{title:o(R,{}),img:_a,documents:[{type:"text",text:ba("desc2")},{type:"fields",fields:[l(Sn.set2.tag)]}]},4:{title:o(z,{}),img:_a,documents:[{type:"text",text:ba("desc4")},{type:"conditional",conditional:{metadata:Ru.uponLaunchExSpecialChainOrUlt,label:H("uponLaunch.3",{val1:"$t(skills.exSpecial)",val2:"$t(skills.chain)",val3:"$t(skills.ult)"}),fields:[l(Sn.set4_crit_.tag),l(Sn.set4_sheer_dmg_.tag)]}}]}},Bu={AstralVoice:Th,BranchBladeSong:zh,ChaosJazz:Oh,ChaoticMetal:qh,FangedMetal:jh,FreedomBlues:Nh,HormonePunk:Yh,InfernoMetal:eu,KingOfTheSummit:nu,PhaethonsMelody:ou,PolarMetal:su,ProtoPunk:du,PufferElectro:gu,ShadowHarmony:fu,ShockstarDisco:$u,SoulRock:yu,SwingJazz:wu,ThunderMetal:Cu,WoodpeckerElectro:Mu,YunkuiTales:zu};function R(){return"2-Set"}function z(){return"4-Set"}function m({wKey:e,children:t}){const n=Wt();let a=1;return n&&n.compute(q.common.count.sheet(e)).val&&(a=n.compute(q.wengine.phase).val??1),t(a)}const pe="BashfulDemon",[wa,Eu]=h("wengine",pe),Ou=b.wengine[pe],Pu=f(pe,"icon"),Vu=p[pe],va=g[pe],qu={title:wa("phase"),img:Pu,documents:[{type:"text",text:o(m,{wKey:pe,children:e=>wa(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(va.passive_ice_dmg_.tag)]},{type:"conditional",conditional:{label:Eu("cond"),metadata:Vu.launch_ex_attack,fields:[l(va.team_atk_.tag),{title:"Duration",fieldValue:Ou.duration}]}}]},me="BigCylinder",[ka,My]=h("wengine",me),Au=b.wengine[me],Fu=f(me,"icon"),Lu=g[me],ju=Qn[me],Hu={title:ka("phase"),img:Fu,documents:[{type:"text",text:o(m,{wKey:me,children:e=>ka(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Lu.passive_dmg_red_.tag)]},{type:"fields",fields:[{title:"Additional DMG",fieldRef:ju.damage.tag},{title:"Cooldown",fieldValue:Au.cooldown}]}]},fe="BlazingLaurel",[Sa,Ca]=h("wengine",fe),Da=b.wengine[fe],Ku=f(fe,"icon"),Ia=p[fe],Cn=g[fe],Wu={title:Sa("phase"),img:Ku,documents:[{type:"text",text:o(m,{wKey:fe,children:e=>Sa(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Ca("cond1"),metadata:Ia.quickOrPerfectAssistUsed,fields:[l(Cn.impact_.tag),{title:"Duration",fieldValue:Da.duration}]}},{type:"conditional",conditional:{label:Ca("cond2"),metadata:Ia.wilt,fields:[l(Cn.crit_dmg_ice_.tag),l(Cn.crit_dmg_fire_.tag),{title:"Duration",fieldValue:Da.wilt_duration}]}}]},$e="BoxCutter",[Ta,Nu]=h("wengine",$e),Gu=b.wengine[$e],Uu=f($e,"icon"),Ju=p[$e],Ma=g[$e],Yu={title:Ta("phase"),img:Uu,documents:[{type:"text",text:o(m,{wKey:$e,children:e=>Ta(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Nu("cond"),metadata:Ju.launchedAftershock,fields:[l(Ma.physical_dmg_.tag),l(Ma.daze_.tag),{title:"Duration",fieldValue:Gu.duration}]}}]},xt="BunnyBand",[Ra,Zu]=h("wengine",xt),Qu=f(xt,"icon"),Xu=p[xt],za=g[xt],eg={title:Ra("phase"),img:Qu,documents:[{type:"text",text:o(m,{wKey:xt,children:e=>Ra(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(za.passive_hp_.tag)]},{type:"conditional",conditional:{label:Zu("cond"),metadata:Xu.wearerShielded,fields:[l(za.atk_.tag)]}}]},ie="CannonRotor",[Ba,Ry]=h("wengine",ie),tg=b.wengine[ie],ng=f(ie,"icon"),og=Qn[ie],ag=g[ie],ig={title:Ba("phase"),img:ng,documents:[{type:"text",text:o(m,{wKey:ie,children:e=>Ba(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(ag.passive_atk_.tag)]},{type:"fields",fields:[{title:"Additional DMG",fieldRef:og.damage.tag},{title:"Cooldown",fieldValue:o(m,{wKey:ie,children:e=>tg.cooldown[e]})}]}]},ye="CinderCobalt",[Ea]=h("wengine",ye),Oa=b.wengine[ye],sg=f(ye,"icon"),cg=p[ye],lg=g[ye],rg={title:Ea("phase"),img:sg,documents:[{type:"text",text:o(m,{wKey:ye,children:e=>Ea(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:H("enterCombatOrSwitchIn"),metadata:cg.enteringCombatOrSwitchingIn,fields:[l(lg.enteringCombatOrSwitchingIn_atk_.tag),{title:H("duration"),fieldValue:Oa.duration},{title:H("cd"),fieldValue:Oa.cd}]}}]},xe="DeepSeaVisitor",[Pa,Va]=h("wengine",xe),qa=b.wengine[xe],dg=f(xe,"icon"),Aa=p[xe],Dn=g[xe],hg={title:Pa("phase"),img:dg,documents:[{type:"text",text:o(m,{wKey:xe,children:e=>Pa(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Dn.passive_ice_dmg_.tag)]},{type:"conditional",conditional:{label:Va("cond1"),metadata:Aa.basicHit,fields:[l(Dn.crit_.tag),{title:"Duration",fieldValue:qa.duration}]}},{type:"conditional",conditional:{label:Va("cond2"),metadata:Aa.iceDashAtkHit,fields:[l(Dn.extra_crit_.tag),{title:"Duration",fieldValue:qa.extra_duration}]}}]},be="DemaraBatteryMarkII",[Fa,ug]=h("wengine",be),gg=b.wengine[be],pg=f(be,"icon"),mg=p[be],La=g[be],fg={title:Fa("phase"),img:pg,documents:[{type:"text",text:o(m,{wKey:be,children:e=>Fa(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(La.passive_electric_dmg_.tag)]},{type:"conditional",conditional:{label:ug("cond"),metadata:mg.dodgeCounterOrAssistHit,fields:[l(La.enerRegen_.tag),{title:"Duration",fieldValue:gg.duration}]}}]},_e="DrillRigRedAxis",[ja,$g]=h("wengine",_e),Ha=b.wengine[_e],yg=f(_e,"icon"),xg=p[_e],Ka=g[_e],bg={title:ja("phase"),img:yg,documents:[{type:"text",text:o(m,{wKey:_e,children:e=>ja(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:$g("cond"),metadata:xg.exSpecialOrChainUsed,fields:[l(Ka.basic_eletric_dmg_.tag),l(Ka.dash_eletric_dmg_.tag),{title:"Duration",fieldValue:Ha.duration},{title:"Cooldown",fieldValue:Ha.cooldown}]}}]},bt="ElectroLipGloss",[Wa,_g]=h("wengine",bt),wg=f(bt,"icon"),vg=p[bt],Na=g[bt],kg={title:Wa("phase"),img:wg,documents:[{type:"text",text:o(m,{wKey:bt,children:e=>Wa(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:_g("cond"),metadata:vg.anomalyOnEnemy,fields:[l(Na.atk_.tag),l(Na.common_dmg_.tag)]}}]},we="ElegantVanity",[Ga,Sg]=h("wengine",we),Cg=b.wengine[we],Dg=f(we,"icon"),Ig=p[we],Tg=g[we],Mg={title:Ga("phase"),img:Dg,documents:[{type:"text",text:o(m,{wKey:we,children:e=>Ga(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Sg("cond"),metadata:Ig.consumed25Energy,fields:[l(Tg.common_dmg_.tag),{title:"Duration",fieldValue:Cg.buffDuration}]}}]},ve="FlamemakerShaker",[Ua,Ja]=h("wengine",ve),In=b.wengine[ve],Rg=f(ve,"icon"),Ya=p[ve],Tn=g[ve],zg={title:Ua("phase"),img:Rg,documents:[{type:"text",text:o(m,{wKey:ve,children:e=>Ua(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Ja("cond1"),metadata:Ya.offField,fields:[l(Tn.enerRegen.tag)]}},{type:"conditional",conditional:{label:Ja("cond2"),metadata:Ya.exSpecialAssistHits,fields:[l(Tn.common_dmg_.tag),{title:"Duration",fieldValue:In.duration},{title:"Cooldown",fieldValue:In.cooldown},l(Tn.anomProf.tag),{title:"Duration",fieldValue:In.anomProfDuration}]}}]},ke="FlightOfFancy",[Za,Bg]=h("wengine",ke),Qa=b.wengine[ke],Eg=f(ke,"icon"),Og=p[ke],Xa=g[ke],Pg={title:Za("phase"),img:Eg,documents:[{type:"text",text:o(m,{wKey:ke,children:e=>Za(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Xa.anomBuildup_.tag)]},{type:"conditional",conditional:{label:Bg("cond"),metadata:Og.etherDmg,fields:[l(Xa.etherDmg_anomProf.tag),{title:"Duration",fieldValue:Qa.duration},{title:"Cooldown",fieldValue:Qa.cd}]}}]},Se="FusionCompiler",[ei,Vg]=h("wengine",Se),qg=b.wengine[Se],Ag=f(Se,"icon"),Fg=p[Se],ti=g[Se],Lg={title:ei("phase"),img:Ag,documents:[{type:"text",text:o(m,{wKey:Se,children:e=>ei(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(ti.passive_atk_.tag)]},{type:"conditional",conditional:{label:Vg("cond"),metadata:Fg.specialUsed,fields:[l(ti.anomProf.tag),{title:"Duration",fieldValue:qg.duration}]}}]},gn="GildedBlossom",[ni,zy]=h("wengine",gn),jg=f(gn,"icon"),oi=g[gn],Hg={title:ni("phase"),img:jg,documents:[{type:"text",text:o(m,{wKey:gn,children:e=>ni(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(oi.passive_atk_.tag),l(oi.passive_exSpecial_dmg_.tag)]}]},Ce="HailstormShrine",[ai,Kg]=h("wengine",Ce),Wg=b.wengine[Ce],Ng=f(Ce,"icon"),Gg=p[Ce],ii=g[Ce],Ug={title:ai("phase"),img:Ng,documents:[{type:"text",text:o(m,{wKey:Ce,children:e=>ai(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(ii.passive_crit_dmg_.tag)]},{type:"conditional",conditional:{label:Kg("cond"),metadata:Gg.exSpecialOrAnomaly,fields:[l(ii.ice_dmg_.tag),{title:"Duration",fieldValue:Wg.duration}]}}]},De="HeartstringNocturne",[si,Jg]=h("wengine",De),Yg=b.wengine[De],Zg=f(De,"icon"),Qg=p[De],Mn=g[De],Xg={title:si("phase"),img:Zg,documents:[{type:"text",text:o(m,{wKey:De,children:e=>si(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Mn.passive_crit_dmg_.tag)]},{type:"conditional",conditional:{label:Jg("cond"),metadata:Qg.heartstring,fields:[l(Mn.chain_resIgn_fire_.tag),l(Mn.ult_resIgn_fire_.tag),{title:"Duration",fieldValue:Yg.duration}]}}]},Ie="HellfireGears",[ci,li]=h("wengine",Ie),ep=b.wengine[Ie],tp=f(Ie,"icon"),ri=p[Ie],di=g[Ie],np={title:ci("phase"),img:tp,documents:[{type:"text",text:o(m,{wKey:Ie,children:e=>ci(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:li("cond1"),metadata:ri.offField,fields:[l(di.enerRegen.tag)]}},{type:"conditional",conditional:{label:li("cond1"),metadata:ri.exSpecialUsed,fields:[l(di.impact_.tag),{title:"Duration",fieldValue:ep.duration}]}}]},Te="Housekeeper",[hi,ui]=h("wengine",Te),op=b.wengine[Te],ap=f(Te,"icon"),gi=p[Te],pi=g[Te],ip={title:hi("phase"),img:ap,documents:[{type:"text",text:o(m,{wKey:Te,children:e=>hi(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:ui("cond1"),metadata:gi.offField,fields:[l(pi.enerRegen.tag)]}},{type:"conditional",conditional:{label:ui("cond2"),metadata:gi.exSpecialHits,fields:[l(pi.physical_dmg_.tag),{title:"Duration",fieldValue:op.duration}]}}]},Me="IceJadeTeapot",[mi,sp]=h("wengine",Me),fi=b.wengine[Me],cp=f(Me,"icon"),lp=p[Me],$i=g[Me],rp={title:mi("phase"),img:cp,documents:[{type:"text",text:o(m,{wKey:Me,children:e=>mi(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:sp("cond"),metadata:lp.teariffic,fields:[l($i.impact_.tag),{title:"Duration",fieldValue:fi.duration},l($i.common_dmg_.tag),{title:"Duration",fieldValue:fi.teamBuffDuration}]}}]},Re="IdentityBase",[yi,dp]=h("wengine",Re),hp=b.wengine[Re],up=f(Re,"icon"),gp=p[Re],pp=g[Re],mp={title:yi("phase"),img:up,documents:[{type:"text",text:o(m,{wKey:Re,children:e=>yi(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:dp("cond"),metadata:gp.equipperAttacked,fields:[l(pp.def_.tag),{title:"Duration",fieldValue:hp.duration}]}}]},no="IdentityInflection",[xi,By]=h("wengine",no),fp=f(no,"icon"),$p={title:xi("phase"),img:fp,documents:[{type:"text",text:o(m,{wKey:no,children:e=>xi(`phaseDescs.${e-1}`)})}]},ze="KaboomTheCannon",[bi,yp]=h("wengine",ze),xp=b.wengine[ze],bp=f(ze,"icon"),_p=p[ze],wp=g[ze],vp={title:bi("phase"),img:bp,documents:[{type:"text",text:o(m,{wKey:ze,children:e=>bi(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:yp("cond"),metadata:_p.allyHitsEnemy,fields:[l(wp.atk_.tag),{title:"Duration",fieldValue:xp.duration}]}}]},Be="LunarDecrescent",[_i,kp]=h("wengine",Be),Sp=b.wengine[Be],Cp=f(Be,"icon"),Dp=p[Be],Ip=g[Be],Tp={title:_i("phase"),img:Cp,documents:[{type:"text",text:o(m,{wKey:Be,children:e=>_i(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:kp("cond"),metadata:Dp.chainOrUltUsed,fields:[l(Ip.common_dmg_.tag),{title:"Duration",fieldValue:Sp.duration}]}}]},oo="LunarNoviluna",[wi,Ey]=h("wengine",oo),Mp=f(oo,"icon"),Rp={title:wi("phase"),img:Mp,documents:[{type:"text",text:o(m,{wKey:oo,children:e=>wi(`phaseDescs.${e-1}`)})}]},pn="LunarPleniluna",[vi,Oy]=h("wengine",pn),zp=f(pn,"icon"),Rn=g[pn],Bp={title:vi("phase"),img:zp,documents:[{type:"text",text:o(m,{wKey:pn,children:e=>vi(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Rn.basic_dmg_.tag),l(Rn.dash_dmg_.tag),l(Rn.dodgeCounter_dmg_.tag)]}]},Ee="MagneticStormAlpha",[ki,Ep]=h("wengine",Ee),Si=b.wengine[Ee],Op=f(Ee,"icon"),Pp=p[Ee],Vp=g[Ee],qp={title:ki("phase"),img:Op,documents:[{type:"text",text:o(m,{wKey:Ee,children:e=>ki(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Ep("cond"),metadata:Pp.anomalyBuildupIncreased,fields:[l(Vp.anomMas.tag),{title:"Duration",fieldValue:Si.duration},{title:"Cooldown",fieldValue:Si.cooldown}]}}]},Oe="MagneticStormBravo",[Ci,Ap]=h("wengine",Oe),Di=b.wengine[Oe],Fp=f(Oe,"icon"),Lp=p[Oe],jp=g[Oe],Hp={title:Ci("phase"),img:Fp,documents:[{type:"text",text:o(m,{wKey:Oe,children:e=>Ci(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Ap("cond"),metadata:Lp.anomalyBuildupIncreased,fields:[l(jp.anomProf.tag),{title:"Duration",fieldValue:Di.duration},{title:"Cooldown",fieldValue:Di.cooldown}]}}]},ao="MagneticStormCharlie",[Ii,Py]=h("wengine",ao),Kp=f(ao,"icon"),Wp={title:Ii("phase"),img:Kp,documents:[{type:"text",text:o(m,{wKey:ao,children:e=>Ii(`phaseDescs.${e-1}`)})}]},Pe="MarcatoDesire",[Ti,Mi]=h("wengine",Pe),Np=b.wengine[Pe],Gp=f(Pe,"icon"),Ri=p[Pe],Up=g[Pe],Jp={title:Ti("phase"),img:Gp,documents:[{type:"text",text:o(m,{wKey:Pe,children:e=>Ti(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Mi("cond1"),metadata:Ri.exSpecialOrChainHitsEnemy,fields:[l(Up.atk_.tag),{title:"Duration",fieldValue:Np.duration}]}},{type:"conditional",conditional:{label:Mi("cond2"),metadata:Ri.attributeAnomalyInflicted}}]},Ve="MyriadEclipse",[zi,Yp]=h("wengine",Ve),Zp=b.wengine[Ve],Qp=f(Ve,"icon"),Xp=p[Ve],Bi=g[Ve],em={title:zi("phase"),img:Qp,documents:[{type:"text",text:o(m,{wKey:Ve,children:e=>zi(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Bi.crit_dmg_.tag)]},{type:"conditional",conditional:{label:Yp("cond"),metadata:Xp.deathSentence,fields:[l(Bi.deathSentence_defIgn_.tag),{title:"Duration",fieldValue:Zp.duration}]}}]},qe="OriginalTransmorpher",[Ei,tm]=h("wengine",qe),nm=b.wengine[qe],om=f(qe,"icon"),am=p[qe],Oi=g[qe],im={title:Ei("phase"),img:om,documents:[{type:"text",text:o(m,{wKey:qe,children:e=>Ei(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Oi.passive_hp_.tag)]},{type:"conditional",conditional:{label:tm("cond"),metadata:am.equipperHit,fields:[l(Oi.impact_.tag),{title:"Duration",fieldValue:nm.duration}]}}]},_t="PeacekeeperSpecialized",[Pi,sm]=h("wengine",_t),cm=f(_t,"icon"),lm=p[_t],zn=g[_t],rm={title:Pi("phase"),img:cm,documents:[{type:"text",text:o(m,{wKey:_t,children:e=>Pi(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:sm("cond"),metadata:lm.shielded,fields:[l(zn.enerRegen.tag)]}},{type:"fields",fields:[l(zn.passive_exSpecial_anomBuildup_.tag),l(zn.passive_assist_anomBuildup_.tag)]}]},wt="PreciousFossilizedCore",[Vi,qi]=h("wengine",wt),dm=f(wt,"icon"),Ai=p[wt],hm=g[wt],um={title:Vi("phase"),img:dm,documents:[{type:"text",text:o(m,{wKey:wt,children:e=>Vi(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:qi("cond1"),metadata:Ai.enemyHpGE50,fields:[l(hm.daze_.tag)]}},{type:"conditional",conditional:{label:qi("cond2"),metadata:Ai.enemyHpGE75}}]},Ae="PuzzleSphere",[Fi]=h("wengine",Ae),Li=b.wengine[Ae],gm=f(Ae,"icon"),ji=p[Ae],Hi=g[Ae],pm={title:Fi("phase"),img:gm,documents:[{type:"text",text:o(m,{wKey:Ae,children:e=>Fi(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:H("uponLaunch.1",{val1:"$t(skills.exSpecial)"}),metadata:ji.launchingExSpecial,fields:[l(Hi.launchingExSpecial_crit_dmg_.tag),{title:H("duration"),fieldValue:Li.duration}]}},{type:"conditional",conditional:{label:H("targetHpLe",{val:Li.hpThresh*100}),metadata:ji.targetHpBelow50,fields:[l(Hi.targetHpBelow50_exSpecial_dmg_.tag)]}}]},Fe="QingmingBirdcage",[Ki,mm]=h("wengine",Fe),fm=b.wengine[Fe],$m=f(Fe,"icon"),ym=p[Fe],Rt=g[Fe],xm={title:Ki("phase"),img:$m,documents:[{type:"text",text:o(m,{wKey:Fe,children:e=>Ki(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Rt.crit_.tag)]},{type:"conditional",conditional:{metadata:ym.qingmingCompanionStacks,label:mm("cond"),fields:[l(Rt.qingmingCompanionStacks_ether_dmg_.tag),l(Rt.qingmingCompanionStacks_ult_ether_sheer_dmg_.tag),l(Rt.qingmingCompanionStacks_exSpecial_ether_sheer_dmg_.tag),{title:H("cd"),fieldValue:fm.duration}]}}]},Le="RadiowaveJourney",[Wi]=h("wengine",Le),bm=b.wengine[Le],_m=f(Le,"icon"),wm=p[Le],vm=g[Le],km={title:Wi("phase"),img:_m,documents:[{type:"text",text:o(m,{wKey:Le,children:e=>Wi(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{metadata:wm.launchingChainOrUlt,label:H("uponLaunch.2",{val1:"$t(skills.chain)",val2:"$t(skills.ult)"}),fields:[l(vm.launchingChainOrUlt_sheerForce.tag),{title:H("duration"),fieldValue:bm.duration}]}}]},je="RainforestGourmet",[Ni,Sm]=h("wengine",je),Cm=b.wengine[je],Dm=f(je,"icon"),Im=p[je],Tm=g[je],Mm={title:Ni("phase"),img:Dm,documents:[{type:"text",text:o(m,{wKey:je,children:e=>Ni(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Sm("cond"),metadata:Im.energyConsumed,fields:[l(Tm.atk_.tag),{title:"Duration",fieldValue:Cm.duration}]}}]},io="ReelProjector",[Gi]=h("wengine",io),Rm=f(io,"icon"),zm={title:Gi("phase"),img:Rm,documents:[{type:"text",text:o(m,{wKey:io,children:e=>Gi(`phaseDescs.${e-1}`)})}]},He="ReverbMarkI",[Ui,Bm]=h("wengine",He),Em=b.wengine[He],Om=f(He,"icon"),Pm=p[He],Vm=g[He],qm={title:Ui("phase"),img:Om,documents:[{type:"text",text:o(m,{wKey:He,children:e=>Ui(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Bm("cond"),metadata:Pm.exSpecialUsed,fields:[l(Vm.impact_.tag),{title:"Duration",fieldValue:Em.duration}]}}]},Ke="ReverbMarkII",[Ji,Am]=h("wengine",Ke),Fm=b.wengine[Ke],Lm=f(Ke,"icon"),jm=p[Ke],Yi=g[Ke],Hm={title:Ji("phase"),img:Lm,documents:[{type:"text",text:o(m,{wKey:Ke,children:e=>Ji(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Am("cond"),metadata:jm.exSpecialOrChainUsed,fields:[l(Yi.anomMas.tag),l(Yi.anomProf.tag),{title:"Duration",fieldValue:Fm.duration}]}}]},We="ReverbMarkIII",[Zi,Km]=h("wengine",We),Wm=b.wengine[We],Nm=f(We,"icon"),Gm=p[We],Um=g[We],Jm={title:Zi("phase"),img:Nm,documents:[{type:"text",text:o(m,{wKey:We,children:e=>Zi(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Km("cond"),metadata:Gm.chainOrUltUsed,fields:[l(Um.atk_.tag),{title:"Duration",fieldValue:Wm.duration}]}}]},vt="RiotSuppressorMarkVI",[Qi,Ym]=h("wengine",vt),Zm=f(vt,"icon"),Qm=p[vt],Xi=g[vt],Xm={title:Qi("phase"),img:Zm,documents:[{type:"text",text:o(m,{wKey:vt,children:e=>Qi(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Xi.passive_crit_.tag)]},{type:"conditional",conditional:{label:Ym("cond"),metadata:Qm.charge,fields:[l(Xi.basic_ether_dmg_.tag)]}}]},Ne="RoaringFurnace",[es,ef]=h("wengine",Ne),tf=b.wengine[Ne],nf=f(Ne,"icon"),of=p[Ne],zt=g[Ne],af={title:es("phase"),img:nf,documents:[{type:"text",text:o(m,{wKey:Ne,children:e=>es(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(zt.exSpecial_dazeInc_.tag),l(zt.chain_dazeInc_.tag),l(zt.ult_dazeInc_.tag)]},{type:"conditional",conditional:{metadata:of.chainOrUlt,label:ef("cond"),fields:[l(zt.team_chainOrUlt_fire_dmg_.tag),{title:H("duration"),fieldValue:tf.duration}]}}]},Ge="RoaringRide",[ts,Bn]=h("wengine",Ge),En=b.wengine[Ge],sf=f(Ge,"icon"),On=p[Ge],Pn=g[Ge],cf={title:ts("phase"),img:sf,documents:[{type:"text",text:o(m,{wKey:Ge,children:e=>ts(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Bn("cond_atk_"),metadata:On.atk_,fields:[l(Pn.atk_.tag),{title:"Duration",fieldValue:En.duration}]}},{type:"conditional",conditional:{label:Bn("cond_anomProf"),metadata:On.anomProf,fields:[l(Pn.anomProf.tag),{title:"Duration",fieldValue:En.duration}]}},{type:"conditional",conditional:{label:Bn("cond_anomBuildup_"),metadata:On.anomBuildup_,fields:[l(Pn.anomBuildup_.tag),{title:"Duration",fieldValue:En.duration}]}}]},Ue="SeveredInnocence",[ns,lf]=h("wengine",Ue),rf=b.wengine[Ue],df=f(Ue,"icon"),hf=p[Ue],Vn=g[Ue],uf={title:ns("phase"),img:df,documents:[{type:"text",text:o(m,{wKey:Ue,children:e=>ns(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Vn.passive_crit_dmg_.tag)]},{type:"conditional",conditional:{label:lf("cond"),metadata:hf.basicSpecialAftershockHit,fields:[l(Vn.crit_dmg_.tag),l(Vn.electric_dmg_.tag),{title:"Duration",fieldValue:rf.duration}]}}]},Je="SharpenedStinger",[os,gf]=h("wengine",Je),pf=b.wengine[Je],mf=f(Je,"icon"),ff=p[Je],as=g[Je],$f={title:os("phase"),img:mf,documents:[{type:"text",text:o(m,{wKey:Je,children:e=>os(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:gf("cond"),metadata:ff.predatoryInstinct,fields:[l(as.physical_dmg_.tag),{title:"Duration",fieldValue:pf.duration}]}},{type:"fields",fields:[l(as.anomBuildup_.tag)]}]},kt="SixShooter",[is,yf]=h("wengine",kt),xf=f(kt,"icon"),bf=p[kt],_f=g[kt],wf={title:is("phase"),img:xf,documents:[{type:"text",text:o(m,{wKey:kt,children:e=>is(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:yf("cond"),metadata:bf.charge,fields:[l(_f.exSpecial_daze_.tag)]}}]},so="SliceOfTime",[ss,Vy]=h("wengine",so),vf=f(so,"icon"),kf={title:ss("phase"),img:vf,documents:[{type:"text",text:o(m,{wKey:so,children:e=>ss(`phaseDescs.${e-1}`)})}]},Ye="SpectralGaze",[cs,ls]=h("wengine",Ye),rs=b.wengine[Ye],Sf=f(Ye,"icon"),ds=p[Ye],hs=g[Ye],Cf={title:cs("phase"),img:Sf,documents:[{type:"text",text:o(m,{wKey:Ye,children:e=>cs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:ls("cond1"),metadata:ds.hit_aftershock_electric,fields:[l(hs.cond_defRed_.tag),{title:"Duration",fieldValue:rs.duration1}]}},{type:"conditional",conditional:{label:ls("cond2"),metadata:ds.spiritLock,fields:[l(hs.cond_impact_.tag),{title:"Duration",fieldValue:rs.duration2}]}}]},Ze="SpringEmbrace",[us,Df]=h("wengine",Ze),If=b.wengine[Ze],Tf=f(Ze,"icon"),Mf=p[Ze],gs=g[Ze],Rf={title:us("phase"),img:Tf,documents:[{type:"text",text:o(m,{wKey:Ze,children:e=>us(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(gs.passive_dmg_red_.tag)]},{type:"conditional",conditional:{label:Df("cond"),metadata:Mf.when_attacked,fields:[l(gs.cond_enerRegen_.tag),{title:"Duration",fieldValue:If.duration}]}}]},Qe="StarlightEngine",[ps,zf]=h("wengine",Qe),Bf=b.wengine[Qe],Ef=f(Qe,"icon"),Of=p[Qe],Pf=g[Qe],Vf={title:ps("phase"),img:Ef,documents:[{type:"text",text:o(m,{wKey:Qe,children:e=>ps(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:zf("cond"),metadata:Of.dodgecounter_quickassist,fields:[l(Pf.cond_dmg_.tag),{title:"Duration",fieldValue:Bf.duration}]}}]},Xe="StarlightEngineReplica",[ms,qf]=h("wengine",Xe),Af=b.wengine[Xe],Ff=f(Xe,"icon"),Lf=p[Xe],jf=g[Xe],Hf={title:ms("phase"),img:Ff,documents:[{type:"text",text:o(m,{wKey:Xe,children:e=>ms(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:qf("cond"),metadata:Lf.hit_away,fields:[l(jf.cond_dmg_.tag),{title:"Duration",fieldValue:Af.duration}]}}]},et="SteamOven",[fs,Kf]=h("wengine",et),Wf=b.wengine[et],Nf=f(et,"icon"),Gf=p[et],Uf=g[et],Jf={title:fs("phase"),img:Nf,documents:[{type:"text",text:o(m,{wKey:et,children:e=>fs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Kf("cond"),metadata:Gf.stacks,fields:[l(Uf.cond_impact_.tag),{title:"Duration",fieldValue:Wf.duration}]}}]},St="SteelCushion",[$s,Yf]=h("wengine",St),Zf=f(St,"icon"),Qf=p[St],ys=g[St],Xf={title:$s("phase"),img:Zf,documents:[{type:"text",text:o(m,{wKey:St,children:e=>$s(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(ys.passive_physical_dmg_.tag)]},{type:"conditional",conditional:{label:Yf("cond"),metadata:Qf.hit_behind,fields:[l(ys.cond_dmg_.tag)]}}]},Ct="StreetSuperstar",[xs,e$]=h("wengine",Ct),t$=f(Ct,"icon"),n$=p[Ct],o$=g[Ct],a$={title:xs("phase"),img:t$,documents:[{type:"text",text:o(m,{wKey:Ct,children:e=>xs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:e$("cond"),metadata:n$.charge,fields:[l(o$.cond_ult_dmg_.tag)]}}]},tt="TheBrimstone",[bs,i$]=h("wengine",tt),s$=b.wengine[tt],c$=f(tt,"icon"),l$=p[tt],r$=g[tt],d$={title:bs("phase"),img:c$,documents:[{type:"text",text:o(m,{wKey:tt,children:e=>bs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:i$("cond"),metadata:l$.hit_basic_dash_dodge,fields:[l(r$.cond_atk_.tag),{title:"Duration",fieldValue:s$.duration}]}}]},nt="TheRestrained",[_s,h$]=h("wengine",nt),u$=b.wengine[nt],g$=f(nt,"icon"),p$=p[nt],ws=g[nt],m$={title:_s("phase"),img:g$,documents:[{type:"text",text:o(m,{wKey:nt,children:e=>_s(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:h$("cond"),metadata:p$.dmg_daze_,fields:[l(ws.basic_dmg_.tag),l(ws.basic_daze_.tag),{title:"Duration",fieldValue:u$.duration}]}}]},ot="TheVault",[vs,f$]=h("wengine",ot),$$=b.wengine[ot],y$=f(ot,"icon"),x$=p[ot],b$=g[ot],_$={title:vs("phase"),img:y$,documents:[{type:"text",text:o(m,{wKey:ot,children:e=>vs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:f$("cond"),metadata:x$.ether_hit,fields:[l(b$.cond_dmg_.tag),{title:"Duration",fieldValue:$$.duration}]}}]},at="Timeweaver",[ks,w$]=h("wengine",at),v$=b.wengine[at],k$=f(at,"icon"),S$=p[at],qn=g[at],C$={title:ks("phase"),img:k$,documents:[{type:"text",text:o(m,{wKey:at,children:e=>ks(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(qn.passive_electric_anomBuildup_.tag),l(qn.passive_disorder_dmg_.tag)]},{type:"conditional",conditional:{label:w$("cond"),metadata:S$.hit_anomaly,fields:[l(qn.cond_anomProf.tag),{title:"Duration",fieldValue:v$.duration}]}}]},mn="TremorTrigramVessel",[Ss]=h("wengine",mn),D$=f(mn,"icon"),Cs=g[mn],I$={title:Ss("phase"),img:D$,documents:[{type:"text",text:o(m,{wKey:mn,children:e=>Ss(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Cs.exSpecial_dmg_.tag),l(Cs.ult_dmg_.tag)]}]},it="TusksOfFury",[Ds,T$]=h("wengine",it),M$=b.wengine[it],R$=f(it,"icon"),z$=p[it],An=g[it],B$={title:Ds("phase"),img:R$,documents:[{type:"text",text:o(m,{wKey:it,children:e=>Ds(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(An.passive_shield_.tag)]},{type:"conditional",conditional:{label:T$("cond"),metadata:z$.interrupt_perfdodge,fields:[l(An.cond_dmg_.tag),l(An.daze_.tag),{title:"Duration",fieldValue:M$.duration}]}}]},st="UnfetteredGameBall",[Is,E$]=h("wengine",st),O$=b.wengine[st],P$=f(st,"icon"),V$=p[st],q$=g[st],A$={title:Is("phase"),img:P$,documents:[{type:"text",text:o(m,{wKey:st,children:e=>Is(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:E$("cond"),metadata:V$.anomaly_counter,fields:[l(q$.cond_crit_.tag),{title:"Duration",fieldValue:O$.duration}]}}]},fn="VortexArrow",[Ts,qy]=h("wengine",fn),F$=f(fn,"icon"),L$=g[fn],j$={title:Ts("phase"),img:F$,documents:[{type:"text",text:o(m,{wKey:fn,children:e=>Ts(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(L$.passive_daze_.tag)]}]},ct="VortexHatchet",[Ms,H$]=h("wengine",ct),Rs=b.wengine[ct],K$=f(ct,"icon"),W$=p[ct],N$=g[ct],G$={title:Ms("phase"),img:K$,documents:[{type:"text",text:o(m,{wKey:ct,children:e=>Ms(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:H$("cond"),metadata:W$.entering,fields:[l(N$.cond_impact_.tag),{title:"Duration",fieldValue:Rs.duration},{title:"Cooldown",fieldValue:Rs.cooldown}]}}]},$n="VortexRevolver",[zs,Ay]=h("wengine",$n),U$=f($n,"icon"),J$=g[$n],Y$={title:zs("phase"),img:U$,documents:[{type:"text",text:o(m,{wKey:$n,children:e=>zs(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(J$.passive_exSpecial_daze_.tag)]}]},lt="WeepingCradle",[Bs,Es]=h("wengine",lt),Z$=b.wengine[lt],Q$=f(lt,"icon"),Os=p[lt],X$=g[lt],ey={title:Bs("phase"),img:Q$,documents:[{type:"text",text:o(m,{wKey:lt,children:e=>Bs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Es("cond_atk"),metadata:Os.attack}},{type:"conditional",conditional:{label:Es("cond_stacks"),metadata:Os.stacks,fields:[l(X$.cond_dmg_.tag),{title:"Duration",fieldValue:Z$.duration}]}}]},Dt="WeepingGemini",[Ps,ty]=h("wengine",Dt),ny=f(Dt,"icon"),oy=p[Dt],ay=g[Dt],iy={title:Ps("phase"),img:ny,documents:[{type:"text",text:o(m,{wKey:Dt,children:e=>Ps(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:ty("cond"),metadata:oy.anomaly_stack,fields:[l(ay.anomProf.tag)]}}]},rt="ZanshinHerbCase",[Vs,sy]=h("wengine",rt),cy=b.wengine[rt],ly=f(rt,"icon"),ry=p[rt],Fn=g[rt],dy={title:Vs("phase"),img:ly,documents:[{type:"text",text:o(m,{wKey:rt,children:e=>Vs(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Fn.passive_crit_.tag),l(Fn.passive_electric_dmg_.tag)]},{type:"conditional",conditional:{label:sy("cond"),metadata:ry.apply_anom_stun,fields:[l(Fn.cond_crit_.tag),{title:"Duration",fieldValue:cy.duration}]}}]},hy={BashfulDemon:qu,BigCylinder:Hu,BlazingLaurel:Wu,BoxCutter:Yu,BunnyBand:eg,CannonRotor:ig,CinderCobalt:rg,DeepSeaVisitor:hg,DemaraBatteryMarkII:fg,DrillRigRedAxis:bg,ElectroLipGloss:kg,ElegantVanity:Mg,FlamemakerShaker:zg,FlightOfFancy:Pg,FusionCompiler:Lg,GildedBlossom:Hg,HailstormShrine:Ug,HeartstringNocturne:Xg,HellfireGears:np,Housekeeper:ip,IceJadeTeapot:rp,IdentityBase:mp,IdentityInflection:$p,KaboomTheCannon:vp,LunarDecrescent:Tp,LunarNoviluna:Rp,LunarPleniluna:Bp,MagneticStormAlpha:qp,MagneticStormBravo:Hp,MagneticStormCharlie:Wp,MarcatoDesire:Jp,MyriadEclipse:em,OriginalTransmorpher:im,PeacekeeperSpecialized:rm,PreciousFossilizedCore:um,PuzzleSphere:pm,QingmingBirdcage:xm,RadiowaveJourney:km,RainforestGourmet:Mm,ReelProjector:zm,ReverbMarkI:qm,ReverbMarkII:Hm,ReverbMarkIII:Jm,RiotSuppressorMarkVI:Xm,RoaringFurnace:af,RoaringRide:cf,SeveredInnocence:uf,SharpenedStinger:$f,SixShooter:wf,SliceOfTime:kf,SpectralGaze:Cf,SpringEmbrace:Rf,StarlightEngine:Vf,StarlightEngineReplica:Hf,SteamOven:Jf,SteelCushion:Xf,StreetSuperstar:a$,TheBrimstone:d$,TheRestrained:m$,TheVault:_$,Timeweaver:C$,TremorTrigramVessel:I$,TusksOfFury:B$,UnfetteredGameBall:A$,VortexArrow:j$,VortexHatchet:G$,VortexRevolver:Y$,WeepingCradle:ey,WeepingGemini:iy,ZanshinHerbCase:dy};function uy(e){const{attribute:t}=e;if(t)return t}function gy(e){const{q:t}=e;return["standardDmg","anomalyDmg"].includes(t)}function py(e){const{damageType1:t,damageType2:n}=e,a=[];return gy(e)?(t&&a.push(t),n&&a.push(n),a):[]}const Lt={basic:"Basic",dash:"Dash",dodgeCounter:"Dodge Counter",special:"Special",exSpecial:"EX Special",chain:"Chain",ult:"Ultimate",quickAssist:"Quick Assist",defensiveAssist:"Defensive Assist",evasiveAssist:"Evasive Assist",assistFollowUp:"Assist Follow Up",anomaly:"Anomaly",disorder:"Disorder",aftershock:"Aftershock",elemental:"Elemental",sheer:"Sheer"},Cc=["crit_","crit_dmg_","impact","pen","pen_","enerRegen","anomProf","anomMas"].map(e=>{if(Nl.includes(e)){const t={...q.final.dmg_.tag,attribute:e.slice(0,-5)};return{title:o(Bt,{statKey:e}),fieldRef:t}}return e==="crit_"?{fieldRef:q.common.cappedCrit_.tag,title:o(Bt,{statKey:e})}:{fieldRef:q.final[e].tag,title:o(Bt,{statKey:e})}});Cc.push(...re.map(e=>({fieldRef:{et:"own",qt:"formula",q:"standardDmg",attribute:e,name:"standardDmgInst"},title:x(de,{color:e,children:[ne[e]," Damage"]})})),...re.map(e=>({fieldRef:{et:"own",qt:"formula",q:"sheerDmg",attribute:e,name:"sheerDmgInst"},title:x(de,{color:e,children:[ne[e]," Damage"]})})),...re.flatMap(e=>Gl.map(t=>({fieldRef:{et:"own",qt:"formula",q:"standardDmg",attribute:e,damageType1:t,name:"standardDmgInst"},title:x(de,{color:e,children:[ne[e]," ",Lt[t]," Damage"]})}))),...re.map(e=>({fieldRef:{et:"own",qt:"formula",q:"anomalyDmg",attribute:e,damageType1:"anomaly",name:"anomalyDmgInst"},title:x(de,{color:e,children:[ne[e]," Anomaly Damage"]})})),...re.map(e=>({fieldRef:{et:"own",qt:"formula",q:"anomBuildup",attribute:e,name:"anomalyBuildupInst"},title:x(de,{color:e,children:[ne[e]," Anomaly Buildup"]})})),{fieldRef:{et:"own",qt:"formula",q:"dazeBuildup",name:"dazeInst"},title:"Daze Buildup"});const co=[];Object.values(Sh).forEach(e=>Object.values(e).forEach(t=>t.documents.forEach(n=>n.type==="fields"&&n.fields.forEach(a=>Vr(a)&&co.push({tag:a.fieldRef,value:a})))));Cc.forEach(e=>{co.push({tag:e.fieldRef,value:e})});const my=vr(co),jn=new Map;function Dc(e,t){if(jn.get(e))throw new Error(`Duplicate conditional ${e}`);jn.set(e,t)}Object.values(hy).forEach(({documents:e})=>{e.forEach(t=>{t.type==="conditional"&&Dc(`${t.conditional.metadata.sheet}:${t.conditional.metadata.name}`,t.conditional)})});Object.values(Bu).forEach(e=>Object.values(e).forEach(({documents:t})=>{t.forEach(n=>{n.type==="conditional"&&Dc(`${n.conditional.metadata.sheet}:${n.conditional.metadata.name}`,n.conditional)})}));export{Sr as A,Sy as C,_o as D,wy as F,Nt as T,pt as a,fc as b,hr as c,lr as d,Bu as e,Lt as f,Ur as g,Wt as h,Xr as i,ky as j,vy as k,Cr as l,Kt as m,kr as n,_y as o,Rr as p,Jr as q,Mr as r,vc as s,gr as u,hy as w};
