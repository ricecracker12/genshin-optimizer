import{c4 as sc,J as cc,H as lc,d as w,K as rc,_ as dc,O as re,c5 as zi,X as Jt,W as nn,V as ye,c6 as j,Y as hc,c7 as sl,c8 as cl,T as O,y as uc,c9 as Bi,ca as gc,cb as ll,a4 as rl,cc as dl,a7 as hl,cd as mc,u as te,aN as pc,aL as ul,ce as gl,cf as ml,cg as pl,ch as fc,b4 as $c,b3 as yc,ci as V,cj as fl,ck as $l,bA as q,b9 as yl,ba as _l,cl as Yt,cm as bl,cn as xl,co as _c,cp as Zt,cq as wl,j as i,cr as Qt,cs as le,bs as X,bB as li,ct as vl,e as b,am as U,aA as Ct,cu as Xt,i as W,ax as G,bV as bc,cv as kl,cw as xc,cx as wc,cy as ri,cz as ae,ae as di,o as I,cA as Cl,cB as vc,a as kc,bI as Sl,l as Cc,b_ as Dl,f as ee,G as H,C as _e,S as de,P as Rl,bM as Il,bg as si,b$ as Ei,bq as Sc,aX as fe,c0 as Ml,c1 as Tl,I as hi,s as ui,c2 as zl,cC as Bl,v as vt,M as gi,aM as an,ac as Dc,ad as Rc,cD as El,m as Ol,k as Pl,n as Vl,bf as ql,D as Al,c3 as Fl,cE as Ll,w as Ic,r as jl,b as Hl,c as Kl,g as Wl,bw as Mc,bE as Tc,bC as zc,cF as Nl,cG as Gl,E as Ul,cH as Jl,z as St,B as be,cI as mi,F as Dt,cJ as Bc,cK as Yl,ah as pi,ag as Zl,aY as $e,ap as Ql,b6 as Xl,cL as er,cM as tr,cN as nr,aH as Ec,aF as Gt,ai as ir,cO as ar,by as or,cP as sr,aK as cr,cQ as lr,cR as rr,bY as dr,cS as hr,cT as ur,cU as J,cV as Oc,a5 as Oi,b8 as Pi,cW as gr,cX as mr,be as Pc,cY as pr,cZ as _,c_ as ue,a$ as m,a_ as u,ay as T,aD as f,c$ as fr,bH as $r}from"./index-toAm2MNU.js";import{i as yr,d as _r}from"./discSortUtil-B_4cVGHO.js";function br(e){const{badgeContent:t,invisible:n=!1,max:a=99,showZero:o=!1}=e,c=sc({badgeContent:t,max:a});let s=n;n===!1&&t===0&&!o&&(s=!0);const{badgeContent:r,max:d=a}=s?c:e,g=r&&Number(r)>d?`${d}+`:r;return{badgeContent:r,invisible:s,max:d,displayValue:g}}function xr(e){return lc("MuiBadge",e)}const ne=cc("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),wr=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],Pn=10,Vn=4,vr=e=>{const{color:t,anchorOrigin:n,invisible:a,overlap:o,variant:c,classes:s={}}=e,r={root:["root"],badge:["badge",c,a&&"invisible",`anchorOrigin${j(n.vertical)}${j(n.horizontal)}`,`anchorOrigin${j(n.vertical)}${j(n.horizontal)}${j(o)}`,`overlap${j(o)}`,t!=="default"&&`color${j(t)}`]};return hc(r,xr,s)},kr=nn("span",{name:"MuiBadge",slot:"Root",overridesResolver:(e,t)=>t.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),Cr=nn("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.badge,t[n.variant],t[`anchorOrigin${j(n.anchorOrigin.vertical)}${j(n.anchorOrigin.horizontal)}${j(n.overlap)}`],n.color!=="default"&&t[`color${j(n.color)}`],n.invisible&&t.invisible]}})(({theme:e})=>{var t;return{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(12),minWidth:Pn*2,lineHeight:1,padding:"0 6px",height:Pn*2,borderRadius:Pn,zIndex:1,transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.enteringScreen}),variants:[...Object.keys(((t=e.vars)!=null?t:e).palette).filter(n=>{var a,o;return((a=e.vars)!=null?a:e).palette[n].main&&((o=e.vars)!=null?o:e).palette[n].contrastText}).map(n=>({props:{color:n},style:{backgroundColor:(e.vars||e).palette[n].main,color:(e.vars||e).palette[n].contrastText}})),{props:{variant:"dot"},style:{borderRadius:Vn,height:Vn*2,minWidth:Vn*2,padding:0}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${ne.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${ne.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${ne.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${ne.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${ne.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${ne.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${ne.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${ne.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.leavingScreen})}}]}}),Vi=w.forwardRef(function(t,n){var a,o,c,s,r,d;const g=rc({props:t,name:"MuiBadge"}),{anchorOrigin:x={vertical:"top",horizontal:"right"},className:S,component:C,components:$={},componentsProps:y={},children:v,overlap:D="rectangular",color:A="default",invisible:L=!1,max:Y=99,badgeContent:Z,slots:F,slotProps:R,showZero:E=!1,variant:P="standard"}=g,Q=dc(g,wr),{badgeContent:Ci,invisible:Zc,max:Qc,displayValue:Xc}=br({max:Y,invisible:L,badgeContent:Z,showZero:E}),el=sc({anchorOrigin:x,color:A,overlap:D,variant:P,badgeContent:Z}),Si=Zc||Ci==null&&P!=="dot",{color:tl=A,overlap:nl=D,anchorOrigin:il=x,variant:Di=P}=Si?el:g,Ri=Di!=="dot"?Xc:void 0,Bn=re({},g,{badgeContent:Ci,invisible:Si,max:Qc,displayValue:Ri,showZero:E,anchorOrigin:il,color:tl,overlap:nl,variant:Di}),Ii=vr(Bn),Mi=(a=(o=F==null?void 0:F.root)!=null?o:$.Root)!=null?a:kr,Ti=(c=(s=F==null?void 0:F.badge)!=null?s:$.Badge)!=null?c:Cr,En=(r=R==null?void 0:R.root)!=null?r:y.root,On=(d=R==null?void 0:R.badge)!=null?d:y.badge,al=zi({elementType:Mi,externalSlotProps:En,externalForwardedProps:Q,additionalProps:{ref:n,as:C},ownerState:Bn,className:Jt(En==null?void 0:En.className,Ii.root,S)}),ol=zi({elementType:Ti,externalSlotProps:On,ownerState:Bn,className:Jt(Ii.badge,On==null?void 0:On.className)});return ye.jsxs(Mi,re({},al,{children:[v,ye.jsx(Ti,re({},ol,{children:Ri}))]}))});function Sr(e){return lc("MuiFormControlLabel",e)}const wt=cc("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),Dr=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],Rr=e=>{const{classes:t,disabled:n,labelPlacement:a,error:o,required:c}=e,s={root:["root",n&&"disabled",`labelPlacement${j(a)}`,o&&"error",c&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",o&&"error"]};return hc(s,Sr,t)},Ir=nn("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${wt.label}`]:t.label},t.root,t[`labelPlacement${j(n.labelPlacement)}`]]}})(({theme:e,ownerState:t})=>re({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${wt.disabled}`]:{cursor:"default"}},t.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},t.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},t.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${wt.label}`]:{[`&.${wt.disabled}`]:{color:(e.vars||e).palette.text.disabled}}})),Mr=nn("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${wt.error}`]:{color:(e.vars||e).palette.error.main}})),Tr=w.forwardRef(function(t,n){var a,o;const c=rc({props:t,name:"MuiFormControlLabel"}),{className:s,componentsProps:r={},control:d,disabled:g,disableTypography:x,label:S,labelPlacement:C="end",required:$,slotProps:y={}}=c,v=dc(c,Dr),D=sl(),A=(a=g??d.props.disabled)!=null?a:D==null?void 0:D.disabled,L=$??d.props.required,Y={disabled:A,required:L};["checked","name","onChange","value","inputRef"].forEach(Q=>{typeof d.props[Q]>"u"&&typeof c[Q]<"u"&&(Y[Q]=c[Q])});const Z=cl({props:c,muiFormControl:D,states:["error"]}),F=re({},c,{disabled:A,labelPlacement:C,required:L,error:Z.error}),R=Rr(F),E=(o=y.typography)!=null?o:r.typography;let P=S;return P!=null&&P.type!==O&&!x&&(P=ye.jsx(O,re({component:"span"},E,{className:Jt(R.label,E==null?void 0:E.className),children:P}))),ye.jsxs(Ir,re({className:Jt(R.root,s),ownerState:F,ref:n},v,{children:[w.cloneElement(d,Y),L?ye.jsxs(uc,{display:"block",children:[P,ye.jsxs(Mr,{ownerState:F,"aria-hidden":!0,className:R.asterisk,children:["â€‰","*"]})]}):P]}))}),zr={};class Vc{constructor(t,n){this.root=new Br(t,n)}subset(t){const n=[];return this._subset(t,a=>n.push(...a[Bi].map(o=>o.value))),n}entries(t){const n=[];return this._subset(t,a=>n.push(...a[Bi])),n}_subset(t,n){const a=t.length;function o(c,s){c<a?s.subset(t[c]).forEach(r=>o(c+1,r)):n(s.leaf)}o(0,this.root)}}let Br=class qc{constructor(t,n){if(this.children=[],t>0)for(const[a,o]of Object.entries(n)){const c=new Map;for(const[s,r]of Object.entries(o))c.set(+s,new qc(t-1,r));this.children.push({mask:+a,map:c})}else this.leaf=n}subset(t){return this.children.map(({mask:n,map:a})=>a.get(t&n)).filter(n=>!!n)}};class qi{constructor(t){this.root=new fi(void 0),this.keys=t}at(t){const n=this.keys.get(t),a=n.reduce((o,c)=>o.child(c),this.root);return a.leaf||(a.leaf=new $i(t,n,this.keys,a)),a.leaf}}class fi{constructor(t){this.children=new Map,this.parent=t}child(t){let n=this.children.get(t);return n||(n=new fi(this),this.children.set(t,n),n)}}class $i{constructor(t,n,a,o){this.tag=Object.fromEntries(Object.entries(t).filter(([c,s])=>s!=null)),this.id=n,this.keys=a,this.internal=o}with(t){const{keys:n}=this,{id:a,firstReplacedByte:o}=n.combine(this.id,t);let c=this.internal;for(let s=o;s<n.tagLen;s++)c=c.parent;for(let s=o;s<n.tagLen;s++)c=c.child(a[s]);return c.leaf||(c.leaf=new $i({...this.tag,...t},a,n,c)),c.leaf}}class Er{constructor(t,n){this.keys=new gc(t),this.values=new Vc(t.tagLen,n)}subset(t){return this.values.subset(this.keys.get(t))}}const kt={sum:e=>e.reduce((t,n)=>t+n,0),prod:e=>e.reduce((t,n)=>t*n,1),min:e=>Math.min(...e),max:e=>Math.max(...e),sumfrac:([e,t])=>e/(e+t),unique:([e])=>e},Ac={match:([e,t])=>e===t?0:1,thres:([e,t])=>e>=t?0:1,lookup:([e],t)=>t[e]??0},Lt=e=>dl(e,"val");let Fc=class{constructor(t,...n){const a=new gc(t);this.nodes=new Vc(a.tagLen,ll(n)),this.cache=new qi(a).at({}),this.calc=new qi(a).at({}),this.calc.val=this}withTag(t){const n=this.calc.with(t);return n.val??(n.val=Object.assign(new this.constructor(this.cache.keys),this,{cache:this.cache.with(t),calc:n}))}gather(t){return this._gather(this.cache.with(t)).pre}compute(t){return this._compute(t,this.cache)}_gather(t){if(t.val)return t.val;const n=this.nodes.entries(t.id).flatMap(({tag:a,value:o})=>o.op==="reread"?this._gather(t.with(o.tag)).pre:[this.markGathered(t.tag,a,o,this._compute(o,t))]);return t.val={pre:n}}_compute(t,n){const a=(c,s,r,d)=>Object.freeze({val:c,meta:this.computeMeta(t,c,s,r,d)}),{op:o}=t;switch(o){case"const":return a(t.ex,[],[]);case"sum":case"prod":case"min":case"max":case"sumfrac":{const c=t.x.map(s=>this._compute(s,n));return a(kt[o](Lt(c)),c,[])}case"thres":case"match":case"lookup":{const c=t.br.map(g=>this._compute(g,n)),s=Ac[o](Lt(c),t.ex),r=[...Array(t.x.length)],d=r[s]=this._compute(t.x[s],n);return a(d.val,r,c)}case"subscript":{const c=this._compute(t.br[0],n);return a(t.ex[c.val],[],[c])}case"vtag":return a(n.tag[t.ex]??"",[],[]);case"tag":{const c=n.with(t.tag),s=this._compute(t.x[0],c);return a(s.val,[s],[],c.tag)}case"dtag":{const c=t.br.map(d=>this._compute(d,n)),s=n.with(Object.fromEntries(c.map((d,g)=>[t.ex[g],d.val]))),r=this._compute(t.x[0],s);return a(r.val,[r],c,s.tag)}case"read":{const c=n.with(t.tag),s=this._gather(c),{pre:r}=s,d=t.ex??this.defaultAccu(c.tag)??"unique";if(d!==t.ex&&(t={...t,ex:d}),s[d])return s[d];if(hl()&&d==="unique"&&r.length!==1)throw new Error(`Ill-form read for ${mc(c.tag)}`);const g=kt[d](Lt(r));return s[d]=a(g,r,[],c.tag)}case"custom":{const c=t.x.map(s=>this._compute(s,n));return a(zr[t.ex].calc(Lt(c)),c,[])}default:rl(o)}}defaultAccu(t){}markGathered(t,n,a,o){return o}computeMeta(t,n,a,o,c){}toDebug(){throw new Error("not implemented")}};const Or={arithmetic:kt,branching:Ac};class Pr extends Fc{constructor(t,n=mc,a=()=>!0){super(t.cache.keys),this.gathering=new Set,this.nodes=t.nodes,this.tagStr=n,this.filter=a,this.defaultAccu=o=>t.defaultAccu(o),this.cache=this.cache.with(t.cache.tag)}withTag(t){throw new Error("Unimplemented")}_gather(t){if(this.gathering.has(t))throw new Error(`Loop detected for ${this.tagStr(t.tag)}`);this.gathering.add(t);const n=this.__gather(t);return this.gathering.delete(t),n}__gather(t){if(t.val)return t.val;const n=this.nodes.entries(t.id).flatMap(({tag:a,value:o})=>o.op==="reread"?this._gather(t.with(o.tag)).pre.map(c=>{const s=`${this.tagStr(a)} <= ${this.tagStr(o.tag)} : ${c.meta.readSeq}`;return Object.freeze({...c,meta:{...c.meta,readSeq:s}})}):[this.markGathered(t.tag,a,o,this._compute(o,t))]);return t.val={pre:n}}_compute(t,n){try{return super._compute(t,n)}catch(a){return Object.freeze({val:NaN,meta:{formula:`${a}`,deps:[],omitted:[],val:NaN,x:[],br:[],comp:"ERR",pivot:!0,toJSON:Fi}})}}markGathered(t,n,a,o){const c=`${this.tagStr(n)} <- ${this.tagStr(t)}`;return{...o,meta:{...o.meta,readSeq:c,pivot:!0}}}computeMeta(t,n,a,o,c){let s,r;const d=a.filter($=>$).map($=>$.meta),g=o.map($=>$.meta),x=[],S=t.op==="read"?t.ex:t.op,C=[];if(S in kt){const $=kt[S]([]);for(const y of[...g,...d])y.val!==$||this.filter(y)?x.push(y):C.push(y)}else x.push(...g,...d);switch(t.op){case"const":s=Ai(t.ex);break;case"read":r=`gather ${d.length} node(s)`,r+=` matching ${this.tagStr(c,t.ex)}`,r+=` (for ${this.tagStr(t.tag)})`,C.length&&(r+=` <${C.length} omitted>`),s=`${this.tagStr(t.tag)}`;break;default:{const $=[];t.ex&&t.op!=="subscript"&&$.push(JSON.stringify(t.ex)),t.tag&&$.push(this.tagStr(t.tag)),$.push(...x.map(y=>y.comp)),C.length&&$.push(`<${C.length} omitted>`),s=`${t.op}(`+$.join(", ")+")"}}return C.push(...x.flatMap($=>$.pivot?[]:$.omitted)),Object.freeze({formula:`[${Ai(n)}] ${r??s}`,deps:[...new Set(x.flatMap($=>$.pivot?[$]:$.deps))],omitted:[...new Set(C)],val:n,x:d,br:g,comp:s,pivot:t.op==="read",toJSON:Fi})}}const Ai=e=>typeof e=="string"?`"${e}"`:e.toString();function Fi(){const{formula:e,readSeq:t,deps:n}=this,a={readSeq:t,formula:e,deps:n};return a.readSeq||delete a.readSeq,a.deps.length||delete a.deps,Object.keys(a).length===1?a.formula:a}function on(e){const{database:t}=te();return pc(t.chars,e)}function Vr(e){const{database:t}=te();return pc(t.charOpts,e)}const{arithmetic:qr}=Or;let Ar=class extends Fc{computeMeta({op:t,ex:n,tag:a},o,c,s,r){let d=c.filter($=>!!$);const g=Fr(d,s);function x($){return Object.freeze(r&&!$.tag?{tag:r,...$}:$)}function S($,y){return x({op:$,ops:y,...g})}function C($,y){let{meta:v}=$;return y!=null&&y.some(D=>!v.usedCats.has(D))&&(v={...v,usedCats:new Set([...v.usedCats,...y])}),x(v.conds===g.conds?v:{...v,...g})}if(t==="read"&&(r==null?void 0:r.qt)==="cond"){const{src:$,dst:y,sheet:v,q:D}=r;$&&v&&D&&(g.conds=en(g.conds,{[y??"All"]:{[$]:{[v]:{[D]:o}}}}))}switch(t==="read"&&n!=="unique"&&([t,n]=[n,void 0]),t){case"sum":case"prod":case"min":case"max":case"sumfrac":if(d.length>1){const $=qr[t]([]);d=d.filter(y=>y.val!==$)}return d.length===1?C(d[0]):S(d.length?t:"const",d);case"const":case"subscript":return S("const",[]);case"vtag":return g.usedCats=new Set([n]),S("const",[]);case"match":case"thres":case"lookup":case"read":return C(d[0]);case"tag":return C(d[0],Object.keys(a));case"dtag":return C(d[0],n);case"custom":return S(n,d);default:ul(t)}}markGathered(t,n,a,o){const{val:c}=o,s={...o.meta};let r=!1;const d=new Set([...s.usedCats,...Object.keys(n)]);return s.usedCats.size!==d.size&&(s.usedCats=d,r=!0),r?{val:c,meta:Object.freeze(s)}:o}listFormulas(t){return this.gather(t.tag).filter(n=>n.val).map(({val:n,meta:a})=>gl.withTag(a.tag)[n])}listCondFormulas(t){return this.listFormulas(t).map(n=>this.compute(n).meta.conds).reduce(en,{})}};function Fr(e,t){var s;const n=[...e.map(r=>r.meta),...t.map(r=>r.meta)];let a={},o=new Set;for(const r of n)a=en(a,r.conds),r.usedCats.forEach(d=>o.add(d));const c=o.size;return o=((s=n.find(r=>r.usedCats.size===c))==null?void 0:s.usedCats)??o,{usedCats:o,conds:a}}function en(e,t){if(e===t)return e;if(typeof e!="object")throw new Error(`cannot merge ${e} and ${t}`);if(Object.keys(t).length>Object.keys(e).length&&([e,t]=[t,e]),!Object.keys(t).length)return e;let n=!1;const a={...e};for(const[o,c]of Object.entries(t)){const s=a[o],r=o in a?en(s,c):c;s!==r&&(a[o]=r,n=!0)}return Object.freeze(n?a:e)}function Lr(e){const t=new Set(e);return n=>!jr(n,t)}function jr(e,t){const n=e.formula.match(/(\S+) (\S+) common.count/);if(!n)return!1;const[,a,o]=n;return o==="own"&&t.has(a)}class Hr extends Ar{toDebug(){return new Pr(this,ml,Lr([...$c,...yc]))}defaultAccu(t){var o,c,s,r;const{qt:n,q:a}=t;if(!(!n||!a))switch(t.et){case"own":case"target":return(c=(o=fc[n])==null?void 0:o[a])==null?void 0:c.accu;case"enemy":return(r=(s=pl[n])==null?void 0:s[a])==null?void 0:r.accu;case"team":if(n==="common"&&a==="count")return"sum";throw new Error("non-explicit team value accumulator")}}listFormulas(t){return super.listFormulas(t).filter(n=>n.tag.qt!=="formula"||["standardDmgInst","sheerDmgInst","anomalyDmgInst","anomalyBuildupInst","dazeInst"].includes(n.tag.name??""))}}function Ut(e,...t){return t.map(({tag:n,value:a})=>({tag:{...n,preset:e},value:a}))}function Lc(e,...t){return t.map(({tag:n,value:a})=>({tag:{...n,src:e},value:a}))}function jc(e){const{lvl:t,promotion:n,basic:a,dodge:o,special:c,chain:s,assist:r,core:d,mindscape:g}=q.char,{char:x,iso:S,[e.key]:C}=V.withAll("sheet",[]);return[x.reread(C),S.reread(C),t.add(e.level),a.add(e.basic),o.add(e.dodge),c.add(e.special),s.add(e.chain),r.add(e.assist),d.add(e.core),n.add(e.promotion),g.add(e.mindscape),Yt.base.crit_.add(.05),Yt.base.crit_dmg_.add(.5)]}function Kr(e){return[V.sheet("agg").reread(V.sheet("wengine")),...e?[q.common.count.sheet(e.key).add(1),q.wengine.lvl.add(e.level),q.wengine.modification.add(e.modification),q.wengine.phase.add(e.phase)]:[]]}function Hc(e,t){const{common:{count:n},initial:a}=bl(fc,{sheet:"disc",et:"own"});return[V.sheet("agg").reread(V.sheet("disc")),V.withTag({sheet:"disc",qt:"initial"}).reread(V.sheet("dyn")),...Object.entries(e).map(([o,c])=>xl(a,o).sheet("dyn").add(c)),...Object.entries(t).map(([o,c])=>n.sheet(o).add(c))]}function Wr(e){const t={},n={};return e.forEach(({setKey:a,mainStatKey:o,substats:c,level:s,rarity:r})=>{t[a]=(t[a]??0)+1,n[o]=(n[o]??0)+yl(r,o,s),c.forEach(({key:d,upgrades:g})=>{!d||!g||(n[d]=(n[d]??0)+_l(d,r)*g)})}),Hc(n,t)}function Kc(e){const t=V.with("et","team"),{own:n,enemy:a,teamBuff:o,notOwnBuff:c}=V.sheet("agg").withAll("et",[]);return[e.map(s=>V.withTag({et:"target",dst:s}).reread(V.withTag({et:"own",dst:null,src:s}))),e.flatMap(s=>{const r=n.with("src",s);return e.map(d=>r.reread(o.withTag({dst:s,src:d,name:null})))}),e.flatMap(s=>{const r=n.with("src",s);return e.filter(d=>d!==s).map(d=>r.reread(c.withTag({dst:s,src:d,name:null})))}),e.map(s=>a.reread(V.withTag({et:"enemyDeBuff",dst:null,src:s,name:null}))),e.flatMap((s,r)=>{const{stackIn:d,stackTmp:g}=V.withAll("qt",[]),x=V.withTag({src:s,et:"own"});return[x.with("qt","stackTmp").add(fl(d,0,r+1)),x.with("qt","stackOut").add($l(g.max.with("et","team"),r+1,d))]}),e.map(s=>t.add(V.withTag({src:s,et:"own"})))].flat()}function Wc(e){const t=_c(Zt,e);return new Hr(Zt,wl,t)}function Nr(e){return new Er(Zt,_c(Zt,e))}function Gr({characterKey:e}){return i(Qt,{ns:"charNames_gen",key18:e})}function Ur({attribute:e}){return le[e]}function Jr({characterKey:e,onClick:t,charCardConfig:n}){const{level:a=0,promotion:o=0}=on(e)??{},c=X(e),s=n||{cardWidth:"100%",charImgWidth:"100%",iconsSize:1.7,isEditing:!1,charNameWidth:"191px",charNameVariant:"h6",scrollingBgSize:"200px"},r=w.useCallback(()=>e&&(t==null?void 0:t(e)),[e,t]),d=w.useCallback(g=>i(li,{onClick:r,sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:g}),[r]);return i(Ct,{children:i(vl,{condition:!!t,wrapper:d,children:b(U,{sx:{display:"flex",flexDirection:"column",width:s.cardWidth},children:[i(Yr,{characterKey:e,characterStat:c,charCardConfig:s}),i(Zr,{characterKey:e,characterStat:c,promotion:o,level:a,charCardConfig:s})]})})})}function Yr({characterKey:e,characterStat:t,charCardConfig:n}){const{attribute:a,id:o}=t;return b(U,{sx:s=>({width:"100%",height:"100%",position:"relative",display:"flex",background:`${s.palette[a].main}`,zIndex:1,overflow:"hidden"}),children:[b(U,{sx:{position:"absolute",left:"0",right:"0",display:"flex",transform:"rotate(5deg) translateX(-50%)",zIndex:2},children:[i(Li,{characterKey:e,charCardConfig:n}),i(Li,{characterKey:e,charCardConfig:n})]}),i(U,{src:`https://act-webstatic.hoyoverse.com/game_record/zzzv2/role_vertical_painting/role_vertical_painting_${o}.png`,component:Xt?Xt:"img",width:n.charImgWidth,height:"auto",position:"relative",zIndex:"2"})]})}function Zr({characterKey:e,characterStat:t,promotion:n,level:a,charCardConfig:o}){const{t:c}=W("page_characters"),{attribute:s,rarity:r,specialty:d}=t,g=on(e);return i(U,{sx:{width:"100%",height:"100%",padding:"8px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:b(U,{sx:{display:"flex",flexDirection:"column"},children:[b(U,{gap:1,sx:{display:"flex",alignItems:"center"},children:[i(G,{size:o.iconsSize,src:bc(r)}),i(O,{variant:o.charNameVariant,sx:{fontWeight:"900",maxWidth:o.charNameWidth,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:i(Gr,{characterKey:e})}),i(kl,{ele:s,iconProps:{sx:{fontSize:`${o.iconsSize}em`}}}),i(G,{size:o.iconsSize,src:xc(d)}),o.isEditing?"":i(O,{variant:"h5",color:"primary",sx:{fontWeight:"900"},children:c("mindscape",{level:g?g.mindscape:0})})]}),o.isEditing?"":b(U,{sx:{mt:"12px",display:"flex",gap:"14px",flexWrap:"wrap"},children:[b(U,{sx:x=>({border:`2px solid ${x.palette.contentZzz.main}`,borderRadius:"20px",display:"flex"}),children:[i(O,{sx:{fontWeight:"900",paddingLeft:"12px",fontSize:"16px"},children:c("charLevel",{level:a})}),b(O,{color:"primary",sx:{fontWeight:"900",paddingLeft:"4px",pr:"10px"},children:["/ ",wc[n]]})]}),b(U,{gap:1.5,sx:{display:"flex",alignItems:"center"},children:[ri.map((x,S)=>i(Vi,{anchorOrigin:{vertical:"bottom",horizontal:"left"},badgeContent:`${g?g[x]:0}`,color:"primary",children:i(G,{size:1.9,src:ae(x)})},S)),i(Vi,{anchorOrigin:{vertical:"bottom",horizontal:"left"},badgeContent:`${g?g.core:0}`,color:"primary",children:i(G,{size:1.9,src:ae("core")})},6)]})]})]})})}function Li({characterKey:e,charCardConfig:t}){const{t:n}=W("charNames_gen"),a={animation:"scroll 16s infinite linear","@keyframes scroll":{"0%":{transform:"translateX(-100%)"},"100%":{transform:"translateX(0)"}}};return i(U,{component:"span",sx:{color:"#000",marginTop:"20px",fontStyle:"italic",fontSize:t.scrollingBgSize,lineHeight:"150px",whiteSpace:"nowrap",textTransform:"uppercase",display:"flex",justifyContent:"center",fontFamily:"Impact",opacity:.1,...a},children:n(`${e}`)})}function Qr({mindscape:e,setMindscape:t}){const{t:n}=W("page_characters");return i(I,{sx:{display:"flex",flexWrap:"wrap",gap:2,mt:"12px"},children:di(1,6).map(a=>i(I,{children:i(Ct,{sx:{position:"relative",borderRadius:"40px"},children:i(Tr,{control:i(Cl,{checked:e>=a,onChange:()=>t(a===e?a-1:a)}),label:b(I,{sx:{position:"absolute",top:9,left:e>=a?75:16,transition:"left 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",textAlign:"center"},children:[i(O,{variant:"subtitle1",sx:o=>({fontWeight:900,color:e>=a?o.palette.mindscapeActive.main:o.palette.mindscapeInactive.main}),children:n("mindscape",{level:a})}),i(O,{variant:"subtitle2",sx:o=>({lineHeight:.2,fontWeight:900,color:e>=a?o.palette.mindscapeActive.main:o.palette.mindscapeInactive.main}),children:n("mindscapeTitle")})]}),sx:{margin:0}})})},a))})}function Xr(e){return{new:t=>e.chars.get(t)?0:1,name:t=>vc.t(t).toString(),level:t=>{const n=e.chars.get(t);return n?n.level*(n.promotion+1):0},rarity:t=>X(t).rarity??0}}function ed(e){return{attribute:(t,n)=>n.includes(X(t).attribute),specialtyType:(t,n)=>n.includes(X(t).specialty),rarity:(t,n)=>n.includes(X(t).rarity),name:(t,n)=>n===void 0||vc.t(t).toLowerCase().includes(n.toLowerCase()),new:(t,n)=>n===void 0||n===(e.chars.get(t)?"no":"yes")}}const Nc={name:["name"],level:["level","rarity","name"],rarity:["rarity","level","name"]};function Fy({show:e,onHide:t,onSelect:n,newFirst:a=!1}){const{database:o}=te(),c=kc(o.displayCharacter),[s,r]=w.useState(""),d=w.useDeferredValue(s),g=w.useDeferredValue(c),x=w.useMemo(()=>{const{attribute:$,specialtyType:y,sortType:v,ascending:D}=g,A=[...a?["new"]:[],...Nc[v]??[]];return Sl.filter(Cc({attribute:$,specialtyType:y,name:d},ed(o))).sort(Dl(A,D,Xr(o),["new"]))},[g,a,d,o]);return i(nd,{show:e,charactersToShow:x,filterSearchSortProps:{searchTerm:s,onChangeSpecialtyFilter:$=>{o.displayCharacter.set({specialtyType:$})},onChangeAttributeFilter:$=>{o.displayCharacter.set({attribute:$})},onChangeSearch:$=>{r($.target.value)},onChangeSort:$=>{o.displayCharacter.set({sortType:$})},onChangeAsc:$=>{o.displayCharacter.set({ascending:$})}},onClose:()=>{r(""),t()},children:i(ee,{sx:{flex:"1",overflow:"auto"},children:i(w.Suspense,{fallback:i(de,{variant:"rectangular",width:"100%",height:1e3}),children:i(H,{container:!0,spacing:.5,columns:{xs:2,sm:3,md:4,lg:5},children:x.map($=>i(H,{item:!0,xs:1,children:i(_e,{bgt:"light",sx:y=>({position:"relative",flexGrow:1,display:"flex",flexDirection:"column",borderRadius:"40px 16px 16px 40px",border:`3px solid ${y.palette.contentZzz.main}`}),children:i(id,{characterKey:$,onClick:()=>{t(),n($)}})})},$))})})})})}const td=Object.keys(Nc);function nd({show:e,charactersToShow:t,filterSearchSortProps:n,onClose:a,children:o}){const{t:c}=W("page_characters"),{database:s}=te(),r=kc(s.displayCharacter),d=w.useMemo(()=>Ei(Sc,y=>s.chars.entries.forEach(([v,D])=>{const A=X(D.key).specialty;y[A].total++,t.includes(v)&&y[A].current++})),[t,s.chars.entries]),g=w.useMemo(()=>Ei(fe,y=>Object.entries(s.chars.data).forEach(([v])=>{const D=X(v).attribute;y[D].total++,t.includes(v)&&y[D].current++})),[t,s.chars.data]),{specialtyType:x,attribute:S,sortType:C,ascending:$}=r;return i(gi,{open:e,onClose:a,containerProps:{sx:{height:"100vh",p:{xs:1}}},children:b(_e,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[b(ee,{sx:{display:"flex",flexDirection:"column",gap:1},children:[b(I,{sx:{display:"flex",justifyContent:"space-between"},children:[b(I,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:[i(Ml,{onChange:y=>s.displayCharacter.set({specialtyType:y}),value:x,totals:d,size:"small"}),i(Tl,{onChange:y=>s.displayCharacter.set({attribute:y}),value:S,totals:g,size:"small"})]}),i(hi,{sx:{ml:"auto"},onClick:()=>a(),children:i(ui,{})})]}),b(I,{display:"flex",gap:1,children:[i(zl,{autoFocus:!0,value:n.searchTerm,onChange:y=>n.onChangeSearch(y),label:c("characterName"),size:"small",sx:{height:"100%",mr:"auto"},InputProps:{sx:{height:"100%"}}}),i(Bl,{sortKeys:td,value:C,onChange:y=>n.onChangeSort(y),ascending:$,onChangeAsc:y=>n.onChangeAsc(y)})]})]}),i(vt,{}),o]})})}function id({characterKey:e,onClick:t}){const{t:n}=W(["page_characters","charNames_gen"]),a=Rl(),o=on(e),{rarity:c,attribute:s}=X(e),{level:r=1,promotion:d=0,mindscape:g=0}=o??{},x=s==="electric"?a.palette[s].light:a.palette[s].main;return i(li,{onClick:t,children:b(I,{sx:{position:"relative",width:"100%",display:"flex",padding:"3px",gap:.5,"&::before":{content:'""',display:"block",position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:.7,background:x}},children:[i(I,{sx:{maxWidth:{xs:"33%",lg:"30%"},alignSelf:"flex-end",display:"flex",flexDirection:"column",zIndex:1,flexShrink:1},children:i(I,{component:Xt?Xt:"img",src:Il(e,"interknot")})}),b(I,{sx:{display:"flex",flexDirection:"column",zIndex:1,justifyContent:"space-evenly"},children:[b(I,{sx:{display:"flex",alignItems:"center",gap:.5},children:[i(G,{size:1.5,src:bc(c)}),i(O,{variant:"subtitle2",sx:S=>({flexGrow:1,color:S.palette.contentNormal.main,fontWeight:"900"}),children:n(`charNames_gen:${e}`)})]}),o?b(I,{sx:S=>({display:"flex",gap:1,alignItems:"center",background:S.palette.contentNormal.main,padding:"4px 12px",borderRadius:"20px"}),children:[b(I,{sx:{textShadow:"0 0 5px gray"},children:[i(O,{variant:"body2",component:"span",whiteSpace:"nowrap",children:n("charLevel",{level:r})}),b(O,{variant:"body2",component:"span",color:"text.secondary",children:["/",wc[d]]})]}),b(O,{variant:"body2",children:["M",g]})]}):i(O,{component:"span",variant:"body2",children:i(si,{color:"electric",children:n("characterEditor.new")})})]})]})})}function ad(){const{t:e}=W("page_characters"),{database:t}=te(),n=an(),{core:a=0,promotion:o=0,key:c}=n??{},s=w.useCallback(r=>c&&t.chars.set(c,{core:r}),[t,c]);return i(Rc,{fullWidth:!0,title:e("core",{level:a}),color:"primary",startIcon:i(G,{src:ae("core"),size:1.75,sideMargin:!0}),children:di(0,El[o]).map(r=>i(Dc,{selected:a===r,disabled:a===r,onClick:()=>s(r),children:e("core",{level:r})},r))})}const od={xs:2*3,sm:2*3,md:3*3,lg:4*3,xl:4*3};function Gc({disc:e,onChangeId:t,slotKey:n,show:a,onClose:o}){const{t:c}=W(["page_characters","disc"]),{database:s}=te(),r=e==null?void 0:e.id,d=w.useCallback((R,E)=>({...R,...E,slotKeys:[n]}),[n]),[g,x]=w.useReducer(d,{...yr(),slotKeys:[n]}),S=Ol(),C=w.useMemo(()=>_r(),[]),$=Pl(s.discs),y=$.filter(R=>R.slotKey===g.slotKeys[0]).length,v=w.useMemo(()=>{const R=Cc(g,C);let E=$.filter(R).map(P=>P.id);return r&&s.discs.get(r)&&(E=E.filter(P=>P!==r),E.unshift(r)),E},[g,C,$,r,s.discs]),{numShow:D,setTriggerElement:A}=Vl(od[S],v.length),L=w.useMemo(()=>v.slice(0,D),[v,D]),Y=v.length!==y?`${v.length}/${y}`:`${y}`,Z={numShowing:L.length,total:Y,t:c,namespace:"disc"},F=w.useCallback(R=>{ql.includes(R)?t(null):R&&t(R),o()},[t,o]);return i(gi,{open:a,onClose:o,containerProps:{maxWidth:"xl"},children:b(_e,{children:[b(ee,{sx:{py:1,display:"flex",alignItems:"center"},children:[i(O,{variant:"h6",children:c("tabEquip.swapDisc")}),i(hi,{onClick:o,sx:{ml:"auto"},children:i(ui,{})})]}),i(vt,{}),i(ee,{children:i(w.Suspense,{fallback:i(de,{variant:"rectangular",width:"100%",height:200}),children:i(Al,{filterOption:g,filterOptionDispatch:x,filteredIds:v,disableSlotFilter:!0})})}),i(vt,{}),b(ee,{children:[i(I,{pb:1,display:"flex",justifyContent:"space-between",alignItems:"flex-end",flexWrap:"wrap",children:i(Fl,{showingTextProps:Z})}),i(I,{mt:1,children:i(w.Suspense,{fallback:i(de,{variant:"rectangular",width:"100%",height:1e3}),children:b(H,{container:!0,spacing:1,columns:{xs:2,md:3,lg:4},children:[r&&i(H,{item:!0,xs:1,children:i(_e,{bgt:"light",sx:{width:"100%",height:"100%"},children:i(li,{sx:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},onClick:()=>F(n),children:b(I,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[i(Ll,{sx:{fontSize:"10em"}}),i(O,{children:c("disc:button.unequipDisc")})]})})})}),L.map(R=>i(H,{item:!0,xs:1,sx:E=>({...r===R&&{"> .MuiCard-root":{outline:`${E.spacing(.5)} solid ${E.palette.warning.main}`}}}),children:i(Ic,{disc:s.discs.get(R),onClick:r===R?void 0:()=>F(R)})},R))]})})}),v.length!==L.length&&i(de,{ref:R=>{R&&A(R)},sx:{borderRadius:1,mt:1},variant:"rectangular",width:"100%",height:100})]})]})})}function sd(e){return"fieldRef"in e}var yt={},ji;function cd(){if(ji)return yt;ji=1;var e=jl();Object.defineProperty(yt,"__esModule",{value:!0}),yt.default=void 0;var t=e(Hl()),n=Kl(),a=(0,t.default)((0,n.jsx)("path",{d:"M6.99 11 3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z"}),"SwapHoriz");return yt.default=a,yt}var ld=cd();const Rt=Wl(ld),rd={xs:1,sm:2,md:3,lg:3,xl:3};function dd({setWengine:e,setDisc:t}){const{database:n}=te(),a=w.useContext(Mc),[o,c]=w.useState(),[s,r]=w.useState(""),d=w.useCallback(y=>{r(y)},[]),g=w.useCallback(y=>{c(y)},[]),x=Tc(a==null?void 0:a.equippedWengine),S=a?X(a.key).specialty:Sc[0],C=zc(a==null?void 0:a.equippedDiscs),$=Nl(o);return i(I,{children:b(uc,{spacing:2,children:[i(w.Suspense,{fallback:!1,children:s&&i(Gl,{wengineId:s,footer:!0,onClose:()=>r(""),extraButtons:i(pd,{wengineId:(x==null?void 0:x.id)||"",wengineTypeKey:S,onChangeId:e})})}),i(w.Suspense,{fallback:!1,children:$&&i(Ul,{disc:$,show:!!o,onShow:()=>c(o),onClose:()=>c(void 0),cancelEdit:()=>c(void 0)})}),i(I,{children:x!=null&&x.id?i(Jl,{wengine:x,onEdit:()=>d(x.id),extraButtons:i(md,{wengineId:x.id,wengineTypeKey:S,onChangeId:e})}):i(hd,{wengineId:"",wengineTypeKey:S,onChangeId:e})}),i(I,{children:i(H,{item:!0,columns:rd,container:!0,spacing:1,children:!!C&&Object.entries(C).map(([y,v])=>i(H,{item:!0,xs:1,children:v!=null&&v.id?i(Ic,{disc:v,extraButtons:i(gd,{disc:v,slotKey:y,onChangeId:D=>t(y,D)}),onEdit:()=>g(v.id),onLockToggle:()=>n.discs.set(v.id,({lock:D})=>({lock:!D}))}):i(ud,{slotKey:y,onChangeId:D=>t(y,D)})},(v==null?void 0:v.id)||y))})})]})})}function hd({wengineId:e,wengineTypeKey:t,onChangeId:n}){const[a,o,c]=St();return b(Ct,{bgt:"light",sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[i(ee,{children:b(O,{children:[i(G,{src:xc(t)})," "]})}),i(vt,{}),b(I,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:[i(mi,{wengineId:e,wengineTypeKey:t,show:a,onClose:c,onChangeId:n}),i(be,{onClick:o,color:"info",sx:{borderRadius:"1em"},children:i(Rt,{sx:{height:100,width:100}})})]})]})}function ud({slotKey:e,onChangeId:t}){const[n,a,o]=St(),{t:c}=W("disc");return b(Ct,{bgt:"light",sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[i(ee,{children:i(O,{children:c("slotName",{slotKey:e})})}),i(vt,{}),b(I,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:[i(Gc,{disc:void 0,slotKey:e,show:n,onClose:o,onChangeId:t}),i(be,{onClick:a,color:"info",sx:{borderRadius:"1em"},children:i(Rt,{sx:{height:100,width:100}})})]})]})}function gd({disc:e,slotKey:t,onChangeId:n}){const{t:a}=W("page_characters"),[o,c,s]=St();return b(Dt,{children:[i(Bc,{title:i(O,{children:a("tabEquip.swapDisc")}),placement:"top",arrow:!0,children:i(be,{color:"info",size:"small",onClick:c,"aria-label":a("tabEquip.swapDisc"),children:i(Rt,{})})}),i(Gc,{disc:e,slotKey:t,show:o,onClose:s,onChangeId:n})]})}function md({wengineId:e,wengineTypeKey:t,onChangeId:n}){const{t:a}=W("page_characters"),[o,c,s]=St();return b(Dt,{children:[i(Bc,{title:i(O,{children:a("tabEquip.swapWengine")}),placement:"top",arrow:!0,children:i(be,{color:"info",size:"small",onClick:c,children:i(Rt,{})})}),i(mi,{wengineId:e,wengineTypeKey:t,onChangeId:n,show:o,onClose:s})]})}function pd({wengineId:e,wengineTypeKey:t,onChangeId:n}){const{t:a}=W("page_characters"),[o,c,s]=St();return b(Dt,{children:[i(be,{color:"info",onClick:c,startIcon:i(Rt,{}),children:a("tabEquip.swapWengine")}),i(mi,{wengineId:e,wengineTypeKey:t,onChangeId:n,show:o,onClose:s})]})}function fd({skillKey:e}){const{database:t}=te(),{t:n}=W("page_characters"),a=an(),{[e]:o=0,promotion:c=0,key:s}=a??{},r=w.useCallback(d=>s&&t.chars.set(s,{[e]:d}),[t,s,e]);return i(Rc,{fullWidth:!0,title:n(e,{level:o}),color:"primary",startIcon:i(G,{src:ae(e),size:1.75,sideMargin:!0}),children:di(1,Yl[c]).map(d=>i(Dc,{selected:o===d,disabled:o===d,onClick:()=>r(d),children:n(e,{level:d})},d))})}function sn(){const e=w.useContext(pi),t=w.useContext(Zl);return w.useMemo(()=>e==null?void 0:e.withTag(t),[e,t])}const K=(e,t)=>i(Qt,{ns:"sheet",key18:e,values:t});function h(e,t){return[(n,a)=>i(Qt,{ns:`${e}_${t}_gen`,key18:n,values:a}),(n,a)=>i(Qt,{ns:`${e}_${t}`,key18:n,values:a})]}function l(e){return{title:i(cn,{tag:e}),fieldRef:e}}function $d(e){if(!e)return"";const{et:t,q:n,qt:a,name:o}=e;return t==="own"&&a==="formula"&&n!=="base"?o??n??"":n??""}const yd={initial:"Initial",combat:"Combat",final:"Final",base:"Base"};function cn({tag:e,showPercent:t,preventRecursion:n}){return i($e,{color:zy(e),children:i(xd,{tag:e,showPercent:t,preventRecursion:n})})}function Ly({tag:e,showPercent:t}){return b(Dt,{children:[i(cn,{tag:e,showPercent:t}),Ey(e).map(n=>i(si,{children:tn[n]},n)),e.attribute&&i(si,{color:e.attribute,children:i(Ur,{attribute:e.attribute})})]})}const _d=["hp","hp_","atk","atk_","def","def_"],bd=e=>_d.includes(e),Hi={dmg_:"DMG",common_dmg_:"DMG",defIgn_:"DEF Ignore",resIgn_:"Res Ignore",dazeInc_:"Daze Increase"};function xd({tag:e,showPercent:t,preventRecursion:n}){var s;const a=sn(),o=(s=Oy.subset(e)[0])==null?void 0:s.title;if(o&&!n)return o;if(e.qt==="cond"&&e.q&&e.sheet&&a){const r=ci.get(`${e.sheet}:${e.q}`);if(r)return Ql(r.label,a,a==null?void 0:a.compute(new Xl(e,"max")).val)}const c=$d(e);if(bd(c))return b("span",{children:[i(tr,{statKey:c,iconProps:er})," ",b("span",{children:[(e.qt&&yd[e.qt])??e.qt," ",nr[c],t&&Ec(c)]})]});if(Hi[c]){const r=[...e.attribute?[le[e.attribute]]:[],...e.damageType1?[tn[e.damageType1]]:[],...e.damageType2?[tn[e.damageType2]]:[],Hi[c]];return i("span",{children:r.join(" ")})}return i(Gt,{statKey:c,showPercent:t})}function wd(){const e=sn();return i(Ct,{children:i(ee,{children:e==null?void 0:e.listFormulas(q.listing.formulas).map((t,n)=>i(vd,{read:t},n))})})}function vd({read:e}){var v,D,A,L,Y,Z,F;const t=sn(),{setRead:n}=w.useContext(ir),a=an(),o=Vr(a==null?void 0:a.key),c=e.tag.sheet===((v=o==null?void 0:o.target)==null?void 0:v.sheet)&&e.tag.name===((D=o==null?void 0:o.target)==null?void 0:D.name)||((A=o==null?void 0:o.target)==null?void 0:A.q)===e.tag.q,s=w.useMemo(()=>{var R,E,P,Q;return e.tag.sheet===((R=o==null?void 0:o.target)==null?void 0:R.sheet)&&e.tag.name===((E=o==null?void 0:o.target)==null?void 0:E.name)?ar(e.tag,(P=o==null?void 0:o.target)==null?void 0:P.damageType1,(Q=o==null?void 0:o.target)==null?void 0:Q.damageType2):e.tag},[e.tag,(L=o==null?void 0:o.target)==null?void 0:L.sheet,(Y=o==null?void 0:o.target)==null?void 0:Y.name,(Z=o==null?void 0:o.target)==null?void 0:Z.damageType1,(F=o==null?void 0:o.target)==null?void 0:F.damageType2]),r=w.useMemo(()=>({...e,tag:s}),[s,e]),d=t==null?void 0:t.compute(r),g=s.name||s.q,{statHighlight:x,setStatHighlight:S}=w.useContext(or),C=s.name?"":s.attribute?`${s.attribute}_${s.q}`:s.q==="cappedCrit_"?"crit_":s.q,$=C?sr(x,C):!1;if(!d)return null;const y=cr(d.val,Ec(g??""));return b(I,{onMouseEnter:()=>C&&S(C),onMouseLeave:()=>S(""),sx:{display:"flex",gap:1,alignItems:"center",p:.5,borderRadius:.5,backgroundColor:c?"rgba(0,200,0,0.2)":void 0,position:"relative","::after":{content:'""',position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:.5,backgroundColor:lr($),transition:"background-color 0.3s ease-in-out",pointerEvents:"none"}},children:[i(I,{sx:{flexGrow:1},children:i(cn,{tag:s})}),y,i(rr,{tag:s,onClick:()=>{}})]})}function jy({characterKey:e,onClose:t}){return i(gi,{open:!!e,onClose:t,children:i(w.Suspense,{fallback:i(de,{variant:"rectangular",width:"100%",height:1e3}),children:e&&i(kd,{characterKey:e,onClose:t},e)})})}function kd({characterKey:e,onClose:t}){const n=on(e);return i(_e,{children:i(ee,{sx:{display:"flex",flexDirection:"column",gap:1},children:i(w.Suspense,{fallback:i(de,{variant:"rectangular",width:"100%",height:1e3}),children:n?i(Mc.Provider,{value:n,children:i(Sd,{onClose:t})}):i(de,{variant:"rectangular",width:"100%",height:1e3})})})})}const Cd={cardWidth:"500px",charImgWidth:"75%",iconsSize:1.5,isEditing:!0,charNameWidth:"166px",charNameVariant:"h6",scrollingBgSize:"220px"};function Sd({onClose:e}){const{t}=W(["page_characters"]),n=dr(),{database:a}=te(),o=an(),{key:c,equippedDiscs:s,equippedWengine:r}=o,d=w.useCallback(async()=>{const g=t(`${c}`);window.confirm(t("removeCharacter",{value:g}))&&(a.chars.remove(c),n("/characters"))},[a,n,c,t]);return b(I,{display:"flex",flexDirection:"column",gap:1,children:[b(I,{display:"flex",gap:1,children:[i(be,{color:"error",onClick:()=>d(),startIcon:i(hr,{}),sx:{marginLeft:"auto"},children:t("characterEditor.delete")}),!!e&&i(hi,{onClick:e,children:i(ui,{})})]}),i(I,{children:b(H,{container:!0,spacing:1,sx:{justifyContent:"center"},children:[i(H,{item:!0,xs:6,sm:4,md:4,lg:4,xl:4,children:b(_e,{sx:{height:"100%",display:"flex",flexDirection:"column",gap:1},children:[i(Jr,{characterKey:c,charCardConfig:Cd}),i(I,{sx:{px:1},children:i(ur,{level:o.level,milestone:o.promotion,setBoth:({level:g,milestone:x})=>a.chars.set(c,{level:g,promotion:x})})}),i(wd,{}),i(Qr,{mindscape:o.mindscape,setMindscape:g=>a.chars.set(c,{mindscape:g})})]})}),b(H,{item:!0,xs:6,sm:8,md:8,lg:8,xl:8,sx:{display:"flex",flexDirection:"column",gap:1},children:[i(I,{children:b(H,{container:!0,columns:3,spacing:1,children:[ri.map(g=>i(H,{item:!0,xs:1,children:i(fd,{skillKey:g},g)},g)),i(H,{item:!0,xs:1,children:i(ad,{})},"core")]})}),i(I,{children:i(dd,{setWengine:g=>{g?a.wengines.set(g,{location:c}):r&&a.wengines.set(r,{location:""})},setDisc:(g,x)=>{x?a.discs.set(x,{location:c}):s[g]&&a.discs.set(s[g],{location:""})}})})]})]})})]})}function Hy({character:e,charOpt:t,wengineId:n,discIds:a,children:o}){const c=Dd(e,n,a),s=w.useMemo(()=>Wc([...Kc([e.key]),...c,Yt.common.critMode.add(t.critMode),J.common.lvl.add(t.enemyLvl),J.common.def.add(t.enemyDef),J.common.isStunned.add(t.enemyisStunned?1:0),J.common.stun_.add(t.enemyStunMultiplier/100),J.common.unstun_.add(1),...t.conditionals.flatMap(({sheet:d,src:g,dst:x,condKey:S,condValue:C})=>Ut("preset0",Oc(d,g,x)(S,C))),...t.bonusStats.filter(({disabled:d})=>!d).flatMap(({tag:d,value:g})=>Ut("preset0",{tag:{...d,src:e.key,sheet:"agg",et:"own"},value:Oi(Pi(g,d.q??""))})),...t.enemyStats.flatMap(({tag:d,value:g})=>Ut("preset0",{tag:{...d,qt:"common",et:"enemy",sheet:"agg"},value:Oi(Pi(g,d.q??""))}))]),[c,t,e.key]),r=w.useMemo(()=>s&&new Map,[s]);return i(gr.Provider,{value:r,children:i(pi.Provider,{value:s,children:o})})}function Dd(e,t,n){const a=Tc(t),o=zc(n),c=w.useMemo(()=>Kr(a),[a]),s=w.useMemo(()=>Wr(Object.values(o).filter(mr)),[o]);return w.useMemo(()=>Lc(e.key,...jc(e),...c,...s),[e,c,s])}function Ky({character:e,conditionals:t,children:n}){const a=w.useMemo(()=>Wc([...Kc([e.key]),...Lc(e.key,...jc(e),...Hc({},Pc(yc,()=>4)),V.sheet("agg").reread(V.sheet("wengine")),q.wengine.lvl.add(60),q.wengine.modification.add(5),q.wengine.phase.add(1),...$c.map(o=>q.common.count.sheet(o).add(1))),Yt.common.critMode.add("avg"),J.common.lvl.add(100),J.common.def.add(900),J.common.isStunned.add(0),J.common.stun_.add(1.5),J.common.unstun_.add(1),...t.flatMap(({sheet:o,src:c,dst:s,condKey:r,condValue:d})=>Ut("preset0",Oc(o,c,s)(r,d)))]),[e,t]);return i(pi.Provider,{value:a,children:n})}function k(e,t={}){return{...Rd(e,t==null?void 0:t.perSkillAbility),core:Md(e,t==null?void 0:t.core,t==null?void 0:t.ability),m1:ge(e,1,t==null?void 0:t.m1),m2:ge(e,2,t==null?void 0:t.m2),m3:ge(e,3,t==null?void 0:t.m3),m4:ge(e,4,t==null?void 0:t.m4),m5:ge(e,5,t==null?void 0:t.m5),m6:ge(e,6,t==null?void 0:t.m6)}}function M(e){return{title:i(cn,{tag:e.tag,preventRecursion:!0}),fieldRef:e.tag}}function Rd(e,t){const n=_.char[e],a=ue[e],[o,c]=h("char",e);return Pc(ri,s=>({title:s,img:ae(`${s}Flat`),documents:Object.keys(n[s]).flatMap(r=>{var d;return[{type:"text",header:{icon:i(G,{src:ae(`${s}Flat`),size:1.5}),text:o(`${s}.${r}.name`)},text:o(`${s}.${r}.desc`)},{type:"fields",fields:Object.values(a).filter(g=>g.name.includes(r)).map(g=>({title:Id(e,s,g.name),fieldRef:g.tag}))},...((d=t==null?void 0:t[s])==null?void 0:d[r])??[]]})}))}function Id(e,t,n){const[a,o,c]=n.split("_");return K(c,{val:`$t(char_${e}_gen:${t}.${a}.params.${o})`})}function Md(e,t=[],n=[]){const[a,o]=h("char",e);return{title:"core",documents:[{type:"text",header:{icon:i(G,{src:ae("coreFlat"),size:1.5}),text:a("core.name")},text:c=>a(`core.desc.${c.compute(q.char.core).val}`)},...t,{type:"text",header:{icon:i(G,{src:ae("coreFlat"),size:1.5}),text:a("ability.name")},text:a("ability.desc")},...n]}}function ge(e,t,n=[]){const[a,o]=h("char",e);return{title:`mindscape${t}`,documents:[{type:"text",header:{icon:i(G,{src:pr(t),size:1.5}),text:a(`mindscapes.${t}.name`)},text:b(Dt,{children:[a(`mindscapes.${t}.desc`),i("br",{}),i("br",{}),i("i",{children:a(`mindscapes.${t}.flavor`)})]})},...n]}}const ln="Anby",[,jt]=h("char",ln),qn=m[ln],me=u[ln],Td=k(ln,{core:[{type:"conditional",conditional:{label:jt("coreCond"),metadata:qn.core_after3rdBasic,fields:[{title:jt("core_dazeInc_"),fieldRef:me.core_after3rdBasic_dazeInc_.tag}]}}],m1:[{type:"conditional",conditional:{label:jt("m1Cond"),metadata:qn.m1After4thBasicHit,fields:[M(me.m1_after4thHit_energyRegen_)]}}],m2:[{type:"fields",fields:[M(me.m2_stunned_basic_dmg_),M(me.m2_unstunned_ex_dazeInc_)]}],m6:[{type:"conditional",conditional:{label:jt("m6Cond"),metadata:qn.m6ChargeConsumed,fields:[M(me.m6_charge_basic_dmg_),M(me.m6_charge_exSpecial_dmg_)]}}]}),zd="Anton",Bd=k(zd),Ed="AstraYao",Od=k(Ed),Pd="Ben",Vd=k(Pd),qd="Billy",Ad=k(qd),xe="Burnice",[,N]=h("char",xe),Ki=m[xe],ie=u[xe],Ht=ue[xe],Fd=_.char[xe],Ld=k(xe,{core:[{type:"fields",fields:[{title:N("core_afterburn_dmg"),fieldRef:Ht.core_afterburn_dmg.tag},{title:N("core_afterburn_anomBuildup"),fieldRef:Ht.core_afterburn_anomBuildup.tag},{title:N("core_afterburn_dmg_"),fieldRef:ie.core_afterburn_dmg_.tag}]}],ability:[{type:"fields",fields:[M(ie.ability_fire_anomBuildup_)]}],m1:[{type:"fields",fields:[{title:N("m1_afterburn_mv_mult"),fieldValue:Fd.m1.afterburn_dmg*100,unit:"%"},{title:N("m1_afterburn_anomBuildup"),fieldRef:ie.m1_afterburn_fire_anomBuildup_.tag}]}],m2:[{type:"conditional",conditional:{label:N("m2Cond"),metadata:Ki.thermal_penetration,fields:[M(ie.m2_pen_)]}}],m4:[{type:"fields",fields:[{title:N("m4_exSpecial_crit_"),fieldRef:ie.m4_exSpecial_crit_.tag},{title:N("m4_assistSkill_crit_"),fieldRef:ie.m4_assistSkill_crit_.tag}]}],m6:[{type:"fields",fields:[{title:N("m6_additional_afterburn_dmg"),fieldRef:Ht.m6_additional_afterburn_dmg.tag}]},{type:"conditional",conditional:{label:N("m6Cond"),metadata:Ki.exSpecial_active,fields:[M(ie.m6_burn_fire_resIgn_),{title:N("m6_fire_resIgn"),fieldRef:ie.m6_fire_resIgn_.tag},{title:N("m6_additional_burn_dmg"),fieldRef:Ht.m6_additional_burn_dmg.tag}]}}]}),jd="Caesar",Hd=k(jd),Kd="Corin",Wd=k(Kd),Nd="Ellen",Gd=k(Nd),It="Evelyn",[,oe]=h("char",It),An=m[It],pe=u[It],Wi=ue[It],Ud=k(It,{core:[{type:"conditional",conditional:{label:oe("coreCond"),metadata:An.binding_seal,fields:[M(pe.core_crit_)]}}],ability:[{type:"fields",fields:[{title:oe("ability_dmg_"),fieldRef:pe.ability_chain_ult_dmg_.tag},{title:oe("ability_mv_mult"),fieldRef:pe.ability_chainSkill_mv_mult.tag}]}],m1:[{type:"conditional",conditional:{label:oe("m1Cond"),metadata:An.enemy_bound,fields:[M(pe.m1_defIgn_)]}}],m2:[{type:"fields",fields:[M(pe.m2_atk_)]}],m4:[{type:"fields",fields:[{title:oe("m4_shield"),fieldRef:Wi.m4_shield.tag}]},{type:"conditional",conditional:{label:oe("m4Cond"),metadata:An.m4_shield_exists,fields:[M(pe.m4_crit_dmg_)]}}],m6:[{type:"fields",fields:[{title:oe("m6_follow_up_dmg"),fieldRef:Wi.m6_follow_up_dmg_.tag}]}]}),Jd="Grace",Yd=k(Jd),Zd="Harumasa",Qd=k(Zd),Xd="Hugo",eh=k(Xd),th="Jane",nh=k(th),ih="JuFufu",ah=k(ih),oh="Koleda",sh=k(oh),ch="Lighter",lh=k(ch),rh="Lucy",dh=k(rh),hh="Lycaon",uh=k(hh),gh="Miyabi",mh=k(gh),ph="Nekomata",fh=k(ph),rn="Nicole",[,Fn]=h("char",rn),Ni=m[rn],_t=u[rn],$h=k(rn,{core:[{type:"conditional",conditional:{label:Fn("coreCond"),metadata:Ni.bulletsOrFieldHit,fields:[M(_t.core_defRed_)]}}],ability:[{type:"fields",fields:[M(_t.ability_ether_dmg_)]}],m1:[{type:"fields",fields:[M(_t.m1_exSpecial_dmg_),{title:Fn("m1_exSpecial_anomBuildup"),fieldRef:_t.m1_exSpecial_anomBuildup_.tag}]}],m6:[{type:"conditional",conditional:{label:Fn("m6Cond"),metadata:Ni.fieldHitsEnemy,fields:[M(_t.m6_crit_)]}}]}),yh="PanYinhu",_h=k(yh),bh="Piper",xh=k(bh),wh="Pulchra",vh=k(wh),kh="Qingyi",Ch=k(kh),Sh="Rina",Dh=k(Sh),Rh="Seth",Ih=k(Rh),Mh="Soldier0Anby",Th=k(Mh),zh="Soldier11",Bh=k(zh),Eh="Soukaku",Oh=k(Eh),Mt="Trigger",[,se]=h("char",Mt),Gi=m[Mt],bt=u[Mt],Ln=ue[Mt],Ph=k(Mt,{core:[{type:"conditional",conditional:{label:se("coreCond"),metadata:Gi.aftershock_hit,fields:[M(bt.core_stun_)]}}],ability:[{type:"fields",fields:[{title:se("ability_dazeInc_"),fieldRef:bt.ability_aftershock_dazeInc_.tag}]}],m1:[{type:"fields",fields:[M(bt.m1_stun_)]}],m2:[{type:"conditional",conditional:{label:se("m2Cond"),metadata:Gi.hunters_gaze,fields:[M(bt.m2_crit_dmg_)]}}],m4:[{type:"fields",fields:[{title:se("m4_disconnect_dmg"),fieldRef:Ln.m4_disconnect_dmg.tag},{title:se("m4_disconnect_daze"),fieldRef:Ln.m4_disconnect_daze.tag}]}],m6:[{type:"fields",fields:[{title:se("m6_armor_break_rounds_dmg"),fieldRef:Ln.m6_armor_break_rounds_dmg.tag},{title:se("m6_armor_break_rounds_dmg_"),fieldRef:bt.m6_armor_break_rounds_dmg_.tag}]}]}),Vh="Vivian",qh=k(Vh),Ah="Yanagi",Fh=k(Ah),Lh="Yixuan",jh=k(Lh),Tt="ZhuYuan",[,ce]=h("char",Tt),jn=m[Tt],xt=u[Tt],Hh=ue[Tt],Kh=k(Tt,{core:[{type:"fields",fields:[{title:ce("core_dmg_"),fieldRef:xt.core_dmg_.tag}]}],ability:[{type:"conditional",conditional:{label:ce("abilityCond"),metadata:jn.ex_chain_ult_used,fields:[M(xt.ability_crit_)]}}],m2:[{type:"conditional",conditional:{label:ce("m2SuppresiveModeCond"),metadata:jn.suppresive_mode,fields:[M(xt.m2_dmg_red_)]}},{type:"conditional",conditional:{label:ce("m2BasicDashEtherCond"),metadata:jn.shotshells_hit,fields:[{title:ce("m2_basic_dash_ether_dmg_"),fieldRef:xt.m2_basic_dash_ether_dmg_.tag}]}}],m4:[{type:"fields",fields:[{title:ce("m4_ether_resIgn_"),fieldRef:xt.m4_basic_dash_ether_res_ign_.tag}]}],m6:[{type:"fields",fields:[{title:ce("m6_ether_afterglow"),fieldRef:Hh.m6_ether_afterglow.tag}]}]}),Wh={Anby:Td,Anton:Bd,AstraYao:Od,Ben:Vd,Billy:Ad,Burnice:Ld,Caesar:Hd,Corin:Wd,Ellen:Gd,Evelyn:Ud,Grace:Yd,Harumasa:Qd,Hugo:eh,Jane:nh,JuFufu:ah,Koleda:sh,Lighter:lh,Lucy:dh,Lycaon:uh,Miyabi:mh,Nekomata:fh,Nicole:$h,Piper:xh,Pulchra:vh,Qingyi:Ch,Rina:Dh,Seth:Ih,Soldier0Anby:Th,Soldier11:Bh,Soukaku:Oh,Trigger:Ph,Vivian:qh,Yanagi:Fh,PanYinhu:_h,Yixuan:jh,ZhuYuan:Kh},dn="AstralVoice",[Ui,Nh]=h("disc",dn),Ji=T(dn),Gh=m[dn],Uh=u[dn],Jh={2:{title:i(z,{}),img:Ji,documents:[{type:"text",text:Ui("desc2")}]},4:{title:i(B,{}),img:Ji,documents:[{type:"text",text:Ui("desc4")},{type:"conditional",conditional:{label:Nh("set4_cond"),metadata:Gh.astral,fields:[l(Uh.set4_team_dmg_.tag)]}}]}},hn="BranchBladeSong",[Yi,Yh]=h("disc",hn),Zi=T(hn),Zh=m[hn],Qi=u[hn],Qh={2:{title:i(z,{}),img:Zi,documents:[{type:"text",text:Yi("desc2")}]},4:{title:i(B,{}),img:Zi,documents:[{type:"text",text:Yi("desc4")},{type:"fields",fields:[l(Qi.set4_passive.tag)]},{type:"conditional",conditional:{label:Yh("set4_cond"),metadata:Zh.apply_or_trigger,fields:[l(Qi.set4_cond.tag)]}}]}},un="ChaosJazz",[Xi,Xh]=h("disc",un),ea=T(un),eu=m[un],Kt=u[un],tu={2:{title:i(z,{}),img:ea,documents:[{type:"text",text:Xi("desc2")}]},4:{title:i(B,{}),img:ea,documents:[{type:"text",text:Xi("desc4")},{type:"fields",fields:[l(Kt.set4_passive_fire_dmg_.tag),l(Kt.set4_passive_electric_dmg_.tag)]},{type:"conditional",conditional:{label:Xh("set4_cond"),metadata:eu.while_off_field,fields:[{title:"EX Special Attack DMG",fieldRef:Kt.set4_off_field_special_dmg_.tag},{title:"Assist Attack Attack DMG",fieldRef:Kt.set4_off_field_assist_dmg_.tag}]}}]}},gn="ChaoticMetal",[ta,nu]=h("disc",gn),na=T(gn),iu=m[gn],ia=u[gn],au={2:{title:i(z,{}),img:na,documents:[{type:"text",text:ta("desc2")}]},4:{title:i(B,{}),img:na,documents:[{type:"text",text:ta("desc4")},{type:"fields",fields:[l(ia.set4_passive.tag)]},{type:"conditional",conditional:{label:nu("set4_cond"),metadata:iu.trigger_corruption,fields:[l(ia.set4_cond_trigger_corruption.tag)]}}]}},mn="FangedMetal",[aa,ou]=h("disc",mn),oa=T(mn),su=m[mn],cu=u[mn],lu={2:{title:i(z,{}),img:oa,documents:[{type:"text",text:aa("desc2")}]},4:{title:i(B,{}),img:oa,documents:[{type:"text",text:aa("desc4")},{type:"conditional",conditional:{label:ou("set4_cond"),metadata:su.inflict_assault,fields:[l(cu.set4_cond_inflict_assault.tag)]}}]}},pn="FreedomBlues",[sa,ru]=h("disc",pn),ca=T(pn),du=m[pn],hu=u[pn],uu={2:{title:i(z,{}),img:ca,documents:[{type:"text",text:sa("desc2")}]},4:{title:i(B,{}),img:ca,documents:[{type:"text",text:sa("desc4")},{type:"conditional",conditional:{label:ru("set4_cond"),metadata:du.exSpecialHit,fields:[l(hu.anomBuildupRes_.tag)]}}]}},fn="HormonePunk",[la,gu]=h("disc",fn),ra=T(fn),mu=m[fn],pu=u[fn],fu={2:{title:i(z,{}),img:ra,documents:[{type:"text",text:la("desc2")}]},4:{title:i(B,{}),img:ra,documents:[{type:"text",text:la("desc4")},{type:"conditional",conditional:{label:gu("set4_cond"),metadata:mu.entering_combat,fields:[l(pu.set4_cond_entering_combat.tag)]}}]}},$n="InfernoMetal",[da,$u]=h("disc",$n),ha=T($n),yu=m[$n],_u=u[$n],bu={2:{title:i(z,{}),img:ha,documents:[{type:"text",text:da("desc2")}]},4:{title:i(B,{}),img:ha,documents:[{type:"text",text:da("desc4")},{type:"conditional",conditional:{label:$u("set4_cond"),metadata:yu.hitting_burning_enemy,fields:[l(_u.set4_cond_hitting_burning_enemy.tag)]}}]}},yn="KingOfTheSummit",[ua,Wy]=h("disc",yn),ga=T(yn),xu=m[yn],ma=u[yn],wu={2:{title:i(z,{}),img:ga,documents:[{type:"text",text:ua("desc2")},{type:"fields",fields:[l(ma.set2.tag)]}]},4:{title:i(B,{}),img:ga,documents:[{type:"text",text:ua("desc4")},{type:"conditional",conditional:{metadata:xu.launchExSpecialOrChain,label:K("uponLaunch.2",{val1:"$t(skills.exSpecial)",val2:"$t(skills.chain)"}),fields:[l(ma.set4_team_launchExSpecialOrChain_crit_dmg_.tag)]}}]}},_n="PhaethonsMelody",[pa,fa]=h("disc",_n),$a=T(_n),ya=m[_n],_a=u[_n],vu={2:{title:i(z,{}),img:$a,documents:[{type:"text",text:pa("desc2")}]},4:{title:i(B,{}),img:$a,documents:[{type:"text",text:pa("desc4")},{type:"conditional",conditional:{label:fa("set4_cond_squad_use_ex"),metadata:ya.squad_use_ex,fields:[l(_a.set4_squad_anomProf.tag)]}},{type:"conditional",conditional:{label:fa("set4_cond_not_char_use_ex"),metadata:ya.not_char_use_ex,fields:[l(_a.set4_not_self_ether_.tag)]}}]}},bn="PolarMetal",[ba,ku]=h("disc",bn),xa=T(bn),Cu=m[bn],wa=u[bn],Su={2:{title:i(z,{}),img:xa,documents:[{type:"text",text:ba("desc2")}]},4:{title:i(B,{}),img:xa,documents:[{type:"text",text:ba("desc4")},{type:"conditional",conditional:{label:ku("set4_cond"),metadata:Cu.freeze_shatter}},{type:"fields",fields:[{title:"Basic Attack DMG",fieldRef:wa.set4_basic_dmg_.tag},{title:"Dash Attack DMG",fieldRef:wa.set4_dash_dmg_.tag}]}]}},xn="ProtoPunk",[va,Du]=h("disc",xn),ka=T(xn),Ru=m[xn],Iu=u[xn],Mu={2:{title:i(z,{}),img:ka,documents:[{type:"text",text:va("desc2")}]},4:{title:i(B,{}),img:ka,documents:[{type:"text",text:va("desc4")},{type:"conditional",conditional:{label:Du("set4_cond"),metadata:Ru.def_assist_or_evasive_assist,fields:[l(Iu.set4_cond_def_assist_or_evasive_assist_dmg_.tag)]}}]}},wn="PufferElectro",[Ca,Tu]=h("disc",wn),Sa=T(wn),zu=m[wn],Da=u[wn],Bu={2:{title:i(z,{}),img:Sa,documents:[{type:"text",text:Ca("desc2")}]},4:{title:i(B,{}),img:Sa,documents:[{type:"text",text:Ca("desc4")},{type:"fields",fields:[{title:"Ultimate DMG",fieldRef:Da.set4_dmg_.tag}]},{type:"conditional",conditional:{label:Tu("set4_cond"),metadata:zu.launching_ult,fields:[l(Da.set4_cond_launching_ult_atk_.tag)]}}]}},vn="ShadowHarmony",[Ra,Eu]=h("disc",vn),Ia=T(vn),Ou=m[vn],Ma=u[vn],Pu={2:{title:i(z,{}),img:Ia,documents:[{type:"text",text:Ra("desc2")}]},4:{title:i(B,{}),img:Ia,documents:[{type:"text",text:Ra("desc4")},{type:"conditional",conditional:{label:Eu("set4_cond_stacks"),metadata:Ou.stacks,fields:[l(Ma.set4_stack_atk_.tag),l(Ma.set4_stack_crit_.tag)]}}]}},yi="ShockstarDisco",[Ta,Ny]=h("disc",yi),za=T(yi),Hn=u[yi],Vu={2:{title:i(z,{}),img:za,documents:[{type:"text",text:Ta("desc2")}]},4:{title:i(B,{}),img:za,documents:[{type:"text",text:Ta("desc4")},{type:"fields",fields:[{title:"Basic Attack Daze",fieldRef:Hn.set4_basic_daze_.tag},{title:"Dash Attack Daze",fieldRef:Hn.set4_dash_daze_.tag},{title:"Dodge Counter Daze",fieldRef:Hn.set4_dodgeCounter_daze_.tag}]}]}},Uc="SoulRock",[Ba,Gy]=h("disc",Uc),Ea=T(Uc),qu={2:{title:i(z,{}),img:Ea,documents:[{type:"text",text:Ba("desc2")}]},4:{title:i(B,{}),img:Ea,documents:[{type:"text",text:Ba("desc4")}]}},kn="SwingJazz",[Oa,Au]=h("disc",kn),Pa=T(kn),Fu=m[kn],Lu=u[kn],ju={2:{title:i(z,{}),img:Pa,documents:[{type:"text",text:Oa("desc2")}]},4:{title:i(B,{}),img:Pa,documents:[{type:"text",text:Oa("desc4")},{type:"conditional",conditional:{label:Au("set4_cond"),metadata:Fu.chain_or_ult,fields:[l(Lu.set4_cond_chain_or_ult.tag)]}}]}},Cn="ThunderMetal",[Va,Hu]=h("disc",Cn),qa=T(Cn),Ku=m[Cn],Wu=u[Cn],Nu={2:{title:i(z,{}),img:qa,documents:[{type:"text",text:Va("desc2")}]},4:{title:i(B,{}),img:qa,documents:[{type:"text",text:Va("desc4")},{type:"conditional",conditional:{label:Hu("set4_cond"),metadata:Ku.enemy_shocked,fields:[l(Wu.set4_cond_enemy_shocked_atk_.tag)]}}]}},Sn="WoodpeckerElectro",[Aa,Gu]=h("disc",Sn),Fa=T(Sn),Uu=m[Sn],Ju=u[Sn],Yu={2:{title:i(z,{}),img:Fa,documents:[{type:"text",text:Aa("desc2")}]},4:{title:i(B,{}),img:Fa,documents:[{type:"text",text:Aa("desc4")},{type:"conditional",conditional:{label:Gu("set4_cond"),metadata:Uu.crit_basic_dodge_ex,fields:[l(Ju.set4_cond_crit_basic_dodge_ex_atk_.tag)]}}]}},Dn="YunkuiTales",[La,Uy]=h("disc",Dn),ja=T(Dn),Zu=m[Dn],Kn=u[Dn],Qu={2:{title:i(z,{}),img:ja,documents:[{type:"text",text:La("desc2")},{type:"fields",fields:[l(Kn.set2.tag)]}]},4:{title:i(B,{}),img:ja,documents:[{type:"text",text:La("desc4")},{type:"conditional",conditional:{metadata:Zu.uponLaunchExSpecialChainOrUlt,label:K("uponLaunch.3",{val1:"$t(skills.exSpecial)",val2:"$t(skills.chain)",val3:"$t(skills.ult)"}),fields:[l(Kn.set4_crit_.tag),l(Kn.set4_sheer_dmg_.tag)]}}]}},Xu={AstralVoice:Jh,BranchBladeSong:Qh,ChaosJazz:tu,ChaoticMetal:au,FangedMetal:lu,FreedomBlues:uu,HormonePunk:fu,InfernoMetal:bu,KingOfTheSummit:wu,PhaethonsMelody:vu,PolarMetal:Su,ProtoPunk:Mu,PufferElectro:Bu,ShadowHarmony:Pu,ShockstarDisco:Vu,SoulRock:qu,SwingJazz:ju,ThunderMetal:Nu,WoodpeckerElectro:Yu,YunkuiTales:Qu};function z(){return"2-Set"}function B(){return"4-Set"}function p({wKey:e,children:t}){const n=sn();let a=1;return n&&n.compute(q.common.count.sheet(e)).val&&(a=n.compute(q.wengine.phase).val??1),t(a)}const we="BashfulDemon",[Ha,eg]=h("wengine",we),tg=_.wengine[we],ng=f(we,"icon"),ig=m[we],Ka=u[we],ag={title:Ha("phase"),img:ng,documents:[{type:"text",text:i(p,{wKey:we,children:e=>Ha(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Ka.passive_ice_dmg_.tag)]},{type:"conditional",conditional:{label:eg("cond"),metadata:ig.launch_ex_attack,fields:[l(Ka.team_atk_.tag),{title:"Duration",fieldValue:tg.duration}]}}]},ve="BigCylinder",[Wa,Jy]=h("wengine",ve),og=_.wengine[ve],sg=f(ve,"icon"),cg=u[ve],lg=ue[ve],rg={title:Wa("phase"),img:sg,documents:[{type:"text",text:i(p,{wKey:ve,children:e=>Wa(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(cg.passive_dmg_red_.tag)]},{type:"fields",fields:[{title:"Additional DMG",fieldRef:lg.damage.tag},{title:"Cooldown",fieldValue:og.cooldown}]}]},ke="BlazingLaurel",[Na,Ga]=h("wengine",ke),Ua=_.wengine[ke],dg=f(ke,"icon"),Ja=m[ke],Wn=u[ke],hg={title:Na("phase"),img:dg,documents:[{type:"text",text:i(p,{wKey:ke,children:e=>Na(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Ga("cond1"),metadata:Ja.quickOrPerfectAssistUsed,fields:[l(Wn.impact_.tag),{title:"Duration",fieldValue:Ua.duration}]}},{type:"conditional",conditional:{label:Ga("cond2"),metadata:Ja.wilt,fields:[l(Wn.crit_dmg_ice_.tag),l(Wn.crit_dmg_fire_.tag),{title:"Duration",fieldValue:Ua.wilt_duration}]}}]},Ce="BoxCutter",[Ya,ug]=h("wengine",Ce),gg=_.wengine[Ce],mg=f(Ce,"icon"),pg=m[Ce],Za=u[Ce],fg={title:Ya("phase"),img:mg,documents:[{type:"text",text:i(p,{wKey:Ce,children:e=>Ya(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:ug("cond"),metadata:pg.launchedAftershock,fields:[l(Za.physical_dmg_.tag),l(Za.daze_.tag),{title:"Duration",fieldValue:gg.duration}]}}]},zt="BunnyBand",[Qa,$g]=h("wengine",zt),yg=f(zt,"icon"),_g=m[zt],Xa=u[zt],bg={title:Qa("phase"),img:yg,documents:[{type:"text",text:i(p,{wKey:zt,children:e=>Qa(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Xa.passive_hp_.tag)]},{type:"conditional",conditional:{label:$g("cond"),metadata:_g.wearerShielded,fields:[l(Xa.atk_.tag)]}}]},he="CannonRotor",[eo,Yy]=h("wengine",he),xg=_.wengine[he],wg=f(he,"icon"),vg=ue[he],kg=u[he],Cg={title:eo("phase"),img:wg,documents:[{type:"text",text:i(p,{wKey:he,children:e=>eo(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(kg.passive_atk_.tag)]},{type:"fields",fields:[{title:"Additional DMG",fieldRef:vg.damage.tag},{title:"Cooldown",fieldValue:i(p,{wKey:he,children:e=>xg.cooldown[e]})}]}]},Se="CinderCobalt",[to]=h("wengine",Se),no=_.wengine[Se],Sg=f(Se,"icon"),Dg=m[Se],Rg=u[Se],Ig={title:to("phase"),img:Sg,documents:[{type:"text",text:i(p,{wKey:Se,children:e=>to(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:K("enterCombatOrSwitchIn"),metadata:Dg.enteringCombatOrSwitchingIn,fields:[l(Rg.enteringCombatOrSwitchingIn_atk_.tag),{title:K("duration"),fieldValue:no.duration},{title:K("cd"),fieldValue:no.cd}]}}]},De="DeepSeaVisitor",[io,ao]=h("wengine",De),oo=_.wengine[De],Mg=f(De,"icon"),so=m[De],Nn=u[De],Tg={title:io("phase"),img:Mg,documents:[{type:"text",text:i(p,{wKey:De,children:e=>io(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Nn.passive_ice_dmg_.tag)]},{type:"conditional",conditional:{label:ao("cond1"),metadata:so.basicHit,fields:[l(Nn.crit_.tag),{title:"Duration",fieldValue:oo.duration}]}},{type:"conditional",conditional:{label:ao("cond2"),metadata:so.iceDashAtkHit,fields:[l(Nn.extra_crit_.tag),{title:"Duration",fieldValue:oo.extra_duration}]}}]},Re="DemaraBatteryMarkII",[co,zg]=h("wengine",Re),Bg=_.wengine[Re],Eg=f(Re,"icon"),Og=m[Re],lo=u[Re],Pg={title:co("phase"),img:Eg,documents:[{type:"text",text:i(p,{wKey:Re,children:e=>co(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(lo.passive_electric_dmg_.tag)]},{type:"conditional",conditional:{label:zg("cond"),metadata:Og.dodgeCounterOrAssistHit,fields:[l(lo.enerRegen_.tag),{title:"Duration",fieldValue:Bg.duration}]}}]},Ie="DrillRigRedAxis",[ro,Vg]=h("wengine",Ie),ho=_.wengine[Ie],qg=f(Ie,"icon"),Ag=m[Ie],uo=u[Ie],Fg={title:ro("phase"),img:qg,documents:[{type:"text",text:i(p,{wKey:Ie,children:e=>ro(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Vg("cond"),metadata:Ag.exSpecialOrChainUsed,fields:[l(uo.basic_eletric_dmg_.tag),l(uo.dash_eletric_dmg_.tag),{title:"Duration",fieldValue:ho.duration},{title:"Cooldown",fieldValue:ho.cooldown}]}}]},Bt="ElectroLipGloss",[go,Lg]=h("wengine",Bt),jg=f(Bt,"icon"),Hg=m[Bt],mo=u[Bt],Kg={title:go("phase"),img:jg,documents:[{type:"text",text:i(p,{wKey:Bt,children:e=>go(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Lg("cond"),metadata:Hg.anomalyOnEnemy,fields:[l(mo.atk_.tag),l(mo.common_dmg_.tag)]}}]},Me="ElegantVanity",[po,Wg]=h("wengine",Me),Ng=_.wengine[Me],Gg=f(Me,"icon"),Ug=m[Me],Jg=u[Me],Yg={title:po("phase"),img:Gg,documents:[{type:"text",text:i(p,{wKey:Me,children:e=>po(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Wg("cond"),metadata:Ug.consumed25Energy,fields:[l(Jg.common_dmg_.tag),{title:"Duration",fieldValue:Ng.buffDuration}]}}]},Te="FlamemakerShaker",[fo,$o]=h("wengine",Te),Gn=_.wengine[Te],Zg=f(Te,"icon"),yo=m[Te],Un=u[Te],Qg={title:fo("phase"),img:Zg,documents:[{type:"text",text:i(p,{wKey:Te,children:e=>fo(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:$o("cond1"),metadata:yo.offField,fields:[l(Un.enerRegen.tag)]}},{type:"conditional",conditional:{label:$o("cond2"),metadata:yo.exSpecialAssistHits,fields:[l(Un.common_dmg_.tag),{title:"Duration",fieldValue:Gn.duration},{title:"Cooldown",fieldValue:Gn.cooldown},l(Un.anomProf.tag),{title:"Duration",fieldValue:Gn.anomProfDuration}]}}]},ze="FlightOfFancy",[_o,Xg]=h("wengine",ze),bo=_.wengine[ze],em=f(ze,"icon"),tm=m[ze],xo=u[ze],nm={title:_o("phase"),img:em,documents:[{type:"text",text:i(p,{wKey:ze,children:e=>_o(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(xo.anomBuildup_.tag)]},{type:"conditional",conditional:{label:Xg("cond"),metadata:tm.etherDmg,fields:[l(xo.etherDmg_anomProf.tag),{title:"Duration",fieldValue:bo.duration},{title:"Cooldown",fieldValue:bo.cd}]}}]},Be="FusionCompiler",[wo,im]=h("wengine",Be),am=_.wengine[Be],om=f(Be,"icon"),sm=m[Be],vo=u[Be],cm={title:wo("phase"),img:om,documents:[{type:"text",text:i(p,{wKey:Be,children:e=>wo(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(vo.passive_atk_.tag)]},{type:"conditional",conditional:{label:im("cond"),metadata:sm.specialUsed,fields:[l(vo.anomProf.tag),{title:"Duration",fieldValue:am.duration}]}}]},Rn="GildedBlossom",[ko,Zy]=h("wengine",Rn),lm=f(Rn,"icon"),Co=u[Rn],rm={title:ko("phase"),img:lm,documents:[{type:"text",text:i(p,{wKey:Rn,children:e=>ko(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Co.passive_atk_.tag),l(Co.passive_exSpecial_dmg_.tag)]}]},Ee="HailstormShrine",[So,dm]=h("wengine",Ee),hm=_.wengine[Ee],um=f(Ee,"icon"),gm=m[Ee],Do=u[Ee],mm={title:So("phase"),img:um,documents:[{type:"text",text:i(p,{wKey:Ee,children:e=>So(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Do.passive_crit_dmg_.tag)]},{type:"conditional",conditional:{label:dm("cond"),metadata:gm.exSpecialOrAnomaly,fields:[l(Do.ice_dmg_.tag),{title:"Duration",fieldValue:hm.duration}]}}]},Oe="HeartstringNocturne",[Ro,pm]=h("wengine",Oe),fm=_.wengine[Oe],$m=f(Oe,"icon"),ym=m[Oe],Jn=u[Oe],_m={title:Ro("phase"),img:$m,documents:[{type:"text",text:i(p,{wKey:Oe,children:e=>Ro(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Jn.passive_crit_dmg_.tag)]},{type:"conditional",conditional:{label:pm("cond"),metadata:ym.heartstring,fields:[l(Jn.chain_resIgn_fire_.tag),l(Jn.ult_resIgn_fire_.tag),{title:"Duration",fieldValue:fm.duration}]}}]},Pe="HellfireGears",[Io,Mo]=h("wengine",Pe),bm=_.wengine[Pe],xm=f(Pe,"icon"),To=m[Pe],zo=u[Pe],wm={title:Io("phase"),img:xm,documents:[{type:"text",text:i(p,{wKey:Pe,children:e=>Io(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Mo("cond1"),metadata:To.offField,fields:[l(zo.enerRegen.tag)]}},{type:"conditional",conditional:{label:Mo("cond1"),metadata:To.exSpecialUsed,fields:[l(zo.impact_.tag),{title:"Duration",fieldValue:bm.duration}]}}]},Ve="Housekeeper",[Bo,Eo]=h("wengine",Ve),vm=_.wengine[Ve],km=f(Ve,"icon"),Oo=m[Ve],Po=u[Ve],Cm={title:Bo("phase"),img:km,documents:[{type:"text",text:i(p,{wKey:Ve,children:e=>Bo(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Eo("cond1"),metadata:Oo.offField,fields:[l(Po.enerRegen.tag)]}},{type:"conditional",conditional:{label:Eo("cond2"),metadata:Oo.exSpecialHits,fields:[l(Po.physical_dmg_.tag),{title:"Duration",fieldValue:vm.duration}]}}]},qe="IceJadeTeapot",[Vo,Sm]=h("wengine",qe),qo=_.wengine[qe],Dm=f(qe,"icon"),Rm=m[qe],Ao=u[qe],Im={title:Vo("phase"),img:Dm,documents:[{type:"text",text:i(p,{wKey:qe,children:e=>Vo(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Sm("cond"),metadata:Rm.teariffic,fields:[l(Ao.impact_.tag),{title:"Duration",fieldValue:qo.duration},l(Ao.common_dmg_.tag),{title:"Duration",fieldValue:qo.teamBuffDuration}]}}]},Ae="IdentityBase",[Fo,Mm]=h("wengine",Ae),Tm=_.wengine[Ae],zm=f(Ae,"icon"),Bm=m[Ae],Em=u[Ae],Om={title:Fo("phase"),img:zm,documents:[{type:"text",text:i(p,{wKey:Ae,children:e=>Fo(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Mm("cond"),metadata:Bm.equipperAttacked,fields:[l(Em.def_.tag),{title:"Duration",fieldValue:Tm.duration}]}}]},_i="IdentityInflection",[Lo,Qy]=h("wengine",_i),Pm=f(_i,"icon"),Vm={title:Lo("phase"),img:Pm,documents:[{type:"text",text:i(p,{wKey:_i,children:e=>Lo(`phaseDescs.${e-1}`)})}]},Fe="KaboomTheCannon",[jo,qm]=h("wengine",Fe),Am=_.wengine[Fe],Fm=f(Fe,"icon"),Lm=m[Fe],jm=u[Fe],Hm={title:jo("phase"),img:Fm,documents:[{type:"text",text:i(p,{wKey:Fe,children:e=>jo(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:qm("cond"),metadata:Lm.allyHitsEnemy,fields:[l(jm.atk_.tag),{title:"Duration",fieldValue:Am.duration}]}}]},Le="LunarDecrescent",[Ho,Km]=h("wengine",Le),Wm=_.wengine[Le],Nm=f(Le,"icon"),Gm=m[Le],Um=u[Le],Jm={title:Ho("phase"),img:Nm,documents:[{type:"text",text:i(p,{wKey:Le,children:e=>Ho(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Km("cond"),metadata:Gm.chainOrUltUsed,fields:[l(Um.common_dmg_.tag),{title:"Duration",fieldValue:Wm.duration}]}}]},bi="LunarNoviluna",[Ko,Xy]=h("wengine",bi),Ym=f(bi,"icon"),Zm={title:Ko("phase"),img:Ym,documents:[{type:"text",text:i(p,{wKey:bi,children:e=>Ko(`phaseDescs.${e-1}`)})}]},In="LunarPleniluna",[Wo,e_]=h("wengine",In),Qm=f(In,"icon"),Yn=u[In],Xm={title:Wo("phase"),img:Qm,documents:[{type:"text",text:i(p,{wKey:In,children:e=>Wo(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Yn.basic_dmg_.tag),l(Yn.dash_dmg_.tag),l(Yn.dodgeCounter_dmg_.tag)]}]},je="MagneticStormAlpha",[No,ep]=h("wengine",je),Go=_.wengine[je],tp=f(je,"icon"),np=m[je],ip=u[je],ap={title:No("phase"),img:tp,documents:[{type:"text",text:i(p,{wKey:je,children:e=>No(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:ep("cond"),metadata:np.anomalyBuildupIncreased,fields:[l(ip.anomMas.tag),{title:"Duration",fieldValue:Go.duration},{title:"Cooldown",fieldValue:Go.cooldown}]}}]},He="MagneticStormBravo",[Uo,op]=h("wengine",He),Jo=_.wengine[He],sp=f(He,"icon"),cp=m[He],lp=u[He],rp={title:Uo("phase"),img:sp,documents:[{type:"text",text:i(p,{wKey:He,children:e=>Uo(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:op("cond"),metadata:cp.anomalyBuildupIncreased,fields:[l(lp.anomProf.tag),{title:"Duration",fieldValue:Jo.duration},{title:"Cooldown",fieldValue:Jo.cooldown}]}}]},xi="MagneticStormCharlie",[Yo,t_]=h("wengine",xi),dp=f(xi,"icon"),hp={title:Yo("phase"),img:dp,documents:[{type:"text",text:i(p,{wKey:xi,children:e=>Yo(`phaseDescs.${e-1}`)})}]},Ke="MarcatoDesire",[Zo,Qo]=h("wengine",Ke),up=_.wengine[Ke],gp=f(Ke,"icon"),Xo=m[Ke],mp=u[Ke],pp={title:Zo("phase"),img:gp,documents:[{type:"text",text:i(p,{wKey:Ke,children:e=>Zo(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Qo("cond1"),metadata:Xo.exSpecialOrChainHitsEnemy,fields:[l(mp.atk_.tag),{title:"Duration",fieldValue:up.duration}]}},{type:"conditional",conditional:{label:Qo("cond2"),metadata:Xo.attributeAnomalyInflicted}}]},We="MyriadEclipse",[es,fp]=h("wengine",We),$p=_.wengine[We],yp=f(We,"icon"),_p=m[We],ts=u[We],bp={title:es("phase"),img:yp,documents:[{type:"text",text:i(p,{wKey:We,children:e=>es(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(ts.crit_dmg_.tag)]},{type:"conditional",conditional:{label:fp("cond"),metadata:_p.deathSentence,fields:[l(ts.deathSentence_defIgn_.tag),{title:"Duration",fieldValue:$p.duration}]}}]},Ne="OriginalTransmorpher",[ns,xp]=h("wengine",Ne),wp=_.wengine[Ne],vp=f(Ne,"icon"),kp=m[Ne],is=u[Ne],Cp={title:ns("phase"),img:vp,documents:[{type:"text",text:i(p,{wKey:Ne,children:e=>ns(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(is.passive_hp_.tag)]},{type:"conditional",conditional:{label:xp("cond"),metadata:kp.equipperHit,fields:[l(is.impact_.tag),{title:"Duration",fieldValue:wp.duration}]}}]},Et="PeacekeeperSpecialized",[as,Sp]=h("wengine",Et),Dp=f(Et,"icon"),Rp=m[Et],Zn=u[Et],Ip={title:as("phase"),img:Dp,documents:[{type:"text",text:i(p,{wKey:Et,children:e=>as(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Sp("cond"),metadata:Rp.shielded,fields:[l(Zn.enerRegen.tag)]}},{type:"fields",fields:[l(Zn.passive_exSpecial_anomBuildup_.tag),l(Zn.passive_assist_anomBuildup_.tag)]}]},Ot="PreciousFossilizedCore",[os,ss]=h("wengine",Ot),Mp=f(Ot,"icon"),cs=m[Ot],Tp=u[Ot],zp={title:os("phase"),img:Mp,documents:[{type:"text",text:i(p,{wKey:Ot,children:e=>os(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:ss("cond1"),metadata:cs.enemyHpGE50,fields:[l(Tp.daze_.tag)]}},{type:"conditional",conditional:{label:ss("cond2"),metadata:cs.enemyHpGE75}}]},Ge="PuzzleSphere",[ls]=h("wengine",Ge),rs=_.wengine[Ge],Bp=f(Ge,"icon"),ds=m[Ge],hs=u[Ge],Ep={title:ls("phase"),img:Bp,documents:[{type:"text",text:i(p,{wKey:Ge,children:e=>ls(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:K("uponLaunch.1",{val1:"$t(skills.exSpecial)"}),metadata:ds.launchingExSpecial,fields:[l(hs.launchingExSpecial_crit_dmg_.tag),{title:K("duration"),fieldValue:rs.duration}]}},{type:"conditional",conditional:{label:K("targetHpLe",{val:rs.hpThresh*100}),metadata:ds.targetHpBelow50,fields:[l(hs.targetHpBelow50_exSpecial_dmg_.tag)]}}]},Ue="QingmingBirdcage",[us,Op]=h("wengine",Ue),Pp=_.wengine[Ue],Vp=f(Ue,"icon"),qp=m[Ue],Wt=u[Ue],Ap={title:us("phase"),img:Vp,documents:[{type:"text",text:i(p,{wKey:Ue,children:e=>us(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Wt.crit_.tag)]},{type:"conditional",conditional:{metadata:qp.qingmingCompanionStacks,label:Op("cond"),fields:[l(Wt.qingmingCompanionStacks_ether_dmg_.tag),l(Wt.qingmingCompanionStacks_ult_ether_sheer_dmg_.tag),l(Wt.qingmingCompanionStacks_exSpecial_ether_sheer_dmg_.tag),{title:K("cd"),fieldValue:Pp.duration}]}}]},Je="RadiowaveJourney",[gs]=h("wengine",Je),Fp=_.wengine[Je],Lp=f(Je,"icon"),jp=m[Je],Hp=u[Je],Kp={title:gs("phase"),img:Lp,documents:[{type:"text",text:i(p,{wKey:Je,children:e=>gs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{metadata:jp.launchingChainOrUlt,label:K("uponLaunch.2",{val1:"$t(skills.chain)",val2:"$t(skills.ult)"}),fields:[l(Hp.launchingChainOrUlt_sheerForce.tag),{title:K("duration"),fieldValue:Fp.duration}]}}]},Ye="RainforestGourmet",[ms,Wp]=h("wengine",Ye),Np=_.wengine[Ye],Gp=f(Ye,"icon"),Up=m[Ye],Jp=u[Ye],Yp={title:ms("phase"),img:Gp,documents:[{type:"text",text:i(p,{wKey:Ye,children:e=>ms(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Wp("cond"),metadata:Up.energyConsumed,fields:[l(Jp.atk_.tag),{title:"Duration",fieldValue:Np.duration}]}}]},wi="ReelProjector",[ps]=h("wengine",wi),Zp=f(wi,"icon"),Qp={title:ps("phase"),img:Zp,documents:[{type:"text",text:i(p,{wKey:wi,children:e=>ps(`phaseDescs.${e-1}`)})}]},Ze="ReverbMarkI",[fs,Xp]=h("wengine",Ze),ef=_.wengine[Ze],tf=f(Ze,"icon"),nf=m[Ze],af=u[Ze],of={title:fs("phase"),img:tf,documents:[{type:"text",text:i(p,{wKey:Ze,children:e=>fs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Xp("cond"),metadata:nf.exSpecialUsed,fields:[l(af.impact_.tag),{title:"Duration",fieldValue:ef.duration}]}}]},Qe="ReverbMarkII",[$s,sf]=h("wengine",Qe),cf=_.wengine[Qe],lf=f(Qe,"icon"),rf=m[Qe],ys=u[Qe],df={title:$s("phase"),img:lf,documents:[{type:"text",text:i(p,{wKey:Qe,children:e=>$s(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:sf("cond"),metadata:rf.exSpecialOrChainUsed,fields:[l(ys.anomMas.tag),l(ys.anomProf.tag),{title:"Duration",fieldValue:cf.duration}]}}]},Xe="ReverbMarkIII",[_s,hf]=h("wengine",Xe),uf=_.wengine[Xe],gf=f(Xe,"icon"),mf=m[Xe],pf=u[Xe],ff={title:_s("phase"),img:gf,documents:[{type:"text",text:i(p,{wKey:Xe,children:e=>_s(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:hf("cond"),metadata:mf.chainOrUltUsed,fields:[l(pf.atk_.tag),{title:"Duration",fieldValue:uf.duration}]}}]},Pt="RiotSuppressorMarkVI",[bs,$f]=h("wengine",Pt),yf=f(Pt,"icon"),_f=m[Pt],xs=u[Pt],bf={title:bs("phase"),img:yf,documents:[{type:"text",text:i(p,{wKey:Pt,children:e=>bs(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(xs.passive_crit_.tag)]},{type:"conditional",conditional:{label:$f("cond"),metadata:_f.charge,fields:[l(xs.basic_ether_dmg_.tag)]}}]},et="RoaringFurnace",[ws,xf]=h("wengine",et),wf=_.wengine[et],vf=f(et,"icon"),kf=m[et],Nt=u[et],Cf={title:ws("phase"),img:vf,documents:[{type:"text",text:i(p,{wKey:et,children:e=>ws(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Nt.exSpecial_dazeInc_.tag),l(Nt.chain_dazeInc_.tag),l(Nt.ult_dazeInc_.tag)]},{type:"conditional",conditional:{metadata:kf.chainOrUlt,label:xf("cond"),fields:[l(Nt.team_chainOrUlt_fire_dmg_.tag),{title:K("duration"),fieldValue:wf.duration}]}}]},tt="RoaringRide",[vs,Qn]=h("wengine",tt),Xn=_.wengine[tt],Sf=f(tt,"icon"),ei=m[tt],ti=u[tt],Df={title:vs("phase"),img:Sf,documents:[{type:"text",text:i(p,{wKey:tt,children:e=>vs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Qn("cond_atk_"),metadata:ei.atk_,fields:[l(ti.atk_.tag),{title:"Duration",fieldValue:Xn.duration}]}},{type:"conditional",conditional:{label:Qn("cond_anomProf"),metadata:ei.anomProf,fields:[l(ti.anomProf.tag),{title:"Duration",fieldValue:Xn.duration}]}},{type:"conditional",conditional:{label:Qn("cond_anomBuildup_"),metadata:ei.anomBuildup_,fields:[l(ti.anomBuildup_.tag),{title:"Duration",fieldValue:Xn.duration}]}}]},nt="SeveredInnocence",[ks,Rf]=h("wengine",nt),If=_.wengine[nt],Mf=f(nt,"icon"),Tf=m[nt],ni=u[nt],zf={title:ks("phase"),img:Mf,documents:[{type:"text",text:i(p,{wKey:nt,children:e=>ks(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(ni.passive_crit_dmg_.tag)]},{type:"conditional",conditional:{label:Rf("cond"),metadata:Tf.basicSpecialAftershockHit,fields:[l(ni.crit_dmg_.tag),l(ni.electric_dmg_.tag),{title:"Duration",fieldValue:If.duration}]}}]},it="SharpenedStinger",[Cs,Bf]=h("wengine",it),Ef=_.wengine[it],Of=f(it,"icon"),Pf=m[it],Ss=u[it],Vf={title:Cs("phase"),img:Of,documents:[{type:"text",text:i(p,{wKey:it,children:e=>Cs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Bf("cond"),metadata:Pf.predatoryInstinct,fields:[l(Ss.physical_dmg_.tag),{title:"Duration",fieldValue:Ef.duration}]}},{type:"fields",fields:[l(Ss.anomBuildup_.tag)]}]},Vt="SixShooter",[Ds,qf]=h("wengine",Vt),Af=f(Vt,"icon"),Ff=m[Vt],Lf=u[Vt],jf={title:Ds("phase"),img:Af,documents:[{type:"text",text:i(p,{wKey:Vt,children:e=>Ds(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:qf("cond"),metadata:Ff.charge,fields:[l(Lf.exSpecial_daze_.tag)]}}]},vi="SliceOfTime",[Rs,n_]=h("wengine",vi),Hf=f(vi,"icon"),Kf={title:Rs("phase"),img:Hf,documents:[{type:"text",text:i(p,{wKey:vi,children:e=>Rs(`phaseDescs.${e-1}`)})}]},at="SpectralGaze",[Is,Ms]=h("wengine",at),Ts=_.wengine[at],Wf=f(at,"icon"),zs=m[at],Bs=u[at],Nf={title:Is("phase"),img:Wf,documents:[{type:"text",text:i(p,{wKey:at,children:e=>Is(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Ms("cond1"),metadata:zs.hit_aftershock_electric,fields:[l(Bs.cond_defRed_.tag),{title:"Duration",fieldValue:Ts.duration1}]}},{type:"conditional",conditional:{label:Ms("cond2"),metadata:zs.spiritLock,fields:[l(Bs.cond_impact_.tag),{title:"Duration",fieldValue:Ts.duration2}]}}]},ot="SpringEmbrace",[Es,Gf]=h("wengine",ot),Uf=_.wengine[ot],Jf=f(ot,"icon"),Yf=m[ot],Os=u[ot],Zf={title:Es("phase"),img:Jf,documents:[{type:"text",text:i(p,{wKey:ot,children:e=>Es(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Os.passive_dmg_red_.tag)]},{type:"conditional",conditional:{label:Gf("cond"),metadata:Yf.when_attacked,fields:[l(Os.cond_enerRegen_.tag),{title:"Duration",fieldValue:Uf.duration}]}}]},st="StarlightEngine",[Ps,Qf]=h("wengine",st),Xf=_.wengine[st],e$=f(st,"icon"),t$=m[st],n$=u[st],i$={title:Ps("phase"),img:e$,documents:[{type:"text",text:i(p,{wKey:st,children:e=>Ps(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Qf("cond"),metadata:t$.dodgecounter_quickassist,fields:[l(n$.cond_dmg_.tag),{title:"Duration",fieldValue:Xf.duration}]}}]},ct="StarlightEngineReplica",[Vs,a$]=h("wengine",ct),o$=_.wengine[ct],s$=f(ct,"icon"),c$=m[ct],l$=u[ct],r$={title:Vs("phase"),img:s$,documents:[{type:"text",text:i(p,{wKey:ct,children:e=>Vs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:a$("cond"),metadata:c$.hit_away,fields:[l(l$.cond_dmg_.tag),{title:"Duration",fieldValue:o$.duration}]}}]},lt="SteamOven",[qs,d$]=h("wengine",lt),h$=_.wengine[lt],u$=f(lt,"icon"),g$=m[lt],m$=u[lt],p$={title:qs("phase"),img:u$,documents:[{type:"text",text:i(p,{wKey:lt,children:e=>qs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:d$("cond"),metadata:g$.stacks,fields:[l(m$.cond_impact_.tag),{title:"Duration",fieldValue:h$.duration}]}}]},qt="SteelCushion",[As,f$]=h("wengine",qt),$$=f(qt,"icon"),y$=m[qt],Fs=u[qt],_$={title:As("phase"),img:$$,documents:[{type:"text",text:i(p,{wKey:qt,children:e=>As(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Fs.passive_physical_dmg_.tag)]},{type:"conditional",conditional:{label:f$("cond"),metadata:y$.hit_behind,fields:[l(Fs.cond_dmg_.tag)]}}]},At="StreetSuperstar",[Ls,b$]=h("wengine",At),x$=f(At,"icon"),w$=m[At],v$=u[At],k$={title:Ls("phase"),img:x$,documents:[{type:"text",text:i(p,{wKey:At,children:e=>Ls(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:b$("cond"),metadata:w$.charge,fields:[l(v$.cond_ult_dmg_.tag)]}}]},rt="TheBrimstone",[js,C$]=h("wengine",rt),S$=_.wengine[rt],D$=f(rt,"icon"),R$=m[rt],I$=u[rt],M$={title:js("phase"),img:D$,documents:[{type:"text",text:i(p,{wKey:rt,children:e=>js(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:C$("cond"),metadata:R$.hit_basic_dash_dodge,fields:[l(I$.cond_atk_.tag),{title:"Duration",fieldValue:S$.duration}]}}]},dt="TheRestrained",[Hs,T$]=h("wengine",dt),z$=_.wengine[dt],B$=f(dt,"icon"),E$=m[dt],Ks=u[dt],O$={title:Hs("phase"),img:B$,documents:[{type:"text",text:i(p,{wKey:dt,children:e=>Hs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:T$("cond"),metadata:E$.dmg_daze_,fields:[l(Ks.basic_dmg_.tag),l(Ks.basic_daze_.tag),{title:"Duration",fieldValue:z$.duration}]}}]},ht="TheVault",[Ws,P$]=h("wengine",ht),V$=_.wengine[ht],q$=f(ht,"icon"),A$=m[ht],F$=u[ht],L$={title:Ws("phase"),img:q$,documents:[{type:"text",text:i(p,{wKey:ht,children:e=>Ws(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:P$("cond"),metadata:A$.ether_hit,fields:[l(F$.cond_dmg_.tag),{title:"Duration",fieldValue:V$.duration}]}}]},ut="Timeweaver",[Ns,j$]=h("wengine",ut),H$=_.wengine[ut],K$=f(ut,"icon"),W$=m[ut],ii=u[ut],N$={title:Ns("phase"),img:K$,documents:[{type:"text",text:i(p,{wKey:ut,children:e=>Ns(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(ii.passive_electric_anomBuildup_.tag),l(ii.passive_disorder_dmg_.tag)]},{type:"conditional",conditional:{label:j$("cond"),metadata:W$.hit_anomaly,fields:[l(ii.cond_anomProf.tag),{title:"Duration",fieldValue:H$.duration}]}}]},Mn="TremorTrigramVessel",[Gs]=h("wengine",Mn),G$=f(Mn,"icon"),Us=u[Mn],U$={title:Gs("phase"),img:G$,documents:[{type:"text",text:i(p,{wKey:Mn,children:e=>Gs(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Us.exSpecial_dmg_.tag),l(Us.ult_dmg_.tag)]}]},gt="TusksOfFury",[Js,J$]=h("wengine",gt),Y$=_.wengine[gt],Z$=f(gt,"icon"),Q$=m[gt],ai=u[gt],X$={title:Js("phase"),img:Z$,documents:[{type:"text",text:i(p,{wKey:gt,children:e=>Js(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(ai.passive_shield_.tag)]},{type:"conditional",conditional:{label:J$("cond"),metadata:Q$.interrupt_perfdodge,fields:[l(ai.cond_dmg_.tag),l(ai.daze_.tag),{title:"Duration",fieldValue:Y$.duration}]}}]},mt="UnfetteredGameBall",[Ys,ey]=h("wengine",mt),ty=_.wengine[mt],ny=f(mt,"icon"),iy=m[mt],ay=u[mt],oy={title:Ys("phase"),img:ny,documents:[{type:"text",text:i(p,{wKey:mt,children:e=>Ys(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:ey("cond"),metadata:iy.anomaly_counter,fields:[l(ay.cond_crit_.tag),{title:"Duration",fieldValue:ty.duration}]}}]},Tn="VortexArrow",[Zs,i_]=h("wengine",Tn),sy=f(Tn,"icon"),cy=u[Tn],ly={title:Zs("phase"),img:sy,documents:[{type:"text",text:i(p,{wKey:Tn,children:e=>Zs(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(cy.passive_daze_.tag)]}]},pt="VortexHatchet",[Qs,ry]=h("wengine",pt),Xs=_.wengine[pt],dy=f(pt,"icon"),hy=m[pt],uy=u[pt],gy={title:Qs("phase"),img:dy,documents:[{type:"text",text:i(p,{wKey:pt,children:e=>Qs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:ry("cond"),metadata:hy.entering,fields:[l(uy.cond_impact_.tag),{title:"Duration",fieldValue:Xs.duration},{title:"Cooldown",fieldValue:Xs.cooldown}]}}]},zn="VortexRevolver",[ec,a_]=h("wengine",zn),my=f(zn,"icon"),py=u[zn],fy={title:ec("phase"),img:my,documents:[{type:"text",text:i(p,{wKey:zn,children:e=>ec(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(py.passive_exSpecial_daze_.tag)]}]},ft="WeepingCradle",[tc,nc]=h("wengine",ft),$y=_.wengine[ft],yy=f(ft,"icon"),ic=m[ft],_y=u[ft],by={title:tc("phase"),img:yy,documents:[{type:"text",text:i(p,{wKey:ft,children:e=>tc(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:nc("cond_atk"),metadata:ic.attack}},{type:"conditional",conditional:{label:nc("cond_stacks"),metadata:ic.stacks,fields:[l(_y.cond_dmg_.tag),{title:"Duration",fieldValue:$y.duration}]}}]},Ft="WeepingGemini",[ac,xy]=h("wengine",Ft),wy=f(Ft,"icon"),vy=m[Ft],ky=u[Ft],Cy={title:ac("phase"),img:wy,documents:[{type:"text",text:i(p,{wKey:Ft,children:e=>ac(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:xy("cond"),metadata:vy.anomaly_stack,fields:[l(ky.anomProf.tag)]}}]},$t="ZanshinHerbCase",[oc,Sy]=h("wengine",$t),Dy=_.wengine[$t],Ry=f($t,"icon"),Iy=m[$t],oi=u[$t],My={title:oc("phase"),img:Ry,documents:[{type:"text",text:i(p,{wKey:$t,children:e=>oc(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(oi.passive_crit_.tag),l(oi.passive_electric_dmg_.tag)]},{type:"conditional",conditional:{label:Sy("cond"),metadata:Iy.apply_anom_stun,fields:[l(oi.cond_crit_.tag),{title:"Duration",fieldValue:Dy.duration}]}}]},Ty={BashfulDemon:ag,BigCylinder:rg,BlazingLaurel:hg,BoxCutter:fg,BunnyBand:bg,CannonRotor:Cg,CinderCobalt:Ig,DeepSeaVisitor:Tg,DemaraBatteryMarkII:Pg,DrillRigRedAxis:Fg,ElectroLipGloss:Kg,ElegantVanity:Yg,FlamemakerShaker:Qg,FlightOfFancy:nm,FusionCompiler:cm,GildedBlossom:rm,HailstormShrine:mm,HeartstringNocturne:_m,HellfireGears:wm,Housekeeper:Cm,IceJadeTeapot:Im,IdentityBase:Om,IdentityInflection:Vm,KaboomTheCannon:Hm,LunarDecrescent:Jm,LunarNoviluna:Zm,LunarPleniluna:Xm,MagneticStormAlpha:ap,MagneticStormBravo:rp,MagneticStormCharlie:hp,MarcatoDesire:pp,MyriadEclipse:bp,OriginalTransmorpher:Cp,PeacekeeperSpecialized:Ip,PreciousFossilizedCore:zp,PuzzleSphere:Ep,QingmingBirdcage:Ap,RadiowaveJourney:Kp,RainforestGourmet:Yp,ReelProjector:Qp,ReverbMarkI:of,ReverbMarkII:df,ReverbMarkIII:ff,RiotSuppressorMarkVI:bf,RoaringFurnace:Cf,RoaringRide:Df,SeveredInnocence:zf,SharpenedStinger:Vf,SixShooter:jf,SliceOfTime:Kf,SpectralGaze:Nf,SpringEmbrace:Zf,StarlightEngine:i$,StarlightEngineReplica:r$,SteamOven:p$,SteelCushion:_$,StreetSuperstar:k$,TheBrimstone:M$,TheRestrained:O$,TheVault:L$,Timeweaver:N$,TremorTrigramVessel:U$,TusksOfFury:X$,UnfetteredGameBall:oy,VortexArrow:ly,VortexHatchet:gy,VortexRevolver:fy,WeepingCradle:by,WeepingGemini:Cy,ZanshinHerbCase:My};function zy(e){const{attribute:t}=e;if(t)return t}function By(e){const{q:t}=e;return["standardDmg","anomalyDmg"].includes(t)}function Ey(e){const{damageType1:t,damageType2:n}=e,a=[];return By(e)?(t&&a.push(t),n&&a.push(n),a):[]}const tn={basic:"Basic",dash:"Dash",dodgeCounter:"Dodge Counter",special:"Special",exSpecial:"EX Special",chain:"Chain",ult:"Ultimate",quickAssist:"Quick Assist",defensiveAssist:"Defensive Assist",evasiveAssist:"Evasive Assist",assistFollowUp:"Assist Follow Up",anomaly:"Anomaly",disorder:"Disorder",aftershock:"Aftershock",elemental:"Elemental",sheer:"Sheer"},Jc=["crit_","crit_dmg_","impact","pen","pen_","enerRegen","anomProf","anomMas"].map(e=>{if(fr.includes(e)){const t={...q.final.dmg_.tag,attribute:e.slice(0,-5)};return{title:i(Gt,{statKey:e}),fieldRef:t}}return e==="crit_"?{fieldRef:q.common.cappedCrit_.tag,title:i(Gt,{statKey:e})}:{fieldRef:q.final[e].tag,title:i(Gt,{statKey:e})}});Jc.push(...fe.map(e=>({fieldRef:{et:"own",qt:"formula",q:"standardDmg",attribute:e,name:"standardDmgInst"},title:b($e,{color:e,children:[le[e]," Damage"]})})),...fe.map(e=>({fieldRef:{et:"own",qt:"formula",q:"sheerDmg",attribute:e,name:"sheerDmgInst"},title:b($e,{color:e,children:[le[e]," Damage"]})})),...fe.flatMap(e=>$r.map(t=>({fieldRef:{et:"own",qt:"formula",q:"standardDmg",attribute:e,damageType1:t,name:"standardDmgInst"},title:b($e,{color:e,children:[le[e]," ",tn[t]," Damage"]})}))),...fe.map(e=>({fieldRef:{et:"own",qt:"formula",q:"anomalyDmg",attribute:e,damageType1:"anomaly",name:"anomalyDmgInst"},title:b($e,{color:e,children:[le[e]," Anomaly Damage"]})})),...fe.map(e=>({fieldRef:{et:"own",qt:"formula",q:"anomBuildup",attribute:e,name:"anomalyBuildupInst"},title:b($e,{color:e,children:[le[e]," Anomaly Buildup"]})})),{fieldRef:{et:"own",qt:"formula",q:"dazeBuildup",name:"dazeInst"},title:"Daze Buildup"});const ki=[];Object.values(Wh).forEach(e=>Object.values(e).forEach(t=>t.documents.forEach(n=>n.type==="fields"&&n.fields.forEach(a=>sd(a)&&ki.push({tag:a.fieldRef,value:a})))));Jc.forEach(e=>{ki.push({tag:e.fieldRef,value:e})});const Oy=Nr(ki),ci=new Map;function Yc(e,t){if(ci.get(e))throw new Error(`Duplicate conditional ${e}`);ci.set(e,t)}Object.values(Ty).forEach(({documents:e})=>{e.forEach(t=>{t.type==="conditional"&&Yc(`${t.conditional.metadata.sheet}:${t.conditional.metadata.name}`,t.conditional)})});Object.values(Xu).forEach(e=>Object.values(e).forEach(({documents:t})=>{t.forEach(n=>{n.type==="conditional"&&Yc(`${n.conditional.metadata.sheet}:${n.conditional.metadata.name}`,n.conditional)})}));export{Ur as A,Ky as C,qi as D,Ly as F,cn as T,kt as a,Ac as b,Or as c,zr as d,Xu as e,tn as f,$d as g,sn as h,wd as i,Hy as j,jy as k,Jr as l,on as m,Gr as n,Fy as o,ed as p,yd as q,Xr as r,Nc as s,Vr as u,Ty as w};
