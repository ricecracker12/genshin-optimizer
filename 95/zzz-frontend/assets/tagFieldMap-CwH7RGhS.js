import{c4 as Lc,J as Hc,H as Kc,d as v,K as Wc,_ as Nc,O as ke,c5 as da,X as wn,W as In,V as ze,c6 as G,Y as Gc,c7 as Ll,c8 as Hl,T as O,y as Uc,c9 as ma,ca as Jc,cb as Kl,a4 as Wl,cc as Nl,a7 as Gl,cd as Yc,u as de,aN as Zc,aL as Ul,ce as Jl,cf as Yl,cg as Zl,ch as Qc,b4 as Xc,b3 as el,ci as P,cj as Ql,ck as Xl,bA as A,b9 as er,ba as tr,cl as vn,cm as nr,cn as ir,co as tl,cp as kn,cq as ar,j as i,cr as Cn,cs as ve,bs as le,bB as Fi,ct as or,e as x,am as ee,aA as Gt,cu as Sn,i as Y,ax as Q,bV as nl,cv as sr,cw as il,cx as al,cy as ji,cz as _e,ae as Li,o as M,cA as cr,cB as ol,a as sl,bI as lr,l as cl,b_ as rr,f as re,G as U,C as Ee,S as Ce,P as dr,bM as mr,bg as Ai,b$ as ua,bq as ll,aX as Te,c0 as ur,c1 as hr,I as Hi,s as Ki,c2 as gr,cC as pr,v as Wt,M as Wi,aM as Mn,ac as rl,ad as dl,cD as fr,m as _r,k as $r,n as yr,bf as br,D as xr,c3 as wr,cE as vr,w as ml,r as kr,b as Cr,c as Sr,g as Dr,bw as ul,bE as hl,bC as gl,cF as Rr,cG as Ir,E as Mr,cH as Tr,z as Ut,B as Oe,cI as Ni,F as Jt,cJ as pl,cK as Br,ah as Gi,ag as zr,aY as Be,ap as Er,b6 as Or,cL as Vr,cM as Pr,cN as Ar,aH as fl,aF as Ht,ai as qr,cO as Fr,by as jr,cP as Lr,aK as Hr,cQ as Kr,cR as Wr,bY as Nr,cS as Gr,cT as Ur,cU as ie,cV as _l,a5 as ha,b8 as ga,cW as Jr,cX as Yr,be as $l,cY as Zr,cZ as b,c_ as j,a$ as h,a_ as u,ay as T,aD as _,c$ as Qr,bH as Xr}from"./index-DMBOs1AD.js";import{i as ed,d as td}from"./discSortUtil-DZYZM61w.js";function nd(e){const{badgeContent:t,invisible:n=!1,max:a=99,showZero:o=!1}=e,c=Lc({badgeContent:t,max:a});let s=n;n===!1&&t===0&&!o&&(s=!0);const{badgeContent:r,max:d=a}=s?c:e,p=r&&Number(r)>d?`${d}+`:r;return{badgeContent:r,invisible:s,max:d,displayValue:p}}function id(e){return Kc("MuiBadge",e)}const me=Hc("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),ad=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],li=10,ri=4,od=e=>{const{color:t,anchorOrigin:n,invisible:a,overlap:o,variant:c,classes:s={}}=e,r={root:["root"],badge:["badge",c,a&&"invisible",`anchorOrigin${G(n.vertical)}${G(n.horizontal)}`,`anchorOrigin${G(n.vertical)}${G(n.horizontal)}${G(o)}`,`overlap${G(o)}`,t!=="default"&&`color${G(t)}`]};return Gc(r,id,s)},sd=In("span",{name:"MuiBadge",slot:"Root",overridesResolver:(e,t)=>t.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),cd=In("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.badge,t[n.variant],t[`anchorOrigin${G(n.anchorOrigin.vertical)}${G(n.anchorOrigin.horizontal)}${G(n.overlap)}`],n.color!=="default"&&t[`color${G(n.color)}`],n.invisible&&t.invisible]}})(({theme:e})=>{var t;return{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(12),minWidth:li*2,lineHeight:1,padding:"0 6px",height:li*2,borderRadius:li,zIndex:1,transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.enteringScreen}),variants:[...Object.keys(((t=e.vars)!=null?t:e).palette).filter(n=>{var a,o;return((a=e.vars)!=null?a:e).palette[n].main&&((o=e.vars)!=null?o:e).palette[n].contrastText}).map(n=>({props:{color:n},style:{backgroundColor:(e.vars||e).palette[n].main,color:(e.vars||e).palette[n].contrastText}})),{props:{variant:"dot"},style:{borderRadius:ri,height:ri*2,minWidth:ri*2,padding:0}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${me.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${me.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${me.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${me.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${me.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${me.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${me.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${me.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.leavingScreen})}}]}}),pa=v.forwardRef(function(t,n){var a,o,c,s,r,d;const p=Wc({props:t,name:"MuiBadge"}),{anchorOrigin:w={vertical:"top",horizontal:"right"},className:D,component:S,components:$={},componentsProps:y={},children:k,overlap:R="rectangular",color:q="default",invisible:H=!1,max:ae=99,badgeContent:oe,slots:L,slotProps:I,showZero:E=!1,variant:V="standard"}=p,se=Nc(p,ad),{badgeContent:ia,invisible:zl,max:El,displayValue:Ol}=nd({max:ae,invisible:H,badgeContent:oe,showZero:E}),Vl=Lc({anchorOrigin:w,color:q,overlap:R,variant:V,badgeContent:oe}),aa=zl||ia==null&&V!=="dot",{color:Pl=q,overlap:Al=R,anchorOrigin:ql=w,variant:oa=V}=aa?Vl:p,sa=oa!=="dot"?Ol:void 0,oi=ke({},p,{badgeContent:ia,invisible:aa,max:El,displayValue:sa,showZero:E,anchorOrigin:ql,color:Pl,overlap:Al,variant:oa}),ca=od(oi),la=(a=(o=L==null?void 0:L.root)!=null?o:$.Root)!=null?a:sd,ra=(c=(s=L==null?void 0:L.badge)!=null?s:$.Badge)!=null?c:cd,si=(r=I==null?void 0:I.root)!=null?r:y.root,ci=(d=I==null?void 0:I.badge)!=null?d:y.badge,Fl=da({elementType:la,externalSlotProps:si,externalForwardedProps:se,additionalProps:{ref:n,as:S},ownerState:oi,className:wn(si==null?void 0:si.className,ca.root,D)}),jl=da({elementType:ra,externalSlotProps:ci,ownerState:oi,className:wn(ca.badge,ci==null?void 0:ci.className)});return ze.jsxs(la,ke({},Fl,{children:[k,ze.jsx(ra,ke({},jl,{children:sa}))]}))});function ld(e){return Kc("MuiFormControlLabel",e)}const Kt=Hc("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),rd=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],dd=e=>{const{classes:t,disabled:n,labelPlacement:a,error:o,required:c}=e,s={root:["root",n&&"disabled",`labelPlacement${G(a)}`,o&&"error",c&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",o&&"error"]};return Gc(s,ld,t)},md=In("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Kt.label}`]:t.label},t.root,t[`labelPlacement${G(n.labelPlacement)}`]]}})(({theme:e,ownerState:t})=>ke({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Kt.disabled}`]:{cursor:"default"}},t.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},t.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},t.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${Kt.label}`]:{[`&.${Kt.disabled}`]:{color:(e.vars||e).palette.text.disabled}}})),ud=In("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${Kt.error}`]:{color:(e.vars||e).palette.error.main}})),hd=v.forwardRef(function(t,n){var a,o;const c=Wc({props:t,name:"MuiFormControlLabel"}),{className:s,componentsProps:r={},control:d,disabled:p,disableTypography:w,label:D,labelPlacement:S="end",required:$,slotProps:y={}}=c,k=Nc(c,rd),R=Ll(),q=(a=p??d.props.disabled)!=null?a:R==null?void 0:R.disabled,H=$??d.props.required,ae={disabled:q,required:H};["checked","name","onChange","value","inputRef"].forEach(se=>{typeof d.props[se]>"u"&&typeof c[se]<"u"&&(ae[se]=c[se])});const oe=Hl({props:c,muiFormControl:R,states:["error"]}),L=ke({},c,{disabled:q,labelPlacement:S,required:H,error:oe.error}),I=dd(L),E=(o=y.typography)!=null?o:r.typography;let V=D;return V!=null&&V.type!==O&&!w&&(V=ze.jsx(O,ke({component:"span"},E,{className:wn(I.label,E==null?void 0:E.className),children:V}))),ze.jsxs(md,ke({className:wn(I.root,s),ownerState:L,ref:n},k,{children:[v.cloneElement(d,ae),H?ze.jsxs(Uc,{display:"block",children:[V,ze.jsxs(ud,{ownerState:L,"aria-hidden":!0,className:I.asterisk,children:["â€‰","*"]})]}):V]}))}),gd={};class yl{constructor(t,n){this.root=new pd(t,n)}subset(t){const n=[];return this._subset(t,a=>n.push(...a[ma].map(o=>o.value))),n}entries(t){const n=[];return this._subset(t,a=>n.push(...a[ma])),n}_subset(t,n){const a=t.length;function o(c,s){c<a?s.subset(t[c]).forEach(r=>o(c+1,r)):n(s.leaf)}o(0,this.root)}}let pd=class bl{constructor(t,n){if(this.children=[],t>0)for(const[a,o]of Object.entries(n)){const c=new Map;for(const[s,r]of Object.entries(o))c.set(+s,new bl(t-1,r));this.children.push({mask:+a,map:c})}else this.leaf=n}subset(t){return this.children.map(({mask:n,map:a})=>a.get(t&n)).filter(n=>!!n)}};class fa{constructor(t){this.root=new Ui(void 0),this.keys=t}at(t){const n=this.keys.get(t),a=n.reduce((o,c)=>o.child(c),this.root);return a.leaf||(a.leaf=new Ji(t,n,this.keys,a)),a.leaf}}class Ui{constructor(t){this.children=new Map,this.parent=t}child(t){let n=this.children.get(t);return n||(n=new Ui(this),this.children.set(t,n),n)}}class Ji{constructor(t,n,a,o){this.tag=Object.fromEntries(Object.entries(t).filter(([c,s])=>s!=null)),this.id=n,this.keys=a,this.internal=o}with(t){const{keys:n}=this,{id:a,firstReplacedByte:o}=n.combine(this.id,t);let c=this.internal;for(let s=o;s<n.tagLen;s++)c=c.parent;for(let s=o;s<n.tagLen;s++)c=c.child(a[s]);return c.leaf||(c.leaf=new Ji({...this.tag,...t},a,n,c)),c.leaf}}class fd{constructor(t,n){this.keys=new Jc(t),this.values=new yl(t.tagLen,n)}subset(t){return this.values.subset(this.keys.get(t))}}const Nt={sum:e=>e.reduce((t,n)=>t+n,0),prod:e=>e.reduce((t,n)=>t*n,1),min:e=>Math.min(...e),max:e=>Math.max(...e),sumfrac:([e,t])=>e/(e+t),unique:([e])=>e},xl={match:([e,t])=>e===t?0:1,thres:([e,t])=>e>=t?0:1,lookup:([e],t)=>t[e]??0},gn=e=>Nl(e,"val");let wl=class{constructor(t,...n){const a=new Jc(t);this.nodes=new yl(a.tagLen,Kl(n)),this.cache=new fa(a).at({}),this.calc=new fa(a).at({}),this.calc.val=this}withTag(t){const n=this.calc.with(t);return n.val??(n.val=Object.assign(new this.constructor(this.cache.keys),this,{cache:this.cache.with(t),calc:n}))}gather(t){return this._gather(this.cache.with(t)).pre}compute(t){return this._compute(t,this.cache)}_gather(t){if(t.val)return t.val;const n=this.nodes.entries(t.id).flatMap(({tag:a,value:o})=>o.op==="reread"?this._gather(t.with(o.tag)).pre:[this.markGathered(t.tag,a,o,this._compute(o,t))]);return t.val={pre:n}}_compute(t,n){const a=(c,s,r,d)=>Object.freeze({val:c,meta:this.computeMeta(t,c,s,r,d)}),{op:o}=t;switch(o){case"const":return a(t.ex,[],[]);case"sum":case"prod":case"min":case"max":case"sumfrac":{const c=t.x.map(s=>this._compute(s,n));return a(Nt[o](gn(c)),c,[])}case"thres":case"match":case"lookup":{const c=t.br.map(p=>this._compute(p,n)),s=xl[o](gn(c),t.ex),r=[...Array(t.x.length)],d=r[s]=this._compute(t.x[s],n);return a(d.val,r,c)}case"subscript":{const c=this._compute(t.br[0],n);return a(t.ex[c.val],[],[c])}case"vtag":return a(n.tag[t.ex]??"",[],[]);case"tag":{const c=n.with(t.tag),s=this._compute(t.x[0],c);return a(s.val,[s],[],c.tag)}case"dtag":{const c=t.br.map(d=>this._compute(d,n)),s=n.with(Object.fromEntries(c.map((d,p)=>[t.ex[p],d.val]))),r=this._compute(t.x[0],s);return a(r.val,[r],c,s.tag)}case"read":{const c=n.with(t.tag),s=this._gather(c),{pre:r}=s,d=t.ex??this.defaultAccu(c.tag)??"unique";if(d!==t.ex&&(t={...t,ex:d}),s[d])return s[d];if(Gl()&&d==="unique"&&r.length!==1)throw new Error(`Ill-form read for ${Yc(c.tag)}`);const p=Nt[d](gn(r));return s[d]=a(p,r,[],c.tag)}case"custom":{const c=t.x.map(s=>this._compute(s,n));return a(gd[t.ex].calc(gn(c)),c,[])}default:Wl(o)}}defaultAccu(t){}markGathered(t,n,a,o){return o}computeMeta(t,n,a,o,c){}toDebug(){throw new Error("not implemented")}};const _d={arithmetic:Nt,branching:xl};class $d extends wl{constructor(t,n=Yc,a=()=>!0){super(t.cache.keys),this.gathering=new Set,this.nodes=t.nodes,this.tagStr=n,this.filter=a,this.defaultAccu=o=>t.defaultAccu(o),this.cache=this.cache.with(t.cache.tag)}withTag(t){throw new Error("Unimplemented")}_gather(t){if(this.gathering.has(t))throw new Error(`Loop detected for ${this.tagStr(t.tag)}`);this.gathering.add(t);const n=this.__gather(t);return this.gathering.delete(t),n}__gather(t){if(t.val)return t.val;const n=this.nodes.entries(t.id).flatMap(({tag:a,value:o})=>o.op==="reread"?this._gather(t.with(o.tag)).pre.map(c=>{const s=`${this.tagStr(a)} <= ${this.tagStr(o.tag)} : ${c.meta.readSeq}`;return Object.freeze({...c,meta:{...c.meta,readSeq:s}})}):[this.markGathered(t.tag,a,o,this._compute(o,t))]);return t.val={pre:n}}_compute(t,n){try{return super._compute(t,n)}catch(a){return Object.freeze({val:NaN,meta:{formula:`${a}`,deps:[],omitted:[],val:NaN,x:[],br:[],comp:"ERR",pivot:!0,toJSON:$a}})}}markGathered(t,n,a,o){const c=`${this.tagStr(n)} <- ${this.tagStr(t)}`;return{...o,meta:{...o.meta,readSeq:c,pivot:!0}}}computeMeta(t,n,a,o,c){let s,r;const d=a.filter($=>$).map($=>$.meta),p=o.map($=>$.meta),w=[],D=t.op==="read"?t.ex:t.op,S=[];if(D in Nt){const $=Nt[D]([]);for(const y of[...p,...d])y.val!==$||this.filter(y)?w.push(y):S.push(y)}else w.push(...p,...d);switch(t.op){case"const":s=_a(t.ex);break;case"read":r=`gather ${d.length} node(s)`,r+=` matching ${this.tagStr(c,t.ex)}`,r+=` (for ${this.tagStr(t.tag)})`,S.length&&(r+=` <${S.length} omitted>`),s=`${this.tagStr(t.tag)}`;break;default:{const $=[];t.ex&&t.op!=="subscript"&&$.push(JSON.stringify(t.ex)),t.tag&&$.push(this.tagStr(t.tag)),$.push(...w.map(y=>y.comp)),S.length&&$.push(`<${S.length} omitted>`),s=`${t.op}(`+$.join(", ")+")"}}return S.push(...w.flatMap($=>$.pivot?[]:$.omitted)),Object.freeze({formula:`[${_a(n)}] ${r??s}`,deps:[...new Set(w.flatMap($=>$.pivot?[$]:$.deps))],omitted:[...new Set(S)],val:n,x:d,br:p,comp:s,pivot:t.op==="read",toJSON:$a})}}const _a=e=>typeof e=="string"?`"${e}"`:e.toString();function $a(){const{formula:e,readSeq:t,deps:n}=this,a={readSeq:t,formula:e,deps:n};return a.readSeq||delete a.readSeq,a.deps.length||delete a.deps,Object.keys(a).length===1?a.formula:a}function Tn(e){const{database:t}=de();return Zc(t.chars,e)}function yd(e){const{database:t}=de();return Zc(t.charOpts,e)}const{arithmetic:bd}=_d;let xd=class extends wl{computeMeta({op:t,ex:n,tag:a},o,c,s,r){let d=c.filter($=>!!$);const p=wd(d,s);function w($){return Object.freeze(r&&!$.tag?{tag:r,...$}:$)}function D($,y){return w({op:$,ops:y,...p})}function S($,y){let{meta:k}=$;return y!=null&&y.some(R=>!k.usedCats.has(R))&&(k={...k,usedCats:new Set([...k.usedCats,...y])}),w(k.conds===p.conds?k:{...k,...p})}if(t==="read"&&(r==null?void 0:r.qt)==="cond"){const{src:$,dst:y,sheet:k,q:R}=r;$&&k&&R&&(p.conds=Dn(p.conds,{[y??"All"]:{[$]:{[k]:{[R]:o}}}}))}switch(t==="read"&&n!=="unique"&&([t,n]=[n,void 0]),t){case"sum":case"prod":case"min":case"max":case"sumfrac":if(d.length>1){const $=bd[t]([]);d=d.filter(y=>y.val!==$)}return d.length===1?S(d[0]):D(d.length?t:"const",d);case"const":case"subscript":return D("const",[]);case"vtag":return p.usedCats=new Set([n]),D("const",[]);case"match":case"thres":case"lookup":case"read":return S(d[0]);case"tag":return S(d[0],Object.keys(a));case"dtag":return S(d[0],n);case"custom":return D(n,d);default:Ul(t)}}markGathered(t,n,a,o){const{val:c}=o,s={...o.meta};let r=!1;const d=new Set([...s.usedCats,...Object.keys(n)]);return s.usedCats.size!==d.size&&(s.usedCats=d,r=!0),r?{val:c,meta:Object.freeze(s)}:o}listFormulas(t){return this.gather(t.tag).filter(n=>n.val).map(({val:n,meta:a})=>Jl.withTag(a.tag)[n])}listCondFormulas(t){return this.listFormulas(t).map(n=>this.compute(n).meta.conds).reduce(Dn,{})}};function wd(e,t){var s;const n=[...e.map(r=>r.meta),...t.map(r=>r.meta)];let a={},o=new Set;for(const r of n)a=Dn(a,r.conds),r.usedCats.forEach(d=>o.add(d));const c=o.size;return o=((s=n.find(r=>r.usedCats.size===c))==null?void 0:s.usedCats)??o,{usedCats:o,conds:a}}function Dn(e,t){if(e===t)return e;if(typeof e!="object")throw new Error(`cannot merge ${e} and ${t}`);if(Object.keys(t).length>Object.keys(e).length&&([e,t]=[t,e]),!Object.keys(t).length)return e;let n=!1;const a={...e};for(const[o,c]of Object.entries(t)){const s=a[o],r=o in a?Dn(s,c):c;s!==r&&(a[o]=r,n=!0)}return Object.freeze(n?a:e)}function vd(e){const t=new Set(e);return n=>!kd(n,t)}function kd(e,t){const n=e.formula.match(/(\S+) (\S+) common.count/);if(!n)return!1;const[,a,o]=n;return o==="own"&&t.has(a)}class Cd extends xd{toDebug(){return new $d(this,Yl,vd([...Xc,...el]))}defaultAccu(t){var o,c,s,r;const{qt:n,q:a}=t;if(!(!n||!a))switch(t.et){case"own":case"target":return(c=(o=Qc[n])==null?void 0:o[a])==null?void 0:c.accu;case"enemy":return(r=(s=Zl[n])==null?void 0:s[a])==null?void 0:r.accu;case"team":if(n==="common"&&a==="count")return"sum";throw new Error("non-explicit team value accumulator")}}listFormulas(t){return super.listFormulas(t).filter(n=>n.tag.qt!=="formula"||["standardDmgInst","sheerDmgInst","anomalyDmgInst","anomalyBuildupInst","dazeInst"].includes(n.tag.name??""))}}function xn(e,...t){return t.map(({tag:n,value:a})=>({tag:{...n,preset:e},value:a}))}function vl(e,...t){return t.map(({tag:n,value:a})=>({tag:{...n,src:e},value:a}))}function kl(e){const{lvl:t,promotion:n,basic:a,dodge:o,special:c,chain:s,assist:r,core:d,mindscape:p}=A.char,{char:w,iso:D,[e.key]:S}=P.withAll("sheet",[]);return[w.reread(S),D.reread(S),t.add(e.level),a.add(e.basic),o.add(e.dodge),c.add(e.special),s.add(e.chain),r.add(e.assist),d.add(e.core),n.add(e.promotion),p.add(e.mindscape),vn.base.crit_.add(.05),vn.base.crit_dmg_.add(.5)]}function Sd(e){return[P.sheet("agg").reread(P.sheet("wengine")),...e?[A.common.count.sheet(e.key).add(1),A.wengine.lvl.add(e.level),A.wengine.modification.add(e.modification),A.wengine.phase.add(e.phase)]:[]]}function Cl(e,t){const{common:{count:n},initial:a}=nr(Qc,{sheet:"disc",et:"own"});return[P.sheet("agg").reread(P.sheet("disc")),P.withTag({sheet:"disc",qt:"initial"}).reread(P.sheet("dyn")),...Object.entries(e).map(([o,c])=>ir(a,o).sheet("dyn").add(c)),...Object.entries(t).map(([o,c])=>n.sheet(o).add(c))]}function Dd(e){const t={},n={};return e.forEach(({setKey:a,mainStatKey:o,substats:c,level:s,rarity:r})=>{t[a]=(t[a]??0)+1,n[o]=(n[o]??0)+er(r,o,s),c.forEach(({key:d,upgrades:p})=>{!d||!p||(n[d]=(n[d]??0)+tr(d,r)*p)})}),Cl(n,t)}function Sl(e){const t=P.with("et","team"),{own:n,enemy:a,teamBuff:o,notOwnBuff:c}=P.sheet("agg").withAll("et",[]);return[e.map(s=>P.withTag({et:"target",dst:s}).reread(P.withTag({et:"own",dst:null,src:s}))),e.flatMap(s=>{const r=n.with("src",s);return e.map(d=>r.reread(o.withTag({dst:s,src:d,name:null})))}),e.flatMap(s=>{const r=n.with("src",s);return e.filter(d=>d!==s).map(d=>r.reread(c.withTag({dst:s,src:d,name:null})))}),e.map(s=>a.reread(P.withTag({et:"enemyDeBuff",dst:null,src:s,name:null}))),e.flatMap((s,r)=>{const{stackIn:d,stackTmp:p}=P.withAll("qt",[]),w=P.withTag({src:s,et:"own"});return[w.with("qt","stackTmp").add(Ql(d,0,r+1)),w.with("qt","stackOut").add(Xl(p.max.with("et","team"),r+1,d))]}),e.map(s=>t.add(P.withTag({src:s,et:"own"})))].flat()}function Dl(e){const t=tl(kn,e);return new Cd(kn,ar,t)}function Rd(e){return new fd(kn,tl(kn,e))}function Id({characterKey:e}){return i(Cn,{ns:"charNames_gen",key18:e})}function Md({attribute:e}){return ve[e]}function Td({characterKey:e,onClick:t,charCardConfig:n}){const{level:a=0,promotion:o=0}=Tn(e)??{},c=le(e),s=n||{cardWidth:"100%",charImgWidth:"100%",iconsSize:1.7,isEditing:!1,charNameWidth:"191px",charNameVariant:"h6",scrollingBgSize:"200px"},r=v.useCallback(()=>e&&(t==null?void 0:t(e)),[e,t]),d=v.useCallback(p=>i(Fi,{onClick:r,sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:p}),[r]);return i(Gt,{children:i(or,{condition:!!t,wrapper:d,children:x(ee,{sx:{display:"flex",flexDirection:"column",width:s.cardWidth},children:[i(Bd,{characterKey:e,characterStat:c,charCardConfig:s}),i(zd,{characterKey:e,characterStat:c,promotion:o,level:a,charCardConfig:s})]})})})}function Bd({characterKey:e,characterStat:t,charCardConfig:n}){const{attribute:a,id:o}=t;return x(ee,{sx:s=>({width:"100%",height:"100%",position:"relative",display:"flex",background:`${s.palette[a].main}`,zIndex:1,overflow:"hidden"}),children:[x(ee,{sx:{position:"absolute",left:"0",right:"0",display:"flex",transform:"rotate(5deg) translateX(-50%)",zIndex:2},children:[i(ya,{characterKey:e,charCardConfig:n}),i(ya,{characterKey:e,charCardConfig:n})]}),i(ee,{src:`https://act-webstatic.hoyoverse.com/game_record/zzzv2/role_vertical_painting/role_vertical_painting_${o}.png`,component:Sn?Sn:"img",width:n.charImgWidth,height:"auto",position:"relative",zIndex:"2"})]})}function zd({characterKey:e,characterStat:t,promotion:n,level:a,charCardConfig:o}){const{t:c}=Y("page_characters"),{attribute:s,rarity:r,specialty:d}=t,p=Tn(e);return i(ee,{sx:{width:"100%",height:"100%",padding:"8px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:x(ee,{sx:{display:"flex",flexDirection:"column"},children:[x(ee,{gap:1,sx:{display:"flex",alignItems:"center"},children:[i(Q,{size:o.iconsSize,src:nl(r)}),i(O,{variant:o.charNameVariant,sx:{fontWeight:"900",maxWidth:o.charNameWidth,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:i(Id,{characterKey:e})}),i(sr,{ele:s,iconProps:{sx:{fontSize:`${o.iconsSize}em`}}}),i(Q,{size:o.iconsSize,src:il(d)}),o.isEditing?"":i(O,{variant:"h5",color:"primary",sx:{fontWeight:"900"},children:c("mindscape",{level:p?p.mindscape:0})})]}),o.isEditing?"":x(ee,{sx:{mt:"12px",display:"flex",gap:"14px",flexWrap:"wrap"},children:[x(ee,{sx:w=>({border:`2px solid ${w.palette.contentZzz.main}`,borderRadius:"20px",display:"flex"}),children:[i(O,{sx:{fontWeight:"900",paddingLeft:"12px",fontSize:"16px"},children:c("charLevel",{level:a})}),x(O,{color:"primary",sx:{fontWeight:"900",paddingLeft:"4px",pr:"10px"},children:["/ ",al[n]]})]}),x(ee,{gap:1.5,sx:{display:"flex",alignItems:"center"},children:[ji.map((w,D)=>i(pa,{anchorOrigin:{vertical:"bottom",horizontal:"left"},badgeContent:`${p?p[w]:0}`,color:"primary",children:i(Q,{size:1.9,src:_e(w)})},D)),i(pa,{anchorOrigin:{vertical:"bottom",horizontal:"left"},badgeContent:`${p?p.core:0}`,color:"primary",children:i(Q,{size:1.9,src:_e("core")})},6)]})]})]})})}function ya({characterKey:e,charCardConfig:t}){const{t:n}=Y("charNames_gen"),a={animation:"scroll 16s infinite linear","@keyframes scroll":{"0%":{transform:"translateX(-100%)"},"100%":{transform:"translateX(0)"}}};return i(ee,{component:"span",sx:{color:"#000",marginTop:"20px",fontStyle:"italic",fontSize:t.scrollingBgSize,lineHeight:"150px",whiteSpace:"nowrap",textTransform:"uppercase",display:"flex",justifyContent:"center",fontFamily:"Impact",opacity:.1,...a},children:n(`${e}`)})}function Ed({mindscape:e,setMindscape:t}){const{t:n}=Y("page_characters");return i(M,{sx:{display:"flex",flexWrap:"wrap",gap:2,mt:"12px"},children:Li(1,6).map(a=>i(M,{children:i(Gt,{sx:{position:"relative",borderRadius:"40px"},children:i(hd,{control:i(cr,{checked:e>=a,onChange:()=>t(a===e?a-1:a)}),label:x(M,{sx:{position:"absolute",top:9,left:e>=a?75:16,transition:"left 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",textAlign:"center"},children:[i(O,{variant:"subtitle1",sx:o=>({fontWeight:900,color:e>=a?o.palette.mindscapeActive.main:o.palette.mindscapeInactive.main}),children:n("mindscape",{level:a})}),i(O,{variant:"subtitle2",sx:o=>({lineHeight:.2,fontWeight:900,color:e>=a?o.palette.mindscapeActive.main:o.palette.mindscapeInactive.main}),children:n("mindscapeTitle")})]}),sx:{margin:0}})})},a))})}function Od(e){return{new:t=>e.chars.get(t)?0:1,name:t=>ol.t(t).toString(),level:t=>{const n=e.chars.get(t);return n?n.level*(n.promotion+1):0},rarity:t=>le(t).rarity??0}}function Vd(e){return{attribute:(t,n)=>n.includes(le(t).attribute),specialtyType:(t,n)=>n.includes(le(t).specialty),rarity:(t,n)=>n.includes(le(t).rarity),name:(t,n)=>n===void 0||ol.t(t).toLowerCase().includes(n.toLowerCase()),new:(t,n)=>n===void 0||n===(e.chars.get(t)?"no":"yes")}}const Rl={name:["name"],level:["level","rarity","name"],rarity:["rarity","level","name"]};function wy({show:e,onHide:t,onSelect:n,newFirst:a=!1}){const{database:o}=de(),c=sl(o.displayCharacter),[s,r]=v.useState(""),d=v.useDeferredValue(s),p=v.useDeferredValue(c),w=v.useMemo(()=>{const{attribute:$,specialtyType:y,sortType:k,ascending:R}=p,q=[...a?["new"]:[],...Rl[k]??[]];return lr.filter(cl({attribute:$,specialtyType:y,name:d},Vd(o))).sort(rr(q,R,Od(o),["new"]))},[p,a,d,o]);return i(Ad,{show:e,charactersToShow:w,filterSearchSortProps:{searchTerm:s,onChangeSpecialtyFilter:$=>{o.displayCharacter.set({specialtyType:$})},onChangeAttributeFilter:$=>{o.displayCharacter.set({attribute:$})},onChangeSearch:$=>{r($.target.value)},onChangeSort:$=>{o.displayCharacter.set({sortType:$})},onChangeAsc:$=>{o.displayCharacter.set({ascending:$})}},onClose:()=>{r(""),t()},children:i(re,{sx:{flex:"1",overflow:"auto"},children:i(v.Suspense,{fallback:i(Ce,{variant:"rectangular",width:"100%",height:1e3}),children:i(U,{container:!0,spacing:.5,columns:{xs:2,sm:3,md:4,lg:5},children:w.map($=>i(U,{item:!0,xs:1,children:i(Ee,{bgt:"light",sx:y=>({position:"relative",flexGrow:1,display:"flex",flexDirection:"column",borderRadius:"40px 16px 16px 40px",border:`3px solid ${y.palette.contentZzz.main}`}),children:i(qd,{characterKey:$,onClick:()=>{t(),n($)}})})},$))})})})})}const Pd=Object.keys(Rl);function Ad({show:e,charactersToShow:t,filterSearchSortProps:n,onClose:a,children:o}){const{t:c}=Y("page_characters"),{database:s}=de(),r=sl(s.displayCharacter),d=v.useMemo(()=>ua(ll,y=>s.chars.entries.forEach(([k,R])=>{const q=le(R.key).specialty;y[q].total++,t.includes(k)&&y[q].current++})),[t,s.chars.entries]),p=v.useMemo(()=>ua(Te,y=>Object.entries(s.chars.data).forEach(([k])=>{const R=le(k).attribute;y[R].total++,t.includes(k)&&y[R].current++})),[t,s.chars.data]),{specialtyType:w,attribute:D,sortType:S,ascending:$}=r;return i(Wi,{open:e,onClose:a,containerProps:{sx:{height:"100vh",p:{xs:1}}},children:x(Ee,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[x(re,{sx:{display:"flex",flexDirection:"column",gap:1},children:[x(M,{sx:{display:"flex",justifyContent:"space-between"},children:[x(M,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:[i(ur,{onChange:y=>s.displayCharacter.set({specialtyType:y}),value:w,totals:d,size:"small"}),i(hr,{onChange:y=>s.displayCharacter.set({attribute:y}),value:D,totals:p,size:"small"})]}),i(Hi,{sx:{ml:"auto"},onClick:()=>a(),children:i(Ki,{})})]}),x(M,{display:"flex",gap:1,children:[i(gr,{autoFocus:!0,value:n.searchTerm,onChange:y=>n.onChangeSearch(y),label:c("characterName"),size:"small",sx:{height:"100%",mr:"auto"},InputProps:{sx:{height:"100%"}}}),i(pr,{sortKeys:Pd,value:S,onChange:y=>n.onChangeSort(y),ascending:$,onChangeAsc:y=>n.onChangeAsc(y)})]})]}),i(Wt,{}),o]})})}function qd({characterKey:e,onClick:t}){const{t:n}=Y(["page_characters","charNames_gen"]),a=dr(),o=Tn(e),{rarity:c,attribute:s}=le(e),{level:r=1,promotion:d=0,mindscape:p=0}=o??{},w=s==="electric"?a.palette[s].light:a.palette[s].main;return i(Fi,{onClick:t,children:x(M,{sx:{position:"relative",width:"100%",display:"flex",padding:"3px",gap:.5,"&::before":{content:'""',display:"block",position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:.7,background:w}},children:[i(M,{sx:{maxWidth:{xs:"33%",lg:"30%"},alignSelf:"flex-end",display:"flex",flexDirection:"column",zIndex:1,flexShrink:1},children:i(M,{component:Sn?Sn:"img",src:mr(e,"interknot")})}),x(M,{sx:{display:"flex",flexDirection:"column",zIndex:1,justifyContent:"space-evenly"},children:[x(M,{sx:{display:"flex",alignItems:"center",gap:.5},children:[i(Q,{size:1.5,src:nl(c)}),i(O,{variant:"subtitle2",sx:D=>({flexGrow:1,color:D.palette.contentNormal.main,fontWeight:"900"}),children:n(`charNames_gen:${e}`)})]}),o?x(M,{sx:D=>({display:"flex",gap:1,alignItems:"center",background:D.palette.contentNormal.main,padding:"4px 12px",borderRadius:"20px"}),children:[x(M,{sx:{textShadow:"0 0 5px gray"},children:[i(O,{variant:"body2",component:"span",whiteSpace:"nowrap",children:n("charLevel",{level:r})}),x(O,{variant:"body2",component:"span",color:"text.secondary",children:["/",al[d]]})]}),x(O,{variant:"body2",children:["M",p]})]}):i(O,{component:"span",variant:"body2",children:i(Ai,{color:"electric",children:n("characterEditor.new")})})]})]})})}function Fd(){const{t:e}=Y("page_characters"),{database:t}=de(),n=Mn(),{core:a=0,promotion:o=0,key:c}=n??{},s=v.useCallback(r=>c&&t.chars.set(c,{core:r}),[t,c]);return i(dl,{fullWidth:!0,title:e("core",{level:a}),color:"primary",startIcon:i(Q,{src:_e("core"),size:1.75,sideMargin:!0}),children:Li(0,fr[o]).map(r=>i(rl,{selected:a===r,disabled:a===r,onClick:()=>s(r),children:e("core",{level:r})},r))})}const jd={xs:2*3,sm:2*3,md:3*3,lg:4*3,xl:4*3};function Il({disc:e,onChangeId:t,slotKey:n,show:a,onClose:o}){const{t:c}=Y(["page_characters","disc"]),{database:s}=de(),r=e==null?void 0:e.id,d=v.useCallback((I,E)=>({...I,...E,slotKeys:[n]}),[n]),[p,w]=v.useReducer(d,{...ed(),slotKeys:[n]}),D=_r(),S=v.useMemo(()=>td(),[]),$=$r(s.discs),y=$.filter(I=>I.slotKey===p.slotKeys[0]).length,k=v.useMemo(()=>{const I=cl(p,S);let E=$.filter(I).map(V=>V.id);return r&&s.discs.get(r)&&(E=E.filter(V=>V!==r),E.unshift(r)),E},[p,S,$,r,s.discs]),{numShow:R,setTriggerElement:q}=yr(jd[D],k.length),H=v.useMemo(()=>k.slice(0,R),[k,R]),ae=k.length!==y?`${k.length}/${y}`:`${y}`,oe={numShowing:H.length,total:ae,t:c,namespace:"disc"},L=v.useCallback(I=>{br.includes(I)?t(null):I&&t(I),o()},[t,o]);return i(Wi,{open:a,onClose:o,containerProps:{maxWidth:"xl"},children:x(Ee,{children:[x(re,{sx:{py:1,display:"flex",alignItems:"center"},children:[i(O,{variant:"h6",children:c("tabEquip.swapDisc")}),i(Hi,{onClick:o,sx:{ml:"auto"},children:i(Ki,{})})]}),i(Wt,{}),i(re,{children:i(v.Suspense,{fallback:i(Ce,{variant:"rectangular",width:"100%",height:200}),children:i(xr,{filterOption:p,filterOptionDispatch:w,filteredIds:k,disableSlotFilter:!0})})}),i(Wt,{}),x(re,{children:[i(M,{pb:1,display:"flex",justifyContent:"space-between",alignItems:"flex-end",flexWrap:"wrap",children:i(wr,{showingTextProps:oe})}),i(M,{mt:1,children:i(v.Suspense,{fallback:i(Ce,{variant:"rectangular",width:"100%",height:1e3}),children:x(U,{container:!0,spacing:1,columns:{xs:2,md:3,lg:4},children:[r&&i(U,{item:!0,xs:1,children:i(Ee,{bgt:"light",sx:{width:"100%",height:"100%"},children:i(Fi,{sx:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},onClick:()=>L(n),children:x(M,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[i(vr,{sx:{fontSize:"10em"}}),i(O,{children:c("disc:button.unequipDisc")})]})})})}),H.map(I=>i(U,{item:!0,xs:1,sx:E=>({...r===I&&{"> .MuiCard-root":{outline:`${E.spacing(.5)} solid ${E.palette.warning.main}`}}}),children:i(ml,{disc:s.discs.get(I),onClick:r===I?void 0:()=>L(I)})},I))]})})}),k.length!==H.length&&i(Ce,{ref:I=>{I&&q(I)},sx:{borderRadius:1,mt:1},variant:"rectangular",width:"100%",height:100})]})]})})}function Ld(e){return"fieldRef"in e}var Pt={},ba;function Hd(){if(ba)return Pt;ba=1;var e=kr();Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.default=void 0;var t=e(Cr()),n=Sr(),a=(0,t.default)((0,n.jsx)("path",{d:"M6.99 11 3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z"}),"SwapHoriz");return Pt.default=a,Pt}var Kd=Hd();const Yt=Dr(Kd),Wd={xs:1,sm:2,md:3,lg:3,xl:3};function Nd({setWengine:e,setDisc:t}){const{database:n}=de(),a=v.useContext(ul),[o,c]=v.useState(),[s,r]=v.useState(""),d=v.useCallback(y=>{r(y)},[]),p=v.useCallback(y=>{c(y)},[]),w=hl(a==null?void 0:a.equippedWengine),D=a?le(a.key).specialty:ll[0],S=gl(a==null?void 0:a.equippedDiscs),$=Rr(o);return i(M,{children:x(Uc,{spacing:2,children:[i(v.Suspense,{fallback:!1,children:s&&i(Ir,{wengineId:s,footer:!0,onClose:()=>r(""),extraButtons:i(Zd,{wengineId:(w==null?void 0:w.id)||"",wengineTypeKey:D,onChangeId:e})})}),i(v.Suspense,{fallback:!1,children:$&&i(Mr,{disc:$,show:!!o,onShow:()=>c(o),onClose:()=>c(void 0),cancelEdit:()=>c(void 0)})}),i(M,{children:w!=null&&w.id?i(Tr,{wengine:w,onEdit:()=>d(w.id),extraButtons:i(Yd,{wengineId:w.id,wengineTypeKey:D,onChangeId:e})}):i(Gd,{wengineId:"",wengineTypeKey:D,onChangeId:e})}),i(M,{children:i(U,{item:!0,columns:Wd,container:!0,spacing:1,children:!!S&&Object.entries(S).map(([y,k])=>i(U,{item:!0,xs:1,children:k!=null&&k.id?i(ml,{disc:k,extraButtons:i(Jd,{disc:k,slotKey:y,onChangeId:R=>t(y,R)}),onEdit:()=>p(k.id),onLockToggle:()=>n.discs.set(k.id,({lock:R})=>({lock:!R}))}):i(Ud,{slotKey:y,onChangeId:R=>t(y,R)})},(k==null?void 0:k.id)||y))})})]})})}function Gd({wengineId:e,wengineTypeKey:t,onChangeId:n}){const[a,o,c]=Ut();return x(Gt,{bgt:"light",sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[i(re,{children:x(O,{children:[i(Q,{src:il(t)})," "]})}),i(Wt,{}),x(M,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:[i(Ni,{wengineId:e,wengineTypeKey:t,show:a,onClose:c,onChangeId:n}),i(Oe,{onClick:o,color:"info",sx:{borderRadius:"1em"},children:i(Yt,{sx:{height:100,width:100}})})]})]})}function Ud({slotKey:e,onChangeId:t}){const[n,a,o]=Ut(),{t:c}=Y("disc");return x(Gt,{bgt:"light",sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[i(re,{children:i(O,{children:c("slotName",{slotKey:e})})}),i(Wt,{}),x(M,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:[i(Il,{disc:void 0,slotKey:e,show:n,onClose:o,onChangeId:t}),i(Oe,{onClick:a,color:"info",sx:{borderRadius:"1em"},children:i(Yt,{sx:{height:100,width:100}})})]})]})}function Jd({disc:e,slotKey:t,onChangeId:n}){const{t:a}=Y("page_characters"),[o,c,s]=Ut();return x(Jt,{children:[i(pl,{title:i(O,{children:a("tabEquip.swapDisc")}),placement:"top",arrow:!0,children:i(Oe,{color:"info",size:"small",onClick:c,"aria-label":a("tabEquip.swapDisc"),children:i(Yt,{})})}),i(Il,{disc:e,slotKey:t,show:o,onClose:s,onChangeId:n})]})}function Yd({wengineId:e,wengineTypeKey:t,onChangeId:n}){const{t:a}=Y("page_characters"),[o,c,s]=Ut();return x(Jt,{children:[i(pl,{title:i(O,{children:a("tabEquip.swapWengine")}),placement:"top",arrow:!0,children:i(Oe,{color:"info",size:"small",onClick:c,children:i(Yt,{})})}),i(Ni,{wengineId:e,wengineTypeKey:t,onChangeId:n,show:o,onClose:s})]})}function Zd({wengineId:e,wengineTypeKey:t,onChangeId:n}){const{t:a}=Y("page_characters"),[o,c,s]=Ut();return x(Jt,{children:[i(Oe,{color:"info",onClick:c,startIcon:i(Yt,{}),children:a("tabEquip.swapWengine")}),i(Ni,{wengineId:e,wengineTypeKey:t,onChangeId:n,show:o,onClose:s})]})}function Qd({skillKey:e}){const{database:t}=de(),{t:n}=Y("page_characters"),a=Mn(),{[e]:o=0,promotion:c=0,key:s}=a??{},r=v.useCallback(d=>s&&t.chars.set(s,{[e]:d}),[t,s,e]);return i(dl,{fullWidth:!0,title:n(e,{level:o}),color:"primary",startIcon:i(Q,{src:_e(e),size:1.75,sideMargin:!0}),children:Li(1,Br[c]).map(d=>i(rl,{selected:o===d,disabled:o===d,onClick:()=>r(d),children:n(e,{level:d})},d))})}function Bn(){const e=v.useContext(Gi),t=v.useContext(zr);return v.useMemo(()=>e==null?void 0:e.withTag(t),[e,t])}const J=(e,t)=>i(Cn,{ns:"sheet",key18:e,values:t});function m(e,t){return[(n,a)=>i(Cn,{ns:`${e}_${t}_gen`,key18:n,values:a}),(n,a)=>i(Cn,{ns:`${e}_${t}`,key18:n,values:a})]}function l(e){return{title:i(zn,{tag:e}),fieldRef:e}}function Xd(e){if(!e)return"";const{et:t,q:n,qt:a,name:o}=e;return t==="own"&&a==="formula"&&n!=="base"?o??n??"":n??""}const em={initial:"Initial",combat:"Combat",final:"Final",base:"Base"};function zn({tag:e,showPercent:t,preventRecursion:n}){return i(Be,{color:gy(e),children:i(im,{tag:e,showPercent:t,preventRecursion:n})})}function vy({tag:e,showPercent:t}){return x(Jt,{children:[i(zn,{tag:e,showPercent:t}),fy(e).map(n=>i(Ai,{children:Rn[n]},n)),e.attribute&&i(Ai,{color:e.attribute,children:i(Md,{attribute:e.attribute})})]})}const tm=["hp","hp_","atk","atk_","def","def_"],nm=e=>tm.includes(e),xa={dmg_:"DMG",common_dmg_:"DMG",defIgn_:"DEF Ignore",resIgn_:"Res Ignore",dazeInc_:"Daze Increase"};function im({tag:e,showPercent:t,preventRecursion:n}){var s;const a=Bn(),o=(s=_y.subset(e)[0])==null?void 0:s.title;if(o&&!n)return o;if(e.qt==="cond"&&e.q&&e.sheet&&a){const r=qi.get(`${e.sheet}:${e.q}`);if(r)return Er(r.label,a,a==null?void 0:a.compute(new Or(e,"max")).val)}const c=Xd(e);if(nm(c))return x("span",{children:[i(Pr,{statKey:c,iconProps:Vr})," ",x("span",{children:[(e.qt&&em[e.qt])??e.qt," ",Ar[c],t&&fl(c)]})]});if(xa[c]){const r=[...e.attribute?[ve[e.attribute]]:[],...e.damageType1?[Rn[e.damageType1]]:[],...e.damageType2?[Rn[e.damageType2]]:[],xa[c]];return i("span",{children:r.join(" ")})}return i(Ht,{statKey:c,showPercent:t})}function am(){const e=Bn();return i(Gt,{children:i(re,{children:e==null?void 0:e.listFormulas(A.listing.formulas).map((t,n)=>i(om,{read:t},n))})})}function om({read:e}){var k,R,q,H,ae,oe,L;const t=Bn(),{setRead:n}=v.useContext(qr),a=Mn(),o=yd(a==null?void 0:a.key),c=e.tag.sheet===((k=o==null?void 0:o.target)==null?void 0:k.sheet)&&e.tag.name===((R=o==null?void 0:o.target)==null?void 0:R.name)||((q=o==null?void 0:o.target)==null?void 0:q.q)===e.tag.q,s=v.useMemo(()=>{var I,E,V,se;return e.tag.sheet===((I=o==null?void 0:o.target)==null?void 0:I.sheet)&&e.tag.name===((E=o==null?void 0:o.target)==null?void 0:E.name)?Fr(e.tag,(V=o==null?void 0:o.target)==null?void 0:V.damageType1,(se=o==null?void 0:o.target)==null?void 0:se.damageType2):e.tag},[e.tag,(H=o==null?void 0:o.target)==null?void 0:H.sheet,(ae=o==null?void 0:o.target)==null?void 0:ae.name,(oe=o==null?void 0:o.target)==null?void 0:oe.damageType1,(L=o==null?void 0:o.target)==null?void 0:L.damageType2]),r=v.useMemo(()=>({...e,tag:s}),[s,e]),d=t==null?void 0:t.compute(r),p=s.name||s.q,{statHighlight:w,setStatHighlight:D}=v.useContext(jr),S=s.name?"":s.attribute?`${s.attribute}_${s.q}`:s.q==="cappedCrit_"?"crit_":s.q==="anom_cappedCrit_"?"anom_crit_":s.q,$=S?Lr(w,S):!1;if(!d)return null;const y=Hr(d.val,fl(p??""));return x(M,{onMouseEnter:()=>S&&D(S),onMouseLeave:()=>D(""),sx:{display:"flex",gap:1,alignItems:"center",p:.5,borderRadius:.5,backgroundColor:c?"rgba(0,200,0,0.2)":void 0,position:"relative","::after":{content:'""',position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:.5,backgroundColor:Kr($),transition:"background-color 0.3s ease-in-out",pointerEvents:"none"}},children:[i(M,{sx:{flexGrow:1},children:i(zn,{tag:s})}),y,i(Wr,{tag:s,onClick:()=>{}})]})}function ky({characterKey:e,onClose:t}){return i(Wi,{open:!!e,onClose:t,children:i(v.Suspense,{fallback:i(Ce,{variant:"rectangular",width:"100%",height:1e3}),children:e&&i(sm,{characterKey:e,onClose:t},e)})})}function sm({characterKey:e,onClose:t}){const n=Tn(e);return i(Ee,{children:i(re,{sx:{display:"flex",flexDirection:"column",gap:1},children:i(v.Suspense,{fallback:i(Ce,{variant:"rectangular",width:"100%",height:1e3}),children:n?i(ul.Provider,{value:n,children:i(lm,{onClose:t})}):i(Ce,{variant:"rectangular",width:"100%",height:1e3})})})})}const cm={cardWidth:"500px",charImgWidth:"75%",iconsSize:1.5,isEditing:!0,charNameWidth:"166px",charNameVariant:"h6",scrollingBgSize:"220px"};function lm({onClose:e}){const{t}=Y(["page_characters"]),n=Nr(),{database:a}=de(),o=Mn(),{key:c,equippedDiscs:s,equippedWengine:r}=o,d=v.useCallback(async()=>{const p=t(`${c}`);window.confirm(t("removeCharacter",{value:p}))&&(a.chars.remove(c),n("/characters"))},[a,n,c,t]);return x(M,{display:"flex",flexDirection:"column",gap:1,children:[x(M,{display:"flex",gap:1,children:[i(Oe,{color:"error",onClick:()=>d(),startIcon:i(Gr,{}),sx:{marginLeft:"auto"},children:t("characterEditor.delete")}),!!e&&i(Hi,{onClick:e,children:i(Ki,{})})]}),i(M,{children:x(U,{container:!0,spacing:1,sx:{justifyContent:"center"},children:[i(U,{item:!0,xs:6,sm:4,md:4,lg:4,xl:4,children:x(Ee,{sx:{height:"100%",display:"flex",flexDirection:"column",gap:1},children:[i(Td,{characterKey:c,charCardConfig:cm}),i(M,{sx:{px:1},children:i(Ur,{level:o.level,milestone:o.promotion,setBoth:({level:p,milestone:w})=>a.chars.set(c,{level:p,promotion:w})})}),i(am,{}),i(Ed,{mindscape:o.mindscape,setMindscape:p=>a.chars.set(c,{mindscape:p})})]})}),x(U,{item:!0,xs:6,sm:8,md:8,lg:8,xl:8,sx:{display:"flex",flexDirection:"column",gap:1},children:[i(M,{children:x(U,{container:!0,columns:3,spacing:1,children:[ji.map(p=>i(U,{item:!0,xs:1,children:i(Qd,{skillKey:p},p)},p)),i(U,{item:!0,xs:1,children:i(Fd,{})},"core")]})}),i(M,{children:i(Nd,{setWengine:p=>{p?a.wengines.set(p,{location:c}):r&&a.wengines.set(r,{location:""})},setDisc:(p,w)=>{w?a.discs.set(w,{location:c}):s[p]&&a.discs.set(s[p],{location:""})}})})]})]})})]})}function Cy({character:e,charOpt:t,wengineId:n,discIds:a,children:o}){const c=rm(e,n,a),s=v.useMemo(()=>Dl([...Sl([e.key]),...c,vn.common.critMode.add(t.critMode),ie.common.lvl.add(t.enemyLvl),ie.common.def.add(t.enemyDef),ie.common.isStunned.add(t.enemyisStunned?1:0),ie.common.stun_.add(t.enemyStunMultiplier/100),ie.common.unstun_.add(1),...t.conditionals.flatMap(({sheet:d,src:p,dst:w,condKey:D,condValue:S})=>xn("preset0",_l(d,p,w)(D,S))),...t.bonusStats.filter(({disabled:d})=>!d).flatMap(({tag:d,value:p})=>xn("preset0",{tag:{...d,src:e.key,sheet:"agg",et:"own"},value:ha(ga(p,d.q??""))})),...t.enemyStats.flatMap(({tag:d,value:p})=>xn("preset0",{tag:{...d,qt:"common",et:"enemy",sheet:"agg"},value:ha(ga(p,d.q??""))}))]),[c,t,e.key]),r=v.useMemo(()=>s&&new Map,[s]);return i(Jr.Provider,{value:r,children:i(Gi.Provider,{value:s,children:o})})}function rm(e,t,n){const a=hl(t),o=gl(n),c=v.useMemo(()=>Sd(a),[a]),s=v.useMemo(()=>Dd(Object.values(o).filter(Yr)),[o]);return v.useMemo(()=>vl(e.key,...kl(e),...c,...s),[e,c,s])}function Sy({character:e,conditionals:t,children:n}){const a=v.useMemo(()=>Dl([...Sl([e.key]),...vl(e.key,...kl(e),...Cl({},$l(el,()=>4)),P.sheet("agg").reread(P.sheet("wengine")),A.wengine.lvl.add(60),A.wengine.modification.add(5),A.wengine.phase.add(1),...Xc.map(o=>A.common.count.sheet(o).add(1))),vn.common.critMode.add("avg"),ie.common.lvl.add(100),ie.common.def.add(900),ie.common.isStunned.add(0),ie.common.stun_.add(1.5),ie.common.unstun_.add(1),...t.flatMap(({sheet:o,src:c,dst:s,condKey:r,condValue:d})=>xn("preset0",_l(o,c,s)(r,d)))]),[e,t]);return i(Gi.Provider,{value:a,children:n})}function C(e,t={}){return{...dm(e,t==null?void 0:t.perSkillAbility),core:um(e,t==null?void 0:t.core,t==null?void 0:t.ability),m1:De(e,1,t==null?void 0:t.m1),m2:De(e,2,t==null?void 0:t.m2),m3:De(e,3,t==null?void 0:t.m3),m4:De(e,4,t==null?void 0:t.m4),m5:De(e,5,t==null?void 0:t.m5),m6:De(e,6,t==null?void 0:t.m6)}}function g(e){return{title:i(zn,{tag:e.tag,preventRecursion:!0}),fieldRef:e.tag}}function dm(e,t){const n=b.char[e],a=j[e],[o,c]=m("char",e);return $l(ji,s=>({title:s,img:_e(`${s}Flat`),documents:Object.keys(n[s]).flatMap(r=>{var d;return[{type:"text",header:{icon:i(Q,{src:_e(`${s}Flat`),size:1.5}),text:o(`${s}.${r}.name`)},text:o(`${s}.${r}.desc`)},{type:"fields",fields:Object.values(a).filter(p=>p.name.includes(r)).map(p=>({title:mm(e,s,p.name),fieldRef:p.tag}))},...((d=t==null?void 0:t[s])==null?void 0:d[r])??[]]})}))}function mm(e,t,n){const[a,o,c]=n.split("_");return J(c,{val:`$t(char_${e}_gen:${t}.${a}.params.${o})`})}function um(e,t=[],n=[]){const[a,o]=m("char",e);return{title:"core",documents:[{type:"text",header:{icon:i(Q,{src:_e("coreFlat"),size:1.5}),text:a("core.name")},text:c=>a(`core.desc.${c.compute(A.char.core).val}`)},...t,{type:"text",header:{icon:i(Q,{src:_e("coreFlat"),size:1.5}),text:a("ability.name")},text:a("ability.desc")},...n]}}function De(e,t,n=[]){const[a,o]=m("char",e);return{title:`mindscape${t}`,documents:[{type:"text",header:{icon:i(Q,{src:Zr(t),size:1.5}),text:a(`mindscapes.${t}.name`)},text:x(Jt,{children:[a(`mindscapes.${t}.desc`),i("br",{}),i("br",{}),i("i",{children:a(`mindscapes.${t}.flavor`)})]})},...n]}}const En="Anby",[,pn]=m("char",En),di=h[En],Re=u[En],hm=C(En,{core:[{type:"conditional",conditional:{label:pn("coreCond"),metadata:di.core_after3rdBasic,fields:[{title:pn("core_dazeInc_"),fieldRef:Re.core_after3rdBasic_dazeInc_.tag}]}}],m1:[{type:"conditional",conditional:{label:pn("m1Cond"),metadata:di.m1After4thBasicHit,fields:[g(Re.m1_after4thHit_energyRegen_)]}}],m2:[{type:"fields",fields:[g(Re.m2_stunned_basic_dmg_),g(Re.m2_unstunned_ex_dazeInc_)]}],m6:[{type:"conditional",conditional:{label:pn("m6Cond"),metadata:di.m6ChargeConsumed,fields:[g(Re.m6_charge_basic_dmg_),g(Re.m6_charge_exSpecial_dmg_)]}}]}),gm="Anton",pm=C(gm),Ve="AstraYao",[,ce]=m("char",Ve),mi=h[Ve],te=u[Ve],fm=j[Ve],wa=b.char[Ve],_m=C(Ve,{perSkillAbility:{special:{IdyllicCadenza:[{type:"conditional",conditional:{label:ce("idyllic_cadenzaCond"),metadata:mi.idyllic_cadenza,fields:[g(te.common_dmg_),g(te.crit_dmg_)]}}]},chain:{UltimateFantasianSonata:[{type:"fields",fields:[{title:ce("ult_heal"),fieldRef:fm.ultimate_heal.tag}]}]}},core:[{type:"fields",fields:[g(te.core_atk)]}],m1:[{type:"conditional",conditional:{label:ce("m1Cond"),metadata:mi.attack_hits,fields:[g(te.m1_resRed_)]}}],m2:[{type:"fields",fields:[{title:ce("m2_atkBuffInc_"),fieldValue:wa.m2.atk_*100,unit:"%"},{title:ce("m2_maxIncrease"),fieldValue:wa.m2.max_increase}]}],m4:[{type:"fields",fields:[g(te.m4_attack_quickAssist_extraDmg),g(te.m4_anomaly_quickAssist_anomBuildup_),g(te.m4_stun_quickAssist_dazeInc_)]}],m6:[{type:"fields",fields:[{title:ce("m6_mv_mult_"),fieldRef:te.m6_mv_mult_.tag},{title:ce("m6_crit_"),fieldRef:te.m6_crit_.tag}]},{type:"conditional",conditional:{label:ce("m6Cond"),metadata:mi.precise_assist_triggered,fields:[{title:ce("m6_capriccio_crit_"),fieldRef:te.m6_capriccio_crit_.tag}]}}]}),$m="Ben",ym=C($m),bm="Billy",xm=C(bm),Pe="Burnice",[,Z]=m("char",Pe),va=h[Pe],ue=u[Pe],fn=j[Pe],wm=b.char[Pe],vm=C(Pe,{core:[{type:"fields",fields:[{title:Z("core_afterburn_dmg"),fieldRef:fn.core_afterburn_dmg.tag},{title:Z("core_afterburn_anomBuildup"),fieldRef:fn.core_afterburn_anomBuildup.tag},{title:Z("core_afterburn_dmg_"),fieldRef:ue.core_afterburn_dmg_.tag}]}],ability:[{type:"fields",fields:[g(ue.ability_fire_anomBuildup_)]}],m1:[{type:"fields",fields:[{title:Z("m1_afterburn_mv_mult"),fieldValue:wm.m1.afterburn_dmg*100,unit:"%"},{title:Z("m1_afterburn_anomBuildup"),fieldRef:ue.m1_afterburn_fire_anomBuildup_.tag}]}],m2:[{type:"conditional",conditional:{label:Z("m2Cond"),metadata:va.thermal_penetration,fields:[g(ue.m2_pen_)]}}],m4:[{type:"fields",fields:[{title:Z("m4_exSpecial_crit_"),fieldRef:ue.m4_exSpecial_crit_.tag},{title:Z("m4_assistSkill_crit_"),fieldRef:ue.m4_assistSkill_crit_.tag}]}],m6:[{type:"fields",fields:[{title:Z("m6_additional_afterburn_dmg"),fieldRef:fn.m6_additional_afterburn_dmg.tag}]},{type:"conditional",conditional:{label:Z("m6Cond"),metadata:va.exSpecial_active,fields:[g(ue.m6_burn_fire_resIgn_),{title:Z("m6_fire_resIgn"),fieldRef:ue.m6_fire_resIgn_.tag},{title:Z("m6_additional_burn_dmg"),fieldRef:fn.m6_additional_burn_dmg.tag}]}}]}),km="Caesar",Cm=C(km),Sm="Corin",Dm=C(Sm),Rm="Ellen",Im=C(Rm),Zt="Evelyn",[,$e]=m("char",Zt),ui=h[Zt],Ie=u[Zt],ka=j[Zt],Mm=C(Zt,{core:[{type:"conditional",conditional:{label:$e("coreCond"),metadata:ui.binding_seal,fields:[g(Ie.core_crit_)]}}],ability:[{type:"fields",fields:[{title:$e("ability_dmg_"),fieldRef:Ie.ability_chain_ult_dmg_.tag},{title:$e("ability_mv_mult"),fieldRef:Ie.ability_chainSkill_mv_mult.tag}]}],m1:[{type:"conditional",conditional:{label:$e("m1Cond"),metadata:ui.enemy_bound,fields:[g(Ie.m1_defIgn_)]}}],m2:[{type:"fields",fields:[g(Ie.m2_atk_)]}],m4:[{type:"fields",fields:[{title:$e("m4_shield"),fieldRef:ka.m4_shield.tag}]},{type:"conditional",conditional:{label:$e("m4Cond"),metadata:ui.m4_shield_exists,fields:[g(Ie.m4_crit_dmg_)]}}],m6:[{type:"fields",fields:[{title:$e("m6_follow_up_dmg"),fieldRef:ka.m6_follow_up_dmg_.tag}]}]}),Tm="Grace",Bm=C(Tm),zm="Harumasa",Em=C(zm),Om="Hugo",Vm=C(Om),Qt="Jane",[,he]=m("char",Qt),ye=h[Qt],K=u[Qt],Pm=j[Qt],Am=C(Qt,{perSkillAbility:{basic:{Passion:[{type:"conditional",conditional:{label:he("passionCond"),metadata:ye.passion,fields:[g(K.passion_physical_anomBuildup_),g(K.passion_atk)]}}]}},core:[{type:"conditional",conditional:{label:he("gnawedCond"),metadata:ye.gnawed,fields:[g(K.core_assault_crit_),g(K.core_assault_crit_dmg_)]}}],ability:[{type:"conditional",conditional:{label:he("abilityCond"),metadata:ye.enemy_suffering_anomaly,fields:[g(K.ability_physical_anomBuildup_)]}}],m1:[{type:"conditional",conditional:{label:he("passionCond"),metadata:ye.passion,fields:[g(K.m1_physical_anomBuildup_),g(K.m1_common_dmg_)]}}],m2:[{type:"conditional",conditional:{label:he("gnawedCond"),metadata:ye.gnawed,fields:[g(K.m2_defIgn_),g(K.m2_assault_defIgn_),g(K.m2_assault_crit_dmg_)]}}],m4:[{type:"conditional",conditional:{label:he("m4Cond"),metadata:ye.assault_or_disorder_triggered,fields:[g(K.m4_anomaly_dmg_)]}}],m6:[{type:"conditional",conditional:{label:he("passionCond"),metadata:ye.passion,fields:[g(K.m6_crit_),g(K.m6_crit_dmg_)]}},{type:"fields",fields:[{title:he("m6_additional_dmg"),fieldRef:Pm.m6_additional_dmg.tag}]}]}),qm="JuFufu",Fm=C(qm),jm="Koleda",Lm=C(jm),Ae="Lighter",[,ge]=m("char",Ae),At=h[Ae],ne=u[Ae],Hm=j[Ae],Km=b.char[Ae],Wm=C(Ae,{core:[{type:"conditional",conditional:{label:ge("coreCond.morale_consumed"),metadata:At.morale_consumed,fields:[g(ne.core_impact_)]}},{type:"conditional",conditional:{label:ge("coreCond.morale_burst_hit"),metadata:At.morale_burst_hit,fields:[g(ne.core_ice_resRed_),g(ne.core_fire_resRed_)]}}],ability:[{type:"conditional",conditional:{label:ge("abilityCond"),metadata:At.elation,fields:[g(ne.ability_ice_dmg_),g(ne.ability_fire_dmg_)]}}],m1:[{type:"conditional",conditional:{label:ge("collapseCond"),metadata:At.collapse,fields:[g(ne.m1_ice_resRed_),g(ne.m1_fire_resRed_)]}},{type:"fields",fields:[{title:ge("m1_finishing_move_dmg_"),fieldRef:ne.m1_finishing_move_dmg_.tag}]}],m2:[{type:"conditional",conditional:{label:ge("collapseCond"),metadata:At.collapse,fields:[g(ne.m2_stun_)]}},{type:"fields",fields:[{title:ge("m2_elation_inc_"),fieldValue:Km.m2.ability_buff_inc_*100,unit:"%"}]}],m4:[{type:"fields",fields:[g(ne.m4_enerRegen_)]}],m6:[{type:"fields",fields:[{title:ge("m6_blazing_impact_dmg"),fieldRef:Hm.m6_blazing_impact_dmg.tag}]}]}),Nm="Lucy",Gm=C(Nm),Um="Lycaon",Jm=C(Um),Xt="Miyabi",[,F]=m("char",Xt),pe=h[Xt],W=u[Xt],Ym=j[Xt],Zm=C(Xt,{perSkillAbility:{chain:{UltimateLingeringSnow:[{type:"conditional",conditional:{label:F("ultCond"),metadata:pe.ult_used,fields:[g(W.ult_ice_dmg_)]}}]}},core:[{type:"conditional",conditional:{label:F("frostbiteCond"),metadata:pe.frostbite,fields:[g(W.frostbite_crit_dmg_)]}},{type:"conditional",conditional:{label:F("coreIcefireCond"),metadata:pe.icefire,fields:[g(W.core_frost_anomBuildup_)]}},{type:"fields",fields:[{title:F("core_frostburnBreak_dmg"),fieldRef:Ym.core_frostburnBreak_dmg.tag}]},{type:"conditional",conditional:{label:F("coreFrostburnCond"),metadata:pe.frostburn,fields:[g(W.core_anomBuildup_)]}}],ability:[{type:"fields",fields:[{title:F("ability_dmg_"),fieldRef:W.ability_dmg_.tag}]},{type:"conditional",conditional:{label:F("abilityCond"),metadata:pe.disorder_triggered,fields:[{title:F("ability_ice_resIgn_"),fieldRef:W.ability_ice_resIgn_.tag}]}}],m1:[{type:"conditional",conditional:{label:F("m1Cond"),metadata:pe.fallen_frost,fields:[{title:F("m1_defIgn_"),fieldRef:W.m1_defIgn_.tag}]}},{type:"conditional",conditional:{label:F("m1Cond2"),metadata:pe.level_3_charge_hit,fields:[g(W.m1_anomBuildup_)]}}],m2:[{type:"fields",fields:[{title:F("m2_dmg_"),fieldRef:W.m2_dmg_.tag},g(W.m2_dodgeCounter_dmg_),g(W.m2_crit_)]}],m4:[{type:"fields",fields:[{title:F("m4_frostburnBreak_dmg_"),fieldRef:W.m4_frostburnBreak_dmg_.tag}]}],m6:[{type:"conditional",conditional:{label:F("m6Cond"),metadata:pe.polar,fields:[{title:F("m6_dmg_"),fieldRef:W.m6_dmg_.tag}]}}]}),Qm="Nekomata",Xm=C(Qm),On="Nicole",[,hi]=m("char",On),Ca=h[On],qt=u[On],eu=C(On,{core:[{type:"conditional",conditional:{label:hi("coreCond"),metadata:Ca.bulletsOrFieldHit,fields:[g(qt.core_defRed_)]}}],ability:[{type:"fields",fields:[g(qt.ability_ether_dmg_)]}],m1:[{type:"fields",fields:[g(qt.m1_exSpecial_dmg_),{title:hi("m1_exSpecial_anomBuildup"),fieldRef:qt.m1_exSpecial_anomBuildup_.tag}]}],m6:[{type:"conditional",conditional:{label:hi("m6Cond"),metadata:Ca.fieldHitsEnemy,fields:[g(qt.m6_crit_)]}}]}),qe="PanYinhu",[,be]=m("char",qe),Sa=h[qe],gi=u[qe],pi=j[qe],Da=b.char[qe],tu=C(qe,{perSkillAbility:{chain:{UltimateAFeastFitForAnEmperor:[{type:"fields",fields:[{title:be("ultimate_heal"),fieldRef:pi.ultimate_heal.tag},{title:be("ultimate_healOverTime"),fieldRef:pi.ultimate_healOverTime.tag}]}]}},core:[{type:"conditional",conditional:{label:be("coreCond"),metadata:Sa.meridian_flow,fields:[g(gi.core_sheerForce)]}}],ability:[{type:"conditional",conditional:{label:be("abilityCond"),metadata:Sa.depleted_qi,fields:[g(gi.ability_dmgInc_)]}}],m1:[{type:"fields",fields:[g(gi.m1_dmgInc_)]}],m4:[{type:"fields",fields:[{title:be("m4_heal"),fieldRef:pi.m4_heal.tag}]}],m6:[{type:"fields",fields:[{title:be("m6_sheerForce"),fieldValue:Da.m6.sheerForce*100,unit:"%"},{title:be("m6_maxSheerForce"),fieldValue:Da.m6.max_sheerForce}]}]}),nu="Piper",iu=C(nu),au="Pulchra",ou=C(au),Fe="Qingyi",[,Ft]=m("char",Fe),fi=h[Fe],X=u[Fe],su=j[Fe],cu=b.char[Fe],lu=C(Fe,{perSkillAbility:{basic:{BasicAttackEnchantedMoonlitBlossoms:[{type:"conditional",conditional:{label:Ft("flashConnectCond"),metadata:fi.flash_connect_consumed,fields:[g(X.flash_connect_dmg_),g(X.flash_connect_dazeInc_)]}}]},chain:{ChainAttackTranquilSerenade:[{type:"fields",fields:[g(X.chain_dmg_)]}]}},core:[{type:"conditional",conditional:{label:Ft("subjugationCond"),metadata:fi.subjugation,fields:[g(X.core_stun_)]}}],ability:[{type:"fields",fields:[g(X.ability_basic_dazeInc_),g(X.ability_atk)]}],m1:[{type:"fields",fields:[g(X.m1_defRed_),g(X.m1_crit_)]}],m2:[{type:"fields",fields:[{title:Ft("m2_stun_"),fieldValue:cu.m2.stun_mult_*100,unit:"%"},g(X.m2_dazeInc_)]}],m4:[{type:"fields",fields:[{title:Ft("m4_shield"),fieldRef:su.m4_shield.tag}]}],m6:[{type:"fields",fields:[g(X.m6_crit_dmg_)]},{type:"conditional",conditional:{label:Ft("m6Cond"),metadata:fi.moonlit_blossoms_hit,fields:[g(X.m6_resRed_)]}}]}),ru="Rina",du=C(ru),mu="Seth",uu=C(mu),en="Soldier0Anby",[,_n]=m("char",en),_i=h[en],Me=u[en],hu=j[en],gu=C(en,{core:[{type:"conditional",conditional:{label:_n("coreCond"),metadata:_i.markedWithSilverStar,fields:[g(Me.core_common_dmg_),g(Me.core_markedWithSilverStar_crit_dmg_)]}}],ability:[{type:"fields",fields:[g(Me.ability_crit_),g(Me.ability_aftershock_dmg_)]}],m2:[{type:"conditional",conditional:{label:_n("coreCond"),metadata:_i.markedWithSilverStar,fields:[g(Me.m2_crit_)]}}],m4:[{type:"conditional",conditional:{label:_n("coreCond"),metadata:_i.markedWithSilverStar,fields:[g(Me.m4_electric_resIgn_)]}}],m6:[{type:"fields",fields:[{title:_n("m6_additional_dmg"),fieldRef:hu.m6_additional_dmg.tag}]}]}),pu="Soldier11",fu=C(pu),_u="Soukaku",$u=C(_u),tn="Trigger",[,xe]=m("char",tn),Ra=h[tn],jt=u[tn],$i=j[tn],yu=C(tn,{core:[{type:"conditional",conditional:{label:xe("coreCond"),metadata:Ra.aftershock_hit,fields:[g(jt.core_stun_)]}}],ability:[{type:"fields",fields:[{title:xe("ability_dazeInc_"),fieldRef:jt.ability_aftershock_dazeInc_.tag}]}],m1:[{type:"fields",fields:[g(jt.m1_stun_)]}],m2:[{type:"conditional",conditional:{label:xe("m2Cond"),metadata:Ra.hunters_gaze,fields:[g(jt.m2_crit_dmg_)]}}],m4:[{type:"fields",fields:[{title:xe("m4_disconnect_dmg"),fieldRef:$i.m4_disconnect_dmg.tag},{title:xe("m4_disconnect_daze"),fieldRef:$i.m4_disconnect_daze.tag}]}],m6:[{type:"fields",fields:[{title:xe("m6_armor_break_rounds_dmg"),fieldRef:$i.m6_armor_break_rounds_dmg.tag},{title:xe("m6_armor_break_rounds_dmg_"),fieldRef:jt.m6_armor_break_rounds_dmg_.tag}]}]}),bu="Vivian",xu=C(bu),wu="Yanagi",vu=C(wu),nn="Yixuan",[,fe]=m("char",nn),Ia=h[nn],N=u[nn],yi=j[nn],ku=C(nn,{core:[{type:"fields",fields:[g(N.core_hpSheerForce),{title:fe("core_dmg_"),fieldRef:N.core_dmg_.tag},g(N.core_exSpecial_dmg_),g(N.core_assistFollowUp_dmg_),g(N.core_chain_dmg_),g(N.core_ult_dmg_)]}],ability:[{type:"fields",fields:[{title:fe("ability_dmg"),fieldRef:yi.ability_dmg.tag},{title:fe("ability_dmg_"),fieldRef:N.ability_dmg_.tag}]},{type:"conditional",conditional:{label:fe("meditationCond"),metadata:Ia.meditation,fields:[g(N.ability_crit_dmg_)]}}],m1:[{type:"fields",fields:[g(N.m1_crit_),{title:fe("m1_dmg"),fieldRef:yi.m1_dmg.tag}]}],m2:[{type:"fields",fields:[g(N.m2_ult_ether_resIgn_),g(N.m2_exSpecial_ether_resIgn_),{title:fe("m2_dmg"),fieldRef:yi.m2_dmg.tag}]}],m4:[{type:"conditional",conditional:{label:fe("m4Cond"),metadata:Ia.tranquility,fields:[{title:fe("m4_dmg_"),fieldRef:N.m4_dmg_.tag}]}}],m6:[{type:"fields",fields:[g(N.m6_sheer_dmg_)]}]}),an="ZhuYuan",[,we]=m("char",an),bi=h[an],Lt=u[an],Cu=j[an],Su=C(an,{core:[{type:"fields",fields:[{title:we("core_dmg_"),fieldRef:Lt.core_dmg_.tag}]}],ability:[{type:"conditional",conditional:{label:we("abilityCond"),metadata:bi.ex_chain_ult_used,fields:[g(Lt.ability_crit_)]}}],m2:[{type:"conditional",conditional:{label:we("m2SuppresiveModeCond"),metadata:bi.suppresive_mode,fields:[g(Lt.m2_dmg_red_)]}},{type:"conditional",conditional:{label:we("m2BasicDashEtherCond"),metadata:bi.shotshells_hit,fields:[{title:we("m2_basic_dash_ether_dmg_"),fieldRef:Lt.m2_basic_dash_ether_dmg_.tag}]}}],m4:[{type:"fields",fields:[{title:we("m4_ether_resIgn_"),fieldRef:Lt.m4_basic_dash_ether_res_ign_.tag}]}],m6:[{type:"fields",fields:[{title:we("m6_ether_afterglow"),fieldRef:Cu.m6_ether_afterglow.tag}]}]}),Du={Anby:hm,Anton:pm,AstraYao:_m,Ben:ym,Billy:xm,Burnice:vm,Caesar:Cm,Corin:Dm,Ellen:Im,Evelyn:Mm,Grace:Bm,Harumasa:Em,Hugo:Vm,Jane:Am,JuFufu:Fm,Koleda:Lm,Lighter:Wm,Lucy:Gm,Lycaon:Jm,Miyabi:Zm,Nekomata:Xm,Nicole:eu,Piper:iu,Pulchra:ou,Qingyi:lu,Rina:du,Seth:uu,Soldier0Anby:gu,Soldier11:fu,Soukaku:$u,Trigger:yu,Vivian:xu,Yanagi:vu,PanYinhu:tu,Yixuan:ku,ZhuYuan:Su},Vn="AstralVoice",[Ma,Ru]=m("disc",Vn),Ta=T(Vn),Iu=h[Vn],Mu=u[Vn],Tu={2:{title:i(B,{}),img:Ta,documents:[{type:"text",text:Ma("desc2")}]},4:{title:i(z,{}),img:Ta,documents:[{type:"text",text:Ma("desc4")},{type:"conditional",conditional:{label:Ru("set4_cond"),metadata:Iu.astral,fields:[l(Mu.set4_team_dmg_.tag)]}}]}},Pn="BranchBladeSong",[Ba,Bu]=m("disc",Pn),za=T(Pn),zu=h[Pn],Ea=u[Pn],Eu={2:{title:i(B,{}),img:za,documents:[{type:"text",text:Ba("desc2")}]},4:{title:i(z,{}),img:za,documents:[{type:"text",text:Ba("desc4")},{type:"fields",fields:[l(Ea.set4_passive.tag)]},{type:"conditional",conditional:{label:Bu("set4_cond"),metadata:zu.apply_or_trigger,fields:[l(Ea.set4_cond.tag)]}}]}},An="ChaosJazz",[Oa,Ou]=m("disc",An),Va=T(An),Vu=h[An],$n=u[An],Pu={2:{title:i(B,{}),img:Va,documents:[{type:"text",text:Oa("desc2")}]},4:{title:i(z,{}),img:Va,documents:[{type:"text",text:Oa("desc4")},{type:"fields",fields:[l($n.set4_passive_fire_dmg_.tag),l($n.set4_passive_electric_dmg_.tag)]},{type:"conditional",conditional:{label:Ou("set4_cond"),metadata:Vu.while_off_field,fields:[{title:"EX Special Attack DMG",fieldRef:$n.set4_off_field_special_dmg_.tag},{title:"Assist Attack Attack DMG",fieldRef:$n.set4_off_field_assist_dmg_.tag}]}}]}},qn="ChaoticMetal",[Pa,Au]=m("disc",qn),Aa=T(qn),qu=h[qn],qa=u[qn],Fu={2:{title:i(B,{}),img:Aa,documents:[{type:"text",text:Pa("desc2")}]},4:{title:i(z,{}),img:Aa,documents:[{type:"text",text:Pa("desc4")},{type:"fields",fields:[l(qa.set4_passive.tag)]},{type:"conditional",conditional:{label:Au("set4_cond"),metadata:qu.trigger_corruption,fields:[l(qa.set4_cond_trigger_corruption.tag)]}}]}},Fn="FangedMetal",[Fa,ju]=m("disc",Fn),ja=T(Fn),Lu=h[Fn],Hu=u[Fn],Ku={2:{title:i(B,{}),img:ja,documents:[{type:"text",text:Fa("desc2")}]},4:{title:i(z,{}),img:ja,documents:[{type:"text",text:Fa("desc4")},{type:"conditional",conditional:{label:ju("set4_cond"),metadata:Lu.inflict_assault,fields:[l(Hu.set4_cond_inflict_assault.tag)]}}]}},jn="FreedomBlues",[La,Wu]=m("disc",jn),Ha=T(jn),Nu=h[jn],Gu=u[jn],Uu={2:{title:i(B,{}),img:Ha,documents:[{type:"text",text:La("desc2")}]},4:{title:i(z,{}),img:Ha,documents:[{type:"text",text:La("desc4")},{type:"conditional",conditional:{label:Wu("set4_cond"),metadata:Nu.exSpecialHit,fields:[l(Gu.anomBuildupRes_.tag)]}}]}},Ln="HormonePunk",[Ka,Ju]=m("disc",Ln),Wa=T(Ln),Yu=h[Ln],Zu=u[Ln],Qu={2:{title:i(B,{}),img:Wa,documents:[{type:"text",text:Ka("desc2")}]},4:{title:i(z,{}),img:Wa,documents:[{type:"text",text:Ka("desc4")},{type:"conditional",conditional:{label:Ju("set4_cond"),metadata:Yu.entering_combat,fields:[l(Zu.set4_cond_entering_combat.tag)]}}]}},Hn="InfernoMetal",[Na,Xu]=m("disc",Hn),Ga=T(Hn),eh=h[Hn],th=u[Hn],nh={2:{title:i(B,{}),img:Ga,documents:[{type:"text",text:Na("desc2")}]},4:{title:i(z,{}),img:Ga,documents:[{type:"text",text:Na("desc4")},{type:"conditional",conditional:{label:Xu("set4_cond"),metadata:eh.hitting_burning_enemy,fields:[l(th.set4_cond_hitting_burning_enemy.tag)]}}]}},Kn="KingOfTheSummit",[Ua,Dy]=m("disc",Kn),Ja=T(Kn),ih=h[Kn],Ya=u[Kn],ah={2:{title:i(B,{}),img:Ja,documents:[{type:"text",text:Ua("desc2")},{type:"fields",fields:[l(Ya.set2.tag)]}]},4:{title:i(z,{}),img:Ja,documents:[{type:"text",text:Ua("desc4")},{type:"conditional",conditional:{metadata:ih.launchExSpecialOrChain,label:J("uponLaunch.2",{val1:"$t(skills.exSpecial)",val2:"$t(skills.chain)"}),fields:[l(Ya.set4_team_launchExSpecialOrChain_crit_dmg_.tag)]}}]}},Wn="PhaethonsMelody",[Za,Qa]=m("disc",Wn),Xa=T(Wn),eo=h[Wn],to=u[Wn],oh={2:{title:i(B,{}),img:Xa,documents:[{type:"text",text:Za("desc2")}]},4:{title:i(z,{}),img:Xa,documents:[{type:"text",text:Za("desc4")},{type:"conditional",conditional:{label:Qa("set4_cond_squad_use_ex"),metadata:eo.squad_use_ex,fields:[l(to.set4_squad_anomProf.tag)]}},{type:"conditional",conditional:{label:Qa("set4_cond_not_char_use_ex"),metadata:eo.not_char_use_ex,fields:[l(to.set4_not_self_ether_.tag)]}}]}},Nn="PolarMetal",[no,sh]=m("disc",Nn),io=T(Nn),ch=h[Nn],ao=u[Nn],lh={2:{title:i(B,{}),img:io,documents:[{type:"text",text:no("desc2")}]},4:{title:i(z,{}),img:io,documents:[{type:"text",text:no("desc4")},{type:"conditional",conditional:{label:sh("set4_cond"),metadata:ch.freeze_shatter}},{type:"fields",fields:[{title:"Basic Attack DMG",fieldRef:ao.set4_basic_dmg_.tag},{title:"Dash Attack DMG",fieldRef:ao.set4_dash_dmg_.tag}]}]}},Gn="ProtoPunk",[oo,rh]=m("disc",Gn),so=T(Gn),dh=h[Gn],mh=u[Gn],uh={2:{title:i(B,{}),img:so,documents:[{type:"text",text:oo("desc2")}]},4:{title:i(z,{}),img:so,documents:[{type:"text",text:oo("desc4")},{type:"conditional",conditional:{label:rh("set4_cond"),metadata:dh.def_assist_or_evasive_assist,fields:[l(mh.set4_cond_def_assist_or_evasive_assist_dmg_.tag)]}}]}},Un="PufferElectro",[co,hh]=m("disc",Un),lo=T(Un),gh=h[Un],ro=u[Un],ph={2:{title:i(B,{}),img:lo,documents:[{type:"text",text:co("desc2")}]},4:{title:i(z,{}),img:lo,documents:[{type:"text",text:co("desc4")},{type:"fields",fields:[{title:"Ultimate DMG",fieldRef:ro.set4_dmg_.tag}]},{type:"conditional",conditional:{label:hh("set4_cond"),metadata:gh.launching_ult,fields:[l(ro.set4_cond_launching_ult_atk_.tag)]}}]}},Jn="ShadowHarmony",[mo,fh]=m("disc",Jn),uo=T(Jn),_h=h[Jn],ho=u[Jn],$h={2:{title:i(B,{}),img:uo,documents:[{type:"text",text:mo("desc2")}]},4:{title:i(z,{}),img:uo,documents:[{type:"text",text:mo("desc4")},{type:"conditional",conditional:{label:fh("set4_cond_stacks"),metadata:_h.stacks,fields:[l(ho.set4_stack_atk_.tag),l(ho.set4_stack_crit_.tag)]}}]}},Yi="ShockstarDisco",[go,Ry]=m("disc",Yi),po=T(Yi),xi=u[Yi],yh={2:{title:i(B,{}),img:po,documents:[{type:"text",text:go("desc2")}]},4:{title:i(z,{}),img:po,documents:[{type:"text",text:go("desc4")},{type:"fields",fields:[{title:"Basic Attack Daze",fieldRef:xi.set4_basic_daze_.tag},{title:"Dash Attack Daze",fieldRef:xi.set4_dash_daze_.tag},{title:"Dodge Counter Daze",fieldRef:xi.set4_dodgeCounter_daze_.tag}]}]}},Ml="SoulRock",[fo,Iy]=m("disc",Ml),_o=T(Ml),bh={2:{title:i(B,{}),img:_o,documents:[{type:"text",text:fo("desc2")}]},4:{title:i(z,{}),img:_o,documents:[{type:"text",text:fo("desc4")}]}},Yn="SwingJazz",[$o,xh]=m("disc",Yn),yo=T(Yn),wh=h[Yn],vh=u[Yn],kh={2:{title:i(B,{}),img:yo,documents:[{type:"text",text:$o("desc2")}]},4:{title:i(z,{}),img:yo,documents:[{type:"text",text:$o("desc4")},{type:"conditional",conditional:{label:xh("set4_cond"),metadata:wh.chain_or_ult,fields:[l(vh.set4_cond_chain_or_ult.tag)]}}]}},Zn="ThunderMetal",[bo,Ch]=m("disc",Zn),xo=T(Zn),Sh=h[Zn],Dh=u[Zn],Rh={2:{title:i(B,{}),img:xo,documents:[{type:"text",text:bo("desc2")}]},4:{title:i(z,{}),img:xo,documents:[{type:"text",text:bo("desc4")},{type:"conditional",conditional:{label:Ch("set4_cond"),metadata:Sh.enemy_shocked,fields:[l(Dh.set4_cond_enemy_shocked_atk_.tag)]}}]}},Qn="WoodpeckerElectro",[wo,Ih]=m("disc",Qn),vo=T(Qn),Mh=h[Qn],Th=u[Qn],Bh={2:{title:i(B,{}),img:vo,documents:[{type:"text",text:wo("desc2")}]},4:{title:i(z,{}),img:vo,documents:[{type:"text",text:wo("desc4")},{type:"conditional",conditional:{label:Ih("set4_cond"),metadata:Mh.crit_basic_dodge_ex,fields:[l(Th.set4_cond_crit_basic_dodge_ex_atk_.tag)]}}]}},Xn="YunkuiTales",[ko,My]=m("disc",Xn),Co=T(Xn),zh=h[Xn],wi=u[Xn],Eh={2:{title:i(B,{}),img:Co,documents:[{type:"text",text:ko("desc2")},{type:"fields",fields:[l(wi.set2.tag)]}]},4:{title:i(z,{}),img:Co,documents:[{type:"text",text:ko("desc4")},{type:"conditional",conditional:{metadata:zh.uponLaunchExSpecialChainOrUlt,label:J("uponLaunch.3",{val1:"$t(skills.exSpecial)",val2:"$t(skills.chain)",val3:"$t(skills.ult)"}),fields:[l(wi.set4_crit_.tag),l(wi.set4_sheer_dmg_.tag)]}}]}},Oh={AstralVoice:Tu,BranchBladeSong:Eu,ChaosJazz:Pu,ChaoticMetal:Fu,FangedMetal:Ku,FreedomBlues:Uu,HormonePunk:Qu,InfernoMetal:nh,KingOfTheSummit:ah,PhaethonsMelody:oh,PolarMetal:lh,ProtoPunk:uh,PufferElectro:ph,ShadowHarmony:$h,ShockstarDisco:yh,SoulRock:bh,SwingJazz:kh,ThunderMetal:Rh,WoodpeckerElectro:Bh,YunkuiTales:Eh};function B(){return"2-Set"}function z(){return"4-Set"}function f({wKey:e,children:t}){const n=Bn();let a=1;return n&&n.compute(A.common.count.sheet(e)).val&&(a=n.compute(A.wengine.phase).val??1),t(a)}const je="BashfulDemon",[So,Vh]=m("wengine",je),Ph=b.wengine[je],Ah=_(je,"icon"),qh=h[je],Do=u[je],Fh={title:So("phase"),img:Ah,documents:[{type:"text",text:i(f,{wKey:je,children:e=>So(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Do.passive_ice_dmg_.tag)]},{type:"conditional",conditional:{label:Vh("cond"),metadata:qh.launch_ex_attack,fields:[l(Do.team_atk_.tag),{title:"Duration",fieldValue:Ph.duration}]}}]},Le="BigCylinder",[Ro,Ty]=m("wengine",Le),jh=b.wengine[Le],Lh=_(Le,"icon"),Hh=u[Le],Kh=j[Le],Wh={title:Ro("phase"),img:Lh,documents:[{type:"text",text:i(f,{wKey:Le,children:e=>Ro(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Hh.passive_dmg_red_.tag)]},{type:"fields",fields:[{title:"Additional DMG",fieldRef:Kh.damage.tag},{title:"Cooldown",fieldValue:jh.cooldown}]}]},He="BlazingLaurel",[Io,Mo]=m("wengine",He),To=b.wengine[He],Nh=_(He,"icon"),Bo=h[He],vi=u[He],Gh={title:Io("phase"),img:Nh,documents:[{type:"text",text:i(f,{wKey:He,children:e=>Io(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Mo("cond1"),metadata:Bo.quickOrPerfectAssistUsed,fields:[l(vi.impact_.tag),{title:"Duration",fieldValue:To.duration}]}},{type:"conditional",conditional:{label:Mo("cond2"),metadata:Bo.wilt,fields:[l(vi.crit_dmg_ice_.tag),l(vi.crit_dmg_fire_.tag),{title:"Duration",fieldValue:To.wilt_duration}]}}]},Ke="BoxCutter",[zo,Uh]=m("wengine",Ke),Jh=b.wengine[Ke],Yh=_(Ke,"icon"),Zh=h[Ke],Eo=u[Ke],Qh={title:zo("phase"),img:Yh,documents:[{type:"text",text:i(f,{wKey:Ke,children:e=>zo(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Uh("cond"),metadata:Zh.launchedAftershock,fields:[l(Eo.physical_dmg_.tag),l(Eo.daze_.tag),{title:"Duration",fieldValue:Jh.duration}]}}]},on="BunnyBand",[Oo,Xh]=m("wengine",on),eg=_(on,"icon"),tg=h[on],Vo=u[on],ng={title:Oo("phase"),img:eg,documents:[{type:"text",text:i(f,{wKey:on,children:e=>Oo(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Vo.passive_hp_.tag)]},{type:"conditional",conditional:{label:Xh("cond"),metadata:tg.wearerShielded,fields:[l(Vo.atk_.tag)]}}]},Se="CannonRotor",[Po,By]=m("wengine",Se),ig=b.wengine[Se],ag=_(Se,"icon"),og=j[Se],sg=u[Se],cg={title:Po("phase"),img:ag,documents:[{type:"text",text:i(f,{wKey:Se,children:e=>Po(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(sg.passive_atk_.tag)]},{type:"fields",fields:[{title:"Additional DMG",fieldRef:og.damage.tag},{title:"Cooldown",fieldValue:i(f,{wKey:Se,children:e=>ig.cooldown[e]})}]}]},We="CinderCobalt",[Ao]=m("wengine",We),qo=b.wengine[We],lg=_(We,"icon"),rg=h[We],dg=u[We],mg={title:Ao("phase"),img:lg,documents:[{type:"text",text:i(f,{wKey:We,children:e=>Ao(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:J("enterCombatOrSwitchIn"),metadata:rg.enteringCombatOrSwitchingIn,fields:[l(dg.enteringCombatOrSwitchingIn_atk_.tag),{title:J("duration"),fieldValue:qo.duration},{title:J("cd"),fieldValue:qo.cd}]}}]},Ne="DeepSeaVisitor",[Fo,jo]=m("wengine",Ne),Lo=b.wengine[Ne],ug=_(Ne,"icon"),Ho=h[Ne],ki=u[Ne],hg={title:Fo("phase"),img:ug,documents:[{type:"text",text:i(f,{wKey:Ne,children:e=>Fo(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(ki.passive_ice_dmg_.tag)]},{type:"conditional",conditional:{label:jo("cond1"),metadata:Ho.basicHit,fields:[l(ki.crit_.tag),{title:"Duration",fieldValue:Lo.duration}]}},{type:"conditional",conditional:{label:jo("cond2"),metadata:Ho.iceDashAtkHit,fields:[l(ki.extra_crit_.tag),{title:"Duration",fieldValue:Lo.extra_duration}]}}]},Ge="DemaraBatteryMarkII",[Ko,gg]=m("wengine",Ge),pg=b.wengine[Ge],fg=_(Ge,"icon"),_g=h[Ge],Wo=u[Ge],$g={title:Ko("phase"),img:fg,documents:[{type:"text",text:i(f,{wKey:Ge,children:e=>Ko(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Wo.passive_electric_dmg_.tag)]},{type:"conditional",conditional:{label:gg("cond"),metadata:_g.dodgeCounterOrAssistHit,fields:[l(Wo.enerRegen_.tag),{title:"Duration",fieldValue:pg.duration}]}}]},Ue="DrillRigRedAxis",[No,yg]=m("wengine",Ue),Go=b.wengine[Ue],bg=_(Ue,"icon"),xg=h[Ue],Uo=u[Ue],wg={title:No("phase"),img:bg,documents:[{type:"text",text:i(f,{wKey:Ue,children:e=>No(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:yg("cond"),metadata:xg.exSpecialOrChainUsed,fields:[l(Uo.basic_eletric_dmg_.tag),l(Uo.dash_eletric_dmg_.tag),{title:"Duration",fieldValue:Go.duration},{title:"Cooldown",fieldValue:Go.cooldown}]}}]},sn="ElectroLipGloss",[Jo,vg]=m("wengine",sn),kg=_(sn,"icon"),Cg=h[sn],Yo=u[sn],Sg={title:Jo("phase"),img:kg,documents:[{type:"text",text:i(f,{wKey:sn,children:e=>Jo(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:vg("cond"),metadata:Cg.anomalyOnEnemy,fields:[l(Yo.atk_.tag),l(Yo.common_dmg_.tag)]}}]},Je="ElegantVanity",[Zo,Dg]=m("wengine",Je),Rg=b.wengine[Je],Ig=_(Je,"icon"),Mg=h[Je],Tg=u[Je],Bg={title:Zo("phase"),img:Ig,documents:[{type:"text",text:i(f,{wKey:Je,children:e=>Zo(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Dg("cond"),metadata:Mg.consumed25Energy,fields:[l(Tg.common_dmg_.tag),{title:"Duration",fieldValue:Rg.buffDuration}]}}]},Ye="FlamemakerShaker",[Qo,Xo]=m("wengine",Ye),Ci=b.wengine[Ye],zg=_(Ye,"icon"),es=h[Ye],Si=u[Ye],Eg={title:Qo("phase"),img:zg,documents:[{type:"text",text:i(f,{wKey:Ye,children:e=>Qo(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Xo("cond1"),metadata:es.offField,fields:[l(Si.enerRegen.tag)]}},{type:"conditional",conditional:{label:Xo("cond2"),metadata:es.exSpecialAssistHits,fields:[l(Si.common_dmg_.tag),{title:"Duration",fieldValue:Ci.duration},{title:"Cooldown",fieldValue:Ci.cooldown},l(Si.anomProf.tag),{title:"Duration",fieldValue:Ci.anomProfDuration}]}}]},Ze="FlightOfFancy",[ts,Og]=m("wengine",Ze),ns=b.wengine[Ze],Vg=_(Ze,"icon"),Pg=h[Ze],is=u[Ze],Ag={title:ts("phase"),img:Vg,documents:[{type:"text",text:i(f,{wKey:Ze,children:e=>ts(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(is.anomBuildup_.tag)]},{type:"conditional",conditional:{label:Og("cond"),metadata:Pg.etherDmg,fields:[l(is.etherDmg_anomProf.tag),{title:"Duration",fieldValue:ns.duration},{title:"Cooldown",fieldValue:ns.cd}]}}]},Qe="FusionCompiler",[as,qg]=m("wengine",Qe),Fg=b.wengine[Qe],jg=_(Qe,"icon"),Lg=h[Qe],os=u[Qe],Hg={title:as("phase"),img:jg,documents:[{type:"text",text:i(f,{wKey:Qe,children:e=>as(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(os.passive_atk_.tag)]},{type:"conditional",conditional:{label:qg("cond"),metadata:Lg.specialUsed,fields:[l(os.anomProf.tag),{title:"Duration",fieldValue:Fg.duration}]}}]},ei="GildedBlossom",[ss,zy]=m("wengine",ei),Kg=_(ei,"icon"),cs=u[ei],Wg={title:ss("phase"),img:Kg,documents:[{type:"text",text:i(f,{wKey:ei,children:e=>ss(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(cs.passive_atk_.tag),l(cs.passive_exSpecial_dmg_.tag)]}]},Xe="HailstormShrine",[ls,Ng]=m("wengine",Xe),Gg=b.wengine[Xe],Ug=_(Xe,"icon"),Jg=h[Xe],rs=u[Xe],Yg={title:ls("phase"),img:Ug,documents:[{type:"text",text:i(f,{wKey:Xe,children:e=>ls(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(rs.passive_crit_dmg_.tag)]},{type:"conditional",conditional:{label:Ng("cond"),metadata:Jg.exSpecialOrAnomaly,fields:[l(rs.ice_dmg_.tag),{title:"Duration",fieldValue:Gg.duration}]}}]},et="HeartstringNocturne",[ds,Zg]=m("wengine",et),Qg=b.wengine[et],Xg=_(et,"icon"),ep=h[et],Di=u[et],tp={title:ds("phase"),img:Xg,documents:[{type:"text",text:i(f,{wKey:et,children:e=>ds(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Di.passive_crit_dmg_.tag)]},{type:"conditional",conditional:{label:Zg("cond"),metadata:ep.heartstring,fields:[l(Di.chain_resIgn_fire_.tag),l(Di.ult_resIgn_fire_.tag),{title:"Duration",fieldValue:Qg.duration}]}}]},tt="HellfireGears",[ms,us]=m("wengine",tt),np=b.wengine[tt],ip=_(tt,"icon"),hs=h[tt],gs=u[tt],ap={title:ms("phase"),img:ip,documents:[{type:"text",text:i(f,{wKey:tt,children:e=>ms(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:us("cond1"),metadata:hs.offField,fields:[l(gs.enerRegen.tag)]}},{type:"conditional",conditional:{label:us("cond1"),metadata:hs.exSpecialUsed,fields:[l(gs.impact_.tag),{title:"Duration",fieldValue:np.duration}]}}]},nt="Housekeeper",[ps,fs]=m("wengine",nt),op=b.wengine[nt],sp=_(nt,"icon"),_s=h[nt],$s=u[nt],cp={title:ps("phase"),img:sp,documents:[{type:"text",text:i(f,{wKey:nt,children:e=>ps(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:fs("cond1"),metadata:_s.offField,fields:[l($s.enerRegen.tag)]}},{type:"conditional",conditional:{label:fs("cond2"),metadata:_s.exSpecialHits,fields:[l($s.physical_dmg_.tag),{title:"Duration",fieldValue:op.duration}]}}]},it="IceJadeTeapot",[ys,lp]=m("wengine",it),bs=b.wengine[it],rp=_(it,"icon"),dp=h[it],xs=u[it],mp={title:ys("phase"),img:rp,documents:[{type:"text",text:i(f,{wKey:it,children:e=>ys(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:lp("cond"),metadata:dp.teariffic,fields:[l(xs.impact_.tag),{title:"Duration",fieldValue:bs.duration},l(xs.common_dmg_.tag),{title:"Duration",fieldValue:bs.teamBuffDuration}]}}]},at="IdentityBase",[ws,up]=m("wengine",at),hp=b.wengine[at],gp=_(at,"icon"),pp=h[at],fp=u[at],_p={title:ws("phase"),img:gp,documents:[{type:"text",text:i(f,{wKey:at,children:e=>ws(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:up("cond"),metadata:pp.equipperAttacked,fields:[l(fp.def_.tag),{title:"Duration",fieldValue:hp.duration}]}}]},Zi="IdentityInflection",[vs,Ey]=m("wengine",Zi),$p=_(Zi,"icon"),yp={title:vs("phase"),img:$p,documents:[{type:"text",text:i(f,{wKey:Zi,children:e=>vs(`phaseDescs.${e-1}`)})}]},ot="KaboomTheCannon",[ks,bp]=m("wengine",ot),xp=b.wengine[ot],wp=_(ot,"icon"),vp=h[ot],kp=u[ot],Cp={title:ks("phase"),img:wp,documents:[{type:"text",text:i(f,{wKey:ot,children:e=>ks(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:bp("cond"),metadata:vp.allyHitsEnemy,fields:[l(kp.atk_.tag),{title:"Duration",fieldValue:xp.duration}]}}]},st="LunarDecrescent",[Cs,Sp]=m("wengine",st),Dp=b.wengine[st],Rp=_(st,"icon"),Ip=h[st],Mp=u[st],Tp={title:Cs("phase"),img:Rp,documents:[{type:"text",text:i(f,{wKey:st,children:e=>Cs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Sp("cond"),metadata:Ip.chainOrUltUsed,fields:[l(Mp.common_dmg_.tag),{title:"Duration",fieldValue:Dp.duration}]}}]},Qi="LunarNoviluna",[Ss,Oy]=m("wengine",Qi),Bp=_(Qi,"icon"),zp={title:Ss("phase"),img:Bp,documents:[{type:"text",text:i(f,{wKey:Qi,children:e=>Ss(`phaseDescs.${e-1}`)})}]},ti="LunarPleniluna",[Ds,Vy]=m("wengine",ti),Ep=_(ti,"icon"),Ri=u[ti],Op={title:Ds("phase"),img:Ep,documents:[{type:"text",text:i(f,{wKey:ti,children:e=>Ds(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Ri.basic_dmg_.tag),l(Ri.dash_dmg_.tag),l(Ri.dodgeCounter_dmg_.tag)]}]},ct="MagneticStormAlpha",[Rs,Vp]=m("wengine",ct),Is=b.wengine[ct],Pp=_(ct,"icon"),Ap=h[ct],qp=u[ct],Fp={title:Rs("phase"),img:Pp,documents:[{type:"text",text:i(f,{wKey:ct,children:e=>Rs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Vp("cond"),metadata:Ap.anomalyBuildupIncreased,fields:[l(qp.anomMas.tag),{title:"Duration",fieldValue:Is.duration},{title:"Cooldown",fieldValue:Is.cooldown}]}}]},lt="MagneticStormBravo",[Ms,jp]=m("wengine",lt),Ts=b.wengine[lt],Lp=_(lt,"icon"),Hp=h[lt],Kp=u[lt],Wp={title:Ms("phase"),img:Lp,documents:[{type:"text",text:i(f,{wKey:lt,children:e=>Ms(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:jp("cond"),metadata:Hp.anomalyBuildupIncreased,fields:[l(Kp.anomProf.tag),{title:"Duration",fieldValue:Ts.duration},{title:"Cooldown",fieldValue:Ts.cooldown}]}}]},Xi="MagneticStormCharlie",[Bs,Py]=m("wengine",Xi),Np=_(Xi,"icon"),Gp={title:Bs("phase"),img:Np,documents:[{type:"text",text:i(f,{wKey:Xi,children:e=>Bs(`phaseDescs.${e-1}`)})}]},rt="MarcatoDesire",[zs,Es]=m("wengine",rt),Up=b.wengine[rt],Jp=_(rt,"icon"),Os=h[rt],Yp=u[rt],Zp={title:zs("phase"),img:Jp,documents:[{type:"text",text:i(f,{wKey:rt,children:e=>zs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Es("cond1"),metadata:Os.exSpecialOrChainHitsEnemy,fields:[l(Yp.atk_.tag),{title:"Duration",fieldValue:Up.duration}]}},{type:"conditional",conditional:{label:Es("cond2"),metadata:Os.attributeAnomalyInflicted}}]},dt="MyriadEclipse",[Vs,Qp]=m("wengine",dt),Xp=b.wengine[dt],ef=_(dt,"icon"),tf=h[dt],Ps=u[dt],nf={title:Vs("phase"),img:ef,documents:[{type:"text",text:i(f,{wKey:dt,children:e=>Vs(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Ps.crit_dmg_.tag)]},{type:"conditional",conditional:{label:Qp("cond"),metadata:tf.deathSentence,fields:[l(Ps.deathSentence_defIgn_.tag),{title:"Duration",fieldValue:Xp.duration}]}}]},mt="OriginalTransmorpher",[As,af]=m("wengine",mt),of=b.wengine[mt],sf=_(mt,"icon"),cf=h[mt],qs=u[mt],lf={title:As("phase"),img:sf,documents:[{type:"text",text:i(f,{wKey:mt,children:e=>As(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(qs.passive_hp_.tag)]},{type:"conditional",conditional:{label:af("cond"),metadata:cf.equipperHit,fields:[l(qs.impact_.tag),{title:"Duration",fieldValue:of.duration}]}}]},cn="PeacekeeperSpecialized",[Fs,rf]=m("wengine",cn),df=_(cn,"icon"),mf=h[cn],Ii=u[cn],uf={title:Fs("phase"),img:df,documents:[{type:"text",text:i(f,{wKey:cn,children:e=>Fs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:rf("cond"),metadata:mf.shielded,fields:[l(Ii.enerRegen.tag)]}},{type:"fields",fields:[l(Ii.passive_exSpecial_anomBuildup_.tag),l(Ii.passive_assist_anomBuildup_.tag)]}]},ln="PreciousFossilizedCore",[js,Ls]=m("wengine",ln),hf=_(ln,"icon"),Hs=h[ln],gf=u[ln],pf={title:js("phase"),img:hf,documents:[{type:"text",text:i(f,{wKey:ln,children:e=>js(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Ls("cond1"),metadata:Hs.enemyHpGE50,fields:[l(gf.daze_.tag)]}},{type:"conditional",conditional:{label:Ls("cond2"),metadata:Hs.enemyHpGE75}}]},ut="PuzzleSphere",[Ks]=m("wengine",ut),Ws=b.wengine[ut],ff=_(ut,"icon"),Ns=h[ut],Gs=u[ut],_f={title:Ks("phase"),img:ff,documents:[{type:"text",text:i(f,{wKey:ut,children:e=>Ks(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:J("uponLaunch.1",{val1:"$t(skills.exSpecial)"}),metadata:Ns.launchingExSpecial,fields:[l(Gs.launchingExSpecial_crit_dmg_.tag),{title:J("duration"),fieldValue:Ws.duration}]}},{type:"conditional",conditional:{label:J("targetHpLe",{val:Ws.hpThresh*100}),metadata:Ns.targetHpBelow50,fields:[l(Gs.targetHpBelow50_exSpecial_dmg_.tag)]}}]},ht="QingmingBirdcage",[Us,$f]=m("wengine",ht),yf=b.wengine[ht],bf=_(ht,"icon"),xf=h[ht],yn=u[ht],wf={title:Us("phase"),img:bf,documents:[{type:"text",text:i(f,{wKey:ht,children:e=>Us(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(yn.crit_.tag)]},{type:"conditional",conditional:{metadata:xf.qingmingCompanionStacks,label:$f("cond"),fields:[l(yn.qingmingCompanionStacks_ether_dmg_.tag),l(yn.qingmingCompanionStacks_ult_ether_sheer_dmg_.tag),l(yn.qingmingCompanionStacks_exSpecial_ether_sheer_dmg_.tag),{title:J("cd"),fieldValue:yf.duration}]}}]},gt="RadiowaveJourney",[Js]=m("wengine",gt),vf=b.wengine[gt],kf=_(gt,"icon"),Cf=h[gt],Sf=u[gt],Df={title:Js("phase"),img:kf,documents:[{type:"text",text:i(f,{wKey:gt,children:e=>Js(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{metadata:Cf.launchingChainOrUlt,label:J("uponLaunch.2",{val1:"$t(skills.chain)",val2:"$t(skills.ult)"}),fields:[l(Sf.launchingChainOrUlt_sheerForce.tag),{title:J("duration"),fieldValue:vf.duration}]}}]},pt="RainforestGourmet",[Ys,Rf]=m("wengine",pt),If=b.wengine[pt],Mf=_(pt,"icon"),Tf=h[pt],Bf=u[pt],zf={title:Ys("phase"),img:Mf,documents:[{type:"text",text:i(f,{wKey:pt,children:e=>Ys(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Rf("cond"),metadata:Tf.energyConsumed,fields:[l(Bf.atk_.tag),{title:"Duration",fieldValue:If.duration}]}}]},ea="ReelProjector",[Zs]=m("wengine",ea),Ef=_(ea,"icon"),Of={title:Zs("phase"),img:Ef,documents:[{type:"text",text:i(f,{wKey:ea,children:e=>Zs(`phaseDescs.${e-1}`)})}]},ft="ReverbMarkI",[Qs,Vf]=m("wengine",ft),Pf=b.wengine[ft],Af=_(ft,"icon"),qf=h[ft],Ff=u[ft],jf={title:Qs("phase"),img:Af,documents:[{type:"text",text:i(f,{wKey:ft,children:e=>Qs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Vf("cond"),metadata:qf.exSpecialUsed,fields:[l(Ff.impact_.tag),{title:"Duration",fieldValue:Pf.duration}]}}]},_t="ReverbMarkII",[Xs,Lf]=m("wengine",_t),Hf=b.wengine[_t],Kf=_(_t,"icon"),Wf=h[_t],ec=u[_t],Nf={title:Xs("phase"),img:Kf,documents:[{type:"text",text:i(f,{wKey:_t,children:e=>Xs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Lf("cond"),metadata:Wf.exSpecialOrChainUsed,fields:[l(ec.anomMas.tag),l(ec.anomProf.tag),{title:"Duration",fieldValue:Hf.duration}]}}]},$t="ReverbMarkIII",[tc,Gf]=m("wengine",$t),Uf=b.wengine[$t],Jf=_($t,"icon"),Yf=h[$t],Zf=u[$t],Qf={title:tc("phase"),img:Jf,documents:[{type:"text",text:i(f,{wKey:$t,children:e=>tc(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Gf("cond"),metadata:Yf.chainOrUltUsed,fields:[l(Zf.atk_.tag),{title:"Duration",fieldValue:Uf.duration}]}}]},rn="RiotSuppressorMarkVI",[nc,Xf]=m("wengine",rn),e_=_(rn,"icon"),t_=h[rn],ic=u[rn],n_={title:nc("phase"),img:e_,documents:[{type:"text",text:i(f,{wKey:rn,children:e=>nc(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(ic.passive_crit_.tag)]},{type:"conditional",conditional:{label:Xf("cond"),metadata:t_.charge,fields:[l(ic.basic_ether_dmg_.tag)]}}]},yt="RoaringFurnace",[ac,i_]=m("wengine",yt),a_=b.wengine[yt],o_=_(yt,"icon"),s_=h[yt],bn=u[yt],c_={title:ac("phase"),img:o_,documents:[{type:"text",text:i(f,{wKey:yt,children:e=>ac(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(bn.exSpecial_dazeInc_.tag),l(bn.chain_dazeInc_.tag),l(bn.ult_dazeInc_.tag)]},{type:"conditional",conditional:{metadata:s_.chainOrUlt,label:i_("cond"),fields:[l(bn.team_chainOrUlt_fire_dmg_.tag),{title:J("duration"),fieldValue:a_.duration}]}}]},bt="RoaringRide",[oc,Mi]=m("wengine",bt),Ti=b.wengine[bt],l_=_(bt,"icon"),Bi=h[bt],zi=u[bt],r_={title:oc("phase"),img:l_,documents:[{type:"text",text:i(f,{wKey:bt,children:e=>oc(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Mi("cond_atk_"),metadata:Bi.atk_,fields:[l(zi.atk_.tag),{title:"Duration",fieldValue:Ti.duration}]}},{type:"conditional",conditional:{label:Mi("cond_anomProf"),metadata:Bi.anomProf,fields:[l(zi.anomProf.tag),{title:"Duration",fieldValue:Ti.duration}]}},{type:"conditional",conditional:{label:Mi("cond_anomBuildup_"),metadata:Bi.anomBuildup_,fields:[l(zi.anomBuildup_.tag),{title:"Duration",fieldValue:Ti.duration}]}}]},xt="SeveredInnocence",[sc,d_]=m("wengine",xt),m_=b.wengine[xt],u_=_(xt,"icon"),h_=h[xt],Ei=u[xt],g_={title:sc("phase"),img:u_,documents:[{type:"text",text:i(f,{wKey:xt,children:e=>sc(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Ei.passive_crit_dmg_.tag)]},{type:"conditional",conditional:{label:d_("cond"),metadata:h_.basicSpecialAftershockHit,fields:[l(Ei.crit_dmg_.tag),l(Ei.electric_dmg_.tag),{title:"Duration",fieldValue:m_.duration}]}}]},wt="SharpenedStinger",[cc,p_]=m("wengine",wt),f_=b.wengine[wt],__=_(wt,"icon"),$_=h[wt],lc=u[wt],y_={title:cc("phase"),img:__,documents:[{type:"text",text:i(f,{wKey:wt,children:e=>cc(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:p_("cond"),metadata:$_.predatoryInstinct,fields:[l(lc.physical_dmg_.tag),{title:"Duration",fieldValue:f_.duration}]}},{type:"fields",fields:[l(lc.anomBuildup_.tag)]}]},dn="SixShooter",[rc,b_]=m("wengine",dn),x_=_(dn,"icon"),w_=h[dn],v_=u[dn],k_={title:rc("phase"),img:x_,documents:[{type:"text",text:i(f,{wKey:dn,children:e=>rc(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:b_("cond"),metadata:w_.charge,fields:[l(v_.exSpecial_daze_.tag)]}}]},ta="SliceOfTime",[dc,Ay]=m("wengine",ta),C_=_(ta,"icon"),S_={title:dc("phase"),img:C_,documents:[{type:"text",text:i(f,{wKey:ta,children:e=>dc(`phaseDescs.${e-1}`)})}]},vt="SpectralGaze",[mc,uc]=m("wengine",vt),hc=b.wengine[vt],D_=_(vt,"icon"),gc=h[vt],pc=u[vt],R_={title:mc("phase"),img:D_,documents:[{type:"text",text:i(f,{wKey:vt,children:e=>mc(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:uc("cond1"),metadata:gc.hit_aftershock_electric,fields:[l(pc.cond_defRed_.tag),{title:"Duration",fieldValue:hc.duration1}]}},{type:"conditional",conditional:{label:uc("cond2"),metadata:gc.spiritLock,fields:[l(pc.cond_impact_.tag),{title:"Duration",fieldValue:hc.duration2}]}}]},kt="SpringEmbrace",[fc,I_]=m("wengine",kt),M_=b.wengine[kt],T_=_(kt,"icon"),B_=h[kt],_c=u[kt],z_={title:fc("phase"),img:T_,documents:[{type:"text",text:i(f,{wKey:kt,children:e=>fc(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(_c.passive_dmg_red_.tag)]},{type:"conditional",conditional:{label:I_("cond"),metadata:B_.when_attacked,fields:[l(_c.cond_enerRegen_.tag),{title:"Duration",fieldValue:M_.duration}]}}]},Ct="StarlightEngine",[$c,E_]=m("wengine",Ct),O_=b.wengine[Ct],V_=_(Ct,"icon"),P_=h[Ct],A_=u[Ct],q_={title:$c("phase"),img:V_,documents:[{type:"text",text:i(f,{wKey:Ct,children:e=>$c(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:E_("cond"),metadata:P_.dodgecounter_quickassist,fields:[l(A_.cond_dmg_.tag),{title:"Duration",fieldValue:O_.duration}]}}]},St="StarlightEngineReplica",[yc,F_]=m("wengine",St),j_=b.wengine[St],L_=_(St,"icon"),H_=h[St],K_=u[St],W_={title:yc("phase"),img:L_,documents:[{type:"text",text:i(f,{wKey:St,children:e=>yc(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:F_("cond"),metadata:H_.hit_away,fields:[l(K_.cond_dmg_.tag),{title:"Duration",fieldValue:j_.duration}]}}]},Dt="SteamOven",[bc,N_]=m("wengine",Dt),G_=b.wengine[Dt],U_=_(Dt,"icon"),J_=h[Dt],Y_=u[Dt],Z_={title:bc("phase"),img:U_,documents:[{type:"text",text:i(f,{wKey:Dt,children:e=>bc(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:N_("cond"),metadata:J_.stacks,fields:[l(Y_.cond_impact_.tag),{title:"Duration",fieldValue:G_.duration}]}}]},mn="SteelCushion",[xc,Q_]=m("wengine",mn),X_=_(mn,"icon"),e$=h[mn],wc=u[mn],t$={title:xc("phase"),img:X_,documents:[{type:"text",text:i(f,{wKey:mn,children:e=>xc(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(wc.passive_physical_dmg_.tag)]},{type:"conditional",conditional:{label:Q_("cond"),metadata:e$.hit_behind,fields:[l(wc.cond_dmg_.tag)]}}]},un="StreetSuperstar",[vc,n$]=m("wengine",un),i$=_(un,"icon"),a$=h[un],o$=u[un],s$={title:vc("phase"),img:i$,documents:[{type:"text",text:i(f,{wKey:un,children:e=>vc(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:n$("cond"),metadata:a$.charge,fields:[l(o$.cond_ult_dmg_.tag)]}}]},Rt="TheBrimstone",[kc,c$]=m("wengine",Rt),l$=b.wengine[Rt],r$=_(Rt,"icon"),d$=h[Rt],m$=u[Rt],u$={title:kc("phase"),img:r$,documents:[{type:"text",text:i(f,{wKey:Rt,children:e=>kc(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:c$("cond"),metadata:d$.hit_basic_dash_dodge,fields:[l(m$.cond_atk_.tag),{title:"Duration",fieldValue:l$.duration}]}}]},It="TheRestrained",[Cc,h$]=m("wengine",It),g$=b.wengine[It],p$=_(It,"icon"),f$=h[It],Sc=u[It],_$={title:Cc("phase"),img:p$,documents:[{type:"text",text:i(f,{wKey:It,children:e=>Cc(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:h$("cond"),metadata:f$.dmg_daze_,fields:[l(Sc.basic_dmg_.tag),l(Sc.basic_daze_.tag),{title:"Duration",fieldValue:g$.duration}]}}]},Mt="TheVault",[Dc,$$]=m("wengine",Mt),y$=b.wengine[Mt],b$=_(Mt,"icon"),x$=h[Mt],w$=u[Mt],v$={title:Dc("phase"),img:b$,documents:[{type:"text",text:i(f,{wKey:Mt,children:e=>Dc(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:$$("cond"),metadata:x$.ether_hit,fields:[l(w$.cond_dmg_.tag),{title:"Duration",fieldValue:y$.duration}]}}]},Tt="Timeweaver",[Rc,k$]=m("wengine",Tt),C$=b.wengine[Tt],S$=_(Tt,"icon"),D$=h[Tt],Oi=u[Tt],R$={title:Rc("phase"),img:S$,documents:[{type:"text",text:i(f,{wKey:Tt,children:e=>Rc(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Oi.passive_electric_anomBuildup_.tag),l(Oi.passive_disorder_dmg_.tag)]},{type:"conditional",conditional:{label:k$("cond"),metadata:D$.hit_anomaly,fields:[l(Oi.cond_anomProf.tag),{title:"Duration",fieldValue:C$.duration}]}}]},ni="TremorTrigramVessel",[Ic]=m("wengine",ni),I$=_(ni,"icon"),Mc=u[ni],M$={title:Ic("phase"),img:I$,documents:[{type:"text",text:i(f,{wKey:ni,children:e=>Ic(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Mc.exSpecial_dmg_.tag),l(Mc.ult_dmg_.tag)]}]},Bt="TusksOfFury",[Tc,T$]=m("wengine",Bt),B$=b.wengine[Bt],z$=_(Bt,"icon"),E$=h[Bt],Vi=u[Bt],O$={title:Tc("phase"),img:z$,documents:[{type:"text",text:i(f,{wKey:Bt,children:e=>Tc(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Vi.passive_shield_.tag)]},{type:"conditional",conditional:{label:T$("cond"),metadata:E$.interrupt_perfdodge,fields:[l(Vi.cond_dmg_.tag),l(Vi.daze_.tag),{title:"Duration",fieldValue:B$.duration}]}}]},zt="UnfetteredGameBall",[Bc,V$]=m("wengine",zt),P$=b.wengine[zt],A$=_(zt,"icon"),q$=h[zt],F$=u[zt],j$={title:Bc("phase"),img:A$,documents:[{type:"text",text:i(f,{wKey:zt,children:e=>Bc(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:V$("cond"),metadata:q$.anomaly_counter,fields:[l(F$.cond_crit_.tag),{title:"Duration",fieldValue:P$.duration}]}}]},ii="VortexArrow",[zc,qy]=m("wengine",ii),L$=_(ii,"icon"),H$=u[ii],K$={title:zc("phase"),img:L$,documents:[{type:"text",text:i(f,{wKey:ii,children:e=>zc(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(H$.passive_daze_.tag)]}]},Et="VortexHatchet",[Ec,W$]=m("wengine",Et),Oc=b.wengine[Et],N$=_(Et,"icon"),G$=h[Et],U$=u[Et],J$={title:Ec("phase"),img:N$,documents:[{type:"text",text:i(f,{wKey:Et,children:e=>Ec(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:W$("cond"),metadata:G$.entering,fields:[l(U$.cond_impact_.tag),{title:"Duration",fieldValue:Oc.duration},{title:"Cooldown",fieldValue:Oc.cooldown}]}}]},ai="VortexRevolver",[Vc,Fy]=m("wengine",ai),Y$=_(ai,"icon"),Z$=u[ai],Q$={title:Vc("phase"),img:Y$,documents:[{type:"text",text:i(f,{wKey:ai,children:e=>Vc(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Z$.passive_exSpecial_daze_.tag)]}]},Ot="WeepingCradle",[Pc,Ac]=m("wengine",Ot),X$=b.wengine[Ot],ey=_(Ot,"icon"),qc=h[Ot],ty=u[Ot],ny={title:Pc("phase"),img:ey,documents:[{type:"text",text:i(f,{wKey:Ot,children:e=>Pc(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Ac("cond_atk"),metadata:qc.attack}},{type:"conditional",conditional:{label:Ac("cond_stacks"),metadata:qc.stacks,fields:[l(ty.cond_dmg_.tag),{title:"Duration",fieldValue:X$.duration}]}}]},hn="WeepingGemini",[Fc,iy]=m("wengine",hn),ay=_(hn,"icon"),oy=h[hn],sy=u[hn],cy={title:Fc("phase"),img:ay,documents:[{type:"text",text:i(f,{wKey:hn,children:e=>Fc(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:iy("cond"),metadata:oy.anomaly_stack,fields:[l(sy.anomProf.tag)]}}]},Vt="ZanshinHerbCase",[jc,ly]=m("wengine",Vt),ry=b.wengine[Vt],dy=_(Vt,"icon"),my=h[Vt],Pi=u[Vt],uy={title:jc("phase"),img:dy,documents:[{type:"text",text:i(f,{wKey:Vt,children:e=>jc(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Pi.passive_crit_.tag),l(Pi.passive_electric_dmg_.tag)]},{type:"conditional",conditional:{label:ly("cond"),metadata:my.apply_anom_stun,fields:[l(Pi.cond_crit_.tag),{title:"Duration",fieldValue:ry.duration}]}}]},hy={BashfulDemon:Fh,BigCylinder:Wh,BlazingLaurel:Gh,BoxCutter:Qh,BunnyBand:ng,CannonRotor:cg,CinderCobalt:mg,DeepSeaVisitor:hg,DemaraBatteryMarkII:$g,DrillRigRedAxis:wg,ElectroLipGloss:Sg,ElegantVanity:Bg,FlamemakerShaker:Eg,FlightOfFancy:Ag,FusionCompiler:Hg,GildedBlossom:Wg,HailstormShrine:Yg,HeartstringNocturne:tp,HellfireGears:ap,Housekeeper:cp,IceJadeTeapot:mp,IdentityBase:_p,IdentityInflection:yp,KaboomTheCannon:Cp,LunarDecrescent:Tp,LunarNoviluna:zp,LunarPleniluna:Op,MagneticStormAlpha:Fp,MagneticStormBravo:Wp,MagneticStormCharlie:Gp,MarcatoDesire:Zp,MyriadEclipse:nf,OriginalTransmorpher:lf,PeacekeeperSpecialized:uf,PreciousFossilizedCore:pf,PuzzleSphere:_f,QingmingBirdcage:wf,RadiowaveJourney:Df,RainforestGourmet:zf,ReelProjector:Of,ReverbMarkI:jf,ReverbMarkII:Nf,ReverbMarkIII:Qf,RiotSuppressorMarkVI:n_,RoaringFurnace:c_,RoaringRide:r_,SeveredInnocence:g_,SharpenedStinger:y_,SixShooter:k_,SliceOfTime:S_,SpectralGaze:R_,SpringEmbrace:z_,StarlightEngine:q_,StarlightEngineReplica:W_,SteamOven:Z_,SteelCushion:t$,StreetSuperstar:s$,TheBrimstone:u$,TheRestrained:_$,TheVault:v$,Timeweaver:R$,TremorTrigramVessel:M$,TusksOfFury:O$,UnfetteredGameBall:j$,VortexArrow:K$,VortexHatchet:J$,VortexRevolver:Q$,WeepingCradle:ny,WeepingGemini:cy,ZanshinHerbCase:uy};function gy(e){const{attribute:t}=e;if(t)return t}function py(e){const{q:t}=e;return["standardDmg","anomalyDmg"].includes(t)}function fy(e){const{damageType1:t,damageType2:n}=e,a=[];return py(e)?(t&&a.push(t),n&&a.push(n),a):[]}const Rn={basic:"Basic",dash:"Dash",dodgeCounter:"Dodge Counter",special:"Special",exSpecial:"EX Special",chain:"Chain",ult:"Ultimate",quickAssist:"Quick Assist",defensiveAssist:"Defensive Assist",evasiveAssist:"Evasive Assist",assistFollowUp:"Assist Follow Up",anomaly:"Anomaly",disorder:"Disorder",aftershock:"Aftershock",elemental:"Elemental",sheer:"Sheer"},Tl=["crit_","crit_dmg_","impact","pen","pen_","enerRegen","anomProf","anomMas","anom_crit_","anom_crit_dmg_"].map(e=>{if(Qr.includes(e)){const t={...A.final.dmg_.tag,attribute:e.slice(0,-5)};return{title:i(Ht,{statKey:e}),fieldRef:t}}return e==="crit_"?{fieldRef:A.common.cappedCrit_.tag,title:i(Ht,{statKey:e})}:e==="anom_crit_"?{fieldRef:A.common.anom_cappedCrit_.tag,title:i(Ht,{statKey:e})}:{fieldRef:A.final[e].tag,title:i(Ht,{statKey:e})}});Tl.push(...Te.map(e=>({fieldRef:{et:"own",qt:"formula",q:"standardDmg",attribute:e,name:"standardDmgInst"},title:x(Be,{color:e,children:[ve[e]," Damage"]})})),...Te.map(e=>({fieldRef:{et:"own",qt:"formula",q:"sheerDmg",attribute:e,name:"sheerDmgInst"},title:x(Be,{color:e,children:[ve[e]," Damage"]})})),...Te.flatMap(e=>Xr.map(t=>({fieldRef:{et:"own",qt:"formula",q:"standardDmg",attribute:e,damageType1:t,name:"standardDmgInst"},title:x(Be,{color:e,children:[ve[e]," ",Rn[t]," Damage"]})}))),...Te.map(e=>({fieldRef:{et:"own",qt:"formula",q:"anomalyDmg",attribute:e,damageType1:"anomaly",name:"anomalyDmgInst"},title:x(Be,{color:e,children:[ve[e]," Anomaly Damage"]})})),...Te.map(e=>({fieldRef:{et:"own",qt:"formula",q:"anomBuildup",attribute:e,name:"anomalyBuildupInst"},title:x(Be,{color:e,children:[ve[e]," Anomaly Buildup"]})})),{fieldRef:{et:"own",qt:"formula",q:"dazeBuildup",name:"dazeInst"},title:"Daze Buildup"});const na=[];Object.values(Du).forEach(e=>Object.values(e).forEach(t=>t.documents.forEach(n=>n.type==="fields"&&n.fields.forEach(a=>Ld(a)&&na.push({tag:a.fieldRef,value:a})))));Tl.forEach(e=>{na.push({tag:e.fieldRef,value:e})});const _y=Rd(na),qi=new Map;function Bl(e,t){if(qi.get(e))throw new Error(`Duplicate conditional ${e}`);qi.set(e,t)}Object.values(hy).forEach(({documents:e})=>{e.forEach(t=>{t.type==="conditional"&&Bl(`${t.conditional.metadata.sheet}:${t.conditional.metadata.name}`,t.conditional)})});Object.values(Oh).forEach(e=>Object.values(e).forEach(({documents:t})=>{t.forEach(n=>{n.type==="conditional"&&Bl(`${n.conditional.metadata.sheet}:${n.conditional.metadata.name}`,n.conditional)})}));export{Md as A,Sy as C,fa as D,vy as F,zn as T,Nt as a,xl as b,_d as c,gd as d,Oh as e,Rn as f,Xd as g,Bn as h,am as i,Cy as j,ky as k,Td as l,Tn as m,Id as n,wy as o,Vd as p,em as q,Od as r,Rl as s,yd as u,hy as w};
