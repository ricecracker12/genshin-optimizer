import{c4 as wc,J as vc,H as kc,d as v,K as Cc,_ as Sc,O as fe,c5 as Ui,X as dn,W as $n,V as Ce,c6 as H,Y as Dc,c7 as wl,c8 as vl,T as O,y as Rc,c9 as Ji,ca as Ic,cb as kl,a4 as Cl,cc as Sl,a7 as Dl,cd as Mc,u as oe,aN as Tc,aL as Rl,ce as Il,cf as Ml,cg as Tl,ch as zc,b4 as Bc,b3 as Ec,ci as V,cj as zl,ck as Bl,bA as q,b9 as El,ba as Ol,cl as hn,cm as Pl,cn as Vl,co as Oc,cp as un,cq as ql,j as i,cr as mn,cs as pe,bs as ie,bB as ki,ct as Al,e as x,am as Y,aA as Vt,cu as gn,i as N,ax as U,bV as Pc,cv as Fl,cw as Vc,cx as qc,cy as Ci,cz as de,ae as Si,o as M,cA as jl,cB as Ac,a as Fc,bI as Ll,l as jc,b_ as Hl,f as ae,G as K,C as Se,S as $e,P as Kl,bM as Wl,bg as wi,b$ as Yi,bq as Lc,aX as ve,c0 as Nl,c1 as Gl,I as Di,s as Ri,c2 as Ul,cC as Jl,v as Ot,M as Ii,aM as _n,ac as Hc,ad as Kc,cD as Yl,m as Zl,k as Ql,n as Xl,bf as er,D as tr,c3 as nr,cE as ir,w as Wc,r as ar,b as or,c as sr,g as cr,bw as Nc,bE as Gc,bC as Uc,cF as lr,cG as rr,E as dr,cH as hr,z as qt,B as De,cI as Mi,F as At,cJ as Jc,cK as ur,ah as Ti,ag as mr,aY as ke,ap as gr,b6 as pr,cL as fr,cM as $r,cN as _r,aH as Yc,aF as Bt,ai as yr,cO as br,by as xr,cP as wr,aK as vr,cQ as kr,cR as Cr,bY as Sr,cS as Dr,cT as Rr,cU as X,cV as Zc,a5 as Zi,b8 as Qi,cW as Ir,cX as Mr,be as Qc,cY as Tr,cZ as b,c_ as Z,a$ as m,a_ as u,ay as T,aD as f,c$ as zr,bH as Br}from"./index-BF_NyI-E.js";import{i as Er,d as Or}from"./discSortUtil-sIunnVSZ.js";function Pr(e){const{badgeContent:t,invisible:n=!1,max:a=99,showZero:o=!1}=e,c=wc({badgeContent:t,max:a});let s=n;n===!1&&t===0&&!o&&(s=!0);const{badgeContent:r,max:d=a}=s?c:e,g=r&&Number(r)>d?`${d}+`:r;return{badgeContent:r,invisible:s,max:d,displayValue:g}}function Vr(e){return kc("MuiBadge",e)}const se=vc("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),qr=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],Yn=10,Zn=4,Ar=e=>{const{color:t,anchorOrigin:n,invisible:a,overlap:o,variant:c,classes:s={}}=e,r={root:["root"],badge:["badge",c,a&&"invisible",`anchorOrigin${H(n.vertical)}${H(n.horizontal)}`,`anchorOrigin${H(n.vertical)}${H(n.horizontal)}${H(o)}`,`overlap${H(o)}`,t!=="default"&&`color${H(t)}`]};return Dc(r,Vr,s)},Fr=$n("span",{name:"MuiBadge",slot:"Root",overridesResolver:(e,t)=>t.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),jr=$n("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.badge,t[n.variant],t[`anchorOrigin${H(n.anchorOrigin.vertical)}${H(n.anchorOrigin.horizontal)}${H(n.overlap)}`],n.color!=="default"&&t[`color${H(n.color)}`],n.invisible&&t.invisible]}})(({theme:e})=>{var t;return{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(12),minWidth:Yn*2,lineHeight:1,padding:"0 6px",height:Yn*2,borderRadius:Yn,zIndex:1,transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.enteringScreen}),variants:[...Object.keys(((t=e.vars)!=null?t:e).palette).filter(n=>{var a,o;return((a=e.vars)!=null?a:e).palette[n].main&&((o=e.vars)!=null?o:e).palette[n].contrastText}).map(n=>({props:{color:n},style:{backgroundColor:(e.vars||e).palette[n].main,color:(e.vars||e).palette[n].contrastText}})),{props:{variant:"dot"},style:{borderRadius:Zn,height:Zn*2,minWidth:Zn*2,padding:0}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${se.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${se.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${se.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${se.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${se.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${se.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${se.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${se.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.leavingScreen})}}]}}),Xi=v.forwardRef(function(t,n){var a,o,c,s,r,d;const g=Cc({props:t,name:"MuiBadge"}),{anchorOrigin:w={vertical:"top",horizontal:"right"},className:D,component:S,components:$={},componentsProps:y={},children:k,overlap:R="rectangular",color:A="default",invisible:j=!1,max:ee=99,badgeContent:te,slots:F,slotProps:I,showZero:E=!1,variant:P="standard"}=g,ne=Sc(g,qr),{badgeContent:ji,invisible:ml,max:gl,displayValue:pl}=Pr({max:ee,invisible:j,badgeContent:te,showZero:E}),fl=wc({anchorOrigin:w,color:A,overlap:R,variant:P,badgeContent:te}),Li=ml||ji==null&&P!=="dot",{color:$l=A,overlap:_l=R,anchorOrigin:yl=w,variant:Hi=P}=Li?fl:g,Ki=Hi!=="dot"?pl:void 0,Gn=fe({},g,{badgeContent:ji,invisible:Li,max:gl,displayValue:Ki,showZero:E,anchorOrigin:yl,color:$l,overlap:_l,variant:Hi}),Wi=Ar(Gn),Ni=(a=(o=F==null?void 0:F.root)!=null?o:$.Root)!=null?a:Fr,Gi=(c=(s=F==null?void 0:F.badge)!=null?s:$.Badge)!=null?c:jr,Un=(r=I==null?void 0:I.root)!=null?r:y.root,Jn=(d=I==null?void 0:I.badge)!=null?d:y.badge,bl=Ui({elementType:Ni,externalSlotProps:Un,externalForwardedProps:ne,additionalProps:{ref:n,as:S},ownerState:Gn,className:dn(Un==null?void 0:Un.className,Wi.root,D)}),xl=Ui({elementType:Gi,externalSlotProps:Jn,ownerState:Gn,className:dn(Wi.badge,Jn==null?void 0:Jn.className)});return Ce.jsxs(Ni,fe({},bl,{children:[k,Ce.jsx(Gi,fe({},xl,{children:Ki}))]}))});function Lr(e){return kc("MuiFormControlLabel",e)}const Et=vc("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),Hr=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],Kr=e=>{const{classes:t,disabled:n,labelPlacement:a,error:o,required:c}=e,s={root:["root",n&&"disabled",`labelPlacement${H(a)}`,o&&"error",c&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",o&&"error"]};return Dc(s,Lr,t)},Wr=$n("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Et.label}`]:t.label},t.root,t[`labelPlacement${H(n.labelPlacement)}`]]}})(({theme:e,ownerState:t})=>fe({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Et.disabled}`]:{cursor:"default"}},t.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},t.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},t.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${Et.label}`]:{[`&.${Et.disabled}`]:{color:(e.vars||e).palette.text.disabled}}})),Nr=$n("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${Et.error}`]:{color:(e.vars||e).palette.error.main}})),Gr=v.forwardRef(function(t,n){var a,o;const c=Cc({props:t,name:"MuiFormControlLabel"}),{className:s,componentsProps:r={},control:d,disabled:g,disableTypography:w,label:D,labelPlacement:S="end",required:$,slotProps:y={}}=c,k=Sc(c,Hr),R=wl(),A=(a=g??d.props.disabled)!=null?a:R==null?void 0:R.disabled,j=$??d.props.required,ee={disabled:A,required:j};["checked","name","onChange","value","inputRef"].forEach(ne=>{typeof d.props[ne]>"u"&&typeof c[ne]<"u"&&(ee[ne]=c[ne])});const te=vl({props:c,muiFormControl:R,states:["error"]}),F=fe({},c,{disabled:A,labelPlacement:S,required:j,error:te.error}),I=Kr(F),E=(o=y.typography)!=null?o:r.typography;let P=D;return P!=null&&P.type!==O&&!w&&(P=Ce.jsx(O,fe({component:"span"},E,{className:dn(I.label,E==null?void 0:E.className),children:P}))),Ce.jsxs(Wr,fe({className:dn(I.root,s),ownerState:F,ref:n},k,{children:[v.cloneElement(d,ee),j?Ce.jsxs(Rc,{display:"block",children:[P,Ce.jsxs(Nr,{ownerState:F,"aria-hidden":!0,className:I.asterisk,children:[" ","*"]})]}):P]}))}),Ur={};class Xc{constructor(t,n){this.root=new Jr(t,n)}subset(t){const n=[];return this._subset(t,a=>n.push(...a[Ji].map(o=>o.value))),n}entries(t){const n=[];return this._subset(t,a=>n.push(...a[Ji])),n}_subset(t,n){const a=t.length;function o(c,s){c<a?s.subset(t[c]).forEach(r=>o(c+1,r)):n(s.leaf)}o(0,this.root)}}let Jr=class el{constructor(t,n){if(this.children=[],t>0)for(const[a,o]of Object.entries(n)){const c=new Map;for(const[s,r]of Object.entries(o))c.set(+s,new el(t-1,r));this.children.push({mask:+a,map:c})}else this.leaf=n}subset(t){return this.children.map(({mask:n,map:a})=>a.get(t&n)).filter(n=>!!n)}};class ea{constructor(t){this.root=new zi(void 0),this.keys=t}at(t){const n=this.keys.get(t),a=n.reduce((o,c)=>o.child(c),this.root);return a.leaf||(a.leaf=new Bi(t,n,this.keys,a)),a.leaf}}class zi{constructor(t){this.children=new Map,this.parent=t}child(t){let n=this.children.get(t);return n||(n=new zi(this),this.children.set(t,n),n)}}class Bi{constructor(t,n,a,o){this.tag=Object.fromEntries(Object.entries(t).filter(([c,s])=>s!=null)),this.id=n,this.keys=a,this.internal=o}with(t){const{keys:n}=this,{id:a,firstReplacedByte:o}=n.combine(this.id,t);let c=this.internal;for(let s=o;s<n.tagLen;s++)c=c.parent;for(let s=o;s<n.tagLen;s++)c=c.child(a[s]);return c.leaf||(c.leaf=new Bi({...this.tag,...t},a,n,c)),c.leaf}}class Yr{constructor(t,n){this.keys=new Ic(t),this.values=new Xc(t.tagLen,n)}subset(t){return this.values.subset(this.keys.get(t))}}const Pt={sum:e=>e.reduce((t,n)=>t+n,0),prod:e=>e.reduce((t,n)=>t*n,1),min:e=>Math.min(...e),max:e=>Math.max(...e),sumfrac:([e,t])=>e/(e+t),unique:([e])=>e},tl={match:([e,t])=>e===t?0:1,thres:([e,t])=>e>=t?0:1,lookup:([e],t)=>t[e]??0},tn=e=>Sl(e,"val");let nl=class{constructor(t,...n){const a=new Ic(t);this.nodes=new Xc(a.tagLen,kl(n)),this.cache=new ea(a).at({}),this.calc=new ea(a).at({}),this.calc.val=this}withTag(t){const n=this.calc.with(t);return n.val??(n.val=Object.assign(new this.constructor(this.cache.keys),this,{cache:this.cache.with(t),calc:n}))}gather(t){return this._gather(this.cache.with(t)).pre}compute(t){return this._compute(t,this.cache)}_gather(t){if(t.val)return t.val;const n=this.nodes.entries(t.id).flatMap(({tag:a,value:o})=>o.op==="reread"?this._gather(t.with(o.tag)).pre:[this.markGathered(t.tag,a,o,this._compute(o,t))]);return t.val={pre:n}}_compute(t,n){const a=(c,s,r,d)=>Object.freeze({val:c,meta:this.computeMeta(t,c,s,r,d)}),{op:o}=t;switch(o){case"const":return a(t.ex,[],[]);case"sum":case"prod":case"min":case"max":case"sumfrac":{const c=t.x.map(s=>this._compute(s,n));return a(Pt[o](tn(c)),c,[])}case"thres":case"match":case"lookup":{const c=t.br.map(g=>this._compute(g,n)),s=tl[o](tn(c),t.ex),r=[...Array(t.x.length)],d=r[s]=this._compute(t.x[s],n);return a(d.val,r,c)}case"subscript":{const c=this._compute(t.br[0],n);return a(t.ex[c.val],[],[c])}case"vtag":return a(n.tag[t.ex]??"",[],[]);case"tag":{const c=n.with(t.tag),s=this._compute(t.x[0],c);return a(s.val,[s],[],c.tag)}case"dtag":{const c=t.br.map(d=>this._compute(d,n)),s=n.with(Object.fromEntries(c.map((d,g)=>[t.ex[g],d.val]))),r=this._compute(t.x[0],s);return a(r.val,[r],c,s.tag)}case"read":{const c=n.with(t.tag),s=this._gather(c),{pre:r}=s,d=t.ex??this.defaultAccu(c.tag)??"unique";if(d!==t.ex&&(t={...t,ex:d}),s[d])return s[d];if(Dl()&&d==="unique"&&r.length!==1)throw new Error(`Ill-form read for ${Mc(c.tag)}`);const g=Pt[d](tn(r));return s[d]=a(g,r,[],c.tag)}case"custom":{const c=t.x.map(s=>this._compute(s,n));return a(Ur[t.ex].calc(tn(c)),c,[])}default:Cl(o)}}defaultAccu(t){}markGathered(t,n,a,o){return o}computeMeta(t,n,a,o,c){}toDebug(){throw new Error("not implemented")}};const Zr={arithmetic:Pt,branching:tl};class Qr extends nl{constructor(t,n=Mc,a=()=>!0){super(t.cache.keys),this.gathering=new Set,this.nodes=t.nodes,this.tagStr=n,this.filter=a,this.defaultAccu=o=>t.defaultAccu(o),this.cache=this.cache.with(t.cache.tag)}withTag(t){throw new Error("Unimplemented")}_gather(t){if(this.gathering.has(t))throw new Error(`Loop detected for ${this.tagStr(t.tag)}`);this.gathering.add(t);const n=this.__gather(t);return this.gathering.delete(t),n}__gather(t){if(t.val)return t.val;const n=this.nodes.entries(t.id).flatMap(({tag:a,value:o})=>o.op==="reread"?this._gather(t.with(o.tag)).pre.map(c=>{const s=`${this.tagStr(a)} <= ${this.tagStr(o.tag)} : ${c.meta.readSeq}`;return Object.freeze({...c,meta:{...c.meta,readSeq:s}})}):[this.markGathered(t.tag,a,o,this._compute(o,t))]);return t.val={pre:n}}_compute(t,n){try{return super._compute(t,n)}catch(a){return Object.freeze({val:NaN,meta:{formula:`${a}`,deps:[],omitted:[],val:NaN,x:[],br:[],comp:"ERR",pivot:!0,toJSON:na}})}}markGathered(t,n,a,o){const c=`${this.tagStr(n)} <- ${this.tagStr(t)}`;return{...o,meta:{...o.meta,readSeq:c,pivot:!0}}}computeMeta(t,n,a,o,c){let s,r;const d=a.filter($=>$).map($=>$.meta),g=o.map($=>$.meta),w=[],D=t.op==="read"?t.ex:t.op,S=[];if(D in Pt){const $=Pt[D]([]);for(const y of[...g,...d])y.val!==$||this.filter(y)?w.push(y):S.push(y)}else w.push(...g,...d);switch(t.op){case"const":s=ta(t.ex);break;case"read":r=`gather ${d.length} node(s)`,r+=` matching ${this.tagStr(c,t.ex)}`,r+=` (for ${this.tagStr(t.tag)})`,S.length&&(r+=` <${S.length} omitted>`),s=`${this.tagStr(t.tag)}`;break;default:{const $=[];t.ex&&t.op!=="subscript"&&$.push(JSON.stringify(t.ex)),t.tag&&$.push(this.tagStr(t.tag)),$.push(...w.map(y=>y.comp)),S.length&&$.push(`<${S.length} omitted>`),s=`${t.op}(`+$.join(", ")+")"}}return S.push(...w.flatMap($=>$.pivot?[]:$.omitted)),Object.freeze({formula:`[${ta(n)}] ${r??s}`,deps:[...new Set(w.flatMap($=>$.pivot?[$]:$.deps))],omitted:[...new Set(S)],val:n,x:d,br:g,comp:s,pivot:t.op==="read",toJSON:na})}}const ta=e=>typeof e=="string"?`"${e}"`:e.toString();function na(){const{formula:e,readSeq:t,deps:n}=this,a={readSeq:t,formula:e,deps:n};return a.readSeq||delete a.readSeq,a.deps.length||delete a.deps,Object.keys(a).length===1?a.formula:a}function yn(e){const{database:t}=oe();return Tc(t.chars,e)}function Xr(e){const{database:t}=oe();return Tc(t.charOpts,e)}const{arithmetic:ed}=Zr;let td=class extends nl{computeMeta({op:t,ex:n,tag:a},o,c,s,r){let d=c.filter($=>!!$);const g=nd(d,s);function w($){return Object.freeze(r&&!$.tag?{tag:r,...$}:$)}function D($,y){return w({op:$,ops:y,...g})}function S($,y){let{meta:k}=$;return y!=null&&y.some(R=>!k.usedCats.has(R))&&(k={...k,usedCats:new Set([...k.usedCats,...y])}),w(k.conds===g.conds?k:{...k,...g})}if(t==="read"&&(r==null?void 0:r.qt)==="cond"){const{src:$,dst:y,sheet:k,q:R}=r;$&&k&&R&&(g.conds=pn(g.conds,{[y??"All"]:{[$]:{[k]:{[R]:o}}}}))}switch(t==="read"&&n!=="unique"&&([t,n]=[n,void 0]),t){case"sum":case"prod":case"min":case"max":case"sumfrac":if(d.length>1){const $=ed[t]([]);d=d.filter(y=>y.val!==$)}return d.length===1?S(d[0]):D(d.length?t:"const",d);case"const":case"subscript":return D("const",[]);case"vtag":return g.usedCats=new Set([n]),D("const",[]);case"match":case"thres":case"lookup":case"read":return S(d[0]);case"tag":return S(d[0],Object.keys(a));case"dtag":return S(d[0],n);case"custom":return D(n,d);default:Rl(t)}}markGathered(t,n,a,o){const{val:c}=o,s={...o.meta};let r=!1;const d=new Set([...s.usedCats,...Object.keys(n)]);return s.usedCats.size!==d.size&&(s.usedCats=d,r=!0),r?{val:c,meta:Object.freeze(s)}:o}listFormulas(t){return this.gather(t.tag).filter(n=>n.val).map(({val:n,meta:a})=>Il.withTag(a.tag)[n])}listCondFormulas(t){return this.listFormulas(t).map(n=>this.compute(n).meta.conds).reduce(pn,{})}};function nd(e,t){var s;const n=[...e.map(r=>r.meta),...t.map(r=>r.meta)];let a={},o=new Set;for(const r of n)a=pn(a,r.conds),r.usedCats.forEach(d=>o.add(d));const c=o.size;return o=((s=n.find(r=>r.usedCats.size===c))==null?void 0:s.usedCats)??o,{usedCats:o,conds:a}}function pn(e,t){if(e===t)return e;if(typeof e!="object")throw new Error(`cannot merge ${e} and ${t}`);if(Object.keys(t).length>Object.keys(e).length&&([e,t]=[t,e]),!Object.keys(t).length)return e;let n=!1;const a={...e};for(const[o,c]of Object.entries(t)){const s=a[o],r=o in a?pn(s,c):c;s!==r&&(a[o]=r,n=!0)}return Object.freeze(n?a:e)}function id(e){const t=new Set(e);return n=>!ad(n,t)}function ad(e,t){const n=e.formula.match(/(\S+) (\S+) common.count/);if(!n)return!1;const[,a,o]=n;return o==="own"&&t.has(a)}class od extends td{toDebug(){return new Qr(this,Ml,id([...Bc,...Ec]))}defaultAccu(t){var o,c,s,r;const{qt:n,q:a}=t;if(!(!n||!a))switch(t.et){case"own":case"target":return(c=(o=zc[n])==null?void 0:o[a])==null?void 0:c.accu;case"enemy":return(r=(s=Tl[n])==null?void 0:s[a])==null?void 0:r.accu;case"team":if(n==="common"&&a==="count")return"sum";throw new Error("non-explicit team value accumulator")}}listFormulas(t){return super.listFormulas(t).filter(n=>n.tag.qt!=="formula"||["standardDmgInst","sheerDmgInst","anomalyDmgInst","anomalyBuildupInst","dazeInst"].includes(n.tag.name??""))}}function rn(e,...t){return t.map(({tag:n,value:a})=>({tag:{...n,preset:e},value:a}))}function il(e,...t){return t.map(({tag:n,value:a})=>({tag:{...n,src:e},value:a}))}function al(e){const{lvl:t,promotion:n,basic:a,dodge:o,special:c,chain:s,assist:r,core:d,mindscape:g}=q.char,{char:w,iso:D,[e.key]:S}=V.withAll("sheet",[]);return[w.reread(S),D.reread(S),t.add(e.level),a.add(e.basic),o.add(e.dodge),c.add(e.special),s.add(e.chain),r.add(e.assist),d.add(e.core),n.add(e.promotion),g.add(e.mindscape),hn.base.crit_.add(.05),hn.base.crit_dmg_.add(.5)]}function sd(e){return[V.sheet("agg").reread(V.sheet("wengine")),...e?[q.common.count.sheet(e.key).add(1),q.wengine.lvl.add(e.level),q.wengine.modification.add(e.modification),q.wengine.phase.add(e.phase)]:[]]}function ol(e,t){const{common:{count:n},initial:a}=Pl(zc,{sheet:"disc",et:"own"});return[V.sheet("agg").reread(V.sheet("disc")),V.withTag({sheet:"disc",qt:"initial"}).reread(V.sheet("dyn")),...Object.entries(e).map(([o,c])=>Vl(a,o).sheet("dyn").add(c)),...Object.entries(t).map(([o,c])=>n.sheet(o).add(c))]}function cd(e){const t={},n={};return e.forEach(({setKey:a,mainStatKey:o,substats:c,level:s,rarity:r})=>{t[a]=(t[a]??0)+1,n[o]=(n[o]??0)+El(r,o,s),c.forEach(({key:d,upgrades:g})=>{!d||!g||(n[d]=(n[d]??0)+Ol(d,r)*g)})}),ol(n,t)}function sl(e){const t=V.with("et","team"),{own:n,enemy:a,teamBuff:o,notOwnBuff:c}=V.sheet("agg").withAll("et",[]);return[e.map(s=>V.withTag({et:"target",dst:s}).reread(V.withTag({et:"own",dst:null,src:s}))),e.flatMap(s=>{const r=n.with("src",s);return e.map(d=>r.reread(o.withTag({dst:s,src:d,name:null})))}),e.flatMap(s=>{const r=n.with("src",s);return e.filter(d=>d!==s).map(d=>r.reread(c.withTag({dst:s,src:d,name:null})))}),e.map(s=>a.reread(V.withTag({et:"enemyDeBuff",dst:null,src:s,name:null}))),e.flatMap((s,r)=>{const{stackIn:d,stackTmp:g}=V.withAll("qt",[]),w=V.withTag({src:s,et:"own"});return[w.with("qt","stackTmp").add(zl(d,0,r+1)),w.with("qt","stackOut").add(Bl(g.max.with("et","team"),r+1,d))]}),e.map(s=>t.add(V.withTag({src:s,et:"own"})))].flat()}function cl(e){const t=Oc(un,e);return new od(un,ql,t)}function ld(e){return new Yr(un,Oc(un,e))}function rd({characterKey:e}){return i(mn,{ns:"charNames_gen",key18:e})}function dd({attribute:e}){return pe[e]}function hd({characterKey:e,onClick:t,charCardConfig:n}){const{level:a=0,promotion:o=0}=yn(e)??{},c=ie(e),s=n||{cardWidth:"100%",charImgWidth:"100%",iconsSize:1.7,isEditing:!1,charNameWidth:"191px",charNameVariant:"h6",scrollingBgSize:"200px"},r=v.useCallback(()=>e&&(t==null?void 0:t(e)),[e,t]),d=v.useCallback(g=>i(ki,{onClick:r,sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:g}),[r]);return i(Vt,{children:i(Al,{condition:!!t,wrapper:d,children:x(Y,{sx:{display:"flex",flexDirection:"column",width:s.cardWidth},children:[i(ud,{characterKey:e,characterStat:c,charCardConfig:s}),i(md,{characterKey:e,characterStat:c,promotion:o,level:a,charCardConfig:s})]})})})}function ud({characterKey:e,characterStat:t,charCardConfig:n}){const{attribute:a,id:o}=t;return x(Y,{sx:s=>({width:"100%",height:"100%",position:"relative",display:"flex",background:`${s.palette[a].main}`,zIndex:1,overflow:"hidden"}),children:[x(Y,{sx:{position:"absolute",left:"0",right:"0",display:"flex",transform:"rotate(5deg) translateX(-50%)",zIndex:2},children:[i(ia,{characterKey:e,charCardConfig:n}),i(ia,{characterKey:e,charCardConfig:n})]}),i(Y,{src:`https://act-webstatic.hoyoverse.com/game_record/zzzv2/role_vertical_painting/role_vertical_painting_${o}.png`,component:gn?gn:"img",width:n.charImgWidth,height:"auto",position:"relative",zIndex:"2"})]})}function md({characterKey:e,characterStat:t,promotion:n,level:a,charCardConfig:o}){const{t:c}=N("page_characters"),{attribute:s,rarity:r,specialty:d}=t,g=yn(e);return i(Y,{sx:{width:"100%",height:"100%",padding:"8px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:x(Y,{sx:{display:"flex",flexDirection:"column"},children:[x(Y,{gap:1,sx:{display:"flex",alignItems:"center"},children:[i(U,{size:o.iconsSize,src:Pc(r)}),i(O,{variant:o.charNameVariant,sx:{fontWeight:"900",maxWidth:o.charNameWidth,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:i(rd,{characterKey:e})}),i(Fl,{ele:s,iconProps:{sx:{fontSize:`${o.iconsSize}em`}}}),i(U,{size:o.iconsSize,src:Vc(d)}),o.isEditing?"":i(O,{variant:"h5",color:"primary",sx:{fontWeight:"900"},children:c("mindscape",{level:g?g.mindscape:0})})]}),o.isEditing?"":x(Y,{sx:{mt:"12px",display:"flex",gap:"14px",flexWrap:"wrap"},children:[x(Y,{sx:w=>({border:`2px solid ${w.palette.contentZzz.main}`,borderRadius:"20px",display:"flex"}),children:[i(O,{sx:{fontWeight:"900",paddingLeft:"12px",fontSize:"16px"},children:c("charLevel",{level:a})}),x(O,{color:"primary",sx:{fontWeight:"900",paddingLeft:"4px",pr:"10px"},children:["/ ",qc[n]]})]}),x(Y,{gap:1.5,sx:{display:"flex",alignItems:"center"},children:[Ci.map((w,D)=>i(Xi,{anchorOrigin:{vertical:"bottom",horizontal:"left"},badgeContent:`${g?g[w]:0}`,color:"primary",children:i(U,{size:1.9,src:de(w)})},D)),i(Xi,{anchorOrigin:{vertical:"bottom",horizontal:"left"},badgeContent:`${g?g.core:0}`,color:"primary",children:i(U,{size:1.9,src:de("core")})},6)]})]})]})})}function ia({characterKey:e,charCardConfig:t}){const{t:n}=N("charNames_gen"),a={animation:"scroll 16s infinite linear","@keyframes scroll":{"0%":{transform:"translateX(-100%)"},"100%":{transform:"translateX(0)"}}};return i(Y,{component:"span",sx:{color:"#000",marginTop:"20px",fontStyle:"italic",fontSize:t.scrollingBgSize,lineHeight:"150px",whiteSpace:"nowrap",textTransform:"uppercase",display:"flex",justifyContent:"center",fontFamily:"Impact",opacity:.1,...a},children:n(`${e}`)})}function gd({mindscape:e,setMindscape:t}){const{t:n}=N("page_characters");return i(M,{sx:{display:"flex",flexWrap:"wrap",gap:2,mt:"12px"},children:Si(1,6).map(a=>i(M,{children:i(Vt,{sx:{position:"relative",borderRadius:"40px"},children:i(Gr,{control:i(jl,{checked:e>=a,onChange:()=>t(a===e?a-1:a)}),label:x(M,{sx:{position:"absolute",top:9,left:e>=a?75:16,transition:"left 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",textAlign:"center"},children:[i(O,{variant:"subtitle1",sx:o=>({fontWeight:900,color:e>=a?o.palette.mindscapeActive.main:o.palette.mindscapeInactive.main}),children:n("mindscape",{level:a})}),i(O,{variant:"subtitle2",sx:o=>({lineHeight:.2,fontWeight:900,color:e>=a?o.palette.mindscapeActive.main:o.palette.mindscapeInactive.main}),children:n("mindscapeTitle")})]}),sx:{margin:0}})})},a))})}function pd(e){return{new:t=>e.chars.get(t)?0:1,name:t=>Ac.t(t).toString(),level:t=>{const n=e.chars.get(t);return n?n.level*(n.promotion+1):0},rarity:t=>ie(t).rarity??0}}function fd(e){return{attribute:(t,n)=>n.includes(ie(t).attribute),specialtyType:(t,n)=>n.includes(ie(t).specialty),rarity:(t,n)=>n.includes(ie(t).rarity),name:(t,n)=>n===void 0||Ac.t(t).toLowerCase().includes(n.toLowerCase()),new:(t,n)=>n===void 0||n===(e.chars.get(t)?"no":"yes")}}const ll={name:["name"],level:["level","rarity","name"],rarity:["rarity","level","name"]};function ay({show:e,onHide:t,onSelect:n,newFirst:a=!1}){const{database:o}=oe(),c=Fc(o.displayCharacter),[s,r]=v.useState(""),d=v.useDeferredValue(s),g=v.useDeferredValue(c),w=v.useMemo(()=>{const{attribute:$,specialtyType:y,sortType:k,ascending:R}=g,A=[...a?["new"]:[],...ll[k]??[]];return Ll.filter(jc({attribute:$,specialtyType:y,name:d},fd(o))).sort(Hl(A,R,pd(o),["new"]))},[g,a,d,o]);return i(_d,{show:e,charactersToShow:w,filterSearchSortProps:{searchTerm:s,onChangeSpecialtyFilter:$=>{o.displayCharacter.set({specialtyType:$})},onChangeAttributeFilter:$=>{o.displayCharacter.set({attribute:$})},onChangeSearch:$=>{r($.target.value)},onChangeSort:$=>{o.displayCharacter.set({sortType:$})},onChangeAsc:$=>{o.displayCharacter.set({ascending:$})}},onClose:()=>{r(""),t()},children:i(ae,{sx:{flex:"1",overflow:"auto"},children:i(v.Suspense,{fallback:i($e,{variant:"rectangular",width:"100%",height:1e3}),children:i(K,{container:!0,spacing:.5,columns:{xs:2,sm:3,md:4,lg:5},children:w.map($=>i(K,{item:!0,xs:1,children:i(Se,{bgt:"light",sx:y=>({position:"relative",flexGrow:1,display:"flex",flexDirection:"column",borderRadius:"40px 16px 16px 40px",border:`3px solid ${y.palette.contentZzz.main}`}),children:i(yd,{characterKey:$,onClick:()=>{t(),n($)}})})},$))})})})})}const $d=Object.keys(ll);function _d({show:e,charactersToShow:t,filterSearchSortProps:n,onClose:a,children:o}){const{t:c}=N("page_characters"),{database:s}=oe(),r=Fc(s.displayCharacter),d=v.useMemo(()=>Yi(Lc,y=>s.chars.entries.forEach(([k,R])=>{const A=ie(R.key).specialty;y[A].total++,t.includes(k)&&y[A].current++})),[t,s.chars.entries]),g=v.useMemo(()=>Yi(ve,y=>Object.entries(s.chars.data).forEach(([k])=>{const R=ie(k).attribute;y[R].total++,t.includes(k)&&y[R].current++})),[t,s.chars.data]),{specialtyType:w,attribute:D,sortType:S,ascending:$}=r;return i(Ii,{open:e,onClose:a,containerProps:{sx:{height:"100vh",p:{xs:1}}},children:x(Se,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[x(ae,{sx:{display:"flex",flexDirection:"column",gap:1},children:[x(M,{sx:{display:"flex",justifyContent:"space-between"},children:[x(M,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:[i(Nl,{onChange:y=>s.displayCharacter.set({specialtyType:y}),value:w,totals:d,size:"small"}),i(Gl,{onChange:y=>s.displayCharacter.set({attribute:y}),value:D,totals:g,size:"small"})]}),i(Di,{sx:{ml:"auto"},onClick:()=>a(),children:i(Ri,{})})]}),x(M,{display:"flex",gap:1,children:[i(Ul,{autoFocus:!0,value:n.searchTerm,onChange:y=>n.onChangeSearch(y),label:c("characterName"),size:"small",sx:{height:"100%",mr:"auto"},InputProps:{sx:{height:"100%"}}}),i(Jl,{sortKeys:$d,value:S,onChange:y=>n.onChangeSort(y),ascending:$,onChangeAsc:y=>n.onChangeAsc(y)})]})]}),i(Ot,{}),o]})})}function yd({characterKey:e,onClick:t}){const{t:n}=N(["page_characters","charNames_gen"]),a=Kl(),o=yn(e),{rarity:c,attribute:s}=ie(e),{level:r=1,promotion:d=0,mindscape:g=0}=o??{},w=s==="electric"?a.palette[s].light:a.palette[s].main;return i(ki,{onClick:t,children:x(M,{sx:{position:"relative",width:"100%",display:"flex",padding:"3px",gap:.5,"&::before":{content:'""',display:"block",position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:.7,background:w}},children:[i(M,{sx:{maxWidth:{xs:"33%",lg:"30%"},alignSelf:"flex-end",display:"flex",flexDirection:"column",zIndex:1,flexShrink:1},children:i(M,{component:gn?gn:"img",src:Wl(e,"interknot")})}),x(M,{sx:{display:"flex",flexDirection:"column",zIndex:1,justifyContent:"space-evenly"},children:[x(M,{sx:{display:"flex",alignItems:"center",gap:.5},children:[i(U,{size:1.5,src:Pc(c)}),i(O,{variant:"subtitle2",sx:D=>({flexGrow:1,color:D.palette.contentNormal.main,fontWeight:"900"}),children:n(`charNames_gen:${e}`)})]}),o?x(M,{sx:D=>({display:"flex",gap:1,alignItems:"center",background:D.palette.contentNormal.main,padding:"4px 12px",borderRadius:"20px"}),children:[x(M,{sx:{textShadow:"0 0 5px gray"},children:[i(O,{variant:"body2",component:"span",whiteSpace:"nowrap",children:n("charLevel",{level:r})}),x(O,{variant:"body2",component:"span",color:"text.secondary",children:["/",qc[d]]})]}),x(O,{variant:"body2",children:["M",g]})]}):i(O,{component:"span",variant:"body2",children:i(wi,{color:"electric",children:n("characterEditor.new")})})]})]})})}function bd(){const{t:e}=N("page_characters"),{database:t}=oe(),n=_n(),{core:a=0,promotion:o=0,key:c}=n??{},s=v.useCallback(r=>c&&t.chars.set(c,{core:r}),[t,c]);return i(Kc,{fullWidth:!0,title:e("core",{level:a}),color:"primary",startIcon:i(U,{src:de("core"),size:1.75,sideMargin:!0}),children:Si(0,Yl[o]).map(r=>i(Hc,{selected:a===r,disabled:a===r,onClick:()=>s(r),children:e("core",{level:r})},r))})}const xd={xs:2*3,sm:2*3,md:3*3,lg:4*3,xl:4*3};function rl({disc:e,onChangeId:t,slotKey:n,show:a,onClose:o}){const{t:c}=N(["page_characters","disc"]),{database:s}=oe(),r=e==null?void 0:e.id,d=v.useCallback((I,E)=>({...I,...E,slotKeys:[n]}),[n]),[g,w]=v.useReducer(d,{...Er(),slotKeys:[n]}),D=Zl(),S=v.useMemo(()=>Or(),[]),$=Ql(s.discs),y=$.filter(I=>I.slotKey===g.slotKeys[0]).length,k=v.useMemo(()=>{const I=jc(g,S);let E=$.filter(I).map(P=>P.id);return r&&s.discs.get(r)&&(E=E.filter(P=>P!==r),E.unshift(r)),E},[g,S,$,r,s.discs]),{numShow:R,setTriggerElement:A}=Xl(xd[D],k.length),j=v.useMemo(()=>k.slice(0,R),[k,R]),ee=k.length!==y?`${k.length}/${y}`:`${y}`,te={numShowing:j.length,total:ee,t:c,namespace:"disc"},F=v.useCallback(I=>{er.includes(I)?t(null):I&&t(I),o()},[t,o]);return i(Ii,{open:a,onClose:o,containerProps:{maxWidth:"xl"},children:x(Se,{children:[x(ae,{sx:{py:1,display:"flex",alignItems:"center"},children:[i(O,{variant:"h6",children:c("tabEquip.swapDisc")}),i(Di,{onClick:o,sx:{ml:"auto"},children:i(Ri,{})})]}),i(Ot,{}),i(ae,{children:i(v.Suspense,{fallback:i($e,{variant:"rectangular",width:"100%",height:200}),children:i(tr,{filterOption:g,filterOptionDispatch:w,filteredIds:k,disableSlotFilter:!0})})}),i(Ot,{}),x(ae,{children:[i(M,{pb:1,display:"flex",justifyContent:"space-between",alignItems:"flex-end",flexWrap:"wrap",children:i(nr,{showingTextProps:te})}),i(M,{mt:1,children:i(v.Suspense,{fallback:i($e,{variant:"rectangular",width:"100%",height:1e3}),children:x(K,{container:!0,spacing:1,columns:{xs:2,md:3,lg:4},children:[r&&i(K,{item:!0,xs:1,children:i(Se,{bgt:"light",sx:{width:"100%",height:"100%"},children:i(ki,{sx:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},onClick:()=>F(n),children:x(M,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[i(ir,{sx:{fontSize:"10em"}}),i(O,{children:c("disc:button.unequipDisc")})]})})})}),j.map(I=>i(K,{item:!0,xs:1,sx:E=>({...r===I&&{"> .MuiCard-root":{outline:`${E.spacing(.5)} solid ${E.palette.warning.main}`}}}),children:i(Wc,{disc:s.discs.get(I),onClick:r===I?void 0:()=>F(I)})},I))]})})}),k.length!==j.length&&i($e,{ref:I=>{I&&A(I)},sx:{borderRadius:1,mt:1},variant:"rectangular",width:"100%",height:100})]})]})})}function wd(e){return"fieldRef"in e}var Dt={},aa;function vd(){if(aa)return Dt;aa=1;var e=ar();Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.default=void 0;var t=e(or()),n=sr(),a=(0,t.default)((0,n.jsx)("path",{d:"M6.99 11 3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z"}),"SwapHoriz");return Dt.default=a,Dt}var kd=vd();const Ft=cr(kd),Cd={xs:1,sm:2,md:3,lg:3,xl:3};function Sd({setWengine:e,setDisc:t}){const{database:n}=oe(),a=v.useContext(Nc),[o,c]=v.useState(),[s,r]=v.useState(""),d=v.useCallback(y=>{r(y)},[]),g=v.useCallback(y=>{c(y)},[]),w=Gc(a==null?void 0:a.equippedWengine),D=a?ie(a.key).specialty:Lc[0],S=Uc(a==null?void 0:a.equippedDiscs),$=lr(o);return i(M,{children:x(Rc,{spacing:2,children:[i(v.Suspense,{fallback:!1,children:s&&i(rr,{wengineId:s,footer:!0,onClose:()=>r(""),extraButtons:i(Td,{wengineId:(w==null?void 0:w.id)||"",wengineTypeKey:D,onChangeId:e})})}),i(v.Suspense,{fallback:!1,children:$&&i(dr,{disc:$,show:!!o,onShow:()=>c(o),onClose:()=>c(void 0),cancelEdit:()=>c(void 0)})}),i(M,{children:w!=null&&w.id?i(hr,{wengine:w,onEdit:()=>d(w.id),extraButtons:i(Md,{wengineId:w.id,wengineTypeKey:D,onChangeId:e})}):i(Dd,{wengineId:"",wengineTypeKey:D,onChangeId:e})}),i(M,{children:i(K,{item:!0,columns:Cd,container:!0,spacing:1,children:!!S&&Object.entries(S).map(([y,k])=>i(K,{item:!0,xs:1,children:k!=null&&k.id?i(Wc,{disc:k,extraButtons:i(Id,{disc:k,slotKey:y,onChangeId:R=>t(y,R)}),onEdit:()=>g(k.id),onLockToggle:()=>n.discs.set(k.id,({lock:R})=>({lock:!R}))}):i(Rd,{slotKey:y,onChangeId:R=>t(y,R)})},(k==null?void 0:k.id)||y))})})]})})}function Dd({wengineId:e,wengineTypeKey:t,onChangeId:n}){const[a,o,c]=qt();return x(Vt,{bgt:"light",sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[i(ae,{children:x(O,{children:[i(U,{src:Vc(t)})," "]})}),i(Ot,{}),x(M,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:[i(Mi,{wengineId:e,wengineTypeKey:t,show:a,onClose:c,onChangeId:n}),i(De,{onClick:o,color:"info",sx:{borderRadius:"1em"},children:i(Ft,{sx:{height:100,width:100}})})]})]})}function Rd({slotKey:e,onChangeId:t}){const[n,a,o]=qt(),{t:c}=N("disc");return x(Vt,{bgt:"light",sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[i(ae,{children:i(O,{children:c("slotName",{slotKey:e})})}),i(Ot,{}),x(M,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:[i(rl,{disc:void 0,slotKey:e,show:n,onClose:o,onChangeId:t}),i(De,{onClick:a,color:"info",sx:{borderRadius:"1em"},children:i(Ft,{sx:{height:100,width:100}})})]})]})}function Id({disc:e,slotKey:t,onChangeId:n}){const{t:a}=N("page_characters"),[o,c,s]=qt();return x(At,{children:[i(Jc,{title:i(O,{children:a("tabEquip.swapDisc")}),placement:"top",arrow:!0,children:i(De,{color:"info",size:"small",onClick:c,"aria-label":a("tabEquip.swapDisc"),children:i(Ft,{})})}),i(rl,{disc:e,slotKey:t,show:o,onClose:s,onChangeId:n})]})}function Md({wengineId:e,wengineTypeKey:t,onChangeId:n}){const{t:a}=N("page_characters"),[o,c,s]=qt();return x(At,{children:[i(Jc,{title:i(O,{children:a("tabEquip.swapWengine")}),placement:"top",arrow:!0,children:i(De,{color:"info",size:"small",onClick:c,children:i(Ft,{})})}),i(Mi,{wengineId:e,wengineTypeKey:t,onChangeId:n,show:o,onClose:s})]})}function Td({wengineId:e,wengineTypeKey:t,onChangeId:n}){const{t:a}=N("page_characters"),[o,c,s]=qt();return x(At,{children:[i(De,{color:"info",onClick:c,startIcon:i(Ft,{}),children:a("tabEquip.swapWengine")}),i(Mi,{wengineId:e,wengineTypeKey:t,onChangeId:n,show:o,onClose:s})]})}function zd({skillKey:e}){const{database:t}=oe(),{t:n}=N("page_characters"),a=_n(),{[e]:o=0,promotion:c=0,key:s}=a??{},r=v.useCallback(d=>s&&t.chars.set(s,{[e]:d}),[t,s,e]);return i(Kc,{fullWidth:!0,title:n(e,{level:o}),color:"primary",startIcon:i(U,{src:de(e),size:1.75,sideMargin:!0}),children:Si(1,ur[c]).map(d=>i(Hc,{selected:o===d,disabled:o===d,onClick:()=>r(d),children:n(e,{level:d})},d))})}function bn(){const e=v.useContext(Ti),t=v.useContext(mr);return v.useMemo(()=>e==null?void 0:e.withTag(t),[e,t])}const W=(e,t)=>i(mn,{ns:"sheet",key18:e,values:t});function h(e,t){return[(n,a)=>i(mn,{ns:`${e}_${t}_gen`,key18:n,values:a}),(n,a)=>i(mn,{ns:`${e}_${t}`,key18:n,values:a})]}function l(e){return{title:i(xn,{tag:e}),fieldRef:e}}function Bd(e){if(!e)return"";const{et:t,q:n,qt:a,name:o}=e;return t==="own"&&a==="formula"&&n!=="base"?o??n??"":n??""}const Ed={initial:"Initial",combat:"Combat",final:"Final",base:"Base"};function xn({tag:e,showPercent:t,preventRecursion:n}){return i(ke,{color:Y_(e),children:i(Vd,{tag:e,showPercent:t,preventRecursion:n})})}function oy({tag:e,showPercent:t}){return x(At,{children:[i(xn,{tag:e,showPercent:t}),Q_(e).map(n=>i(wi,{children:fn[n]},n)),e.attribute&&i(wi,{color:e.attribute,children:i(dd,{attribute:e.attribute})})]})}const Od=["hp","hp_","atk","atk_","def","def_"],Pd=e=>Od.includes(e),oa={dmg_:"DMG",common_dmg_:"DMG",defIgn_:"DEF Ignore",resIgn_:"Res Ignore",dazeInc_:"Daze Increase"};function Vd({tag:e,showPercent:t,preventRecursion:n}){var s;const a=bn(),o=(s=X_.subset(e)[0])==null?void 0:s.title;if(o&&!n)return o;if(e.qt==="cond"&&e.q&&e.sheet&&a){const r=vi.get(`${e.sheet}:${e.q}`);if(r)return gr(r.label,a,a==null?void 0:a.compute(new pr(e,"max")).val)}const c=Bd(e);if(Pd(c))return x("span",{children:[i($r,{statKey:c,iconProps:fr})," ",x("span",{children:[(e.qt&&Ed[e.qt])??e.qt," ",_r[c],t&&Yc(c)]})]});if(oa[c]){const r=[...e.attribute?[pe[e.attribute]]:[],...e.damageType1?[fn[e.damageType1]]:[],...e.damageType2?[fn[e.damageType2]]:[],oa[c]];return i("span",{children:r.join(" ")})}return i(Bt,{statKey:c,showPercent:t})}function qd(){const e=bn();return i(Vt,{children:i(ae,{children:e==null?void 0:e.listFormulas(q.listing.formulas).map((t,n)=>i(Ad,{read:t},n))})})}function Ad({read:e}){var k,R,A,j,ee,te,F;const t=bn(),{setRead:n}=v.useContext(yr),a=_n(),o=Xr(a==null?void 0:a.key),c=e.tag.sheet===((k=o==null?void 0:o.target)==null?void 0:k.sheet)&&e.tag.name===((R=o==null?void 0:o.target)==null?void 0:R.name)||((A=o==null?void 0:o.target)==null?void 0:A.q)===e.tag.q,s=v.useMemo(()=>{var I,E,P,ne;return e.tag.sheet===((I=o==null?void 0:o.target)==null?void 0:I.sheet)&&e.tag.name===((E=o==null?void 0:o.target)==null?void 0:E.name)?br(e.tag,(P=o==null?void 0:o.target)==null?void 0:P.damageType1,(ne=o==null?void 0:o.target)==null?void 0:ne.damageType2):e.tag},[e.tag,(j=o==null?void 0:o.target)==null?void 0:j.sheet,(ee=o==null?void 0:o.target)==null?void 0:ee.name,(te=o==null?void 0:o.target)==null?void 0:te.damageType1,(F=o==null?void 0:o.target)==null?void 0:F.damageType2]),r=v.useMemo(()=>({...e,tag:s}),[s,e]),d=t==null?void 0:t.compute(r),g=s.name||s.q,{statHighlight:w,setStatHighlight:D}=v.useContext(xr),S=s.name?"":s.attribute?`${s.attribute}_${s.q}`:s.q==="cappedCrit_"?"crit_":s.q==="anom_cappedCrit_"?"anom_crit_":s.q,$=S?wr(w,S):!1;if(!d)return null;const y=vr(d.val,Yc(g??""));return x(M,{onMouseEnter:()=>S&&D(S),onMouseLeave:()=>D(""),sx:{display:"flex",gap:1,alignItems:"center",p:.5,borderRadius:.5,backgroundColor:c?"rgba(0,200,0,0.2)":void 0,position:"relative","::after":{content:'""',position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:.5,backgroundColor:kr($),transition:"background-color 0.3s ease-in-out",pointerEvents:"none"}},children:[i(M,{sx:{flexGrow:1},children:i(xn,{tag:s})}),y,i(Cr,{tag:s,onClick:()=>{}})]})}function sy({characterKey:e,onClose:t}){return i(Ii,{open:!!e,onClose:t,children:i(v.Suspense,{fallback:i($e,{variant:"rectangular",width:"100%",height:1e3}),children:e&&i(Fd,{characterKey:e,onClose:t},e)})})}function Fd({characterKey:e,onClose:t}){const n=yn(e);return i(Se,{children:i(ae,{sx:{display:"flex",flexDirection:"column",gap:1},children:i(v.Suspense,{fallback:i($e,{variant:"rectangular",width:"100%",height:1e3}),children:n?i(Nc.Provider,{value:n,children:i(Ld,{onClose:t})}):i($e,{variant:"rectangular",width:"100%",height:1e3})})})})}const jd={cardWidth:"500px",charImgWidth:"75%",iconsSize:1.5,isEditing:!0,charNameWidth:"166px",charNameVariant:"h6",scrollingBgSize:"220px"};function Ld({onClose:e}){const{t}=N(["page_characters"]),n=Sr(),{database:a}=oe(),o=_n(),{key:c,equippedDiscs:s,equippedWengine:r}=o,d=v.useCallback(async()=>{const g=t(`${c}`);window.confirm(t("removeCharacter",{value:g}))&&(a.chars.remove(c),n("/characters"))},[a,n,c,t]);return x(M,{display:"flex",flexDirection:"column",gap:1,children:[x(M,{display:"flex",gap:1,children:[i(De,{color:"error",onClick:()=>d(),startIcon:i(Dr,{}),sx:{marginLeft:"auto"},children:t("characterEditor.delete")}),!!e&&i(Di,{onClick:e,children:i(Ri,{})})]}),i(M,{children:x(K,{container:!0,spacing:1,sx:{justifyContent:"center"},children:[i(K,{item:!0,xs:6,sm:4,md:4,lg:4,xl:4,children:x(Se,{sx:{height:"100%",display:"flex",flexDirection:"column",gap:1},children:[i(hd,{characterKey:c,charCardConfig:jd}),i(M,{sx:{px:1},children:i(Rr,{level:o.level,milestone:o.promotion,setBoth:({level:g,milestone:w})=>a.chars.set(c,{level:g,promotion:w})})}),i(qd,{}),i(gd,{mindscape:o.mindscape,setMindscape:g=>a.chars.set(c,{mindscape:g})})]})}),x(K,{item:!0,xs:6,sm:8,md:8,lg:8,xl:8,sx:{display:"flex",flexDirection:"column",gap:1},children:[i(M,{children:x(K,{container:!0,columns:3,spacing:1,children:[Ci.map(g=>i(K,{item:!0,xs:1,children:i(zd,{skillKey:g},g)},g)),i(K,{item:!0,xs:1,children:i(bd,{})},"core")]})}),i(M,{children:i(Sd,{setWengine:g=>{g?a.wengines.set(g,{location:c}):r&&a.wengines.set(r,{location:""})},setDisc:(g,w)=>{w?a.discs.set(w,{location:c}):s[g]&&a.discs.set(s[g],{location:""})}})})]})]})})]})}function cy({character:e,charOpt:t,wengineId:n,discIds:a,children:o}){const c=Hd(e,n,a),s=v.useMemo(()=>cl([...sl([e.key]),...c,hn.common.critMode.add(t.critMode),X.common.lvl.add(t.enemyLvl),X.common.def.add(t.enemyDef),X.common.isStunned.add(t.enemyisStunned?1:0),X.common.stun_.add(t.enemyStunMultiplier/100),X.common.unstun_.add(1),...t.conditionals.flatMap(({sheet:d,src:g,dst:w,condKey:D,condValue:S})=>rn("preset0",Zc(d,g,w)(D,S))),...t.bonusStats.filter(({disabled:d})=>!d).flatMap(({tag:d,value:g})=>rn("preset0",{tag:{...d,src:e.key,sheet:"agg",et:"own"},value:Zi(Qi(g,d.q??""))})),...t.enemyStats.flatMap(({tag:d,value:g})=>rn("preset0",{tag:{...d,qt:"common",et:"enemy",sheet:"agg"},value:Zi(Qi(g,d.q??""))}))]),[c,t,e.key]),r=v.useMemo(()=>s&&new Map,[s]);return i(Ir.Provider,{value:r,children:i(Ti.Provider,{value:s,children:o})})}function Hd(e,t,n){const a=Gc(t),o=Uc(n),c=v.useMemo(()=>sd(a),[a]),s=v.useMemo(()=>cd(Object.values(o).filter(Mr)),[o]);return v.useMemo(()=>il(e.key,...al(e),...c,...s),[e,c,s])}function ly({character:e,conditionals:t,children:n}){const a=v.useMemo(()=>cl([...sl([e.key]),...il(e.key,...al(e),...ol({},Qc(Ec,()=>4)),V.sheet("agg").reread(V.sheet("wengine")),q.wengine.lvl.add(60),q.wengine.modification.add(5),q.wengine.phase.add(1),...Bc.map(o=>q.common.count.sheet(o).add(1))),hn.common.critMode.add("avg"),X.common.lvl.add(100),X.common.def.add(900),X.common.isStunned.add(0),X.common.stun_.add(1.5),X.common.unstun_.add(1),...t.flatMap(({sheet:o,src:c,dst:s,condKey:r,condValue:d})=>rn("preset0",Zc(o,c,s)(r,d)))]),[e,t]);return i(Ti.Provider,{value:a,children:n})}function C(e,t={}){return{...Kd(e,t==null?void 0:t.perSkillAbility),core:Nd(e,t==null?void 0:t.core,t==null?void 0:t.ability),m1:ye(e,1,t==null?void 0:t.m1),m2:ye(e,2,t==null?void 0:t.m2),m3:ye(e,3,t==null?void 0:t.m3),m4:ye(e,4,t==null?void 0:t.m4),m5:ye(e,5,t==null?void 0:t.m5),m6:ye(e,6,t==null?void 0:t.m6)}}function _(e){return{title:i(xn,{tag:e.tag,preventRecursion:!0}),fieldRef:e.tag}}function Kd(e,t){const n=b.char[e],a=Z[e],[o,c]=h("char",e);return Qc(Ci,s=>({title:s,img:de(`${s}Flat`),documents:Object.keys(n[s]).flatMap(r=>{var d;return[{type:"text",header:{icon:i(U,{src:de(`${s}Flat`),size:1.5}),text:o(`${s}.${r}.name`)},text:o(`${s}.${r}.desc`)},{type:"fields",fields:Object.values(a).filter(g=>g.name.includes(r)).map(g=>({title:Wd(e,s,g.name),fieldRef:g.tag}))},...((d=t==null?void 0:t[s])==null?void 0:d[r])??[]]})}))}function Wd(e,t,n){const[a,o,c]=n.split("_");return W(c,{val:`$t(char_${e}_gen:${t}.${a}.params.${o})`})}function Nd(e,t=[],n=[]){const[a,o]=h("char",e);return{title:"core",documents:[{type:"text",header:{icon:i(U,{src:de("coreFlat"),size:1.5}),text:a("core.name")},text:c=>a(`core.desc.${c.compute(q.char.core).val}`)},...t,{type:"text",header:{icon:i(U,{src:de("coreFlat"),size:1.5}),text:a("ability.name")},text:a("ability.desc")},...n]}}function ye(e,t,n=[]){const[a,o]=h("char",e);return{title:`mindscape${t}`,documents:[{type:"text",header:{icon:i(U,{src:Tr(t),size:1.5}),text:a(`mindscapes.${t}.name`)},text:x(At,{children:[a(`mindscapes.${t}.desc`),i("br",{}),i("br",{}),i("i",{children:a(`mindscapes.${t}.flavor`)})]})},...n]}}const wn="Anby",[,nn]=h("char",wn),Qn=m[wn],be=u[wn],Gd=C(wn,{core:[{type:"conditional",conditional:{label:nn("coreCond"),metadata:Qn.core_after3rdBasic,fields:[{title:nn("core_dazeInc_"),fieldRef:be.core_after3rdBasic_dazeInc_.tag}]}}],m1:[{type:"conditional",conditional:{label:nn("m1Cond"),metadata:Qn.m1After4thBasicHit,fields:[_(be.m1_after4thHit_energyRegen_)]}}],m2:[{type:"fields",fields:[_(be.m2_stunned_basic_dmg_),_(be.m2_unstunned_ex_dazeInc_)]}],m6:[{type:"conditional",conditional:{label:nn("m6Cond"),metadata:Qn.m6ChargeConsumed,fields:[_(be.m6_charge_basic_dmg_),_(be.m6_charge_exSpecial_dmg_)]}}]}),Ud="Anton",Jd=C(Ud),Yd="AstraYao",Zd=C(Yd),Qd="Ben",Xd=C(Qd),eh="Billy",th=C(eh),Re="Burnice",[,G]=h("char",Re),sa=m[Re],ce=u[Re],an=Z[Re],nh=b.char[Re],ih=C(Re,{core:[{type:"fields",fields:[{title:G("core_afterburn_dmg"),fieldRef:an.core_afterburn_dmg.tag},{title:G("core_afterburn_anomBuildup"),fieldRef:an.core_afterburn_anomBuildup.tag},{title:G("core_afterburn_dmg_"),fieldRef:ce.core_afterburn_dmg_.tag}]}],ability:[{type:"fields",fields:[_(ce.ability_fire_anomBuildup_)]}],m1:[{type:"fields",fields:[{title:G("m1_afterburn_mv_mult"),fieldValue:nh.m1.afterburn_dmg*100,unit:"%"},{title:G("m1_afterburn_anomBuildup"),fieldRef:ce.m1_afterburn_fire_anomBuildup_.tag}]}],m2:[{type:"conditional",conditional:{label:G("m2Cond"),metadata:sa.thermal_penetration,fields:[_(ce.m2_pen_)]}}],m4:[{type:"fields",fields:[{title:G("m4_exSpecial_crit_"),fieldRef:ce.m4_exSpecial_crit_.tag},{title:G("m4_assistSkill_crit_"),fieldRef:ce.m4_assistSkill_crit_.tag}]}],m6:[{type:"fields",fields:[{title:G("m6_additional_afterburn_dmg"),fieldRef:an.m6_additional_afterburn_dmg.tag}]},{type:"conditional",conditional:{label:G("m6Cond"),metadata:sa.exSpecial_active,fields:[_(ce.m6_burn_fire_resIgn_),{title:G("m6_fire_resIgn"),fieldRef:ce.m6_fire_resIgn_.tag},{title:G("m6_additional_burn_dmg"),fieldRef:an.m6_additional_burn_dmg.tag}]}}]}),ah="Caesar",oh=C(ah),sh="Corin",ch=C(sh),lh="Ellen",rh=C(lh),jt="Evelyn",[,he]=h("char",jt),Xn=m[jt],xe=u[jt],ca=Z[jt],dh=C(jt,{core:[{type:"conditional",conditional:{label:he("coreCond"),metadata:Xn.binding_seal,fields:[_(xe.core_crit_)]}}],ability:[{type:"fields",fields:[{title:he("ability_dmg_"),fieldRef:xe.ability_chain_ult_dmg_.tag},{title:he("ability_mv_mult"),fieldRef:xe.ability_chainSkill_mv_mult.tag}]}],m1:[{type:"conditional",conditional:{label:he("m1Cond"),metadata:Xn.enemy_bound,fields:[_(xe.m1_defIgn_)]}}],m2:[{type:"fields",fields:[_(xe.m2_atk_)]}],m4:[{type:"fields",fields:[{title:he("m4_shield"),fieldRef:ca.m4_shield.tag}]},{type:"conditional",conditional:{label:he("m4Cond"),metadata:Xn.m4_shield_exists,fields:[_(xe.m4_crit_dmg_)]}}],m6:[{type:"fields",fields:[{title:he("m6_follow_up_dmg"),fieldRef:ca.m6_follow_up_dmg_.tag}]}]}),hh="Grace",uh=C(hh),mh="Harumasa",gh=C(mh),ph="Hugo",fh=C(ph),Lt="Jane",[,le]=h("char",Lt),ue=m[Lt],L=u[Lt],$h=Z[Lt],_h=C(Lt,{perSkillAbility:{basic:{Passion:[{type:"conditional",conditional:{label:le("passionCond"),metadata:ue.passion,fields:[_(L.passion_physical_anomBuildup_),_(L.passion_atk)]}}]}},core:[{type:"conditional",conditional:{label:le("gnawedCond"),metadata:ue.gnawed,fields:[_(L.core_assault_crit_),_(L.core_assault_crit_dmg_)]}}],ability:[{type:"conditional",conditional:{label:le("abilityCond"),metadata:ue.enemy_suffering_anomaly,fields:[_(L.ability_physical_anomBuildup_)]}}],m1:[{type:"conditional",conditional:{label:le("passionCond"),metadata:ue.passion,fields:[_(L.m1_physical_anomBuildup_),_(L.m1_common_dmg_)]}}],m2:[{type:"conditional",conditional:{label:le("gnawedCond"),metadata:ue.gnawed,fields:[_(L.m2_defIgn_),_(L.m2_assault_defIgn_),_(L.m2_assault_crit_dmg_)]}}],m4:[{type:"conditional",conditional:{label:le("m4Cond"),metadata:ue.assault_or_disorder_triggered,fields:[_(L.m4_anomaly_dmg_)]}}],m6:[{type:"conditional",conditional:{label:le("passionCond"),metadata:ue.passion,fields:[_(L.m6_crit_),_(L.m6_crit_dmg_)]}},{type:"fields",fields:[{title:le("m6_additional_dmg"),fieldRef:$h.m6_additional_dmg.tag}]}]}),yh="JuFufu",bh=C(yh),xh="Koleda",wh=C(xh),Ie="Lighter",[,re]=h("char",Ie),Rt=m[Ie],Q=u[Ie],vh=Z[Ie],kh=b.char[Ie],Ch=C(Ie,{core:[{type:"conditional",conditional:{label:re("coreCond.morale_consumed"),metadata:Rt.morale_consumed,fields:[_(Q.core_impact_)]}},{type:"conditional",conditional:{label:re("coreCond.morale_burst_hit"),metadata:Rt.morale_burst_hit,fields:[_(Q.core_ice_resRed_),_(Q.core_fire_resRed_)]}}],ability:[{type:"conditional",conditional:{label:re("abilityCond"),metadata:Rt.elation,fields:[_(Q.ability_ice_dmg_),_(Q.ability_fire_dmg_)]}}],m1:[{type:"conditional",conditional:{label:re("collapseCond"),metadata:Rt.collapse,fields:[_(Q.m1_ice_resRed_),_(Q.m1_fire_resRed_)]}},{type:"fields",fields:[{title:re("m1_finishing_move_dmg_"),fieldRef:Q.m1_finishing_move_dmg_.tag}]}],m2:[{type:"conditional",conditional:{label:re("collapseCond"),metadata:Rt.collapse,fields:[_(Q.m2_stun_)]}},{type:"fields",fields:[{title:re("m2_elation_inc_"),fieldValue:kh.m2.ability_buff_inc_*100,unit:"%"}]}],m4:[{type:"fields",fields:[_(Q.m4_enerRegen_)]}],m6:[{type:"fields",fields:[{title:re("m6_blazing_impact_dmg"),fieldRef:vh.m6_blazing_impact_dmg.tag}]}]}),Sh="Lucy",Dh=C(Sh),Rh="Lycaon",Ih=C(Rh),Mh="Miyabi",Th=C(Mh),zh="Nekomata",Bh=C(zh),vn="Nicole",[,ei]=h("char",vn),la=m[vn],It=u[vn],Eh=C(vn,{core:[{type:"conditional",conditional:{label:ei("coreCond"),metadata:la.bulletsOrFieldHit,fields:[_(It.core_defRed_)]}}],ability:[{type:"fields",fields:[_(It.ability_ether_dmg_)]}],m1:[{type:"fields",fields:[_(It.m1_exSpecial_dmg_),{title:ei("m1_exSpecial_anomBuildup"),fieldRef:It.m1_exSpecial_anomBuildup_.tag}]}],m6:[{type:"conditional",conditional:{label:ei("m6Cond"),metadata:la.fieldHitsEnemy,fields:[_(It.m6_crit_)]}}]}),Oh="PanYinhu",Ph=C(Oh),Vh="Piper",qh=C(Vh),Ah="Pulchra",Fh=C(Ah),Me="Qingyi",[,Mt]=h("char",Me),ti=m[Me],J=u[Me],jh=Z[Me],Lh=b.char[Me],Hh=C(Me,{perSkillAbility:{basic:{BasicAttackEnchantedMoonlitBlossoms:[{type:"conditional",conditional:{label:Mt("flashConnectCond"),metadata:ti.flash_connect_consumed,fields:[_(J.flash_connect_dmg_),_(J.flash_connect_dazeInc_)]}}]},chain:{ChainAttackTranquilSerenade:[{type:"fields",fields:[_(J.chain_dmg_)]}]}},core:[{type:"conditional",conditional:{label:Mt("subjugationCond"),metadata:ti.subjugation,fields:[_(J.core_stun_)]}}],ability:[{type:"fields",fields:[_(J.ability_basic_dazeInc_),_(J.ability_atk)]}],m1:[{type:"fields",fields:[_(J.m1_defRed_),_(J.m1_crit_)]}],m2:[{type:"fields",fields:[{title:Mt("m2_stun_"),fieldValue:Lh.m2.stun_mult_*100,unit:"%"},_(J.m2_dazeInc_)]}],m4:[{type:"fields",fields:[{title:Mt("m4_shield"),fieldRef:jh.m4_shield.tag}]}],m6:[{type:"fields",fields:[_(J.m6_crit_dmg_)]},{type:"conditional",conditional:{label:Mt("m6Cond"),metadata:ti.moonlit_blossoms_hit,fields:[_(J.m6_resRed_)]}}]}),Kh="Rina",Wh=C(Kh),Nh="Seth",Gh=C(Nh),Ht="Soldier0Anby",[,on]=h("char",Ht),ni=m[Ht],we=u[Ht],Uh=Z[Ht],Jh=C(Ht,{core:[{type:"conditional",conditional:{label:on("coreCond"),metadata:ni.markedWithSilverStar,fields:[_(we.core_common_dmg_),_(we.core_markedWithSilverStar_crit_dmg_)]}}],ability:[{type:"fields",fields:[_(we.ability_crit_),_(we.ability_aftershock_dmg_)]}],m2:[{type:"conditional",conditional:{label:on("coreCond"),metadata:ni.markedWithSilverStar,fields:[_(we.m2_crit_)]}}],m4:[{type:"conditional",conditional:{label:on("coreCond"),metadata:ni.markedWithSilverStar,fields:[_(we.m4_electric_resIgn_)]}}],m6:[{type:"fields",fields:[{title:on("m6_additional_dmg"),fieldRef:Uh.m6_additional_dmg.tag}]}]}),Yh="Soldier11",Zh=C(Yh),Qh="Soukaku",Xh=C(Qh),Kt="Trigger",[,me]=h("char",Kt),ra=m[Kt],Tt=u[Kt],ii=Z[Kt],eu=C(Kt,{core:[{type:"conditional",conditional:{label:me("coreCond"),metadata:ra.aftershock_hit,fields:[_(Tt.core_stun_)]}}],ability:[{type:"fields",fields:[{title:me("ability_dazeInc_"),fieldRef:Tt.ability_aftershock_dazeInc_.tag}]}],m1:[{type:"fields",fields:[_(Tt.m1_stun_)]}],m2:[{type:"conditional",conditional:{label:me("m2Cond"),metadata:ra.hunters_gaze,fields:[_(Tt.m2_crit_dmg_)]}}],m4:[{type:"fields",fields:[{title:me("m4_disconnect_dmg"),fieldRef:ii.m4_disconnect_dmg.tag},{title:me("m4_disconnect_daze"),fieldRef:ii.m4_disconnect_daze.tag}]}],m6:[{type:"fields",fields:[{title:me("m6_armor_break_rounds_dmg"),fieldRef:ii.m6_armor_break_rounds_dmg.tag},{title:me("m6_armor_break_rounds_dmg_"),fieldRef:Tt.m6_armor_break_rounds_dmg_.tag}]}]}),tu="Vivian",nu=C(tu),iu="Yanagi",au=C(iu),ou="Yixuan",su=C(ou),Wt="ZhuYuan",[,ge]=h("char",Wt),ai=m[Wt],zt=u[Wt],cu=Z[Wt],lu=C(Wt,{core:[{type:"fields",fields:[{title:ge("core_dmg_"),fieldRef:zt.core_dmg_.tag}]}],ability:[{type:"conditional",conditional:{label:ge("abilityCond"),metadata:ai.ex_chain_ult_used,fields:[_(zt.ability_crit_)]}}],m2:[{type:"conditional",conditional:{label:ge("m2SuppresiveModeCond"),metadata:ai.suppresive_mode,fields:[_(zt.m2_dmg_red_)]}},{type:"conditional",conditional:{label:ge("m2BasicDashEtherCond"),metadata:ai.shotshells_hit,fields:[{title:ge("m2_basic_dash_ether_dmg_"),fieldRef:zt.m2_basic_dash_ether_dmg_.tag}]}}],m4:[{type:"fields",fields:[{title:ge("m4_ether_resIgn_"),fieldRef:zt.m4_basic_dash_ether_res_ign_.tag}]}],m6:[{type:"fields",fields:[{title:ge("m6_ether_afterglow"),fieldRef:cu.m6_ether_afterglow.tag}]}]}),ru={Anby:Gd,Anton:Jd,AstraYao:Zd,Ben:Xd,Billy:th,Burnice:ih,Caesar:oh,Corin:ch,Ellen:rh,Evelyn:dh,Grace:uh,Harumasa:gh,Hugo:fh,Jane:_h,JuFufu:bh,Koleda:wh,Lighter:Ch,Lucy:Dh,Lycaon:Ih,Miyabi:Th,Nekomata:Bh,Nicole:Eh,Piper:qh,Pulchra:Fh,Qingyi:Hh,Rina:Wh,Seth:Gh,Soldier0Anby:Jh,Soldier11:Zh,Soukaku:Xh,Trigger:eu,Vivian:nu,Yanagi:au,PanYinhu:Ph,Yixuan:su,ZhuYuan:lu},kn="AstralVoice",[da,du]=h("disc",kn),ha=T(kn),hu=m[kn],uu=u[kn],mu={2:{title:i(z,{}),img:ha,documents:[{type:"text",text:da("desc2")}]},4:{title:i(B,{}),img:ha,documents:[{type:"text",text:da("desc4")},{type:"conditional",conditional:{label:du("set4_cond"),metadata:hu.astral,fields:[l(uu.set4_team_dmg_.tag)]}}]}},Cn="BranchBladeSong",[ua,gu]=h("disc",Cn),ma=T(Cn),pu=m[Cn],ga=u[Cn],fu={2:{title:i(z,{}),img:ma,documents:[{type:"text",text:ua("desc2")}]},4:{title:i(B,{}),img:ma,documents:[{type:"text",text:ua("desc4")},{type:"fields",fields:[l(ga.set4_passive.tag)]},{type:"conditional",conditional:{label:gu("set4_cond"),metadata:pu.apply_or_trigger,fields:[l(ga.set4_cond.tag)]}}]}},Sn="ChaosJazz",[pa,$u]=h("disc",Sn),fa=T(Sn),_u=m[Sn],sn=u[Sn],yu={2:{title:i(z,{}),img:fa,documents:[{type:"text",text:pa("desc2")}]},4:{title:i(B,{}),img:fa,documents:[{type:"text",text:pa("desc4")},{type:"fields",fields:[l(sn.set4_passive_fire_dmg_.tag),l(sn.set4_passive_electric_dmg_.tag)]},{type:"conditional",conditional:{label:$u("set4_cond"),metadata:_u.while_off_field,fields:[{title:"EX Special Attack DMG",fieldRef:sn.set4_off_field_special_dmg_.tag},{title:"Assist Attack Attack DMG",fieldRef:sn.set4_off_field_assist_dmg_.tag}]}}]}},Dn="ChaoticMetal",[$a,bu]=h("disc",Dn),_a=T(Dn),xu=m[Dn],ya=u[Dn],wu={2:{title:i(z,{}),img:_a,documents:[{type:"text",text:$a("desc2")}]},4:{title:i(B,{}),img:_a,documents:[{type:"text",text:$a("desc4")},{type:"fields",fields:[l(ya.set4_passive.tag)]},{type:"conditional",conditional:{label:bu("set4_cond"),metadata:xu.trigger_corruption,fields:[l(ya.set4_cond_trigger_corruption.tag)]}}]}},Rn="FangedMetal",[ba,vu]=h("disc",Rn),xa=T(Rn),ku=m[Rn],Cu=u[Rn],Su={2:{title:i(z,{}),img:xa,documents:[{type:"text",text:ba("desc2")}]},4:{title:i(B,{}),img:xa,documents:[{type:"text",text:ba("desc4")},{type:"conditional",conditional:{label:vu("set4_cond"),metadata:ku.inflict_assault,fields:[l(Cu.set4_cond_inflict_assault.tag)]}}]}},In="FreedomBlues",[wa,Du]=h("disc",In),va=T(In),Ru=m[In],Iu=u[In],Mu={2:{title:i(z,{}),img:va,documents:[{type:"text",text:wa("desc2")}]},4:{title:i(B,{}),img:va,documents:[{type:"text",text:wa("desc4")},{type:"conditional",conditional:{label:Du("set4_cond"),metadata:Ru.exSpecialHit,fields:[l(Iu.anomBuildupRes_.tag)]}}]}},Mn="HormonePunk",[ka,Tu]=h("disc",Mn),Ca=T(Mn),zu=m[Mn],Bu=u[Mn],Eu={2:{title:i(z,{}),img:Ca,documents:[{type:"text",text:ka("desc2")}]},4:{title:i(B,{}),img:Ca,documents:[{type:"text",text:ka("desc4")},{type:"conditional",conditional:{label:Tu("set4_cond"),metadata:zu.entering_combat,fields:[l(Bu.set4_cond_entering_combat.tag)]}}]}},Tn="InfernoMetal",[Sa,Ou]=h("disc",Tn),Da=T(Tn),Pu=m[Tn],Vu=u[Tn],qu={2:{title:i(z,{}),img:Da,documents:[{type:"text",text:Sa("desc2")}]},4:{title:i(B,{}),img:Da,documents:[{type:"text",text:Sa("desc4")},{type:"conditional",conditional:{label:Ou("set4_cond"),metadata:Pu.hitting_burning_enemy,fields:[l(Vu.set4_cond_hitting_burning_enemy.tag)]}}]}},zn="KingOfTheSummit",[Ra,ry]=h("disc",zn),Ia=T(zn),Au=m[zn],Ma=u[zn],Fu={2:{title:i(z,{}),img:Ia,documents:[{type:"text",text:Ra("desc2")},{type:"fields",fields:[l(Ma.set2.tag)]}]},4:{title:i(B,{}),img:Ia,documents:[{type:"text",text:Ra("desc4")},{type:"conditional",conditional:{metadata:Au.launchExSpecialOrChain,label:W("uponLaunch.2",{val1:"$t(skills.exSpecial)",val2:"$t(skills.chain)"}),fields:[l(Ma.set4_team_launchExSpecialOrChain_crit_dmg_.tag)]}}]}},Bn="PhaethonsMelody",[Ta,za]=h("disc",Bn),Ba=T(Bn),Ea=m[Bn],Oa=u[Bn],ju={2:{title:i(z,{}),img:Ba,documents:[{type:"text",text:Ta("desc2")}]},4:{title:i(B,{}),img:Ba,documents:[{type:"text",text:Ta("desc4")},{type:"conditional",conditional:{label:za("set4_cond_squad_use_ex"),metadata:Ea.squad_use_ex,fields:[l(Oa.set4_squad_anomProf.tag)]}},{type:"conditional",conditional:{label:za("set4_cond_not_char_use_ex"),metadata:Ea.not_char_use_ex,fields:[l(Oa.set4_not_self_ether_.tag)]}}]}},En="PolarMetal",[Pa,Lu]=h("disc",En),Va=T(En),Hu=m[En],qa=u[En],Ku={2:{title:i(z,{}),img:Va,documents:[{type:"text",text:Pa("desc2")}]},4:{title:i(B,{}),img:Va,documents:[{type:"text",text:Pa("desc4")},{type:"conditional",conditional:{label:Lu("set4_cond"),metadata:Hu.freeze_shatter}},{type:"fields",fields:[{title:"Basic Attack DMG",fieldRef:qa.set4_basic_dmg_.tag},{title:"Dash Attack DMG",fieldRef:qa.set4_dash_dmg_.tag}]}]}},On="ProtoPunk",[Aa,Wu]=h("disc",On),Fa=T(On),Nu=m[On],Gu=u[On],Uu={2:{title:i(z,{}),img:Fa,documents:[{type:"text",text:Aa("desc2")}]},4:{title:i(B,{}),img:Fa,documents:[{type:"text",text:Aa("desc4")},{type:"conditional",conditional:{label:Wu("set4_cond"),metadata:Nu.def_assist_or_evasive_assist,fields:[l(Gu.set4_cond_def_assist_or_evasive_assist_dmg_.tag)]}}]}},Pn="PufferElectro",[ja,Ju]=h("disc",Pn),La=T(Pn),Yu=m[Pn],Ha=u[Pn],Zu={2:{title:i(z,{}),img:La,documents:[{type:"text",text:ja("desc2")}]},4:{title:i(B,{}),img:La,documents:[{type:"text",text:ja("desc4")},{type:"fields",fields:[{title:"Ultimate DMG",fieldRef:Ha.set4_dmg_.tag}]},{type:"conditional",conditional:{label:Ju("set4_cond"),metadata:Yu.launching_ult,fields:[l(Ha.set4_cond_launching_ult_atk_.tag)]}}]}},Vn="ShadowHarmony",[Ka,Qu]=h("disc",Vn),Wa=T(Vn),Xu=m[Vn],Na=u[Vn],em={2:{title:i(z,{}),img:Wa,documents:[{type:"text",text:Ka("desc2")}]},4:{title:i(B,{}),img:Wa,documents:[{type:"text",text:Ka("desc4")},{type:"conditional",conditional:{label:Qu("set4_cond_stacks"),metadata:Xu.stacks,fields:[l(Na.set4_stack_atk_.tag),l(Na.set4_stack_crit_.tag)]}}]}},Ei="ShockstarDisco",[Ga,dy]=h("disc",Ei),Ua=T(Ei),oi=u[Ei],tm={2:{title:i(z,{}),img:Ua,documents:[{type:"text",text:Ga("desc2")}]},4:{title:i(B,{}),img:Ua,documents:[{type:"text",text:Ga("desc4")},{type:"fields",fields:[{title:"Basic Attack Daze",fieldRef:oi.set4_basic_daze_.tag},{title:"Dash Attack Daze",fieldRef:oi.set4_dash_daze_.tag},{title:"Dodge Counter Daze",fieldRef:oi.set4_dodgeCounter_daze_.tag}]}]}},dl="SoulRock",[Ja,hy]=h("disc",dl),Ya=T(dl),nm={2:{title:i(z,{}),img:Ya,documents:[{type:"text",text:Ja("desc2")}]},4:{title:i(B,{}),img:Ya,documents:[{type:"text",text:Ja("desc4")}]}},qn="SwingJazz",[Za,im]=h("disc",qn),Qa=T(qn),am=m[qn],om=u[qn],sm={2:{title:i(z,{}),img:Qa,documents:[{type:"text",text:Za("desc2")}]},4:{title:i(B,{}),img:Qa,documents:[{type:"text",text:Za("desc4")},{type:"conditional",conditional:{label:im("set4_cond"),metadata:am.chain_or_ult,fields:[l(om.set4_cond_chain_or_ult.tag)]}}]}},An="ThunderMetal",[Xa,cm]=h("disc",An),eo=T(An),lm=m[An],rm=u[An],dm={2:{title:i(z,{}),img:eo,documents:[{type:"text",text:Xa("desc2")}]},4:{title:i(B,{}),img:eo,documents:[{type:"text",text:Xa("desc4")},{type:"conditional",conditional:{label:cm("set4_cond"),metadata:lm.enemy_shocked,fields:[l(rm.set4_cond_enemy_shocked_atk_.tag)]}}]}},Fn="WoodpeckerElectro",[to,hm]=h("disc",Fn),no=T(Fn),um=m[Fn],mm=u[Fn],gm={2:{title:i(z,{}),img:no,documents:[{type:"text",text:to("desc2")}]},4:{title:i(B,{}),img:no,documents:[{type:"text",text:to("desc4")},{type:"conditional",conditional:{label:hm("set4_cond"),metadata:um.crit_basic_dodge_ex,fields:[l(mm.set4_cond_crit_basic_dodge_ex_atk_.tag)]}}]}},jn="YunkuiTales",[io,uy]=h("disc",jn),ao=T(jn),pm=m[jn],si=u[jn],fm={2:{title:i(z,{}),img:ao,documents:[{type:"text",text:io("desc2")},{type:"fields",fields:[l(si.set2.tag)]}]},4:{title:i(B,{}),img:ao,documents:[{type:"text",text:io("desc4")},{type:"conditional",conditional:{metadata:pm.uponLaunchExSpecialChainOrUlt,label:W("uponLaunch.3",{val1:"$t(skills.exSpecial)",val2:"$t(skills.chain)",val3:"$t(skills.ult)"}),fields:[l(si.set4_crit_.tag),l(si.set4_sheer_dmg_.tag)]}}]}},$m={AstralVoice:mu,BranchBladeSong:fu,ChaosJazz:yu,ChaoticMetal:wu,FangedMetal:Su,FreedomBlues:Mu,HormonePunk:Eu,InfernoMetal:qu,KingOfTheSummit:Fu,PhaethonsMelody:ju,PolarMetal:Ku,ProtoPunk:Uu,PufferElectro:Zu,ShadowHarmony:em,ShockstarDisco:tm,SoulRock:nm,SwingJazz:sm,ThunderMetal:dm,WoodpeckerElectro:gm,YunkuiTales:fm};function z(){return"2-Set"}function B(){return"4-Set"}function p({wKey:e,children:t}){const n=bn();let a=1;return n&&n.compute(q.common.count.sheet(e)).val&&(a=n.compute(q.wengine.phase).val??1),t(a)}const Te="BashfulDemon",[oo,_m]=h("wengine",Te),ym=b.wengine[Te],bm=f(Te,"icon"),xm=m[Te],so=u[Te],wm={title:oo("phase"),img:bm,documents:[{type:"text",text:i(p,{wKey:Te,children:e=>oo(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(so.passive_ice_dmg_.tag)]},{type:"conditional",conditional:{label:_m("cond"),metadata:xm.launch_ex_attack,fields:[l(so.team_atk_.tag),{title:"Duration",fieldValue:ym.duration}]}}]},ze="BigCylinder",[co,my]=h("wengine",ze),vm=b.wengine[ze],km=f(ze,"icon"),Cm=u[ze],Sm=Z[ze],Dm={title:co("phase"),img:km,documents:[{type:"text",text:i(p,{wKey:ze,children:e=>co(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Cm.passive_dmg_red_.tag)]},{type:"fields",fields:[{title:"Additional DMG",fieldRef:Sm.damage.tag},{title:"Cooldown",fieldValue:vm.cooldown}]}]},Be="BlazingLaurel",[lo,ro]=h("wengine",Be),ho=b.wengine[Be],Rm=f(Be,"icon"),uo=m[Be],ci=u[Be],Im={title:lo("phase"),img:Rm,documents:[{type:"text",text:i(p,{wKey:Be,children:e=>lo(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:ro("cond1"),metadata:uo.quickOrPerfectAssistUsed,fields:[l(ci.impact_.tag),{title:"Duration",fieldValue:ho.duration}]}},{type:"conditional",conditional:{label:ro("cond2"),metadata:uo.wilt,fields:[l(ci.crit_dmg_ice_.tag),l(ci.crit_dmg_fire_.tag),{title:"Duration",fieldValue:ho.wilt_duration}]}}]},Ee="BoxCutter",[mo,Mm]=h("wengine",Ee),Tm=b.wengine[Ee],zm=f(Ee,"icon"),Bm=m[Ee],go=u[Ee],Em={title:mo("phase"),img:zm,documents:[{type:"text",text:i(p,{wKey:Ee,children:e=>mo(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Mm("cond"),metadata:Bm.launchedAftershock,fields:[l(go.physical_dmg_.tag),l(go.daze_.tag),{title:"Duration",fieldValue:Tm.duration}]}}]},Nt="BunnyBand",[po,Om]=h("wengine",Nt),Pm=f(Nt,"icon"),Vm=m[Nt],fo=u[Nt],qm={title:po("phase"),img:Pm,documents:[{type:"text",text:i(p,{wKey:Nt,children:e=>po(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(fo.passive_hp_.tag)]},{type:"conditional",conditional:{label:Om("cond"),metadata:Vm.wearerShielded,fields:[l(fo.atk_.tag)]}}]},_e="CannonRotor",[$o,gy]=h("wengine",_e),Am=b.wengine[_e],Fm=f(_e,"icon"),jm=Z[_e],Lm=u[_e],Hm={title:$o("phase"),img:Fm,documents:[{type:"text",text:i(p,{wKey:_e,children:e=>$o(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Lm.passive_atk_.tag)]},{type:"fields",fields:[{title:"Additional DMG",fieldRef:jm.damage.tag},{title:"Cooldown",fieldValue:i(p,{wKey:_e,children:e=>Am.cooldown[e]})}]}]},Oe="CinderCobalt",[_o]=h("wengine",Oe),yo=b.wengine[Oe],Km=f(Oe,"icon"),Wm=m[Oe],Nm=u[Oe],Gm={title:_o("phase"),img:Km,documents:[{type:"text",text:i(p,{wKey:Oe,children:e=>_o(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:W("enterCombatOrSwitchIn"),metadata:Wm.enteringCombatOrSwitchingIn,fields:[l(Nm.enteringCombatOrSwitchingIn_atk_.tag),{title:W("duration"),fieldValue:yo.duration},{title:W("cd"),fieldValue:yo.cd}]}}]},Pe="DeepSeaVisitor",[bo,xo]=h("wengine",Pe),wo=b.wengine[Pe],Um=f(Pe,"icon"),vo=m[Pe],li=u[Pe],Jm={title:bo("phase"),img:Um,documents:[{type:"text",text:i(p,{wKey:Pe,children:e=>bo(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(li.passive_ice_dmg_.tag)]},{type:"conditional",conditional:{label:xo("cond1"),metadata:vo.basicHit,fields:[l(li.crit_.tag),{title:"Duration",fieldValue:wo.duration}]}},{type:"conditional",conditional:{label:xo("cond2"),metadata:vo.iceDashAtkHit,fields:[l(li.extra_crit_.tag),{title:"Duration",fieldValue:wo.extra_duration}]}}]},Ve="DemaraBatteryMarkII",[ko,Ym]=h("wengine",Ve),Zm=b.wengine[Ve],Qm=f(Ve,"icon"),Xm=m[Ve],Co=u[Ve],eg={title:ko("phase"),img:Qm,documents:[{type:"text",text:i(p,{wKey:Ve,children:e=>ko(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Co.passive_electric_dmg_.tag)]},{type:"conditional",conditional:{label:Ym("cond"),metadata:Xm.dodgeCounterOrAssistHit,fields:[l(Co.enerRegen_.tag),{title:"Duration",fieldValue:Zm.duration}]}}]},qe="DrillRigRedAxis",[So,tg]=h("wengine",qe),Do=b.wengine[qe],ng=f(qe,"icon"),ig=m[qe],Ro=u[qe],ag={title:So("phase"),img:ng,documents:[{type:"text",text:i(p,{wKey:qe,children:e=>So(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:tg("cond"),metadata:ig.exSpecialOrChainUsed,fields:[l(Ro.basic_eletric_dmg_.tag),l(Ro.dash_eletric_dmg_.tag),{title:"Duration",fieldValue:Do.duration},{title:"Cooldown",fieldValue:Do.cooldown}]}}]},Gt="ElectroLipGloss",[Io,og]=h("wengine",Gt),sg=f(Gt,"icon"),cg=m[Gt],Mo=u[Gt],lg={title:Io("phase"),img:sg,documents:[{type:"text",text:i(p,{wKey:Gt,children:e=>Io(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:og("cond"),metadata:cg.anomalyOnEnemy,fields:[l(Mo.atk_.tag),l(Mo.common_dmg_.tag)]}}]},Ae="ElegantVanity",[To,rg]=h("wengine",Ae),dg=b.wengine[Ae],hg=f(Ae,"icon"),ug=m[Ae],mg=u[Ae],gg={title:To("phase"),img:hg,documents:[{type:"text",text:i(p,{wKey:Ae,children:e=>To(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:rg("cond"),metadata:ug.consumed25Energy,fields:[l(mg.common_dmg_.tag),{title:"Duration",fieldValue:dg.buffDuration}]}}]},Fe="FlamemakerShaker",[zo,Bo]=h("wengine",Fe),ri=b.wengine[Fe],pg=f(Fe,"icon"),Eo=m[Fe],di=u[Fe],fg={title:zo("phase"),img:pg,documents:[{type:"text",text:i(p,{wKey:Fe,children:e=>zo(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Bo("cond1"),metadata:Eo.offField,fields:[l(di.enerRegen.tag)]}},{type:"conditional",conditional:{label:Bo("cond2"),metadata:Eo.exSpecialAssistHits,fields:[l(di.common_dmg_.tag),{title:"Duration",fieldValue:ri.duration},{title:"Cooldown",fieldValue:ri.cooldown},l(di.anomProf.tag),{title:"Duration",fieldValue:ri.anomProfDuration}]}}]},je="FlightOfFancy",[Oo,$g]=h("wengine",je),Po=b.wengine[je],_g=f(je,"icon"),yg=m[je],Vo=u[je],bg={title:Oo("phase"),img:_g,documents:[{type:"text",text:i(p,{wKey:je,children:e=>Oo(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Vo.anomBuildup_.tag)]},{type:"conditional",conditional:{label:$g("cond"),metadata:yg.etherDmg,fields:[l(Vo.etherDmg_anomProf.tag),{title:"Duration",fieldValue:Po.duration},{title:"Cooldown",fieldValue:Po.cd}]}}]},Le="FusionCompiler",[qo,xg]=h("wengine",Le),wg=b.wengine[Le],vg=f(Le,"icon"),kg=m[Le],Ao=u[Le],Cg={title:qo("phase"),img:vg,documents:[{type:"text",text:i(p,{wKey:Le,children:e=>qo(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Ao.passive_atk_.tag)]},{type:"conditional",conditional:{label:xg("cond"),metadata:kg.specialUsed,fields:[l(Ao.anomProf.tag),{title:"Duration",fieldValue:wg.duration}]}}]},Ln="GildedBlossom",[Fo,py]=h("wengine",Ln),Sg=f(Ln,"icon"),jo=u[Ln],Dg={title:Fo("phase"),img:Sg,documents:[{type:"text",text:i(p,{wKey:Ln,children:e=>Fo(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(jo.passive_atk_.tag),l(jo.passive_exSpecial_dmg_.tag)]}]},He="HailstormShrine",[Lo,Rg]=h("wengine",He),Ig=b.wengine[He],Mg=f(He,"icon"),Tg=m[He],Ho=u[He],zg={title:Lo("phase"),img:Mg,documents:[{type:"text",text:i(p,{wKey:He,children:e=>Lo(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Ho.passive_crit_dmg_.tag)]},{type:"conditional",conditional:{label:Rg("cond"),metadata:Tg.exSpecialOrAnomaly,fields:[l(Ho.ice_dmg_.tag),{title:"Duration",fieldValue:Ig.duration}]}}]},Ke="HeartstringNocturne",[Ko,Bg]=h("wengine",Ke),Eg=b.wengine[Ke],Og=f(Ke,"icon"),Pg=m[Ke],hi=u[Ke],Vg={title:Ko("phase"),img:Og,documents:[{type:"text",text:i(p,{wKey:Ke,children:e=>Ko(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(hi.passive_crit_dmg_.tag)]},{type:"conditional",conditional:{label:Bg("cond"),metadata:Pg.heartstring,fields:[l(hi.chain_resIgn_fire_.tag),l(hi.ult_resIgn_fire_.tag),{title:"Duration",fieldValue:Eg.duration}]}}]},We="HellfireGears",[Wo,No]=h("wengine",We),qg=b.wengine[We],Ag=f(We,"icon"),Go=m[We],Uo=u[We],Fg={title:Wo("phase"),img:Ag,documents:[{type:"text",text:i(p,{wKey:We,children:e=>Wo(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:No("cond1"),metadata:Go.offField,fields:[l(Uo.enerRegen.tag)]}},{type:"conditional",conditional:{label:No("cond1"),metadata:Go.exSpecialUsed,fields:[l(Uo.impact_.tag),{title:"Duration",fieldValue:qg.duration}]}}]},Ne="Housekeeper",[Jo,Yo]=h("wengine",Ne),jg=b.wengine[Ne],Lg=f(Ne,"icon"),Zo=m[Ne],Qo=u[Ne],Hg={title:Jo("phase"),img:Lg,documents:[{type:"text",text:i(p,{wKey:Ne,children:e=>Jo(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Yo("cond1"),metadata:Zo.offField,fields:[l(Qo.enerRegen.tag)]}},{type:"conditional",conditional:{label:Yo("cond2"),metadata:Zo.exSpecialHits,fields:[l(Qo.physical_dmg_.tag),{title:"Duration",fieldValue:jg.duration}]}}]},Ge="IceJadeTeapot",[Xo,Kg]=h("wengine",Ge),es=b.wengine[Ge],Wg=f(Ge,"icon"),Ng=m[Ge],ts=u[Ge],Gg={title:Xo("phase"),img:Wg,documents:[{type:"text",text:i(p,{wKey:Ge,children:e=>Xo(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Kg("cond"),metadata:Ng.teariffic,fields:[l(ts.impact_.tag),{title:"Duration",fieldValue:es.duration},l(ts.common_dmg_.tag),{title:"Duration",fieldValue:es.teamBuffDuration}]}}]},Ue="IdentityBase",[ns,Ug]=h("wengine",Ue),Jg=b.wengine[Ue],Yg=f(Ue,"icon"),Zg=m[Ue],Qg=u[Ue],Xg={title:ns("phase"),img:Yg,documents:[{type:"text",text:i(p,{wKey:Ue,children:e=>ns(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Ug("cond"),metadata:Zg.equipperAttacked,fields:[l(Qg.def_.tag),{title:"Duration",fieldValue:Jg.duration}]}}]},Oi="IdentityInflection",[is,fy]=h("wengine",Oi),ep=f(Oi,"icon"),tp={title:is("phase"),img:ep,documents:[{type:"text",text:i(p,{wKey:Oi,children:e=>is(`phaseDescs.${e-1}`)})}]},Je="KaboomTheCannon",[as,np]=h("wengine",Je),ip=b.wengine[Je],ap=f(Je,"icon"),op=m[Je],sp=u[Je],cp={title:as("phase"),img:ap,documents:[{type:"text",text:i(p,{wKey:Je,children:e=>as(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:np("cond"),metadata:op.allyHitsEnemy,fields:[l(sp.atk_.tag),{title:"Duration",fieldValue:ip.duration}]}}]},Ye="LunarDecrescent",[os,lp]=h("wengine",Ye),rp=b.wengine[Ye],dp=f(Ye,"icon"),hp=m[Ye],up=u[Ye],mp={title:os("phase"),img:dp,documents:[{type:"text",text:i(p,{wKey:Ye,children:e=>os(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:lp("cond"),metadata:hp.chainOrUltUsed,fields:[l(up.common_dmg_.tag),{title:"Duration",fieldValue:rp.duration}]}}]},Pi="LunarNoviluna",[ss,$y]=h("wengine",Pi),gp=f(Pi,"icon"),pp={title:ss("phase"),img:gp,documents:[{type:"text",text:i(p,{wKey:Pi,children:e=>ss(`phaseDescs.${e-1}`)})}]},Hn="LunarPleniluna",[cs,_y]=h("wengine",Hn),fp=f(Hn,"icon"),ui=u[Hn],$p={title:cs("phase"),img:fp,documents:[{type:"text",text:i(p,{wKey:Hn,children:e=>cs(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(ui.basic_dmg_.tag),l(ui.dash_dmg_.tag),l(ui.dodgeCounter_dmg_.tag)]}]},Ze="MagneticStormAlpha",[ls,_p]=h("wengine",Ze),rs=b.wengine[Ze],yp=f(Ze,"icon"),bp=m[Ze],xp=u[Ze],wp={title:ls("phase"),img:yp,documents:[{type:"text",text:i(p,{wKey:Ze,children:e=>ls(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:_p("cond"),metadata:bp.anomalyBuildupIncreased,fields:[l(xp.anomMas.tag),{title:"Duration",fieldValue:rs.duration},{title:"Cooldown",fieldValue:rs.cooldown}]}}]},Qe="MagneticStormBravo",[ds,vp]=h("wengine",Qe),hs=b.wengine[Qe],kp=f(Qe,"icon"),Cp=m[Qe],Sp=u[Qe],Dp={title:ds("phase"),img:kp,documents:[{type:"text",text:i(p,{wKey:Qe,children:e=>ds(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:vp("cond"),metadata:Cp.anomalyBuildupIncreased,fields:[l(Sp.anomProf.tag),{title:"Duration",fieldValue:hs.duration},{title:"Cooldown",fieldValue:hs.cooldown}]}}]},Vi="MagneticStormCharlie",[us,yy]=h("wengine",Vi),Rp=f(Vi,"icon"),Ip={title:us("phase"),img:Rp,documents:[{type:"text",text:i(p,{wKey:Vi,children:e=>us(`phaseDescs.${e-1}`)})}]},Xe="MarcatoDesire",[ms,gs]=h("wengine",Xe),Mp=b.wengine[Xe],Tp=f(Xe,"icon"),ps=m[Xe],zp=u[Xe],Bp={title:ms("phase"),img:Tp,documents:[{type:"text",text:i(p,{wKey:Xe,children:e=>ms(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:gs("cond1"),metadata:ps.exSpecialOrChainHitsEnemy,fields:[l(zp.atk_.tag),{title:"Duration",fieldValue:Mp.duration}]}},{type:"conditional",conditional:{label:gs("cond2"),metadata:ps.attributeAnomalyInflicted}}]},et="MyriadEclipse",[fs,Ep]=h("wengine",et),Op=b.wengine[et],Pp=f(et,"icon"),Vp=m[et],$s=u[et],qp={title:fs("phase"),img:Pp,documents:[{type:"text",text:i(p,{wKey:et,children:e=>fs(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l($s.crit_dmg_.tag)]},{type:"conditional",conditional:{label:Ep("cond"),metadata:Vp.deathSentence,fields:[l($s.deathSentence_defIgn_.tag),{title:"Duration",fieldValue:Op.duration}]}}]},tt="OriginalTransmorpher",[_s,Ap]=h("wengine",tt),Fp=b.wengine[tt],jp=f(tt,"icon"),Lp=m[tt],ys=u[tt],Hp={title:_s("phase"),img:jp,documents:[{type:"text",text:i(p,{wKey:tt,children:e=>_s(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(ys.passive_hp_.tag)]},{type:"conditional",conditional:{label:Ap("cond"),metadata:Lp.equipperHit,fields:[l(ys.impact_.tag),{title:"Duration",fieldValue:Fp.duration}]}}]},Ut="PeacekeeperSpecialized",[bs,Kp]=h("wengine",Ut),Wp=f(Ut,"icon"),Np=m[Ut],mi=u[Ut],Gp={title:bs("phase"),img:Wp,documents:[{type:"text",text:i(p,{wKey:Ut,children:e=>bs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Kp("cond"),metadata:Np.shielded,fields:[l(mi.enerRegen.tag)]}},{type:"fields",fields:[l(mi.passive_exSpecial_anomBuildup_.tag),l(mi.passive_assist_anomBuildup_.tag)]}]},Jt="PreciousFossilizedCore",[xs,ws]=h("wengine",Jt),Up=f(Jt,"icon"),vs=m[Jt],Jp=u[Jt],Yp={title:xs("phase"),img:Up,documents:[{type:"text",text:i(p,{wKey:Jt,children:e=>xs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:ws("cond1"),metadata:vs.enemyHpGE50,fields:[l(Jp.daze_.tag)]}},{type:"conditional",conditional:{label:ws("cond2"),metadata:vs.enemyHpGE75}}]},nt="PuzzleSphere",[ks]=h("wengine",nt),Cs=b.wengine[nt],Zp=f(nt,"icon"),Ss=m[nt],Ds=u[nt],Qp={title:ks("phase"),img:Zp,documents:[{type:"text",text:i(p,{wKey:nt,children:e=>ks(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:W("uponLaunch.1",{val1:"$t(skills.exSpecial)"}),metadata:Ss.launchingExSpecial,fields:[l(Ds.launchingExSpecial_crit_dmg_.tag),{title:W("duration"),fieldValue:Cs.duration}]}},{type:"conditional",conditional:{label:W("targetHpLe",{val:Cs.hpThresh*100}),metadata:Ss.targetHpBelow50,fields:[l(Ds.targetHpBelow50_exSpecial_dmg_.tag)]}}]},it="QingmingBirdcage",[Rs,Xp]=h("wengine",it),ef=b.wengine[it],tf=f(it,"icon"),nf=m[it],cn=u[it],af={title:Rs("phase"),img:tf,documents:[{type:"text",text:i(p,{wKey:it,children:e=>Rs(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(cn.crit_.tag)]},{type:"conditional",conditional:{metadata:nf.qingmingCompanionStacks,label:Xp("cond"),fields:[l(cn.qingmingCompanionStacks_ether_dmg_.tag),l(cn.qingmingCompanionStacks_ult_ether_sheer_dmg_.tag),l(cn.qingmingCompanionStacks_exSpecial_ether_sheer_dmg_.tag),{title:W("cd"),fieldValue:ef.duration}]}}]},at="RadiowaveJourney",[Is]=h("wengine",at),of=b.wengine[at],sf=f(at,"icon"),cf=m[at],lf=u[at],rf={title:Is("phase"),img:sf,documents:[{type:"text",text:i(p,{wKey:at,children:e=>Is(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{metadata:cf.launchingChainOrUlt,label:W("uponLaunch.2",{val1:"$t(skills.chain)",val2:"$t(skills.ult)"}),fields:[l(lf.launchingChainOrUlt_sheerForce.tag),{title:W("duration"),fieldValue:of.duration}]}}]},ot="RainforestGourmet",[Ms,df]=h("wengine",ot),hf=b.wengine[ot],uf=f(ot,"icon"),mf=m[ot],gf=u[ot],pf={title:Ms("phase"),img:uf,documents:[{type:"text",text:i(p,{wKey:ot,children:e=>Ms(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:df("cond"),metadata:mf.energyConsumed,fields:[l(gf.atk_.tag),{title:"Duration",fieldValue:hf.duration}]}}]},qi="ReelProjector",[Ts]=h("wengine",qi),ff=f(qi,"icon"),$f={title:Ts("phase"),img:ff,documents:[{type:"text",text:i(p,{wKey:qi,children:e=>Ts(`phaseDescs.${e-1}`)})}]},st="ReverbMarkI",[zs,_f]=h("wengine",st),yf=b.wengine[st],bf=f(st,"icon"),xf=m[st],wf=u[st],vf={title:zs("phase"),img:bf,documents:[{type:"text",text:i(p,{wKey:st,children:e=>zs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:_f("cond"),metadata:xf.exSpecialUsed,fields:[l(wf.impact_.tag),{title:"Duration",fieldValue:yf.duration}]}}]},ct="ReverbMarkII",[Bs,kf]=h("wengine",ct),Cf=b.wengine[ct],Sf=f(ct,"icon"),Df=m[ct],Es=u[ct],Rf={title:Bs("phase"),img:Sf,documents:[{type:"text",text:i(p,{wKey:ct,children:e=>Bs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:kf("cond"),metadata:Df.exSpecialOrChainUsed,fields:[l(Es.anomMas.tag),l(Es.anomProf.tag),{title:"Duration",fieldValue:Cf.duration}]}}]},lt="ReverbMarkIII",[Os,If]=h("wengine",lt),Mf=b.wengine[lt],Tf=f(lt,"icon"),zf=m[lt],Bf=u[lt],Ef={title:Os("phase"),img:Tf,documents:[{type:"text",text:i(p,{wKey:lt,children:e=>Os(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:If("cond"),metadata:zf.chainOrUltUsed,fields:[l(Bf.atk_.tag),{title:"Duration",fieldValue:Mf.duration}]}}]},Yt="RiotSuppressorMarkVI",[Ps,Of]=h("wengine",Yt),Pf=f(Yt,"icon"),Vf=m[Yt],Vs=u[Yt],qf={title:Ps("phase"),img:Pf,documents:[{type:"text",text:i(p,{wKey:Yt,children:e=>Ps(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Vs.passive_crit_.tag)]},{type:"conditional",conditional:{label:Of("cond"),metadata:Vf.charge,fields:[l(Vs.basic_ether_dmg_.tag)]}}]},rt="RoaringFurnace",[qs,Af]=h("wengine",rt),Ff=b.wengine[rt],jf=f(rt,"icon"),Lf=m[rt],ln=u[rt],Hf={title:qs("phase"),img:jf,documents:[{type:"text",text:i(p,{wKey:rt,children:e=>qs(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(ln.exSpecial_dazeInc_.tag),l(ln.chain_dazeInc_.tag),l(ln.ult_dazeInc_.tag)]},{type:"conditional",conditional:{metadata:Lf.chainOrUlt,label:Af("cond"),fields:[l(ln.team_chainOrUlt_fire_dmg_.tag),{title:W("duration"),fieldValue:Ff.duration}]}}]},dt="RoaringRide",[As,gi]=h("wengine",dt),pi=b.wengine[dt],Kf=f(dt,"icon"),fi=m[dt],$i=u[dt],Wf={title:As("phase"),img:Kf,documents:[{type:"text",text:i(p,{wKey:dt,children:e=>As(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:gi("cond_atk_"),metadata:fi.atk_,fields:[l($i.atk_.tag),{title:"Duration",fieldValue:pi.duration}]}},{type:"conditional",conditional:{label:gi("cond_anomProf"),metadata:fi.anomProf,fields:[l($i.anomProf.tag),{title:"Duration",fieldValue:pi.duration}]}},{type:"conditional",conditional:{label:gi("cond_anomBuildup_"),metadata:fi.anomBuildup_,fields:[l($i.anomBuildup_.tag),{title:"Duration",fieldValue:pi.duration}]}}]},ht="SeveredInnocence",[Fs,Nf]=h("wengine",ht),Gf=b.wengine[ht],Uf=f(ht,"icon"),Jf=m[ht],_i=u[ht],Yf={title:Fs("phase"),img:Uf,documents:[{type:"text",text:i(p,{wKey:ht,children:e=>Fs(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(_i.passive_crit_dmg_.tag)]},{type:"conditional",conditional:{label:Nf("cond"),metadata:Jf.basicSpecialAftershockHit,fields:[l(_i.crit_dmg_.tag),l(_i.electric_dmg_.tag),{title:"Duration",fieldValue:Gf.duration}]}}]},ut="SharpenedStinger",[js,Zf]=h("wengine",ut),Qf=b.wengine[ut],Xf=f(ut,"icon"),e$=m[ut],Ls=u[ut],t$={title:js("phase"),img:Xf,documents:[{type:"text",text:i(p,{wKey:ut,children:e=>js(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Zf("cond"),metadata:e$.predatoryInstinct,fields:[l(Ls.physical_dmg_.tag),{title:"Duration",fieldValue:Qf.duration}]}},{type:"fields",fields:[l(Ls.anomBuildup_.tag)]}]},Zt="SixShooter",[Hs,n$]=h("wengine",Zt),i$=f(Zt,"icon"),a$=m[Zt],o$=u[Zt],s$={title:Hs("phase"),img:i$,documents:[{type:"text",text:i(p,{wKey:Zt,children:e=>Hs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:n$("cond"),metadata:a$.charge,fields:[l(o$.exSpecial_daze_.tag)]}}]},Ai="SliceOfTime",[Ks,by]=h("wengine",Ai),c$=f(Ai,"icon"),l$={title:Ks("phase"),img:c$,documents:[{type:"text",text:i(p,{wKey:Ai,children:e=>Ks(`phaseDescs.${e-1}`)})}]},mt="SpectralGaze",[Ws,Ns]=h("wengine",mt),Gs=b.wengine[mt],r$=f(mt,"icon"),Us=m[mt],Js=u[mt],d$={title:Ws("phase"),img:r$,documents:[{type:"text",text:i(p,{wKey:mt,children:e=>Ws(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Ns("cond1"),metadata:Us.hit_aftershock_electric,fields:[l(Js.cond_defRed_.tag),{title:"Duration",fieldValue:Gs.duration1}]}},{type:"conditional",conditional:{label:Ns("cond2"),metadata:Us.spiritLock,fields:[l(Js.cond_impact_.tag),{title:"Duration",fieldValue:Gs.duration2}]}}]},gt="SpringEmbrace",[Ys,h$]=h("wengine",gt),u$=b.wengine[gt],m$=f(gt,"icon"),g$=m[gt],Zs=u[gt],p$={title:Ys("phase"),img:m$,documents:[{type:"text",text:i(p,{wKey:gt,children:e=>Ys(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Zs.passive_dmg_red_.tag)]},{type:"conditional",conditional:{label:h$("cond"),metadata:g$.when_attacked,fields:[l(Zs.cond_enerRegen_.tag),{title:"Duration",fieldValue:u$.duration}]}}]},pt="StarlightEngine",[Qs,f$]=h("wengine",pt),$$=b.wengine[pt],_$=f(pt,"icon"),y$=m[pt],b$=u[pt],x$={title:Qs("phase"),img:_$,documents:[{type:"text",text:i(p,{wKey:pt,children:e=>Qs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:f$("cond"),metadata:y$.dodgecounter_quickassist,fields:[l(b$.cond_dmg_.tag),{title:"Duration",fieldValue:$$.duration}]}}]},ft="StarlightEngineReplica",[Xs,w$]=h("wengine",ft),v$=b.wengine[ft],k$=f(ft,"icon"),C$=m[ft],S$=u[ft],D$={title:Xs("phase"),img:k$,documents:[{type:"text",text:i(p,{wKey:ft,children:e=>Xs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:w$("cond"),metadata:C$.hit_away,fields:[l(S$.cond_dmg_.tag),{title:"Duration",fieldValue:v$.duration}]}}]},$t="SteamOven",[ec,R$]=h("wengine",$t),I$=b.wengine[$t],M$=f($t,"icon"),T$=m[$t],z$=u[$t],B$={title:ec("phase"),img:M$,documents:[{type:"text",text:i(p,{wKey:$t,children:e=>ec(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:R$("cond"),metadata:T$.stacks,fields:[l(z$.cond_impact_.tag),{title:"Duration",fieldValue:I$.duration}]}}]},Qt="SteelCushion",[tc,E$]=h("wengine",Qt),O$=f(Qt,"icon"),P$=m[Qt],nc=u[Qt],V$={title:tc("phase"),img:O$,documents:[{type:"text",text:i(p,{wKey:Qt,children:e=>tc(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(nc.passive_physical_dmg_.tag)]},{type:"conditional",conditional:{label:E$("cond"),metadata:P$.hit_behind,fields:[l(nc.cond_dmg_.tag)]}}]},Xt="StreetSuperstar",[ic,q$]=h("wengine",Xt),A$=f(Xt,"icon"),F$=m[Xt],j$=u[Xt],L$={title:ic("phase"),img:A$,documents:[{type:"text",text:i(p,{wKey:Xt,children:e=>ic(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:q$("cond"),metadata:F$.charge,fields:[l(j$.cond_ult_dmg_.tag)]}}]},_t="TheBrimstone",[ac,H$]=h("wengine",_t),K$=b.wengine[_t],W$=f(_t,"icon"),N$=m[_t],G$=u[_t],U$={title:ac("phase"),img:W$,documents:[{type:"text",text:i(p,{wKey:_t,children:e=>ac(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:H$("cond"),metadata:N$.hit_basic_dash_dodge,fields:[l(G$.cond_atk_.tag),{title:"Duration",fieldValue:K$.duration}]}}]},yt="TheRestrained",[oc,J$]=h("wengine",yt),Y$=b.wengine[yt],Z$=f(yt,"icon"),Q$=m[yt],sc=u[yt],X$={title:oc("phase"),img:Z$,documents:[{type:"text",text:i(p,{wKey:yt,children:e=>oc(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:J$("cond"),metadata:Q$.dmg_daze_,fields:[l(sc.basic_dmg_.tag),l(sc.basic_daze_.tag),{title:"Duration",fieldValue:Y$.duration}]}}]},bt="TheVault",[cc,e_]=h("wengine",bt),t_=b.wengine[bt],n_=f(bt,"icon"),i_=m[bt],a_=u[bt],o_={title:cc("phase"),img:n_,documents:[{type:"text",text:i(p,{wKey:bt,children:e=>cc(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:e_("cond"),metadata:i_.ether_hit,fields:[l(a_.cond_dmg_.tag),{title:"Duration",fieldValue:t_.duration}]}}]},xt="Timeweaver",[lc,s_]=h("wengine",xt),c_=b.wengine[xt],l_=f(xt,"icon"),r_=m[xt],yi=u[xt],d_={title:lc("phase"),img:l_,documents:[{type:"text",text:i(p,{wKey:xt,children:e=>lc(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(yi.passive_electric_anomBuildup_.tag),l(yi.passive_disorder_dmg_.tag)]},{type:"conditional",conditional:{label:s_("cond"),metadata:r_.hit_anomaly,fields:[l(yi.cond_anomProf.tag),{title:"Duration",fieldValue:c_.duration}]}}]},Kn="TremorTrigramVessel",[rc]=h("wengine",Kn),h_=f(Kn,"icon"),dc=u[Kn],u_={title:rc("phase"),img:h_,documents:[{type:"text",text:i(p,{wKey:Kn,children:e=>rc(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(dc.exSpecial_dmg_.tag),l(dc.ult_dmg_.tag)]}]},wt="TusksOfFury",[hc,m_]=h("wengine",wt),g_=b.wengine[wt],p_=f(wt,"icon"),f_=m[wt],bi=u[wt],$_={title:hc("phase"),img:p_,documents:[{type:"text",text:i(p,{wKey:wt,children:e=>hc(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(bi.passive_shield_.tag)]},{type:"conditional",conditional:{label:m_("cond"),metadata:f_.interrupt_perfdodge,fields:[l(bi.cond_dmg_.tag),l(bi.daze_.tag),{title:"Duration",fieldValue:g_.duration}]}}]},vt="UnfetteredGameBall",[uc,__]=h("wengine",vt),y_=b.wengine[vt],b_=f(vt,"icon"),x_=m[vt],w_=u[vt],v_={title:uc("phase"),img:b_,documents:[{type:"text",text:i(p,{wKey:vt,children:e=>uc(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:__("cond"),metadata:x_.anomaly_counter,fields:[l(w_.cond_crit_.tag),{title:"Duration",fieldValue:y_.duration}]}}]},Wn="VortexArrow",[mc,xy]=h("wengine",Wn),k_=f(Wn,"icon"),C_=u[Wn],S_={title:mc("phase"),img:k_,documents:[{type:"text",text:i(p,{wKey:Wn,children:e=>mc(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(C_.passive_daze_.tag)]}]},kt="VortexHatchet",[gc,D_]=h("wengine",kt),pc=b.wengine[kt],R_=f(kt,"icon"),I_=m[kt],M_=u[kt],T_={title:gc("phase"),img:R_,documents:[{type:"text",text:i(p,{wKey:kt,children:e=>gc(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:D_("cond"),metadata:I_.entering,fields:[l(M_.cond_impact_.tag),{title:"Duration",fieldValue:pc.duration},{title:"Cooldown",fieldValue:pc.cooldown}]}}]},Nn="VortexRevolver",[fc,wy]=h("wengine",Nn),z_=f(Nn,"icon"),B_=u[Nn],E_={title:fc("phase"),img:z_,documents:[{type:"text",text:i(p,{wKey:Nn,children:e=>fc(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(B_.passive_exSpecial_daze_.tag)]}]},Ct="WeepingCradle",[$c,_c]=h("wengine",Ct),O_=b.wengine[Ct],P_=f(Ct,"icon"),yc=m[Ct],V_=u[Ct],q_={title:$c("phase"),img:P_,documents:[{type:"text",text:i(p,{wKey:Ct,children:e=>$c(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:_c("cond_atk"),metadata:yc.attack}},{type:"conditional",conditional:{label:_c("cond_stacks"),metadata:yc.stacks,fields:[l(V_.cond_dmg_.tag),{title:"Duration",fieldValue:O_.duration}]}}]},en="WeepingGemini",[bc,A_]=h("wengine",en),F_=f(en,"icon"),j_=m[en],L_=u[en],H_={title:bc("phase"),img:F_,documents:[{type:"text",text:i(p,{wKey:en,children:e=>bc(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:A_("cond"),metadata:j_.anomaly_stack,fields:[l(L_.anomProf.tag)]}}]},St="ZanshinHerbCase",[xc,K_]=h("wengine",St),W_=b.wengine[St],N_=f(St,"icon"),G_=m[St],xi=u[St],U_={title:xc("phase"),img:N_,documents:[{type:"text",text:i(p,{wKey:St,children:e=>xc(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(xi.passive_crit_.tag),l(xi.passive_electric_dmg_.tag)]},{type:"conditional",conditional:{label:K_("cond"),metadata:G_.apply_anom_stun,fields:[l(xi.cond_crit_.tag),{title:"Duration",fieldValue:W_.duration}]}}]},J_={BashfulDemon:wm,BigCylinder:Dm,BlazingLaurel:Im,BoxCutter:Em,BunnyBand:qm,CannonRotor:Hm,CinderCobalt:Gm,DeepSeaVisitor:Jm,DemaraBatteryMarkII:eg,DrillRigRedAxis:ag,ElectroLipGloss:lg,ElegantVanity:gg,FlamemakerShaker:fg,FlightOfFancy:bg,FusionCompiler:Cg,GildedBlossom:Dg,HailstormShrine:zg,HeartstringNocturne:Vg,HellfireGears:Fg,Housekeeper:Hg,IceJadeTeapot:Gg,IdentityBase:Xg,IdentityInflection:tp,KaboomTheCannon:cp,LunarDecrescent:mp,LunarNoviluna:pp,LunarPleniluna:$p,MagneticStormAlpha:wp,MagneticStormBravo:Dp,MagneticStormCharlie:Ip,MarcatoDesire:Bp,MyriadEclipse:qp,OriginalTransmorpher:Hp,PeacekeeperSpecialized:Gp,PreciousFossilizedCore:Yp,PuzzleSphere:Qp,QingmingBirdcage:af,RadiowaveJourney:rf,RainforestGourmet:pf,ReelProjector:$f,ReverbMarkI:vf,ReverbMarkII:Rf,ReverbMarkIII:Ef,RiotSuppressorMarkVI:qf,RoaringFurnace:Hf,RoaringRide:Wf,SeveredInnocence:Yf,SharpenedStinger:t$,SixShooter:s$,SliceOfTime:l$,SpectralGaze:d$,SpringEmbrace:p$,StarlightEngine:x$,StarlightEngineReplica:D$,SteamOven:B$,SteelCushion:V$,StreetSuperstar:L$,TheBrimstone:U$,TheRestrained:X$,TheVault:o_,Timeweaver:d_,TremorTrigramVessel:u_,TusksOfFury:$_,UnfetteredGameBall:v_,VortexArrow:S_,VortexHatchet:T_,VortexRevolver:E_,WeepingCradle:q_,WeepingGemini:H_,ZanshinHerbCase:U_};function Y_(e){const{attribute:t}=e;if(t)return t}function Z_(e){const{q:t}=e;return["standardDmg","anomalyDmg"].includes(t)}function Q_(e){const{damageType1:t,damageType2:n}=e,a=[];return Z_(e)?(t&&a.push(t),n&&a.push(n),a):[]}const fn={basic:"Basic",dash:"Dash",dodgeCounter:"Dodge Counter",special:"Special",exSpecial:"EX Special",chain:"Chain",ult:"Ultimate",quickAssist:"Quick Assist",defensiveAssist:"Defensive Assist",evasiveAssist:"Evasive Assist",assistFollowUp:"Assist Follow Up",anomaly:"Anomaly",disorder:"Disorder",aftershock:"Aftershock",elemental:"Elemental",sheer:"Sheer"},hl=["crit_","crit_dmg_","impact","pen","pen_","enerRegen","anomProf","anomMas","anom_crit_","anom_crit_dmg_"].map(e=>{if(zr.includes(e)){const t={...q.final.dmg_.tag,attribute:e.slice(0,-5)};return{title:i(Bt,{statKey:e}),fieldRef:t}}return e==="crit_"?{fieldRef:q.common.cappedCrit_.tag,title:i(Bt,{statKey:e})}:e==="anom_crit_"?{fieldRef:q.common.anom_cappedCrit_.tag,title:i(Bt,{statKey:e})}:{fieldRef:q.final[e].tag,title:i(Bt,{statKey:e})}});hl.push(...ve.map(e=>({fieldRef:{et:"own",qt:"formula",q:"standardDmg",attribute:e,name:"standardDmgInst"},title:x(ke,{color:e,children:[pe[e]," Damage"]})})),...ve.map(e=>({fieldRef:{et:"own",qt:"formula",q:"sheerDmg",attribute:e,name:"sheerDmgInst"},title:x(ke,{color:e,children:[pe[e]," Damage"]})})),...ve.flatMap(e=>Br.map(t=>({fieldRef:{et:"own",qt:"formula",q:"standardDmg",attribute:e,damageType1:t,name:"standardDmgInst"},title:x(ke,{color:e,children:[pe[e]," ",fn[t]," Damage"]})}))),...ve.map(e=>({fieldRef:{et:"own",qt:"formula",q:"anomalyDmg",attribute:e,damageType1:"anomaly",name:"anomalyDmgInst"},title:x(ke,{color:e,children:[pe[e]," Anomaly Damage"]})})),...ve.map(e=>({fieldRef:{et:"own",qt:"formula",q:"anomBuildup",attribute:e,name:"anomalyBuildupInst"},title:x(ke,{color:e,children:[pe[e]," Anomaly Buildup"]})})),{fieldRef:{et:"own",qt:"formula",q:"dazeBuildup",name:"dazeInst"},title:"Daze Buildup"});const Fi=[];Object.values(ru).forEach(e=>Object.values(e).forEach(t=>t.documents.forEach(n=>n.type==="fields"&&n.fields.forEach(a=>wd(a)&&Fi.push({tag:a.fieldRef,value:a})))));hl.forEach(e=>{Fi.push({tag:e.fieldRef,value:e})});const X_=ld(Fi),vi=new Map;function ul(e,t){if(vi.get(e))throw new Error(`Duplicate conditional ${e}`);vi.set(e,t)}Object.values(J_).forEach(({documents:e})=>{e.forEach(t=>{t.type==="conditional"&&ul(`${t.conditional.metadata.sheet}:${t.conditional.metadata.name}`,t.conditional)})});Object.values($m).forEach(e=>Object.values(e).forEach(({documents:t})=>{t.forEach(n=>{n.type==="conditional"&&ul(`${n.conditional.metadata.sheet}:${n.conditional.metadata.name}`,n.conditional)})}));export{dd as A,ly as C,ea as D,oy as F,xn as T,Pt as a,tl as b,Zr as c,Ur as d,$m as e,fn as f,Bd as g,bn as h,qd as i,cy as j,sy as k,hd as l,yn as m,rd as n,ay as o,fd as p,Ed as q,pd as r,ll as s,Xr as u,J_ as w};
