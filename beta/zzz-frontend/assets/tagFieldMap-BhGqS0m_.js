import{c3 as sc,J as cc,H as lc,d as w,K as rc,_ as dc,O as re,c4 as zi,X as Jt,W as nn,V as ye,c5 as j,Y as hc,c6 as sl,c7 as cl,T as O,y as uc,c8 as Bi,c9 as gc,ca as ll,a4 as rl,cb as dl,a7 as hl,cc as pc,u as te,aN as mc,aL as ul,cd as gl,ce as pl,cf as ml,cg as fc,ch as fl,b3 as $c,b2 as yc,ci as V,cj as $l,ck as yl,bz as q,b8 as _l,b9 as bl,cl as Yt,cm as xl,cn as wl,co as _c,cp as Zt,cq as vl,j as i,cr as Xt,cs as le,br as Q,bA as li,ct as kl,e as b,am as U,aA as St,cu as Qt,i as W,ax as G,bU as bc,cv as Sl,cw as xc,cx as wc,cy as ri,cz as ae,ae as di,o as M,cA as Cl,cB as vc,a as kc,bH as Dl,l as Sc,bZ as Rl,f as ee,G as H,C as _e,S as de,P as Ml,bL as Il,bf as si,b_ as Ei,bp as Cc,aX as fe,b$ as Tl,c0 as zl,I as hi,s as ui,c1 as Bl,cC as El,v as vt,M as gi,aM as an,ac as Dc,ad as Rc,cD as Ol,m as Pl,k as Vl,n as ql,be as Al,D as Fl,c2 as Ll,cE as jl,w as Mc,r as Hl,b as Kl,c as Wl,g as Nl,bv as Ic,bD as Tc,bB as zc,cF as Gl,cG as Ul,E as Jl,cH as Yl,z as Ct,B as be,cI as pi,F as Dt,cJ as Bc,cK as Zl,ah as mi,ag as Xl,aY as $e,ap as Ql,b5 as er,cL as tr,cM as nr,cN as ir,aH as Ec,aF as Gt,ai as ar,cO as or,bx as sr,cP as cr,aK as lr,cQ as rr,cR as dr,bX as hr,cS as ur,cT as gr,cU as J,cV as Oc,a5 as Oi,b7 as Pi,cW as pr,cX as mr,bd as Pc,cY as fr,cZ as _,c_ as ue,a_ as p,aZ as u,ay as T,aD as f,c$ as $r,bG as yr}from"./index-BtO1h67a.js";import{i as _r,d as br}from"./discSortUtil-BZtQc6g0.js";function xr(e){const{badgeContent:t,invisible:n=!1,max:a=99,showZero:o=!1}=e,c=sc({badgeContent:t,max:a});let s=n;n===!1&&t===0&&!o&&(s=!0);const{badgeContent:r,max:d=a}=s?c:e,g=r&&Number(r)>d?`${d}+`:r;return{badgeContent:r,invisible:s,max:d,displayValue:g}}function wr(e){return lc("MuiBadge",e)}const ne=cc("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),vr=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],Pn=10,Vn=4,kr=e=>{const{color:t,anchorOrigin:n,invisible:a,overlap:o,variant:c,classes:s={}}=e,r={root:["root"],badge:["badge",c,a&&"invisible",`anchorOrigin${j(n.vertical)}${j(n.horizontal)}`,`anchorOrigin${j(n.vertical)}${j(n.horizontal)}${j(o)}`,`overlap${j(o)}`,t!=="default"&&`color${j(t)}`]};return hc(r,wr,s)},Sr=nn("span",{name:"MuiBadge",slot:"Root",overridesResolver:(e,t)=>t.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),Cr=nn("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.badge,t[n.variant],t[`anchorOrigin${j(n.anchorOrigin.vertical)}${j(n.anchorOrigin.horizontal)}${j(n.overlap)}`],n.color!=="default"&&t[`color${j(n.color)}`],n.invisible&&t.invisible]}})(({theme:e})=>{var t;return{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(12),minWidth:Pn*2,lineHeight:1,padding:"0 6px",height:Pn*2,borderRadius:Pn,zIndex:1,transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.enteringScreen}),variants:[...Object.keys(((t=e.vars)!=null?t:e).palette).filter(n=>{var a,o;return((a=e.vars)!=null?a:e).palette[n].main&&((o=e.vars)!=null?o:e).palette[n].contrastText}).map(n=>({props:{color:n},style:{backgroundColor:(e.vars||e).palette[n].main,color:(e.vars||e).palette[n].contrastText}})),{props:{variant:"dot"},style:{borderRadius:Vn,height:Vn*2,minWidth:Vn*2,padding:0}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${ne.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${ne.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${ne.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${ne.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${ne.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${ne.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${ne.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${ne.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.leavingScreen})}}]}}),Vi=w.forwardRef(function(t,n){var a,o,c,s,r,d;const g=rc({props:t,name:"MuiBadge"}),{anchorOrigin:x={vertical:"top",horizontal:"right"},className:C,component:S,components:$={},componentsProps:y={},children:v,overlap:D="rectangular",color:A="default",invisible:L=!1,max:Y=99,badgeContent:Z,slots:F,slotProps:R,showZero:E=!1,variant:P="standard"}=g,X=dc(g,vr),{badgeContent:Si,invisible:Zc,max:Xc,displayValue:Qc}=xr({max:Y,invisible:L,badgeContent:Z,showZero:E}),el=sc({anchorOrigin:x,color:A,overlap:D,variant:P,badgeContent:Z}),Ci=Zc||Si==null&&P!=="dot",{color:tl=A,overlap:nl=D,anchorOrigin:il=x,variant:Di=P}=Ci?el:g,Ri=Di!=="dot"?Qc:void 0,Bn=re({},g,{badgeContent:Si,invisible:Ci,max:Xc,displayValue:Ri,showZero:E,anchorOrigin:il,color:tl,overlap:nl,variant:Di}),Mi=kr(Bn),Ii=(a=(o=F==null?void 0:F.root)!=null?o:$.Root)!=null?a:Sr,Ti=(c=(s=F==null?void 0:F.badge)!=null?s:$.Badge)!=null?c:Cr,En=(r=R==null?void 0:R.root)!=null?r:y.root,On=(d=R==null?void 0:R.badge)!=null?d:y.badge,al=zi({elementType:Ii,externalSlotProps:En,externalForwardedProps:X,additionalProps:{ref:n,as:S},ownerState:Bn,className:Jt(En==null?void 0:En.className,Mi.root,C)}),ol=zi({elementType:Ti,externalSlotProps:On,ownerState:Bn,className:Jt(Mi.badge,On==null?void 0:On.className)});return ye.jsxs(Ii,re({},al,{children:[v,ye.jsx(Ti,re({},ol,{children:Ri}))]}))});function Dr(e){return lc("MuiFormControlLabel",e)}const wt=cc("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),Rr=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],Mr=e=>{const{classes:t,disabled:n,labelPlacement:a,error:o,required:c}=e,s={root:["root",n&&"disabled",`labelPlacement${j(a)}`,o&&"error",c&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",o&&"error"]};return hc(s,Dr,t)},Ir=nn("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${wt.label}`]:t.label},t.root,t[`labelPlacement${j(n.labelPlacement)}`]]}})(({theme:e,ownerState:t})=>re({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${wt.disabled}`]:{cursor:"default"}},t.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},t.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},t.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${wt.label}`]:{[`&.${wt.disabled}`]:{color:(e.vars||e).palette.text.disabled}}})),Tr=nn("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${wt.error}`]:{color:(e.vars||e).palette.error.main}})),zr=w.forwardRef(function(t,n){var a,o;const c=rc({props:t,name:"MuiFormControlLabel"}),{className:s,componentsProps:r={},control:d,disabled:g,disableTypography:x,label:C,labelPlacement:S="end",required:$,slotProps:y={}}=c,v=dc(c,Rr),D=sl(),A=(a=g??d.props.disabled)!=null?a:D==null?void 0:D.disabled,L=$??d.props.required,Y={disabled:A,required:L};["checked","name","onChange","value","inputRef"].forEach(X=>{typeof d.props[X]>"u"&&typeof c[X]<"u"&&(Y[X]=c[X])});const Z=cl({props:c,muiFormControl:D,states:["error"]}),F=re({},c,{disabled:A,labelPlacement:S,required:L,error:Z.error}),R=Mr(F),E=(o=y.typography)!=null?o:r.typography;let P=C;return P!=null&&P.type!==O&&!x&&(P=ye.jsx(O,re({component:"span"},E,{className:Jt(R.label,E==null?void 0:E.className),children:P}))),ye.jsxs(Ir,re({className:Jt(R.root,s),ownerState:F,ref:n},v,{children:[w.cloneElement(d,Y),L?ye.jsxs(uc,{display:"block",children:[P,ye.jsxs(Tr,{ownerState:F,"aria-hidden":!0,className:R.asterisk,children:["â€‰","*"]})]}):P]}))}),Br={};class Vc{constructor(t,n){this.root=new Er(t,n)}subset(t){const n=[];return this._subset(t,a=>n.push(...a[Bi].map(o=>o.value))),n}entries(t){const n=[];return this._subset(t,a=>n.push(...a[Bi])),n}_subset(t,n){const a=t.length;function o(c,s){c<a?s.subset(t[c]).forEach(r=>o(c+1,r)):n(s.leaf)}o(0,this.root)}}let Er=class qc{constructor(t,n){if(this.children=[],t>0)for(const[a,o]of Object.entries(n)){const c=new Map;for(const[s,r]of Object.entries(o))c.set(+s,new qc(t-1,r));this.children.push({mask:+a,map:c})}else this.leaf=n}subset(t){return this.children.map(({mask:n,map:a})=>a.get(t&n)).filter(n=>!!n)}};class qi{constructor(t){this.root=new fi(void 0),this.keys=t}at(t){const n=this.keys.get(t),a=n.reduce((o,c)=>o.child(c),this.root);return a.leaf||(a.leaf=new $i(t,n,this.keys,a)),a.leaf}}class fi{constructor(t){this.children=new Map,this.parent=t}child(t){let n=this.children.get(t);return n||(n=new fi(this),this.children.set(t,n),n)}}class $i{constructor(t,n,a,o){this.tag=Object.fromEntries(Object.entries(t).filter(([c,s])=>s!=null)),this.id=n,this.keys=a,this.internal=o}with(t){const{keys:n}=this,{id:a,firstReplacedByte:o}=n.combine(this.id,t);let c=this.internal;for(let s=o;s<n.tagLen;s++)c=c.parent;for(let s=o;s<n.tagLen;s++)c=c.child(a[s]);return c.leaf||(c.leaf=new $i({...this.tag,...t},a,n,c)),c.leaf}}class Or{constructor(t,n){this.keys=new gc(t),this.values=new Vc(t.tagLen,n)}subset(t){return this.values.subset(this.keys.get(t))}}const kt={sum:e=>e.reduce((t,n)=>t+n,0),prod:e=>e.reduce((t,n)=>t*n,1),min:e=>Math.min(...e),max:e=>Math.max(...e),sumfrac:([e,t])=>e/(e+t),unique:([e])=>e},Ac={match:([e,t])=>e===t?0:1,thres:([e,t])=>e>=t?0:1,lookup:([e],t)=>t[e]??0},Lt=e=>dl(e,"val");let Fc=class{constructor(t,...n){const a=new gc(t);this.nodes=new Vc(a.tagLen,ll(n)),this.cache=new qi(a).at({}),this.calc=new qi(a).at({}),this.calc.val=this}withTag(t){const n=this.calc.with(t);return n.val??(n.val=Object.assign(new this.constructor(this.cache.keys),this,{cache:this.cache.with(t),calc:n}))}gather(t){return this._gather(this.cache.with(t)).pre}compute(t){return this._compute(t,this.cache)}_gather(t){if(t.val)return t.val;const n=this.nodes.entries(t.id).flatMap(({tag:a,value:o})=>o.op==="reread"?this._gather(t.with(o.tag)).pre:[this.markGathered(t.tag,a,o,this._compute(o,t))]);return t.val={pre:n}}_compute(t,n){const a=(c,s,r,d)=>Object.freeze({val:c,meta:this.computeMeta(t,c,s,r,d)}),{op:o}=t;switch(o){case"const":return a(t.ex,[],[]);case"sum":case"prod":case"min":case"max":case"sumfrac":{const c=t.x.map(s=>this._compute(s,n));return a(kt[o](Lt(c)),c,[])}case"thres":case"match":case"lookup":{const c=t.br.map(g=>this._compute(g,n)),s=Ac[o](Lt(c),t.ex),r=[...Array(t.x.length)],d=r[s]=this._compute(t.x[s],n);return a(d.val,r,c)}case"subscript":{const c=this._compute(t.br[0],n);return a(t.ex[c.val],[],[c])}case"vtag":return a(n.tag[t.ex]??"",[],[]);case"tag":{const c=n.with(t.tag),s=this._compute(t.x[0],c);return a(s.val,[s],[],c.tag)}case"dtag":{const c=t.br.map(d=>this._compute(d,n)),s=n.with(Object.fromEntries(c.map((d,g)=>[t.ex[g],d.val]))),r=this._compute(t.x[0],s);return a(r.val,[r],c,s.tag)}case"read":{const c=n.with(t.tag),s=this._gather(c),{pre:r}=s,d=t.ex??this.defaultAccu(c.tag)??"unique";if(d!==t.ex&&(t={...t,ex:d}),s[d])return s[d];if(hl()&&d==="unique"&&r.length!==1)throw new Error(`Ill-form read for ${pc(c.tag)}`);const g=kt[d](Lt(r));return s[d]=a(g,r,[],c.tag)}case"custom":{const c=t.x.map(s=>this._compute(s,n));return a(Br[t.ex].calc(Lt(c)),c,[])}default:rl(o)}}defaultAccu(t){}markGathered(t,n,a,o){return o}computeMeta(t,n,a,o,c){}toDebug(){throw new Error("not implemented")}};const Pr={arithmetic:kt,branching:Ac};class Vr extends Fc{constructor(t,n=pc,a=()=>!0){super(t.cache.keys),this.gathering=new Set,this.nodes=t.nodes,this.tagStr=n,this.filter=a,this.defaultAccu=o=>t.defaultAccu(o),this.cache=this.cache.with(t.cache.tag)}withTag(t){throw new Error("Unimplemented")}_gather(t){if(this.gathering.has(t))throw new Error(`Loop detected for ${this.tagStr(t.tag)}`);this.gathering.add(t);const n=this.__gather(t);return this.gathering.delete(t),n}__gather(t){if(t.val)return t.val;const n=this.nodes.entries(t.id).flatMap(({tag:a,value:o})=>o.op==="reread"?this._gather(t.with(o.tag)).pre.map(c=>{const s=`${this.tagStr(a)} <= ${this.tagStr(o.tag)} : ${c.meta.readSeq}`;return Object.freeze({...c,meta:{...c.meta,readSeq:s}})}):[this.markGathered(t.tag,a,o,this._compute(o,t))]);return t.val={pre:n}}_compute(t,n){try{return super._compute(t,n)}catch(a){return Object.freeze({val:NaN,meta:{formula:`${a}`,deps:[],omitted:[],val:NaN,x:[],br:[],comp:"ERR",pivot:!0,toJSON:Fi}})}}markGathered(t,n,a,o){const c=`${this.tagStr(n)} <- ${this.tagStr(t)}`;return{...o,meta:{...o.meta,readSeq:c,pivot:!0}}}computeMeta(t,n,a,o,c){let s,r;const d=a.filter($=>$).map($=>$.meta),g=o.map($=>$.meta),x=[],C=t.op==="read"?t.ex:t.op,S=[];if(C in kt){const $=kt[C]([]);for(const y of[...g,...d])y.val!==$||this.filter(y)?x.push(y):S.push(y)}else x.push(...g,...d);switch(t.op){case"const":s=Ai(t.ex);break;case"read":r=`gather ${d.length} node(s)`,r+=` matching ${this.tagStr(c,t.ex)}`,r+=` (for ${this.tagStr(t.tag)})`,S.length&&(r+=` <${S.length} omitted>`),s=`${this.tagStr(t.tag)}`;break;default:{const $=[];t.ex&&t.op!=="subscript"&&$.push(JSON.stringify(t.ex)),t.tag&&$.push(this.tagStr(t.tag)),$.push(...x.map(y=>y.comp)),S.length&&$.push(`<${S.length} omitted>`),s=`${t.op}(`+$.join(", ")+")"}}return S.push(...x.flatMap($=>$.pivot?[]:$.omitted)),Object.freeze({formula:`[${Ai(n)}] ${r??s}`,deps:[...new Set(x.flatMap($=>$.pivot?[$]:$.deps))],omitted:[...new Set(S)],val:n,x:d,br:g,comp:s,pivot:t.op==="read",toJSON:Fi})}}const Ai=e=>typeof e=="string"?`"${e}"`:e.toString();function Fi(){const{formula:e,readSeq:t,deps:n}=this,a={readSeq:t,formula:e,deps:n};return a.readSeq||delete a.readSeq,a.deps.length||delete a.deps,Object.keys(a).length===1?a.formula:a}function on(e){const{database:t}=te();return mc(t.chars,e)}function qr(e){const{database:t}=te();return mc(t.charOpts,e)}const{arithmetic:Ar}=Pr;let Fr=class extends Fc{computeMeta({op:t,ex:n,tag:a},o,c,s,r){let d=c.filter($=>!!$);const g=Lr(d,s);function x($){return Object.freeze(r&&!$.tag?{tag:r,...$}:$)}function C($,y){return x({op:$,ops:y,...g})}function S($,y){let{meta:v}=$;return y!=null&&y.some(D=>!v.usedCats.has(D))&&(v={...v,usedCats:new Set([...v.usedCats,...y])}),x(v.conds===g.conds?v:{...v,...g})}if(t==="read"&&(r==null?void 0:r.qt)==="cond"){const{src:$,dst:y,sheet:v,q:D}=r;$&&v&&D&&(g.conds=en(g.conds,{[y??"All"]:{[$]:{[v]:{[D]:o}}}}))}switch(t==="read"&&n!=="unique"&&([t,n]=[n,void 0]),t){case"sum":case"prod":case"min":case"max":case"sumfrac":if(d.length>1){const $=Ar[t]([]);d=d.filter(y=>y.val!==$)}return d.length===1?S(d[0]):C(d.length?t:"const",d);case"const":case"subscript":return C("const",[]);case"vtag":return g.usedCats=new Set([n]),C("const",[]);case"match":case"thres":case"lookup":case"read":return S(d[0]);case"tag":return S(d[0],Object.keys(a));case"dtag":return S(d[0],n);case"custom":return C(n,d);default:ul(t)}}markGathered(t,n,a,o){const{val:c}=o,s={...o.meta};let r=!1;const d=new Set([...s.usedCats,...Object.keys(n)]);return s.usedCats.size!==d.size&&(s.usedCats=d,r=!0),r?{val:c,meta:Object.freeze(s)}:o}listFormulas(t){return this.gather(t.tag).filter(n=>n.val).map(({val:n,meta:a})=>gl.withTag(a.tag)[n])}listCondFormulas(t){return this.listFormulas(t).map(n=>this.compute(n).meta.conds).reduce(en,{})}};function Lr(e,t){var s;const n=[...e.map(r=>r.meta),...t.map(r=>r.meta)];let a={},o=new Set;for(const r of n)a=en(a,r.conds),r.usedCats.forEach(d=>o.add(d));const c=o.size;return o=((s=n.find(r=>r.usedCats.size===c))==null?void 0:s.usedCats)??o,{usedCats:o,conds:a}}function en(e,t){if(e===t)return e;if(typeof e!="object")throw new Error(`cannot merge ${e} and ${t}`);if(Object.keys(t).length>Object.keys(e).length&&([e,t]=[t,e]),!Object.keys(t).length)return e;let n=!1;const a={...e};for(const[o,c]of Object.entries(t)){const s=a[o],r=o in a?en(s,c):c;s!==r&&(a[o]=r,n=!0)}return Object.freeze(n?a:e)}function jr(e){const t=new Set(e);return n=>!Hr(n,t)}function Hr(e,t){const n=e.formula.match(/(\S+) (\S+) common.count/);if(!n)return!1;const[,a,o]=n;return o==="own"&&t.has(a)}class Kr extends Fr{toDebug(){return new Vr(this,pl,jr([...$c,...yc]))}defaultAccu(t){var o,c,s,r;const{qt:n,q:a}=t;if(!(!n||!a))switch(t.et){case"own":case"target":return(c=(o=fc[n])==null?void 0:o[a])==null?void 0:c.accu;case"enemy":return(r=(s=ml[n])==null?void 0:s[a])==null?void 0:r.accu;case"team":if(n==="common"&&a==="count")return"sum";throw new Error("non-explicit team value accumulator")}}listFormulas(t){return super.listFormulas(t).filter(n=>fl)}}function Ut(e,...t){return t.map(({tag:n,value:a})=>({tag:{...n,preset:e},value:a}))}function Lc(e,...t){return t.map(({tag:n,value:a})=>({tag:{...n,src:e},value:a}))}function jc(e){const{lvl:t,promotion:n,basic:a,dodge:o,special:c,chain:s,assist:r,core:d,mindscape:g}=q.char,{char:x,iso:C,[e.key]:S}=V.withAll("sheet",[]);return[x.reread(S),C.reread(S),t.add(e.level),a.add(e.basic),o.add(e.dodge),c.add(e.special),s.add(e.chain),r.add(e.assist),d.add(e.core),n.add(e.promotion),g.add(e.mindscape),Yt.base.crit_.add(.05),Yt.base.crit_dmg_.add(.5)]}function Wr(e){return[V.sheet("agg").reread(V.sheet("wengine")),...e?[q.common.count.sheet(e.key).add(1),q.wengine.lvl.add(e.level),q.wengine.modification.add(e.modification),q.wengine.phase.add(e.phase)]:[]]}function Hc(e,t){const{common:{count:n},initial:a}=xl(fc,{sheet:"disc",et:"own"});return[V.sheet("agg").reread(V.sheet("disc")),V.withTag({sheet:"disc",qt:"initial"}).reread(V.sheet("dyn")),...Object.entries(e).map(([o,c])=>wl(a,o).sheet("dyn").add(c)),...Object.entries(t).map(([o,c])=>n.sheet(o).add(c))]}function Nr(e){const t={},n={};return e.forEach(({setKey:a,mainStatKey:o,substats:c,level:s,rarity:r})=>{t[a]=(t[a]??0)+1,n[o]=(n[o]??0)+_l(r,o,s),c.forEach(({key:d,upgrades:g})=>{!d||!g||(n[d]=(n[d]??0)+bl(d,r)*g)})}),Hc(n,t)}function Kc(e){const t=V.with("et","team"),{own:n,enemy:a,teamBuff:o,notOwnBuff:c}=V.sheet("agg").withAll("et",[]);return[e.map(s=>V.withTag({et:"target",dst:s}).reread(V.withTag({et:"own",dst:null,src:s}))),e.flatMap(s=>{const r=n.with("src",s);return e.map(d=>r.reread(o.withTag({dst:s,src:d,name:null})))}),e.flatMap(s=>{const r=n.with("src",s);return e.filter(d=>d!==s).map(d=>r.reread(c.withTag({dst:s,src:d,name:null})))}),e.map(s=>a.reread(V.withTag({et:"enemyDeBuff",dst:null,src:s,name:null}))),e.flatMap((s,r)=>{const{stackIn:d,stackTmp:g}=V.withAll("qt",[]),x=V.withTag({src:s,et:"own"});return[x.with("qt","stackTmp").add($l(d,0,r+1)),x.with("qt","stackOut").add(yl(g.max.with("et","team"),r+1,d))]}),e.map(s=>t.add(V.withTag({src:s,et:"own"})))].flat()}function Wc(e){const t=_c(Zt,e);return new Kr(Zt,vl,t)}function Gr(e){return new Or(Zt,_c(Zt,e))}function Ur({characterKey:e}){return i(Xt,{ns:"charNames_gen",key18:e})}function Jr({attribute:e}){return le[e]}function Yr({characterKey:e,onClick:t,charCardConfig:n}){const{level:a=0,promotion:o=0}=on(e)??{},c=Q(e),s=n||{cardWidth:"100%",charImgWidth:"100%",iconsSize:1.7,isEditing:!1,charNameWidth:"191px",charNameVariant:"h6",scrollingBgSize:"200px"},r=w.useCallback(()=>e&&(t==null?void 0:t(e)),[e,t]),d=w.useCallback(g=>i(li,{onClick:r,sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:g}),[r]);return i(St,{children:i(kl,{condition:!!t,wrapper:d,children:b(U,{sx:{display:"flex",flexDirection:"column",width:s.cardWidth},children:[i(Zr,{characterKey:e,characterStat:c,charCardConfig:s}),i(Xr,{characterKey:e,characterStat:c,promotion:o,level:a,charCardConfig:s})]})})})}function Zr({characterKey:e,characterStat:t,charCardConfig:n}){const{attribute:a,id:o}=t;return b(U,{sx:s=>({width:"100%",height:"100%",position:"relative",display:"flex",background:`${s.palette[a].main}`,zIndex:1,overflow:"hidden"}),children:[b(U,{sx:{position:"absolute",left:"0",right:"0",display:"flex",transform:"rotate(5deg) translateX(-50%)",zIndex:2},children:[i(Li,{characterKey:e,charCardConfig:n}),i(Li,{characterKey:e,charCardConfig:n})]}),i(U,{src:`https://act-webstatic.hoyoverse.com/game_record/zzzv2/role_vertical_painting/role_vertical_painting_${o}.png`,component:Qt?Qt:"img",width:n.charImgWidth,height:"auto",position:"relative",zIndex:"2"})]})}function Xr({characterKey:e,characterStat:t,promotion:n,level:a,charCardConfig:o}){const{t:c}=W("page_characters"),{attribute:s,rarity:r,specialty:d}=t,g=on(e);return i(U,{sx:{width:"100%",height:"100%",padding:"8px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:b(U,{sx:{display:"flex",flexDirection:"column"},children:[b(U,{gap:1,sx:{display:"flex",alignItems:"center"},children:[i(G,{size:o.iconsSize,src:bc(r)}),i(O,{variant:o.charNameVariant,sx:{fontWeight:"900",maxWidth:o.charNameWidth,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:i(Ur,{characterKey:e})}),i(Sl,{ele:s,iconProps:{sx:{fontSize:`${o.iconsSize}em`}}}),i(G,{size:o.iconsSize,src:xc(d)}),o.isEditing?"":i(O,{variant:"h5",color:"primary",sx:{fontWeight:"900"},children:c("mindscape",{level:g?g.mindscape:0})})]}),o.isEditing?"":b(U,{sx:{mt:"12px",display:"flex",gap:"14px",flexWrap:"wrap"},children:[b(U,{sx:x=>({border:`2px solid ${x.palette.contentZzz.main}`,borderRadius:"20px",display:"flex"}),children:[i(O,{sx:{fontWeight:"900",paddingLeft:"12px",fontSize:"16px"},children:c("charLevel",{level:a})}),b(O,{color:"primary",sx:{fontWeight:"900",paddingLeft:"4px",pr:"10px"},children:["/ ",wc[n]]})]}),b(U,{gap:1.5,sx:{display:"flex",alignItems:"center"},children:[ri.map((x,C)=>i(Vi,{anchorOrigin:{vertical:"bottom",horizontal:"left"},badgeContent:`${g?g[x]:0}`,color:"primary",children:i(G,{size:1.9,src:ae(x)})},C)),i(Vi,{anchorOrigin:{vertical:"bottom",horizontal:"left"},badgeContent:`${g?g.core:0}`,color:"primary",children:i(G,{size:1.9,src:ae("core")})},6)]})]})]})})}function Li({characterKey:e,charCardConfig:t}){const{t:n}=W("charNames_gen"),a={animation:"scroll 16s infinite linear","@keyframes scroll":{"0%":{transform:"translateX(-100%)"},"100%":{transform:"translateX(0)"}}};return i(U,{component:"span",sx:{color:"#000",marginTop:"20px",fontStyle:"italic",fontSize:t.scrollingBgSize,lineHeight:"150px",whiteSpace:"nowrap",textTransform:"uppercase",display:"flex",justifyContent:"center",fontFamily:"Impact",opacity:.1,...a},children:n(`${e}`)})}function Qr({mindscape:e,setMindscape:t}){const{t:n}=W("page_characters");return i(M,{sx:{display:"flex",flexWrap:"wrap",gap:2,mt:"12px"},children:di(1,6).map(a=>i(M,{children:i(St,{sx:{position:"relative",borderRadius:"40px"},children:i(zr,{control:i(Cl,{checked:e>=a,onChange:()=>t(a===e?a-1:a)}),label:b(M,{sx:{position:"absolute",top:9,left:e>=a?75:16,transition:"left 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",textAlign:"center"},children:[i(O,{variant:"subtitle1",sx:o=>({fontWeight:900,color:e>=a?o.palette.mindscapeActive.main:o.palette.mindscapeInactive.main}),children:n("mindscape",{level:a})}),i(O,{variant:"subtitle2",sx:o=>({lineHeight:.2,fontWeight:900,color:e>=a?o.palette.mindscapeActive.main:o.palette.mindscapeInactive.main}),children:n("mindscapeTitle")})]}),sx:{margin:0}})})},a))})}function ed(e){return{new:t=>e.chars.get(t)?0:1,name:t=>vc.t(t).toString(),level:t=>{const n=e.chars.get(t);return n?n.level*(n.promotion+1):0},rarity:t=>Q(t).rarity??0}}function td(e){return{attribute:(t,n)=>n.includes(Q(t).attribute),specialtyType:(t,n)=>n.includes(Q(t).specialty),rarity:(t,n)=>n.includes(Q(t).rarity),name:(t,n)=>n===void 0||vc.t(t).toLowerCase().includes(n.toLowerCase()),new:(t,n)=>n===void 0||n===(e.chars.get(t)?"no":"yes")}}const Nc={name:["name"],level:["level","rarity","name"],rarity:["rarity","level","name"]};function Ly({show:e,onHide:t,onSelect:n,newFirst:a=!1}){const{database:o}=te(),c=kc(o.displayCharacter),[s,r]=w.useState(""),d=w.useDeferredValue(s),g=w.useDeferredValue(c),x=w.useMemo(()=>{const{attribute:$,specialtyType:y,sortType:v,ascending:D}=g,A=[...a?["new"]:[],...Nc[v]??[]];return Dl.filter(Sc({attribute:$,specialtyType:y,name:d},td(o))).sort(Rl(A,D,ed(o),["new"]))},[g,a,d,o]);return i(id,{show:e,charactersToShow:x,filterSearchSortProps:{searchTerm:s,onChangeSpecialtyFilter:$=>{o.displayCharacter.set({specialtyType:$})},onChangeAttributeFilter:$=>{o.displayCharacter.set({attribute:$})},onChangeSearch:$=>{r($.target.value)},onChangeSort:$=>{o.displayCharacter.set({sortType:$})},onChangeAsc:$=>{o.displayCharacter.set({ascending:$})}},onClose:()=>{r(""),t()},children:i(ee,{sx:{flex:"1",overflow:"auto"},children:i(w.Suspense,{fallback:i(de,{variant:"rectangular",width:"100%",height:1e3}),children:i(H,{container:!0,spacing:.5,columns:{xs:2,sm:3,md:4,lg:5},children:x.map($=>i(H,{item:!0,xs:1,children:i(_e,{bgt:"light",sx:y=>({position:"relative",flexGrow:1,display:"flex",flexDirection:"column",borderRadius:"40px 16px 16px 40px",border:`3px solid ${y.palette.contentZzz.main}`}),children:i(ad,{characterKey:$,onClick:()=>{t(),n($)}})})},$))})})})})}const nd=Object.keys(Nc);function id({show:e,charactersToShow:t,filterSearchSortProps:n,onClose:a,children:o}){const{t:c}=W("page_characters"),{database:s}=te(),r=kc(s.displayCharacter),d=w.useMemo(()=>Ei(Cc,y=>s.chars.entries.forEach(([v,D])=>{const A=Q(D.key).specialty;y[A].total++,t.includes(v)&&y[A].current++})),[t,s.chars.entries]),g=w.useMemo(()=>Ei(fe,y=>Object.entries(s.chars.data).forEach(([v])=>{const D=Q(v).attribute;y[D].total++,t.includes(v)&&y[D].current++})),[t,s.chars.data]),{specialtyType:x,attribute:C,sortType:S,ascending:$}=r;return i(gi,{open:e,onClose:a,containerProps:{sx:{height:"100vh",p:{xs:1}}},children:b(_e,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[b(ee,{sx:{display:"flex",flexDirection:"column",gap:1},children:[b(M,{sx:{display:"flex",justifyContent:"space-between"},children:[b(M,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:[i(Tl,{onChange:y=>s.displayCharacter.set({specialtyType:y}),value:x,totals:d,size:"small"}),i(zl,{onChange:y=>s.displayCharacter.set({attribute:y}),value:C,totals:g,size:"small"})]}),i(hi,{sx:{ml:"auto"},onClick:()=>a(),children:i(ui,{})})]}),b(M,{display:"flex",gap:1,children:[i(Bl,{autoFocus:!0,value:n.searchTerm,onChange:y=>n.onChangeSearch(y),label:c("characterName"),size:"small",sx:{height:"100%",mr:"auto"},InputProps:{sx:{height:"100%"}}}),i(El,{sortKeys:nd,value:S,onChange:y=>n.onChangeSort(y),ascending:$,onChangeAsc:y=>n.onChangeAsc(y)})]})]}),i(vt,{}),o]})})}function ad({characterKey:e,onClick:t}){const{t:n}=W(["page_characters","charNames_gen"]),a=Ml(),o=on(e),{rarity:c,attribute:s}=Q(e),{level:r=1,promotion:d=0,mindscape:g=0}=o??{},x=s==="electric"?a.palette[s].light:a.palette[s].main;return i(li,{onClick:t,children:b(M,{sx:{position:"relative",width:"100%",display:"flex",padding:"3px",gap:.5,"&::before":{content:'""',display:"block",position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:.7,background:x}},children:[i(M,{sx:{maxWidth:{xs:"33%",lg:"30%"},alignSelf:"flex-end",display:"flex",flexDirection:"column",zIndex:1,flexShrink:1},children:i(M,{component:Qt?Qt:"img",src:Il(e,"interknot")})}),b(M,{sx:{display:"flex",flexDirection:"column",zIndex:1,justifyContent:"space-evenly"},children:[b(M,{sx:{display:"flex",alignItems:"center",gap:.5},children:[i(G,{size:1.5,src:bc(c)}),i(O,{variant:"subtitle2",sx:C=>({flexGrow:1,color:C.palette.contentNormal.main,fontWeight:"900"}),children:n(`charNames_gen:${e}`)})]}),o?b(M,{sx:C=>({display:"flex",gap:1,alignItems:"center",background:C.palette.contentNormal.main,padding:"4px 12px",borderRadius:"20px"}),children:[b(M,{sx:{textShadow:"0 0 5px gray"},children:[i(O,{variant:"body2",component:"span",whiteSpace:"nowrap",children:n("charLevel",{level:r})}),b(O,{variant:"body2",component:"span",color:"text.secondary",children:["/",wc[d]]})]}),b(O,{variant:"body2",children:["M",g]})]}):i(O,{component:"span",variant:"body2",children:i(si,{color:"electric",children:n("characterEditor.new")})})]})]})})}function od(){const{t:e}=W("page_characters"),{database:t}=te(),n=an(),{core:a=0,promotion:o=0,key:c}=n??{},s=w.useCallback(r=>c&&t.chars.set(c,{core:r}),[t,c]);return i(Rc,{fullWidth:!0,title:e("core",{level:a}),color:"primary",startIcon:i(G,{src:ae("core"),size:1.75,sideMargin:!0}),children:di(0,Ol[o]).map(r=>i(Dc,{selected:a===r,disabled:a===r,onClick:()=>s(r),children:e("core",{level:r})},r))})}const sd={xs:2*3,sm:2*3,md:3*3,lg:4*3,xl:4*3};function Gc({disc:e,onChangeId:t,slotKey:n,show:a,onClose:o}){const{t:c}=W(["page_characters","disc"]),{database:s}=te(),r=e==null?void 0:e.id,d=w.useCallback((R,E)=>({...R,...E,slotKeys:[n]}),[n]),[g,x]=w.useReducer(d,{..._r(),slotKeys:[n]}),C=Pl(),S=w.useMemo(()=>br(),[]),$=Vl(s.discs),y=$.filter(R=>R.slotKey===g.slotKeys[0]).length,v=w.useMemo(()=>{const R=Sc(g,S);let E=$.filter(R).map(P=>P.id);return r&&s.discs.get(r)&&(E=E.filter(P=>P!==r),E.unshift(r)),E},[g,S,$,r,s.discs]),{numShow:D,setTriggerElement:A}=ql(sd[C],v.length),L=w.useMemo(()=>v.slice(0,D),[v,D]),Y=v.length!==y?`${v.length}/${y}`:`${y}`,Z={numShowing:L.length,total:Y,t:c,namespace:"disc"},F=w.useCallback(R=>{Al.includes(R)?t(null):R&&t(R),o()},[t,o]);return i(gi,{open:a,onClose:o,containerProps:{maxWidth:"xl"},children:b(_e,{children:[b(ee,{sx:{py:1,display:"flex",alignItems:"center"},children:[i(O,{variant:"h6",children:c("tabEquip.swapDisc")}),i(hi,{onClick:o,sx:{ml:"auto"},children:i(ui,{})})]}),i(vt,{}),i(ee,{children:i(w.Suspense,{fallback:i(de,{variant:"rectangular",width:"100%",height:200}),children:i(Fl,{filterOption:g,filterOptionDispatch:x,filteredIds:v,disableSlotFilter:!0})})}),i(vt,{}),b(ee,{children:[i(M,{pb:1,display:"flex",justifyContent:"space-between",alignItems:"flex-end",flexWrap:"wrap",children:i(Ll,{showingTextProps:Z})}),i(M,{mt:1,children:i(w.Suspense,{fallback:i(de,{variant:"rectangular",width:"100%",height:1e3}),children:b(H,{container:!0,spacing:1,columns:{xs:2,md:3,lg:4},children:[r&&i(H,{item:!0,xs:1,children:i(_e,{bgt:"light",sx:{width:"100%",height:"100%"},children:i(li,{sx:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},onClick:()=>F(n),children:b(M,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[i(jl,{sx:{fontSize:"10em"}}),i(O,{children:c("disc:button.unequipDisc")})]})})})}),L.map(R=>i(H,{item:!0,xs:1,sx:E=>({...r===R&&{"> .MuiCard-root":{outline:`${E.spacing(.5)} solid ${E.palette.warning.main}`}}}),children:i(Mc,{disc:s.discs.get(R),onClick:r===R?void 0:()=>F(R)})},R))]})})}),v.length!==L.length&&i(de,{ref:R=>{R&&A(R)},sx:{borderRadius:1,mt:1},variant:"rectangular",width:"100%",height:100})]})]})})}function cd(e){return"fieldRef"in e}var yt={},ji;function ld(){if(ji)return yt;ji=1;var e=Hl();Object.defineProperty(yt,"__esModule",{value:!0}),yt.default=void 0;var t=e(Kl()),n=Wl(),a=(0,t.default)((0,n.jsx)("path",{d:"M6.99 11 3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z"}),"SwapHoriz");return yt.default=a,yt}var rd=ld();const Rt=Nl(rd),dd={xs:1,sm:2,md:3,lg:3,xl:3};function hd({setWengine:e,setDisc:t}){const{database:n}=te(),a=w.useContext(Ic),[o,c]=w.useState(),[s,r]=w.useState(""),d=w.useCallback(y=>{r(y)},[]),g=w.useCallback(y=>{c(y)},[]),x=Tc(a==null?void 0:a.equippedWengine),C=a?Q(a.key).specialty:Cc[0],S=zc(a==null?void 0:a.equippedDiscs),$=Gl(o);return i(M,{children:b(uc,{spacing:2,children:[i(w.Suspense,{fallback:!1,children:s&&i(Ul,{wengineId:s,footer:!0,onClose:()=>r(""),extraButtons:i(fd,{wengineId:(x==null?void 0:x.id)||"",wengineTypeKey:C,onChangeId:e})})}),i(w.Suspense,{fallback:!1,children:$&&i(Jl,{disc:$,show:!!o,onShow:()=>c(o),onClose:()=>c(void 0),cancelEdit:()=>c(void 0)})}),i(M,{children:x!=null&&x.id?i(Yl,{wengine:x,onEdit:()=>d(x.id),extraButtons:i(md,{wengineId:x.id,wengineTypeKey:C,onChangeId:e})}):i(ud,{wengineId:"",wengineTypeKey:C,onChangeId:e})}),i(M,{children:i(H,{item:!0,columns:dd,container:!0,spacing:1,children:!!S&&Object.entries(S).map(([y,v])=>i(H,{item:!0,xs:1,children:v!=null&&v.id?i(Mc,{disc:v,extraButtons:i(pd,{disc:v,slotKey:y,onChangeId:D=>t(y,D)}),onEdit:()=>g(v.id),onLockToggle:()=>n.discs.set(v.id,({lock:D})=>({lock:!D}))}):i(gd,{slotKey:y,onChangeId:D=>t(y,D)})},(v==null?void 0:v.id)||y))})})]})})}function ud({wengineId:e,wengineTypeKey:t,onChangeId:n}){const[a,o,c]=Ct();return b(St,{bgt:"light",sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[i(ee,{children:b(O,{children:[i(G,{src:xc(t)})," "]})}),i(vt,{}),b(M,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:[i(pi,{wengineId:e,wengineTypeKey:t,show:a,onClose:c,onChangeId:n}),i(be,{onClick:o,color:"info",sx:{borderRadius:"1em"},children:i(Rt,{sx:{height:100,width:100}})})]})]})}function gd({slotKey:e,onChangeId:t}){const[n,a,o]=Ct(),{t:c}=W("disc");return b(St,{bgt:"light",sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[i(ee,{children:i(O,{children:c("slotName",{slotKey:e})})}),i(vt,{}),b(M,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:[i(Gc,{disc:void 0,slotKey:e,show:n,onClose:o,onChangeId:t}),i(be,{onClick:a,color:"info",sx:{borderRadius:"1em"},children:i(Rt,{sx:{height:100,width:100}})})]})]})}function pd({disc:e,slotKey:t,onChangeId:n}){const{t:a}=W("page_characters"),[o,c,s]=Ct();return b(Dt,{children:[i(Bc,{title:i(O,{children:a("tabEquip.swapDisc")}),placement:"top",arrow:!0,children:i(be,{color:"info",size:"small",onClick:c,"aria-label":a("tabEquip.swapDisc"),children:i(Rt,{})})}),i(Gc,{disc:e,slotKey:t,show:o,onClose:s,onChangeId:n})]})}function md({wengineId:e,wengineTypeKey:t,onChangeId:n}){const{t:a}=W("page_characters"),[o,c,s]=Ct();return b(Dt,{children:[i(Bc,{title:i(O,{children:a("tabEquip.swapWengine")}),placement:"top",arrow:!0,children:i(be,{color:"info",size:"small",onClick:c,children:i(Rt,{})})}),i(pi,{wengineId:e,wengineTypeKey:t,onChangeId:n,show:o,onClose:s})]})}function fd({wengineId:e,wengineTypeKey:t,onChangeId:n}){const{t:a}=W("page_characters"),[o,c,s]=Ct();return b(Dt,{children:[i(be,{color:"info",onClick:c,startIcon:i(Rt,{}),children:a("tabEquip.swapWengine")}),i(pi,{wengineId:e,wengineTypeKey:t,onChangeId:n,show:o,onClose:s})]})}function $d({skillKey:e}){const{database:t}=te(),{t:n}=W("page_characters"),a=an(),{[e]:o=0,promotion:c=0,key:s}=a??{},r=w.useCallback(d=>s&&t.chars.set(s,{[e]:d}),[t,s,e]);return i(Rc,{fullWidth:!0,title:n(e,{level:o}),color:"primary",startIcon:i(G,{src:ae(e),size:1.75,sideMargin:!0}),children:di(1,Zl[c]).map(d=>i(Dc,{selected:o===d,disabled:o===d,onClick:()=>r(d),children:n(e,{level:d})},d))})}function sn(){const e=w.useContext(mi),t=w.useContext(Xl);return w.useMemo(()=>e==null?void 0:e.withTag(t),[e,t])}const K=(e,t)=>i(Xt,{ns:"sheet",key18:e,values:t});function h(e,t){return[(n,a)=>i(Xt,{ns:`${e}_${t}_gen`,key18:n,values:a}),(n,a)=>i(Xt,{ns:`${e}_${t}`,key18:n,values:a})]}function l(e){return{title:i(cn,{tag:e}),fieldRef:e}}function yd(e){if(!e)return"";const{et:t,q:n,qt:a,name:o}=e;return t==="own"&&a==="formula"&&n!=="base"?o??n??"":n??""}const _d={initial:"Initial",combat:"Combat",final:"Final",base:"Base"};function cn({tag:e,showPercent:t,preventRecursion:n}){return i($e,{color:By(e),children:i(wd,{tag:e,showPercent:t,preventRecursion:n})})}function jy({tag:e,showPercent:t}){return b(Dt,{children:[i(cn,{tag:e,showPercent:t}),Oy(e).map(n=>i(si,{children:tn[n]},n)),e.attribute&&i(si,{color:e.attribute,children:i(Jr,{attribute:e.attribute})})]})}const bd=["hp","hp_","atk","atk_","def","def_"],xd=e=>bd.includes(e),Hi={dmg_:"DMG",common_dmg_:"DMG",defIgn_:"DEF Ignore",resIgn_:"Res Ignore",dazeInc_:"Daze Increase"};function wd({tag:e,showPercent:t,preventRecursion:n}){var s;const a=sn(),o=(s=Py.subset(e)[0])==null?void 0:s.title;if(o&&!n)return o;if(e.qt==="cond"&&e.q&&e.sheet&&a){const r=ci.get(`${e.sheet}:${e.q}`);if(r)return Ql(r.label,a,a==null?void 0:a.compute(new er(e,"max")).val)}const c=yd(e);if(xd(c))return b("span",{children:[i(nr,{statKey:c,iconProps:tr})," ",b("span",{children:[(e.qt&&_d[e.qt])??e.qt," ",ir[c],t&&Ec(c)]})]});if(Hi[c]){const r=[...e.attribute?[le[e.attribute]]:[],...e.damageType1?[tn[e.damageType1]]:[],...e.damageType2?[tn[e.damageType2]]:[],Hi[c]];return i("span",{children:r.join(" ")})}return i(Gt,{statKey:c,showPercent:t})}function vd(){const e=sn();return i(St,{children:i(ee,{children:e==null?void 0:e.listFormulas(q.listing.formulas).map((t,n)=>i(kd,{read:t},n))})})}function kd({read:e}){var v,D,A,L,Y,Z,F;const t=sn(),{setRead:n}=w.useContext(ar),a=an(),o=qr(a==null?void 0:a.key),c=e.tag.sheet===((v=o==null?void 0:o.target)==null?void 0:v.sheet)&&e.tag.name===((D=o==null?void 0:o.target)==null?void 0:D.name)||((A=o==null?void 0:o.target)==null?void 0:A.q)===e.tag.q,s=w.useMemo(()=>{var R,E,P,X;return e.tag.sheet===((R=o==null?void 0:o.target)==null?void 0:R.sheet)&&e.tag.name===((E=o==null?void 0:o.target)==null?void 0:E.name)?or(e.tag,(P=o==null?void 0:o.target)==null?void 0:P.damageType1,(X=o==null?void 0:o.target)==null?void 0:X.damageType2):e.tag},[e.tag,(L=o==null?void 0:o.target)==null?void 0:L.sheet,(Y=o==null?void 0:o.target)==null?void 0:Y.name,(Z=o==null?void 0:o.target)==null?void 0:Z.damageType1,(F=o==null?void 0:o.target)==null?void 0:F.damageType2]),r=w.useMemo(()=>({...e,tag:s}),[s,e]),d=t==null?void 0:t.compute(r),g=s.name||s.q,{statHighlight:x,setStatHighlight:C}=w.useContext(sr),S=s.name?"":s.attribute?`${s.attribute}_${s.q}`:s.q==="cappedCrit_"?"crit_":s.q,$=S?cr(x,S):!1;if(!d)return null;const y=lr(d.val,Ec(g??""));return b(M,{onMouseEnter:()=>S&&C(S),onMouseLeave:()=>C(""),sx:{display:"flex",gap:1,alignItems:"center",p:.5,borderRadius:.5,backgroundColor:c?"rgba(0,200,0,0.2)":void 0,position:"relative","::after":{content:'""',position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:.5,backgroundColor:rr($),transition:"background-color 0.3s ease-in-out",pointerEvents:"none"}},children:[i(M,{sx:{flexGrow:1},children:i(cn,{tag:s})}),y,i(dr,{tag:s,onClick:()=>{n(r)}})]})}function Hy({characterKey:e,onClose:t}){return i(gi,{open:!!e,onClose:t,children:i(w.Suspense,{fallback:i(de,{variant:"rectangular",width:"100%",height:1e3}),children:e&&i(Sd,{characterKey:e,onClose:t},e)})})}function Sd({characterKey:e,onClose:t}){const n=on(e);return i(_e,{children:i(ee,{sx:{display:"flex",flexDirection:"column",gap:1},children:i(w.Suspense,{fallback:i(de,{variant:"rectangular",width:"100%",height:1e3}),children:n?i(Ic.Provider,{value:n,children:i(Dd,{onClose:t})}):i(de,{variant:"rectangular",width:"100%",height:1e3})})})})}const Cd={cardWidth:"500px",charImgWidth:"75%",iconsSize:1.5,isEditing:!0,charNameWidth:"166px",charNameVariant:"h6",scrollingBgSize:"220px"};function Dd({onClose:e}){const{t}=W(["page_characters"]),n=hr(),{database:a}=te(),o=an(),{key:c,equippedDiscs:s,equippedWengine:r}=o,d=w.useCallback(async()=>{const g=t(`${c}`);window.confirm(t("removeCharacter",{value:g}))&&(a.chars.remove(c),n("/characters"))},[a,n,c,t]);return b(M,{display:"flex",flexDirection:"column",gap:1,children:[b(M,{display:"flex",gap:1,children:[i(be,{color:"error",onClick:()=>d(),startIcon:i(ur,{}),sx:{marginLeft:"auto"},children:t("characterEditor.delete")}),!!e&&i(hi,{onClick:e,children:i(ui,{})})]}),i(M,{children:b(H,{container:!0,spacing:1,sx:{justifyContent:"center"},children:[i(H,{item:!0,xs:6,sm:4,md:4,lg:4,xl:4,children:b(_e,{sx:{height:"100%",display:"flex",flexDirection:"column",gap:1},children:[i(Yr,{characterKey:c,charCardConfig:Cd}),i(M,{sx:{px:1},children:i(gr,{level:o.level,milestone:o.promotion,setBoth:({level:g,milestone:x})=>a.chars.set(c,{level:g,promotion:x})})}),i(vd,{}),i(Qr,{mindscape:o.mindscape,setMindscape:g=>a.chars.set(c,{mindscape:g})})]})}),b(H,{item:!0,xs:6,sm:8,md:8,lg:8,xl:8,sx:{display:"flex",flexDirection:"column",gap:1},children:[i(M,{children:b(H,{container:!0,columns:3,spacing:1,children:[ri.map(g=>i(H,{item:!0,xs:1,children:i($d,{skillKey:g},g)},g)),i(H,{item:!0,xs:1,children:i(od,{})},"core")]})}),i(M,{children:i(hd,{setWengine:g=>{g?a.wengines.set(g,{location:c}):r&&a.wengines.set(r,{location:""})},setDisc:(g,x)=>{x?a.discs.set(x,{location:c}):s[g]&&a.discs.set(s[g],{location:""})}})})]})]})})]})}function Ky({character:e,charOpt:t,wengineId:n,discIds:a,children:o}){const c=Rd(e,n,a),s=w.useMemo(()=>Wc([...Kc([e.key]),...c,Yt.common.critMode.add(t.critMode),J.common.lvl.add(t.enemyLvl),J.common.def.add(t.enemyDef),J.common.isStunned.add(t.enemyisStunned?1:0),J.common.stun_.add(t.enemyStunMultiplier/100),J.common.unstun_.add(1),...t.conditionals.flatMap(({sheet:d,src:g,dst:x,condKey:C,condValue:S})=>Ut("preset0",Oc(d,g,x)(C,S))),...t.bonusStats.filter(({disabled:d})=>!d).flatMap(({tag:d,value:g})=>Ut("preset0",{tag:{...d,src:e.key,sheet:"agg",et:"own"},value:Oi(Pi(g,d.q??""))})),...t.enemyStats.flatMap(({tag:d,value:g})=>Ut("preset0",{tag:{...d,qt:"common",et:"enemy",sheet:"agg"},value:Oi(Pi(g,d.q??""))}))]),[c,t,e.key]),r=w.useMemo(()=>s&&new Map,[s]);return i(pr.Provider,{value:r,children:i(mi.Provider,{value:s,children:o})})}function Rd(e,t,n){const a=Tc(t),o=zc(n),c=w.useMemo(()=>Wr(a),[a]),s=w.useMemo(()=>Nr(Object.values(o).filter(mr)),[o]);return w.useMemo(()=>Lc(e.key,...jc(e),...c,...s),[e,c,s])}function Wy({character:e,conditionals:t,children:n}){const a=w.useMemo(()=>Wc([...Kc([e.key]),...Lc(e.key,...jc(e),...Hc({},Pc(yc,()=>4)),V.sheet("agg").reread(V.sheet("wengine")),q.wengine.lvl.add(60),q.wengine.modification.add(5),q.wengine.phase.add(1),...$c.map(o=>q.common.count.sheet(o).add(1))),Yt.common.critMode.add("avg"),J.common.lvl.add(100),J.common.def.add(900),J.common.isStunned.add(0),J.common.stun_.add(1.5),J.common.unstun_.add(1),...t.flatMap(({sheet:o,src:c,dst:s,condKey:r,condValue:d})=>Ut("preset0",Oc(o,c,s)(r,d)))]),[e,t]);return i(mi.Provider,{value:a,children:n})}function k(e,t={}){return{...Md(e,t==null?void 0:t.perSkillAbility),core:Td(e,t==null?void 0:t.core,t==null?void 0:t.ability),m1:ge(e,1,t==null?void 0:t.m1),m2:ge(e,2,t==null?void 0:t.m2),m3:ge(e,3,t==null?void 0:t.m3),m4:ge(e,4,t==null?void 0:t.m4),m5:ge(e,5,t==null?void 0:t.m5),m6:ge(e,6,t==null?void 0:t.m6)}}function I(e){return{title:i(cn,{tag:e.tag,preventRecursion:!0}),fieldRef:e.tag}}function Md(e,t){const n=_.char[e],a=ue[e],[o,c]=h("char",e);return Pc(ri,s=>({title:s,img:ae(`${s}Flat`),documents:Object.keys(n[s]).flatMap(r=>{var d;return[{type:"text",header:{icon:i(G,{src:ae(`${s}Flat`),size:1.5}),text:o(`${s}.${r}.name`)},text:o(`${s}.${r}.desc`)},{type:"fields",fields:Object.values(a).filter(g=>g.name.includes(r)).map(g=>({title:Id(e,s,g.name),fieldRef:g.tag}))},...((d=t==null?void 0:t[s])==null?void 0:d[r])??[]]})}))}function Id(e,t,n){const[a,o,c]=n.split("_");return K(c,{val:`$t(char_${e}_gen:${t}.${a}.params.${o})`})}function Td(e,t=[],n=[]){const[a,o]=h("char",e);return{title:"core",documents:[{type:"text",header:{icon:i(G,{src:ae("coreFlat"),size:1.5}),text:a("core.name")},text:c=>a(`core.desc.${c.compute(q.char.core).val}`)},...t,{type:"text",header:{icon:i(G,{src:ae("coreFlat"),size:1.5}),text:a("ability.name")},text:a("ability.desc")},...n]}}function ge(e,t,n=[]){const[a,o]=h("char",e);return{title:`mindscape${t}`,documents:[{type:"text",header:{icon:i(G,{src:fr(t),size:1.5}),text:a(`mindscapes.${t}.name`)},text:b(Dt,{children:[a(`mindscapes.${t}.desc`),i("br",{}),i("br",{}),i("i",{children:a(`mindscapes.${t}.flavor`)})]})},...n]}}const ln="Anby",[,jt]=h("char",ln),qn=p[ln],pe=u[ln],zd=k(ln,{core:[{type:"conditional",conditional:{label:jt("coreCond"),metadata:qn.core_after3rdBasic,fields:[{title:jt("core_dazeInc_"),fieldRef:pe.core_after3rdBasic_dazeInc_.tag}]}}],m1:[{type:"conditional",conditional:{label:jt("m1Cond"),metadata:qn.m1After4thBasicHit,fields:[I(pe.m1_after4thHit_energyRegen_)]}}],m2:[{type:"fields",fields:[I(pe.m2_stunned_basic_dmg_),I(pe.m2_unstunned_ex_dazeInc_)]}],m6:[{type:"conditional",conditional:{label:jt("m6Cond"),metadata:qn.m6ChargeConsumed,fields:[I(pe.m6_charge_basic_dmg_),I(pe.m6_charge_exSpecial_dmg_)]}}]}),Bd="Anton",Ed=k(Bd),Od="AstraYao",Pd=k(Od),Vd="Ben",qd=k(Vd),Ad="Billy",Fd=k(Ad),xe="Burnice",[,N]=h("char",xe),Ki=p[xe],ie=u[xe],Ht=ue[xe],Ld=_.char[xe],jd=k(xe,{core:[{type:"fields",fields:[{title:N("core_afterburn_dmg"),fieldRef:Ht.core_afterburn_dmg.tag},{title:N("core_afterburn_anomBuildup"),fieldRef:Ht.core_afterburn_anomBuildup.tag},{title:N("core_afterburn_dmg_"),fieldRef:ie.core_afterburn_dmg_.tag}]}],ability:[{type:"fields",fields:[I(ie.ability_fire_anomBuildup_)]}],m1:[{type:"fields",fields:[{title:N("m1_afterburn_mv_mult"),fieldValue:Ld.m1.afterburn_dmg*100,unit:"%"},{title:N("m1_afterburn_anomBuildup"),fieldRef:ie.m1_afterburn_fire_anomBuildup_.tag}]}],m2:[{type:"conditional",conditional:{label:N("m2Cond"),metadata:Ki.thermal_penetration,fields:[I(ie.m2_pen_)]}}],m4:[{type:"fields",fields:[{title:N("m4_exSpecial_crit_"),fieldRef:ie.m4_exSpecial_crit_.tag},{title:N("m4_assistSkill_crit_"),fieldRef:ie.m4_assistSkill_crit_.tag}]}],m6:[{type:"fields",fields:[{title:N("m6_additional_afterburn_dmg"),fieldRef:Ht.m6_additional_afterburn_dmg.tag}]},{type:"conditional",conditional:{label:N("m6Cond"),metadata:Ki.exSpecial_active,fields:[I(ie.m6_burn_fire_resIgn_),{title:N("m6_fire_resIgn"),fieldRef:ie.m6_fire_resIgn_.tag},{title:N("m6_additional_burn_dmg"),fieldRef:Ht.m6_additional_burn_dmg.tag}]}}]}),Hd="Caesar",Kd=k(Hd),Wd="Corin",Nd=k(Wd),Gd="Ellen",Ud=k(Gd),Mt="Evelyn",[,oe]=h("char",Mt),An=p[Mt],me=u[Mt],Wi=ue[Mt],Jd=k(Mt,{core:[{type:"conditional",conditional:{label:oe("coreCond"),metadata:An.binding_seal,fields:[I(me.core_crit_)]}}],ability:[{type:"fields",fields:[{title:oe("ability_dmg_"),fieldRef:me.ability_chain_ult_dmg_.tag},{title:oe("ability_mv_mult"),fieldRef:me.ability_chainSkill_mv_mult.tag}]}],m1:[{type:"conditional",conditional:{label:oe("m1Cond"),metadata:An.enemy_bound,fields:[I(me.m1_defIgn_)]}}],m2:[{type:"fields",fields:[I(me.m2_atk_)]}],m4:[{type:"fields",fields:[{title:oe("m4_shield"),fieldRef:Wi.m4_shield.tag}]},{type:"conditional",conditional:{label:oe("m4Cond"),metadata:An.m4_shield_exists,fields:[I(me.m4_crit_dmg_)]}}],m6:[{type:"fields",fields:[{title:oe("m6_follow_up_dmg"),fieldRef:Wi.m6_follow_up_dmg_.tag}]}]}),Yd="Grace",Zd=k(Yd),Xd="Harumasa",Qd=k(Xd),eh="Hugo",th=k(eh),nh="Jane",ih=k(nh),ah="JuFufu",oh=k(ah),sh="Koleda",ch=k(sh),lh="Lighter",rh=k(lh),dh="Lucy",hh=k(dh),uh="Lycaon",gh=k(uh),ph="Miyabi",mh=k(ph),fh="Nekomata",$h=k(fh),rn="Nicole",[,Fn]=h("char",rn),Ni=p[rn],_t=u[rn],yh=k(rn,{core:[{type:"conditional",conditional:{label:Fn("coreCond"),metadata:Ni.bulletsOrFieldHit,fields:[I(_t.core_defRed_)]}}],ability:[{type:"fields",fields:[I(_t.ability_ether_dmg_)]}],m1:[{type:"fields",fields:[I(_t.m1_exSpecial_dmg_),{title:Fn("m1_exSpecial_anomBuildup"),fieldRef:_t.m1_exSpecial_anomBuildup_.tag}]}],m6:[{type:"conditional",conditional:{label:Fn("m6Cond"),metadata:Ni.fieldHitsEnemy,fields:[I(_t.m6_crit_)]}}]}),_h="PanYinhu",bh=k(_h),xh="Piper",wh=k(xh),vh="Pulchra",kh=k(vh),Sh="Qingyi",Ch=k(Sh),Dh="Rina",Rh=k(Dh),Mh="Seth",Ih=k(Mh),Th="Soldier0Anby",zh=k(Th),Bh="Soldier11",Eh=k(Bh),Oh="Soukaku",Ph=k(Oh),It="Trigger",[,se]=h("char",It),Gi=p[It],bt=u[It],Ln=ue[It],Vh=k(It,{core:[{type:"conditional",conditional:{label:se("coreCond"),metadata:Gi.aftershock_hit,fields:[I(bt.core_stun_)]}}],ability:[{type:"fields",fields:[{title:se("ability_dazeInc_"),fieldRef:bt.ability_aftershock_dazeInc_.tag}]}],m1:[{type:"fields",fields:[I(bt.m1_stun_)]}],m2:[{type:"conditional",conditional:{label:se("m2Cond"),metadata:Gi.hunters_gaze,fields:[I(bt.m2_crit_dmg_)]}}],m4:[{type:"fields",fields:[{title:se("m4_disconnect_dmg"),fieldRef:Ln.m4_disconnect_dmg.tag},{title:se("m4_disconnect_daze"),fieldRef:Ln.m4_disconnect_daze.tag}]}],m6:[{type:"fields",fields:[{title:se("m6_armor_break_rounds_dmg"),fieldRef:Ln.m6_armor_break_rounds_dmg.tag},{title:se("m6_armor_break_rounds_dmg_"),fieldRef:bt.m6_armor_break_rounds_dmg_.tag}]}]}),qh="Vivian",Ah=k(qh),Fh="Yanagi",Lh=k(Fh),jh="Yixuan",Hh=k(jh),Tt="ZhuYuan",[,ce]=h("char",Tt),jn=p[Tt],xt=u[Tt],Kh=ue[Tt],Wh=k(Tt,{core:[{type:"fields",fields:[{title:ce("core_dmg_"),fieldRef:xt.core_dmg_.tag}]}],ability:[{type:"conditional",conditional:{label:ce("abilityCond"),metadata:jn.ex_chain_ult_used,fields:[I(xt.ability_crit_)]}}],m2:[{type:"conditional",conditional:{label:ce("m2SuppresiveModeCond"),metadata:jn.suppresive_mode,fields:[I(xt.m2_dmg_red_)]}},{type:"conditional",conditional:{label:ce("m2BasicDashEtherCond"),metadata:jn.shotshells_hit,fields:[{title:ce("m2_basic_dash_ether_dmg_"),fieldRef:xt.m2_basic_dash_ether_dmg_.tag}]}}],m4:[{type:"fields",fields:[{title:ce("m4_ether_resIgn_"),fieldRef:xt.m4_basic_dash_ether_res_ign_.tag}]}],m6:[{type:"fields",fields:[{title:ce("m6_ether_afterglow"),fieldRef:Kh.m6_ether_afterglow.tag}]}]}),Nh={Anby:zd,Anton:Ed,AstraYao:Pd,Ben:qd,Billy:Fd,Burnice:jd,Caesar:Kd,Corin:Nd,Ellen:Ud,Evelyn:Jd,Grace:Zd,Harumasa:Qd,Hugo:th,Jane:ih,JuFufu:oh,Koleda:ch,Lighter:rh,Lucy:hh,Lycaon:gh,Miyabi:mh,Nekomata:$h,Nicole:yh,Piper:wh,Pulchra:kh,Qingyi:Ch,Rina:Rh,Seth:Ih,Soldier0Anby:zh,Soldier11:Eh,Soukaku:Ph,Trigger:Vh,Vivian:Ah,Yanagi:Lh,PanYinhu:bh,Yixuan:Hh,ZhuYuan:Wh},dn="AstralVoice",[Ui,Gh]=h("disc",dn),Ji=T(dn),Uh=p[dn],Jh=u[dn],Yh={2:{title:i(z,{}),img:Ji,documents:[{type:"text",text:Ui("desc2")}]},4:{title:i(B,{}),img:Ji,documents:[{type:"text",text:Ui("desc4")},{type:"conditional",conditional:{label:Gh("set4_cond"),metadata:Uh.astral,fields:[l(Jh.set4_team_dmg_.tag)]}}]}},hn="BranchBladeSong",[Yi,Zh]=h("disc",hn),Zi=T(hn),Xh=p[hn],Xi=u[hn],Qh={2:{title:i(z,{}),img:Zi,documents:[{type:"text",text:Yi("desc2")}]},4:{title:i(B,{}),img:Zi,documents:[{type:"text",text:Yi("desc4")},{type:"fields",fields:[l(Xi.set4_passive.tag)]},{type:"conditional",conditional:{label:Zh("set4_cond"),metadata:Xh.apply_or_trigger,fields:[l(Xi.set4_cond.tag)]}}]}},un="ChaosJazz",[Qi,eu]=h("disc",un),ea=T(un),tu=p[un],Kt=u[un],nu={2:{title:i(z,{}),img:ea,documents:[{type:"text",text:Qi("desc2")}]},4:{title:i(B,{}),img:ea,documents:[{type:"text",text:Qi("desc4")},{type:"fields",fields:[l(Kt.set4_passive_fire_dmg_.tag),l(Kt.set4_passive_electric_dmg_.tag)]},{type:"conditional",conditional:{label:eu("set4_cond"),metadata:tu.while_off_field,fields:[{title:"EX Special Attack DMG",fieldRef:Kt.set4_off_field_special_dmg_.tag},{title:"Assist Attack Attack DMG",fieldRef:Kt.set4_off_field_assist_dmg_.tag}]}}]}},gn="ChaoticMetal",[ta,iu]=h("disc",gn),na=T(gn),au=p[gn],ia=u[gn],ou={2:{title:i(z,{}),img:na,documents:[{type:"text",text:ta("desc2")}]},4:{title:i(B,{}),img:na,documents:[{type:"text",text:ta("desc4")},{type:"fields",fields:[l(ia.set4_passive.tag)]},{type:"conditional",conditional:{label:iu("set4_cond"),metadata:au.trigger_corruption,fields:[l(ia.set4_cond_trigger_corruption.tag)]}}]}},pn="FangedMetal",[aa,su]=h("disc",pn),oa=T(pn),cu=p[pn],lu=u[pn],ru={2:{title:i(z,{}),img:oa,documents:[{type:"text",text:aa("desc2")}]},4:{title:i(B,{}),img:oa,documents:[{type:"text",text:aa("desc4")},{type:"conditional",conditional:{label:su("set4_cond"),metadata:cu.inflict_assault,fields:[l(lu.set4_cond_inflict_assault.tag)]}}]}},mn="FreedomBlues",[sa,du]=h("disc",mn),ca=T(mn),hu=p[mn],uu=u[mn],gu={2:{title:i(z,{}),img:ca,documents:[{type:"text",text:sa("desc2")}]},4:{title:i(B,{}),img:ca,documents:[{type:"text",text:sa("desc4")},{type:"conditional",conditional:{label:du("set4_cond"),metadata:hu.exSpecialHit,fields:[l(uu.anomBuildupRes_.tag)]}}]}},fn="HormonePunk",[la,pu]=h("disc",fn),ra=T(fn),mu=p[fn],fu=u[fn],$u={2:{title:i(z,{}),img:ra,documents:[{type:"text",text:la("desc2")}]},4:{title:i(B,{}),img:ra,documents:[{type:"text",text:la("desc4")},{type:"conditional",conditional:{label:pu("set4_cond"),metadata:mu.entering_combat,fields:[l(fu.set4_cond_entering_combat.tag)]}}]}},$n="InfernoMetal",[da,yu]=h("disc",$n),ha=T($n),_u=p[$n],bu=u[$n],xu={2:{title:i(z,{}),img:ha,documents:[{type:"text",text:da("desc2")}]},4:{title:i(B,{}),img:ha,documents:[{type:"text",text:da("desc4")},{type:"conditional",conditional:{label:yu("set4_cond"),metadata:_u.hitting_burning_enemy,fields:[l(bu.set4_cond_hitting_burning_enemy.tag)]}}]}},yn="KingOfTheSummit",[ua,Ny]=h("disc",yn),ga=T(yn),wu=p[yn],pa=u[yn],vu={2:{title:i(z,{}),img:ga,documents:[{type:"text",text:ua("desc2")},{type:"fields",fields:[l(pa.set2.tag)]}]},4:{title:i(B,{}),img:ga,documents:[{type:"text",text:ua("desc4")},{type:"conditional",conditional:{metadata:wu.launchExSpecialOrChain,label:K("uponLaunch.2",{val1:"$t(skills.exSpecial)",val2:"$t(skills.chain)"}),fields:[l(pa.set4_team_launchExSpecialOrChain_crit_dmg_.tag)]}}]}},_n="PhaethonsMelody",[ma,fa]=h("disc",_n),$a=T(_n),ya=p[_n],_a=u[_n],ku={2:{title:i(z,{}),img:$a,documents:[{type:"text",text:ma("desc2")}]},4:{title:i(B,{}),img:$a,documents:[{type:"text",text:ma("desc4")},{type:"conditional",conditional:{label:fa("set4_cond_squad_use_ex"),metadata:ya.squad_use_ex,fields:[l(_a.set4_squad_anomProf.tag)]}},{type:"conditional",conditional:{label:fa("set4_cond_not_char_use_ex"),metadata:ya.not_char_use_ex,fields:[l(_a.set4_not_self_ether_.tag)]}}]}},bn="PolarMetal",[ba,Su]=h("disc",bn),xa=T(bn),Cu=p[bn],wa=u[bn],Du={2:{title:i(z,{}),img:xa,documents:[{type:"text",text:ba("desc2")}]},4:{title:i(B,{}),img:xa,documents:[{type:"text",text:ba("desc4")},{type:"conditional",conditional:{label:Su("set4_cond"),metadata:Cu.freeze_shatter}},{type:"fields",fields:[{title:"Basic Attack DMG",fieldRef:wa.set4_basic_dmg_.tag},{title:"Dash Attack DMG",fieldRef:wa.set4_dash_dmg_.tag}]}]}},xn="ProtoPunk",[va,Ru]=h("disc",xn),ka=T(xn),Mu=p[xn],Iu=u[xn],Tu={2:{title:i(z,{}),img:ka,documents:[{type:"text",text:va("desc2")}]},4:{title:i(B,{}),img:ka,documents:[{type:"text",text:va("desc4")},{type:"conditional",conditional:{label:Ru("set4_cond"),metadata:Mu.def_assist_or_evasive_assist,fields:[l(Iu.set4_cond_def_assist_or_evasive_assist_dmg_.tag)]}}]}},wn="PufferElectro",[Sa,zu]=h("disc",wn),Ca=T(wn),Bu=p[wn],Da=u[wn],Eu={2:{title:i(z,{}),img:Ca,documents:[{type:"text",text:Sa("desc2")}]},4:{title:i(B,{}),img:Ca,documents:[{type:"text",text:Sa("desc4")},{type:"fields",fields:[{title:"Ultimate DMG",fieldRef:Da.set4_dmg_.tag}]},{type:"conditional",conditional:{label:zu("set4_cond"),metadata:Bu.launching_ult,fields:[l(Da.set4_cond_launching_ult_atk_.tag)]}}]}},vn="ShadowHarmony",[Ra,Ou]=h("disc",vn),Ma=T(vn),Pu=p[vn],Ia=u[vn],Vu={2:{title:i(z,{}),img:Ma,documents:[{type:"text",text:Ra("desc2")}]},4:{title:i(B,{}),img:Ma,documents:[{type:"text",text:Ra("desc4")},{type:"conditional",conditional:{label:Ou("set4_cond_stacks"),metadata:Pu.stacks,fields:[l(Ia.set4_stack_atk_.tag),l(Ia.set4_stack_crit_.tag)]}}]}},yi="ShockstarDisco",[Ta,Gy]=h("disc",yi),za=T(yi),Hn=u[yi],qu={2:{title:i(z,{}),img:za,documents:[{type:"text",text:Ta("desc2")}]},4:{title:i(B,{}),img:za,documents:[{type:"text",text:Ta("desc4")},{type:"fields",fields:[{title:"Basic Attack Daze",fieldRef:Hn.set4_basic_daze_.tag},{title:"Dash Attack Daze",fieldRef:Hn.set4_dash_daze_.tag},{title:"Dodge Counter Daze",fieldRef:Hn.set4_dodgeCounter_daze_.tag}]}]}},Uc="SoulRock",[Ba,Uy]=h("disc",Uc),Ea=T(Uc),Au={2:{title:i(z,{}),img:Ea,documents:[{type:"text",text:Ba("desc2")}]},4:{title:i(B,{}),img:Ea,documents:[{type:"text",text:Ba("desc4")}]}},kn="SwingJazz",[Oa,Fu]=h("disc",kn),Pa=T(kn),Lu=p[kn],ju=u[kn],Hu={2:{title:i(z,{}),img:Pa,documents:[{type:"text",text:Oa("desc2")}]},4:{title:i(B,{}),img:Pa,documents:[{type:"text",text:Oa("desc4")},{type:"conditional",conditional:{label:Fu("set4_cond"),metadata:Lu.chain_or_ult,fields:[l(ju.set4_cond_chain_or_ult.tag)]}}]}},Sn="ThunderMetal",[Va,Ku]=h("disc",Sn),qa=T(Sn),Wu=p[Sn],Nu=u[Sn],Gu={2:{title:i(z,{}),img:qa,documents:[{type:"text",text:Va("desc2")}]},4:{title:i(B,{}),img:qa,documents:[{type:"text",text:Va("desc4")},{type:"conditional",conditional:{label:Ku("set4_cond"),metadata:Wu.enemy_shocked,fields:[l(Nu.set4_cond_enemy_shocked_atk_.tag)]}}]}},Cn="WoodpeckerElectro",[Aa,Uu]=h("disc",Cn),Fa=T(Cn),Ju=p[Cn],Yu=u[Cn],Zu={2:{title:i(z,{}),img:Fa,documents:[{type:"text",text:Aa("desc2")}]},4:{title:i(B,{}),img:Fa,documents:[{type:"text",text:Aa("desc4")},{type:"conditional",conditional:{label:Uu("set4_cond"),metadata:Ju.crit_basic_dodge_ex,fields:[l(Yu.set4_cond_crit_basic_dodge_ex_atk_.tag)]}}]}},Dn="YunkuiTales",[La,Jy]=h("disc",Dn),ja=T(Dn),Xu=p[Dn],Kn=u[Dn],Qu={2:{title:i(z,{}),img:ja,documents:[{type:"text",text:La("desc2")},{type:"fields",fields:[l(Kn.set2.tag)]}]},4:{title:i(B,{}),img:ja,documents:[{type:"text",text:La("desc4")},{type:"conditional",conditional:{metadata:Xu.uponLaunchExSpecialChainOrUlt,label:K("uponLaunch.3",{val1:"$t(skills.exSpecial)",val2:"$t(skills.chain)",val3:"$t(skills.ult)"}),fields:[l(Kn.set4_crit_.tag),l(Kn.set4_sheer_dmg_.tag)]}}]}},eg={AstralVoice:Yh,BranchBladeSong:Qh,ChaosJazz:nu,ChaoticMetal:ou,FangedMetal:ru,FreedomBlues:gu,HormonePunk:$u,InfernoMetal:xu,KingOfTheSummit:vu,PhaethonsMelody:ku,PolarMetal:Du,ProtoPunk:Tu,PufferElectro:Eu,ShadowHarmony:Vu,ShockstarDisco:qu,SoulRock:Au,SwingJazz:Hu,ThunderMetal:Gu,WoodpeckerElectro:Zu,YunkuiTales:Qu};function z(){return"2-Set"}function B(){return"4-Set"}function m({wKey:e,children:t}){const n=sn();let a=1;return n&&n.compute(q.common.count.sheet(e)).val&&(a=n.compute(q.wengine.phase).val??1),t(a)}const we="BashfulDemon",[Ha,tg]=h("wengine",we),ng=_.wengine[we],ig=f(we,"icon"),ag=p[we],Ka=u[we],og={title:Ha("phase"),img:ig,documents:[{type:"text",text:i(m,{wKey:we,children:e=>Ha(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Ka.passive_ice_dmg_.tag)]},{type:"conditional",conditional:{label:tg("cond"),metadata:ag.launch_ex_attack,fields:[l(Ka.team_atk_.tag),{title:"Duration",fieldValue:ng.duration}]}}]},ve="BigCylinder",[Wa,Yy]=h("wengine",ve),sg=_.wengine[ve],cg=f(ve,"icon"),lg=u[ve],rg=ue[ve],dg={title:Wa("phase"),img:cg,documents:[{type:"text",text:i(m,{wKey:ve,children:e=>Wa(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(lg.passive_dmg_red_.tag)]},{type:"fields",fields:[{title:"Additional DMG",fieldRef:rg.damage.tag},{title:"Cooldown",fieldValue:sg.cooldown}]}]},ke="BlazingLaurel",[Na,Ga]=h("wengine",ke),Ua=_.wengine[ke],hg=f(ke,"icon"),Ja=p[ke],Wn=u[ke],ug={title:Na("phase"),img:hg,documents:[{type:"text",text:i(m,{wKey:ke,children:e=>Na(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Ga("cond1"),metadata:Ja.quickOrPerfectAssistUsed,fields:[l(Wn.impact_.tag),{title:"Duration",fieldValue:Ua.duration}]}},{type:"conditional",conditional:{label:Ga("cond2"),metadata:Ja.wilt,fields:[l(Wn.crit_dmg_ice_.tag),l(Wn.crit_dmg_fire_.tag),{title:"Duration",fieldValue:Ua.wilt_duration}]}}]},Se="BoxCutter",[Ya,gg]=h("wengine",Se),pg=_.wengine[Se],mg=f(Se,"icon"),fg=p[Se],Za=u[Se],$g={title:Ya("phase"),img:mg,documents:[{type:"text",text:i(m,{wKey:Se,children:e=>Ya(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:gg("cond"),metadata:fg.launchedAftershock,fields:[l(Za.physical_dmg_.tag),l(Za.daze_.tag),{title:"Duration",fieldValue:pg.duration}]}}]},zt="BunnyBand",[Xa,yg]=h("wengine",zt),_g=f(zt,"icon"),bg=p[zt],Qa=u[zt],xg={title:Xa("phase"),img:_g,documents:[{type:"text",text:i(m,{wKey:zt,children:e=>Xa(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Qa.passive_hp_.tag)]},{type:"conditional",conditional:{label:yg("cond"),metadata:bg.wearerShielded,fields:[l(Qa.atk_.tag)]}}]},he="CannonRotor",[eo,Zy]=h("wengine",he),wg=_.wengine[he],vg=f(he,"icon"),kg=ue[he],Sg=u[he],Cg={title:eo("phase"),img:vg,documents:[{type:"text",text:i(m,{wKey:he,children:e=>eo(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Sg.passive_atk_.tag)]},{type:"fields",fields:[{title:"Additional DMG",fieldRef:kg.damage.tag},{title:"Cooldown",fieldValue:i(m,{wKey:he,children:e=>wg.cooldown[e]})}]}]},Ce="CinderCobalt",[to]=h("wengine",Ce),no=_.wengine[Ce],Dg=f(Ce,"icon"),Rg=p[Ce],Mg=u[Ce],Ig={title:to("phase"),img:Dg,documents:[{type:"text",text:i(m,{wKey:Ce,children:e=>to(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:K("enterCombatOrSwitchIn"),metadata:Rg.enteringCombatOrSwitchingIn,fields:[l(Mg.enteringCombatOrSwitchingIn_atk_.tag),{title:K("duration"),fieldValue:no.duration},{title:K("cd"),fieldValue:no.cd}]}}]},De="DeepSeaVisitor",[io,ao]=h("wengine",De),oo=_.wengine[De],Tg=f(De,"icon"),so=p[De],Nn=u[De],zg={title:io("phase"),img:Tg,documents:[{type:"text",text:i(m,{wKey:De,children:e=>io(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Nn.passive_ice_dmg_.tag)]},{type:"conditional",conditional:{label:ao("cond1"),metadata:so.basicHit,fields:[l(Nn.crit_.tag),{title:"Duration",fieldValue:oo.duration}]}},{type:"conditional",conditional:{label:ao("cond2"),metadata:so.iceDashAtkHit,fields:[l(Nn.extra_crit_.tag),{title:"Duration",fieldValue:oo.extra_duration}]}}]},Re="DemaraBatteryMarkII",[co,Bg]=h("wengine",Re),Eg=_.wengine[Re],Og=f(Re,"icon"),Pg=p[Re],lo=u[Re],Vg={title:co("phase"),img:Og,documents:[{type:"text",text:i(m,{wKey:Re,children:e=>co(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(lo.passive_electric_dmg_.tag)]},{type:"conditional",conditional:{label:Bg("cond"),metadata:Pg.dodgeCounterOrAssistHit,fields:[l(lo.enerRegen_.tag),{title:"Duration",fieldValue:Eg.duration}]}}]},Me="DrillRigRedAxis",[ro,qg]=h("wengine",Me),ho=_.wengine[Me],Ag=f(Me,"icon"),Fg=p[Me],uo=u[Me],Lg={title:ro("phase"),img:Ag,documents:[{type:"text",text:i(m,{wKey:Me,children:e=>ro(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:qg("cond"),metadata:Fg.exSpecialOrChainUsed,fields:[l(uo.basic_eletric_dmg_.tag),l(uo.dash_eletric_dmg_.tag),{title:"Duration",fieldValue:ho.duration},{title:"Cooldown",fieldValue:ho.cooldown}]}}]},Bt="ElectroLipGloss",[go,jg]=h("wengine",Bt),Hg=f(Bt,"icon"),Kg=p[Bt],po=u[Bt],Wg={title:go("phase"),img:Hg,documents:[{type:"text",text:i(m,{wKey:Bt,children:e=>go(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:jg("cond"),metadata:Kg.anomalyOnEnemy,fields:[l(po.atk_.tag),l(po.common_dmg_.tag)]}}]},Ie="ElegantVanity",[mo,Ng]=h("wengine",Ie),Gg=_.wengine[Ie],Ug=f(Ie,"icon"),Jg=p[Ie],Yg=u[Ie],Zg={title:mo("phase"),img:Ug,documents:[{type:"text",text:i(m,{wKey:Ie,children:e=>mo(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Ng("cond"),metadata:Jg.consumed25Energy,fields:[l(Yg.common_dmg_.tag),{title:"Duration",fieldValue:Gg.buffDuration}]}}]},Te="FlamemakerShaker",[fo,$o]=h("wengine",Te),Gn=_.wengine[Te],Xg=f(Te,"icon"),yo=p[Te],Un=u[Te],Qg={title:fo("phase"),img:Xg,documents:[{type:"text",text:i(m,{wKey:Te,children:e=>fo(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:$o("cond1"),metadata:yo.offField,fields:[l(Un.enerRegen.tag)]}},{type:"conditional",conditional:{label:$o("cond2"),metadata:yo.exSpecialAssistHits,fields:[l(Un.common_dmg_.tag),{title:"Duration",fieldValue:Gn.duration},{title:"Cooldown",fieldValue:Gn.cooldown},l(Un.anomProf.tag),{title:"Duration",fieldValue:Gn.anomProfDuration}]}}]},ze="FlightOfFancy",[_o,ep]=h("wengine",ze),bo=_.wengine[ze],tp=f(ze,"icon"),np=p[ze],xo=u[ze],ip={title:_o("phase"),img:tp,documents:[{type:"text",text:i(m,{wKey:ze,children:e=>_o(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(xo.anomBuildup_.tag)]},{type:"conditional",conditional:{label:ep("cond"),metadata:np.etherDmg,fields:[l(xo.etherDmg_anomProf.tag),{title:"Duration",fieldValue:bo.duration},{title:"Cooldown",fieldValue:bo.cd}]}}]},Be="FusionCompiler",[wo,ap]=h("wengine",Be),op=_.wengine[Be],sp=f(Be,"icon"),cp=p[Be],vo=u[Be],lp={title:wo("phase"),img:sp,documents:[{type:"text",text:i(m,{wKey:Be,children:e=>wo(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(vo.passive_atk_.tag)]},{type:"conditional",conditional:{label:ap("cond"),metadata:cp.specialUsed,fields:[l(vo.anomProf.tag),{title:"Duration",fieldValue:op.duration}]}}]},Rn="GildedBlossom",[ko,Xy]=h("wengine",Rn),rp=f(Rn,"icon"),So=u[Rn],dp={title:ko("phase"),img:rp,documents:[{type:"text",text:i(m,{wKey:Rn,children:e=>ko(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(So.passive_atk_.tag),l(So.passive_exSpecial_dmg_.tag)]}]},Ee="HailstormShrine",[Co,hp]=h("wengine",Ee),up=_.wengine[Ee],gp=f(Ee,"icon"),pp=p[Ee],Do=u[Ee],mp={title:Co("phase"),img:gp,documents:[{type:"text",text:i(m,{wKey:Ee,children:e=>Co(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Do.passive_crit_dmg_.tag)]},{type:"conditional",conditional:{label:hp("cond"),metadata:pp.exSpecialOrAnomaly,fields:[l(Do.ice_dmg_.tag),{title:"Duration",fieldValue:up.duration}]}}]},Oe="HeartstringNocturne",[Ro,fp]=h("wengine",Oe),$p=_.wengine[Oe],yp=f(Oe,"icon"),_p=p[Oe],Jn=u[Oe],bp={title:Ro("phase"),img:yp,documents:[{type:"text",text:i(m,{wKey:Oe,children:e=>Ro(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Jn.passive_crit_dmg_.tag)]},{type:"conditional",conditional:{label:fp("cond"),metadata:_p.heartstring,fields:[l(Jn.chain_resIgn_fire_.tag),l(Jn.ult_resIgn_fire_.tag),{title:"Duration",fieldValue:$p.duration}]}}]},Pe="HellfireGears",[Mo,Io]=h("wengine",Pe),xp=_.wengine[Pe],wp=f(Pe,"icon"),To=p[Pe],zo=u[Pe],vp={title:Mo("phase"),img:wp,documents:[{type:"text",text:i(m,{wKey:Pe,children:e=>Mo(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Io("cond1"),metadata:To.offField,fields:[l(zo.enerRegen.tag)]}},{type:"conditional",conditional:{label:Io("cond1"),metadata:To.exSpecialUsed,fields:[l(zo.impact_.tag),{title:"Duration",fieldValue:xp.duration}]}}]},Ve="Housekeeper",[Bo,Eo]=h("wengine",Ve),kp=_.wengine[Ve],Sp=f(Ve,"icon"),Oo=p[Ve],Po=u[Ve],Cp={title:Bo("phase"),img:Sp,documents:[{type:"text",text:i(m,{wKey:Ve,children:e=>Bo(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Eo("cond1"),metadata:Oo.offField,fields:[l(Po.enerRegen.tag)]}},{type:"conditional",conditional:{label:Eo("cond2"),metadata:Oo.exSpecialHits,fields:[l(Po.physical_dmg_.tag),{title:"Duration",fieldValue:kp.duration}]}}]},qe="IceJadeTeapot",[Vo,Dp]=h("wengine",qe),qo=_.wengine[qe],Rp=f(qe,"icon"),Mp=p[qe],Ao=u[qe],Ip={title:Vo("phase"),img:Rp,documents:[{type:"text",text:i(m,{wKey:qe,children:e=>Vo(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Dp("cond"),metadata:Mp.teariffic,fields:[l(Ao.impact_.tag),{title:"Duration",fieldValue:qo.duration},l(Ao.common_dmg_.tag),{title:"Duration",fieldValue:qo.teamBuffDuration}]}}]},Ae="IdentityBase",[Fo,Tp]=h("wengine",Ae),zp=_.wengine[Ae],Bp=f(Ae,"icon"),Ep=p[Ae],Op=u[Ae],Pp={title:Fo("phase"),img:Bp,documents:[{type:"text",text:i(m,{wKey:Ae,children:e=>Fo(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Tp("cond"),metadata:Ep.equipperAttacked,fields:[l(Op.def_.tag),{title:"Duration",fieldValue:zp.duration}]}}]},_i="IdentityInflection",[Lo,Qy]=h("wengine",_i),Vp=f(_i,"icon"),qp={title:Lo("phase"),img:Vp,documents:[{type:"text",text:i(m,{wKey:_i,children:e=>Lo(`phaseDescs.${e-1}`)})}]},Fe="KaboomTheCannon",[jo,Ap]=h("wengine",Fe),Fp=_.wengine[Fe],Lp=f(Fe,"icon"),jp=p[Fe],Hp=u[Fe],Kp={title:jo("phase"),img:Lp,documents:[{type:"text",text:i(m,{wKey:Fe,children:e=>jo(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Ap("cond"),metadata:jp.allyHitsEnemy,fields:[l(Hp.atk_.tag),{title:"Duration",fieldValue:Fp.duration}]}}]},Le="LunarDecrescent",[Ho,Wp]=h("wengine",Le),Np=_.wengine[Le],Gp=f(Le,"icon"),Up=p[Le],Jp=u[Le],Yp={title:Ho("phase"),img:Gp,documents:[{type:"text",text:i(m,{wKey:Le,children:e=>Ho(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Wp("cond"),metadata:Up.chainOrUltUsed,fields:[l(Jp.common_dmg_.tag),{title:"Duration",fieldValue:Np.duration}]}}]},bi="LunarNoviluna",[Ko,e_]=h("wengine",bi),Zp=f(bi,"icon"),Xp={title:Ko("phase"),img:Zp,documents:[{type:"text",text:i(m,{wKey:bi,children:e=>Ko(`phaseDescs.${e-1}`)})}]},Mn="LunarPleniluna",[Wo,t_]=h("wengine",Mn),Qp=f(Mn,"icon"),Yn=u[Mn],em={title:Wo("phase"),img:Qp,documents:[{type:"text",text:i(m,{wKey:Mn,children:e=>Wo(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Yn.basic_dmg_.tag),l(Yn.dash_dmg_.tag),l(Yn.dodgeCounter_dmg_.tag)]}]},je="MagneticStormAlpha",[No,tm]=h("wengine",je),Go=_.wengine[je],nm=f(je,"icon"),im=p[je],am=u[je],om={title:No("phase"),img:nm,documents:[{type:"text",text:i(m,{wKey:je,children:e=>No(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:tm("cond"),metadata:im.anomalyBuildupIncreased,fields:[l(am.anomMas.tag),{title:"Duration",fieldValue:Go.duration},{title:"Cooldown",fieldValue:Go.cooldown}]}}]},He="MagneticStormBravo",[Uo,sm]=h("wengine",He),Jo=_.wengine[He],cm=f(He,"icon"),lm=p[He],rm=u[He],dm={title:Uo("phase"),img:cm,documents:[{type:"text",text:i(m,{wKey:He,children:e=>Uo(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:sm("cond"),metadata:lm.anomalyBuildupIncreased,fields:[l(rm.anomProf.tag),{title:"Duration",fieldValue:Jo.duration},{title:"Cooldown",fieldValue:Jo.cooldown}]}}]},xi="MagneticStormCharlie",[Yo,n_]=h("wengine",xi),hm=f(xi,"icon"),um={title:Yo("phase"),img:hm,documents:[{type:"text",text:i(m,{wKey:xi,children:e=>Yo(`phaseDescs.${e-1}`)})}]},Ke="MarcatoDesire",[Zo,Xo]=h("wengine",Ke),gm=_.wengine[Ke],pm=f(Ke,"icon"),Qo=p[Ke],mm=u[Ke],fm={title:Zo("phase"),img:pm,documents:[{type:"text",text:i(m,{wKey:Ke,children:e=>Zo(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Xo("cond1"),metadata:Qo.exSpecialOrChainHitsEnemy,fields:[l(mm.atk_.tag),{title:"Duration",fieldValue:gm.duration}]}},{type:"conditional",conditional:{label:Xo("cond2"),metadata:Qo.attributeAnomalyInflicted}}]},We="MyriadEclipse",[es,$m]=h("wengine",We),ym=_.wengine[We],_m=f(We,"icon"),bm=p[We],ts=u[We],xm={title:es("phase"),img:_m,documents:[{type:"text",text:i(m,{wKey:We,children:e=>es(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(ts.crit_dmg_.tag)]},{type:"conditional",conditional:{label:$m("cond"),metadata:bm.deathSentence,fields:[l(ts.deathSentence_defIgn_.tag),{title:"Duration",fieldValue:ym.duration}]}}]},Ne="OriginalTransmorpher",[ns,wm]=h("wengine",Ne),vm=_.wengine[Ne],km=f(Ne,"icon"),Sm=p[Ne],is=u[Ne],Cm={title:ns("phase"),img:km,documents:[{type:"text",text:i(m,{wKey:Ne,children:e=>ns(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(is.passive_hp_.tag)]},{type:"conditional",conditional:{label:wm("cond"),metadata:Sm.equipperHit,fields:[l(is.impact_.tag),{title:"Duration",fieldValue:vm.duration}]}}]},Et="PeacekeeperSpecialized",[as,Dm]=h("wengine",Et),Rm=f(Et,"icon"),Mm=p[Et],Zn=u[Et],Im={title:as("phase"),img:Rm,documents:[{type:"text",text:i(m,{wKey:Et,children:e=>as(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Dm("cond"),metadata:Mm.shielded,fields:[l(Zn.enerRegen.tag)]}},{type:"fields",fields:[l(Zn.passive_exSpecial_anomBuildup_.tag),l(Zn.passive_assist_anomBuildup_.tag)]}]},Ot="PreciousFossilizedCore",[os,ss]=h("wengine",Ot),Tm=f(Ot,"icon"),cs=p[Ot],zm=u[Ot],Bm={title:os("phase"),img:Tm,documents:[{type:"text",text:i(m,{wKey:Ot,children:e=>os(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:ss("cond1"),metadata:cs.enemyHpGE50,fields:[l(zm.daze_.tag)]}},{type:"conditional",conditional:{label:ss("cond2"),metadata:cs.enemyHpGE75}}]},Ge="PuzzleSphere",[ls]=h("wengine",Ge),rs=_.wengine[Ge],Em=f(Ge,"icon"),ds=p[Ge],hs=u[Ge],Om={title:ls("phase"),img:Em,documents:[{type:"text",text:i(m,{wKey:Ge,children:e=>ls(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:K("uponLaunch.1",{val1:"$t(skills.exSpecial)"}),metadata:ds.launchingExSpecial,fields:[l(hs.launchingExSpecial_crit_dmg_.tag),{title:K("duration"),fieldValue:rs.duration}]}},{type:"conditional",conditional:{label:K("targetHpLe",{val:rs.hpThresh*100}),metadata:ds.targetHpBelow50,fields:[l(hs.targetHpBelow50_exSpecial_dmg_.tag)]}}]},Ue="QingmingBirdcage",[us,Pm]=h("wengine",Ue),Vm=_.wengine[Ue],qm=f(Ue,"icon"),Am=p[Ue],Wt=u[Ue],Fm={title:us("phase"),img:qm,documents:[{type:"text",text:i(m,{wKey:Ue,children:e=>us(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Wt.crit_.tag)]},{type:"conditional",conditional:{metadata:Am.qingmingCompanionStacks,label:Pm("cond"),fields:[l(Wt.qingmingCompanionStacks_ether_dmg_.tag),l(Wt.qingmingCompanionStacks_ult_ether_sheer_dmg_.tag),l(Wt.qingmingCompanionStacks_exSpecial_ether_sheer_dmg_.tag),{title:K("cd"),fieldValue:Vm.duration}]}}]},Je="RadiowaveJourney",[gs]=h("wengine",Je),Lm=_.wengine[Je],jm=f(Je,"icon"),Hm=p[Je],Km=u[Je],Wm={title:gs("phase"),img:jm,documents:[{type:"text",text:i(m,{wKey:Je,children:e=>gs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{metadata:Hm.launchingChainOrUlt,label:K("uponLaunch.2",{val1:"$t(skills.chain)",val2:"$t(skills.ult)"}),fields:[l(Km.launchingChainOrUlt_sheerForce.tag),{title:K("duration"),fieldValue:Lm.duration}]}}]},Ye="RainforestGourmet",[ps,Nm]=h("wengine",Ye),Gm=_.wengine[Ye],Um=f(Ye,"icon"),Jm=p[Ye],Ym=u[Ye],Zm={title:ps("phase"),img:Um,documents:[{type:"text",text:i(m,{wKey:Ye,children:e=>ps(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Nm("cond"),metadata:Jm.energyConsumed,fields:[l(Ym.atk_.tag),{title:"Duration",fieldValue:Gm.duration}]}}]},wi="ReelProjector",[ms]=h("wengine",wi),Xm=f(wi,"icon"),Qm={title:ms("phase"),img:Xm,documents:[{type:"text",text:i(m,{wKey:wi,children:e=>ms(`phaseDescs.${e-1}`)})}]},Ze="ReverbMarkI",[fs,ef]=h("wengine",Ze),tf=_.wengine[Ze],nf=f(Ze,"icon"),af=p[Ze],of=u[Ze],sf={title:fs("phase"),img:nf,documents:[{type:"text",text:i(m,{wKey:Ze,children:e=>fs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:ef("cond"),metadata:af.exSpecialUsed,fields:[l(of.impact_.tag),{title:"Duration",fieldValue:tf.duration}]}}]},Xe="ReverbMarkII",[$s,cf]=h("wengine",Xe),lf=_.wengine[Xe],rf=f(Xe,"icon"),df=p[Xe],ys=u[Xe],hf={title:$s("phase"),img:rf,documents:[{type:"text",text:i(m,{wKey:Xe,children:e=>$s(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:cf("cond"),metadata:df.exSpecialOrChainUsed,fields:[l(ys.anomMas.tag),l(ys.anomProf.tag),{title:"Duration",fieldValue:lf.duration}]}}]},Qe="ReverbMarkIII",[_s,uf]=h("wengine",Qe),gf=_.wengine[Qe],pf=f(Qe,"icon"),mf=p[Qe],ff=u[Qe],$f={title:_s("phase"),img:pf,documents:[{type:"text",text:i(m,{wKey:Qe,children:e=>_s(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:uf("cond"),metadata:mf.chainOrUltUsed,fields:[l(ff.atk_.tag),{title:"Duration",fieldValue:gf.duration}]}}]},Pt="RiotSuppressorMarkVI",[bs,yf]=h("wengine",Pt),_f=f(Pt,"icon"),bf=p[Pt],xs=u[Pt],xf={title:bs("phase"),img:_f,documents:[{type:"text",text:i(m,{wKey:Pt,children:e=>bs(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(xs.passive_crit_.tag)]},{type:"conditional",conditional:{label:yf("cond"),metadata:bf.charge,fields:[l(xs.basic_ether_dmg_.tag)]}}]},et="RoaringFurnace",[ws,wf]=h("wengine",et),vf=_.wengine[et],kf=f(et,"icon"),Sf=p[et],Nt=u[et],Cf={title:ws("phase"),img:kf,documents:[{type:"text",text:i(m,{wKey:et,children:e=>ws(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Nt.exSpecial_dazeInc_.tag),l(Nt.chain_dazeInc_.tag),l(Nt.ult_dazeInc_.tag)]},{type:"conditional",conditional:{metadata:Sf.chainOrUlt,label:wf("cond"),fields:[l(Nt.team_chainOrUlt_fire_dmg_.tag),{title:K("duration"),fieldValue:vf.duration}]}}]},tt="RoaringRide",[vs,Xn]=h("wengine",tt),Qn=_.wengine[tt],Df=f(tt,"icon"),ei=p[tt],ti=u[tt],Rf={title:vs("phase"),img:Df,documents:[{type:"text",text:i(m,{wKey:tt,children:e=>vs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Xn("cond_atk_"),metadata:ei.atk_,fields:[l(ti.atk_.tag),{title:"Duration",fieldValue:Qn.duration}]}},{type:"conditional",conditional:{label:Xn("cond_anomProf"),metadata:ei.anomProf,fields:[l(ti.anomProf.tag),{title:"Duration",fieldValue:Qn.duration}]}},{type:"conditional",conditional:{label:Xn("cond_anomBuildup_"),metadata:ei.anomBuildup_,fields:[l(ti.anomBuildup_.tag),{title:"Duration",fieldValue:Qn.duration}]}}]},nt="SeveredInnocence",[ks,Mf]=h("wengine",nt),If=_.wengine[nt],Tf=f(nt,"icon"),zf=p[nt],ni=u[nt],Bf={title:ks("phase"),img:Tf,documents:[{type:"text",text:i(m,{wKey:nt,children:e=>ks(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(ni.passive_crit_dmg_.tag)]},{type:"conditional",conditional:{label:Mf("cond"),metadata:zf.basicSpecialAftershockHit,fields:[l(ni.crit_dmg_.tag),l(ni.electric_dmg_.tag),{title:"Duration",fieldValue:If.duration}]}}]},it="SharpenedStinger",[Ss,Ef]=h("wengine",it),Of=_.wengine[it],Pf=f(it,"icon"),Vf=p[it],Cs=u[it],qf={title:Ss("phase"),img:Pf,documents:[{type:"text",text:i(m,{wKey:it,children:e=>Ss(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Ef("cond"),metadata:Vf.predatoryInstinct,fields:[l(Cs.physical_dmg_.tag),{title:"Duration",fieldValue:Of.duration}]}},{type:"fields",fields:[l(Cs.anomBuildup_.tag)]}]},Vt="SixShooter",[Ds,Af]=h("wengine",Vt),Ff=f(Vt,"icon"),Lf=p[Vt],jf=u[Vt],Hf={title:Ds("phase"),img:Ff,documents:[{type:"text",text:i(m,{wKey:Vt,children:e=>Ds(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Af("cond"),metadata:Lf.charge,fields:[l(jf.exSpecial_daze_.tag)]}}]},vi="SliceOfTime",[Rs,i_]=h("wengine",vi),Kf=f(vi,"icon"),Wf={title:Rs("phase"),img:Kf,documents:[{type:"text",text:i(m,{wKey:vi,children:e=>Rs(`phaseDescs.${e-1}`)})}]},at="SpectralGaze",[Ms,Is]=h("wengine",at),Ts=_.wengine[at],Nf=f(at,"icon"),zs=p[at],Bs=u[at],Gf={title:Ms("phase"),img:Nf,documents:[{type:"text",text:i(m,{wKey:at,children:e=>Ms(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Is("cond1"),metadata:zs.hit_aftershock_electric,fields:[l(Bs.cond_defRed_.tag),{title:"Duration",fieldValue:Ts.duration1}]}},{type:"conditional",conditional:{label:Is("cond2"),metadata:zs.spiritLock,fields:[l(Bs.cond_impact_.tag),{title:"Duration",fieldValue:Ts.duration2}]}}]},ot="SpringEmbrace",[Es,Uf]=h("wengine",ot),Jf=_.wengine[ot],Yf=f(ot,"icon"),Zf=p[ot],Os=u[ot],Xf={title:Es("phase"),img:Yf,documents:[{type:"text",text:i(m,{wKey:ot,children:e=>Es(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Os.passive_dmg_red_.tag)]},{type:"conditional",conditional:{label:Uf("cond"),metadata:Zf.when_attacked,fields:[l(Os.cond_enerRegen_.tag),{title:"Duration",fieldValue:Jf.duration}]}}]},st="StarlightEngine",[Ps,Qf]=h("wengine",st),e$=_.wengine[st],t$=f(st,"icon"),n$=p[st],i$=u[st],a$={title:Ps("phase"),img:t$,documents:[{type:"text",text:i(m,{wKey:st,children:e=>Ps(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Qf("cond"),metadata:n$.dodgecounter_quickassist,fields:[l(i$.cond_dmg_.tag),{title:"Duration",fieldValue:e$.duration}]}}]},ct="StarlightEngineReplica",[Vs,o$]=h("wengine",ct),s$=_.wengine[ct],c$=f(ct,"icon"),l$=p[ct],r$=u[ct],d$={title:Vs("phase"),img:c$,documents:[{type:"text",text:i(m,{wKey:ct,children:e=>Vs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:o$("cond"),metadata:l$.hit_away,fields:[l(r$.cond_dmg_.tag),{title:"Duration",fieldValue:s$.duration}]}}]},lt="SteamOven",[qs,h$]=h("wengine",lt),u$=_.wengine[lt],g$=f(lt,"icon"),p$=p[lt],m$=u[lt],f$={title:qs("phase"),img:g$,documents:[{type:"text",text:i(m,{wKey:lt,children:e=>qs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:h$("cond"),metadata:p$.stacks,fields:[l(m$.cond_impact_.tag),{title:"Duration",fieldValue:u$.duration}]}}]},qt="SteelCushion",[As,$$]=h("wengine",qt),y$=f(qt,"icon"),_$=p[qt],Fs=u[qt],b$={title:As("phase"),img:y$,documents:[{type:"text",text:i(m,{wKey:qt,children:e=>As(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Fs.passive_physical_dmg_.tag)]},{type:"conditional",conditional:{label:$$("cond"),metadata:_$.hit_behind,fields:[l(Fs.cond_dmg_.tag)]}}]},At="StreetSuperstar",[Ls,x$]=h("wengine",At),w$=f(At,"icon"),v$=p[At],k$=u[At],S$={title:Ls("phase"),img:w$,documents:[{type:"text",text:i(m,{wKey:At,children:e=>Ls(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:x$("cond"),metadata:v$.charge,fields:[l(k$.cond_ult_dmg_.tag)]}}]},rt="TheBrimstone",[js,C$]=h("wengine",rt),D$=_.wengine[rt],R$=f(rt,"icon"),M$=p[rt],I$=u[rt],T$={title:js("phase"),img:R$,documents:[{type:"text",text:i(m,{wKey:rt,children:e=>js(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:C$("cond"),metadata:M$.hit_basic_dash_dodge,fields:[l(I$.cond_atk_.tag),{title:"Duration",fieldValue:D$.duration}]}}]},dt="TheRestrained",[Hs,z$]=h("wengine",dt),B$=_.wengine[dt],E$=f(dt,"icon"),O$=p[dt],Ks=u[dt],P$={title:Hs("phase"),img:E$,documents:[{type:"text",text:i(m,{wKey:dt,children:e=>Hs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:z$("cond"),metadata:O$.dmg_daze_,fields:[l(Ks.basic_dmg_.tag),l(Ks.basic_daze_.tag),{title:"Duration",fieldValue:B$.duration}]}}]},ht="TheVault",[Ws,V$]=h("wengine",ht),q$=_.wengine[ht],A$=f(ht,"icon"),F$=p[ht],L$=u[ht],j$={title:Ws("phase"),img:A$,documents:[{type:"text",text:i(m,{wKey:ht,children:e=>Ws(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:V$("cond"),metadata:F$.ether_hit,fields:[l(L$.cond_dmg_.tag),{title:"Duration",fieldValue:q$.duration}]}}]},ut="Timeweaver",[Ns,H$]=h("wengine",ut),K$=_.wengine[ut],W$=f(ut,"icon"),N$=p[ut],ii=u[ut],G$={title:Ns("phase"),img:W$,documents:[{type:"text",text:i(m,{wKey:ut,children:e=>Ns(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(ii.passive_electric_anomBuildup_.tag),l(ii.passive_disorder_dmg_.tag)]},{type:"conditional",conditional:{label:H$("cond"),metadata:N$.hit_anomaly,fields:[l(ii.cond_anomProf.tag),{title:"Duration",fieldValue:K$.duration}]}}]},In="TremorTrigramVessel",[Gs]=h("wengine",In),U$=f(In,"icon"),Us=u[In],J$={title:Gs("phase"),img:U$,documents:[{type:"text",text:i(m,{wKey:In,children:e=>Gs(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Us.exSpecial_dmg_.tag),l(Us.ult_dmg_.tag)]}]},gt="TusksOfFury",[Js,Y$]=h("wengine",gt),Z$=_.wengine[gt],X$=f(gt,"icon"),Q$=p[gt],ai=u[gt],ey={title:Js("phase"),img:X$,documents:[{type:"text",text:i(m,{wKey:gt,children:e=>Js(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(ai.passive_shield_.tag)]},{type:"conditional",conditional:{label:Y$("cond"),metadata:Q$.interrupt_perfdodge,fields:[l(ai.cond_dmg_.tag),l(ai.daze_.tag),{title:"Duration",fieldValue:Z$.duration}]}}]},pt="UnfetteredGameBall",[Ys,ty]=h("wengine",pt),ny=_.wengine[pt],iy=f(pt,"icon"),ay=p[pt],oy=u[pt],sy={title:Ys("phase"),img:iy,documents:[{type:"text",text:i(m,{wKey:pt,children:e=>Ys(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:ty("cond"),metadata:ay.anomaly_counter,fields:[l(oy.cond_crit_.tag),{title:"Duration",fieldValue:ny.duration}]}}]},Tn="VortexArrow",[Zs,a_]=h("wengine",Tn),cy=f(Tn,"icon"),ly=u[Tn],ry={title:Zs("phase"),img:cy,documents:[{type:"text",text:i(m,{wKey:Tn,children:e=>Zs(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(ly.passive_daze_.tag)]}]},mt="VortexHatchet",[Xs,dy]=h("wengine",mt),Qs=_.wengine[mt],hy=f(mt,"icon"),uy=p[mt],gy=u[mt],py={title:Xs("phase"),img:hy,documents:[{type:"text",text:i(m,{wKey:mt,children:e=>Xs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:dy("cond"),metadata:uy.entering,fields:[l(gy.cond_impact_.tag),{title:"Duration",fieldValue:Qs.duration},{title:"Cooldown",fieldValue:Qs.cooldown}]}}]},zn="VortexRevolver",[ec,o_]=h("wengine",zn),my=f(zn,"icon"),fy=u[zn],$y={title:ec("phase"),img:my,documents:[{type:"text",text:i(m,{wKey:zn,children:e=>ec(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(fy.passive_exSpecial_daze_.tag)]}]},ft="WeepingCradle",[tc,nc]=h("wengine",ft),yy=_.wengine[ft],_y=f(ft,"icon"),ic=p[ft],by=u[ft],xy={title:tc("phase"),img:_y,documents:[{type:"text",text:i(m,{wKey:ft,children:e=>tc(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:nc("cond_atk"),metadata:ic.attack}},{type:"conditional",conditional:{label:nc("cond_stacks"),metadata:ic.stacks,fields:[l(by.cond_dmg_.tag),{title:"Duration",fieldValue:yy.duration}]}}]},Ft="WeepingGemini",[ac,wy]=h("wengine",Ft),vy=f(Ft,"icon"),ky=p[Ft],Sy=u[Ft],Cy={title:ac("phase"),img:vy,documents:[{type:"text",text:i(m,{wKey:Ft,children:e=>ac(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:wy("cond"),metadata:ky.anomaly_stack,fields:[l(Sy.anomProf.tag)]}}]},$t="ZanshinHerbCase",[oc,Dy]=h("wengine",$t),Ry=_.wengine[$t],My=f($t,"icon"),Iy=p[$t],oi=u[$t],Ty={title:oc("phase"),img:My,documents:[{type:"text",text:i(m,{wKey:$t,children:e=>oc(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(oi.passive_crit_.tag),l(oi.passive_electric_dmg_.tag)]},{type:"conditional",conditional:{label:Dy("cond"),metadata:Iy.apply_anom_stun,fields:[l(oi.cond_crit_.tag),{title:"Duration",fieldValue:Ry.duration}]}}]},zy={BashfulDemon:og,BigCylinder:dg,BlazingLaurel:ug,BoxCutter:$g,BunnyBand:xg,CannonRotor:Cg,CinderCobalt:Ig,DeepSeaVisitor:zg,DemaraBatteryMarkII:Vg,DrillRigRedAxis:Lg,ElectroLipGloss:Wg,ElegantVanity:Zg,FlamemakerShaker:Qg,FlightOfFancy:ip,FusionCompiler:lp,GildedBlossom:dp,HailstormShrine:mp,HeartstringNocturne:bp,HellfireGears:vp,Housekeeper:Cp,IceJadeTeapot:Ip,IdentityBase:Pp,IdentityInflection:qp,KaboomTheCannon:Kp,LunarDecrescent:Yp,LunarNoviluna:Xp,LunarPleniluna:em,MagneticStormAlpha:om,MagneticStormBravo:dm,MagneticStormCharlie:um,MarcatoDesire:fm,MyriadEclipse:xm,OriginalTransmorpher:Cm,PeacekeeperSpecialized:Im,PreciousFossilizedCore:Bm,PuzzleSphere:Om,QingmingBirdcage:Fm,RadiowaveJourney:Wm,RainforestGourmet:Zm,ReelProjector:Qm,ReverbMarkI:sf,ReverbMarkII:hf,ReverbMarkIII:$f,RiotSuppressorMarkVI:xf,RoaringFurnace:Cf,RoaringRide:Rf,SeveredInnocence:Bf,SharpenedStinger:qf,SixShooter:Hf,SliceOfTime:Wf,SpectralGaze:Gf,SpringEmbrace:Xf,StarlightEngine:a$,StarlightEngineReplica:d$,SteamOven:f$,SteelCushion:b$,StreetSuperstar:S$,TheBrimstone:T$,TheRestrained:P$,TheVault:j$,Timeweaver:G$,TremorTrigramVessel:J$,TusksOfFury:ey,UnfetteredGameBall:sy,VortexArrow:ry,VortexHatchet:py,VortexRevolver:$y,WeepingCradle:xy,WeepingGemini:Cy,ZanshinHerbCase:Ty};function By(e){const{attribute:t}=e;if(t)return t}function Ey(e){const{q:t}=e;return["standardDmg","anomalyDmg"].includes(t)}function Oy(e){const{damageType1:t,damageType2:n}=e,a=[];return Ey(e)?(t&&a.push(t),n&&a.push(n),a):[]}const tn={basic:"Basic",dash:"Dash",dodgeCounter:"Dodge Counter",special:"Special",exSpecial:"EX Special",chain:"Chain",ult:"Ultimate",quickAssist:"Quick Assist",defensiveAssist:"Defensive Assist",evasiveAssist:"Evasive Assist",assistFollowUp:"Assist Follow Up",anomaly:"Anomaly",disorder:"Disorder",aftershock:"Aftershock",elemental:"Elemental",sheer:"Sheer"},Jc=["crit_","crit_dmg_","impact","pen","pen_","enerRegen","anomProf","anomMas"].map(e=>{if($r.includes(e)){const t={...q.final.dmg_.tag,attribute:e.slice(0,-5)};return{title:i(Gt,{statKey:e}),fieldRef:t}}return e==="crit_"?{fieldRef:q.common.cappedCrit_.tag,title:i(Gt,{statKey:e})}:{fieldRef:q.final[e].tag,title:i(Gt,{statKey:e})}});Jc.push(...fe.map(e=>({fieldRef:{et:"own",qt:"formula",q:"standardDmg",attribute:e,name:"standardDmgInst"},title:b($e,{color:e,children:[le[e]," Damage"]})})),...fe.map(e=>({fieldRef:{et:"own",qt:"formula",q:"sheerDmg",attribute:e,name:"sheerDmgInst"},title:b($e,{color:e,children:[le[e]," Damage"]})})),...fe.flatMap(e=>yr.map(t=>({fieldRef:{et:"own",qt:"formula",q:"standardDmg",attribute:e,damageType1:t,name:"standardDmgInst"},title:b($e,{color:e,children:[le[e]," ",tn[t]," Damage"]})}))),...fe.map(e=>({fieldRef:{et:"own",qt:"formula",q:"anomalyDmg",attribute:e,damageType1:"anomaly",name:"anomalyDmgInst"},title:b($e,{color:e,children:[le[e]," Anomaly Damage"]})})),...fe.map(e=>({fieldRef:{et:"own",qt:"formula",q:"anomBuildup",attribute:e,name:"anomalyBuildupInst"},title:b($e,{color:e,children:[le[e]," Anomaly Buildup"]})})),{fieldRef:{et:"own",qt:"formula",q:"dazeBuildup",name:"dazeInst"},title:"Daze Buildup"});const ki=[];Object.values(Nh).forEach(e=>Object.values(e).forEach(t=>t.documents.forEach(n=>n.type==="fields"&&n.fields.forEach(a=>cd(a)&&ki.push({tag:a.fieldRef,value:a})))));Jc.forEach(e=>{ki.push({tag:e.fieldRef,value:e})});const Py=Gr(ki),ci=new Map;function Yc(e,t){if(ci.get(e))throw new Error(`Duplicate conditional ${e}`);ci.set(e,t)}Object.values(zy).forEach(({documents:e})=>{e.forEach(t=>{t.type==="conditional"&&Yc(`${t.conditional.metadata.sheet}:${t.conditional.metadata.name}`,t.conditional)})});Object.values(eg).forEach(e=>Object.values(e).forEach(({documents:t})=>{t.forEach(n=>{n.type==="conditional"&&Yc(`${n.conditional.metadata.sheet}:${n.conditional.metadata.name}`,n.conditional)})}));export{Jr as A,Wy as C,qi as D,jy as F,cn as T,kt as a,Ac as b,Pr as c,Br as d,eg as e,tn as f,yd as g,Nh as h,sn as i,vd as j,Ky as k,Hy as l,Yr as m,on as n,Ur as o,Ly as p,_d as q,td as r,ed as s,Nc as t,qr as u,zy as w};
