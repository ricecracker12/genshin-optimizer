import{c3 as wc,J as vc,H as kc,d as v,K as Cc,_ as Sc,O as fe,c4 as Ui,X as dn,W as $n,V as Ce,c5 as H,Y as Dc,c6 as wl,c7 as vl,T as O,y as Rc,c8 as Ji,c9 as Ic,ca as kl,a4 as Cl,cb as Sl,a7 as Dl,cc as Mc,u as oe,aN as Tc,aL as Rl,cd as Il,ce as Ml,cf as Tl,cg as zc,ch as zl,b3 as Bc,b2 as Ec,ci as V,cj as Bl,ck as El,bz as A,b8 as Ol,b9 as Pl,cl as hn,cm as Vl,cn as Al,co as Oc,cp as un,cq as ql,j as i,cr as mn,cs as pe,br as ie,bA as ki,ct as Fl,e as x,am as Y,aA as Vt,cu as gn,i as N,ax as U,bU as Pc,cv as jl,cw as Vc,cx as Ac,cy as Ci,cz as de,ae as Si,o as M,cA as Ll,cB as qc,a as Fc,bH as Hl,l as jc,bZ as Kl,f as ae,G as K,C as Se,S as $e,P as Wl,bL as Nl,bf as wi,b_ as Yi,bp as Lc,aX as ve,b$ as Gl,c0 as Ul,I as Di,s as Ri,c1 as Jl,cC as Yl,v as Ot,M as Ii,aM as _n,ac as Hc,ad as Kc,cD as Zl,m as Ql,k as Xl,n as er,be as tr,D as nr,c2 as ir,cE as ar,w as Wc,r as or,b as sr,c as cr,g as lr,bv as Nc,bD as Gc,bB as Uc,cF as rr,cG as dr,E as hr,cH as ur,z as At,B as De,cI as Mi,F as qt,cJ as Jc,cK as mr,ah as Ti,ag as gr,aY as ke,ap as pr,b5 as fr,cL as $r,cM as _r,cN as yr,aH as Yc,aF as Bt,ai as br,cO as xr,bx as wr,cP as vr,aK as kr,cQ as Cr,cR as Sr,bX as Dr,cS as Rr,cT as Ir,cU as X,cV as Zc,a5 as Zi,b7 as Qi,cW as Mr,cX as Tr,bd as Qc,cY as zr,cZ as b,c_ as Z,a_ as m,aZ as u,ay as T,aD as f,c$ as Br,bG as Er}from"./index-B3WtEKwN.js";import{i as Or,d as Pr}from"./discSortUtil-Bw2P0pur.js";function Vr(e){const{badgeContent:t,invisible:n=!1,max:a=99,showZero:o=!1}=e,c=wc({badgeContent:t,max:a});let s=n;n===!1&&t===0&&!o&&(s=!0);const{badgeContent:r,max:d=a}=s?c:e,g=r&&Number(r)>d?`${d}+`:r;return{badgeContent:r,invisible:s,max:d,displayValue:g}}function Ar(e){return kc("MuiBadge",e)}const se=vc("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),qr=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],Yn=10,Zn=4,Fr=e=>{const{color:t,anchorOrigin:n,invisible:a,overlap:o,variant:c,classes:s={}}=e,r={root:["root"],badge:["badge",c,a&&"invisible",`anchorOrigin${H(n.vertical)}${H(n.horizontal)}`,`anchorOrigin${H(n.vertical)}${H(n.horizontal)}${H(o)}`,`overlap${H(o)}`,t!=="default"&&`color${H(t)}`]};return Dc(r,Ar,s)},jr=$n("span",{name:"MuiBadge",slot:"Root",overridesResolver:(e,t)=>t.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),Lr=$n("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.badge,t[n.variant],t[`anchorOrigin${H(n.anchorOrigin.vertical)}${H(n.anchorOrigin.horizontal)}${H(n.overlap)}`],n.color!=="default"&&t[`color${H(n.color)}`],n.invisible&&t.invisible]}})(({theme:e})=>{var t;return{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(12),minWidth:Yn*2,lineHeight:1,padding:"0 6px",height:Yn*2,borderRadius:Yn,zIndex:1,transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.enteringScreen}),variants:[...Object.keys(((t=e.vars)!=null?t:e).palette).filter(n=>{var a,o;return((a=e.vars)!=null?a:e).palette[n].main&&((o=e.vars)!=null?o:e).palette[n].contrastText}).map(n=>({props:{color:n},style:{backgroundColor:(e.vars||e).palette[n].main,color:(e.vars||e).palette[n].contrastText}})),{props:{variant:"dot"},style:{borderRadius:Zn,height:Zn*2,minWidth:Zn*2,padding:0}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${se.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${se.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${se.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${se.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${se.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${se.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${se.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${se.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.leavingScreen})}}]}}),Xi=v.forwardRef(function(t,n){var a,o,c,s,r,d;const g=Cc({props:t,name:"MuiBadge"}),{anchorOrigin:w={vertical:"top",horizontal:"right"},className:D,component:S,components:$={},componentsProps:y={},children:k,overlap:R="rectangular",color:q="default",invisible:j=!1,max:ee=99,badgeContent:te,slots:F,slotProps:I,showZero:E=!1,variant:P="standard"}=g,ne=Sc(g,qr),{badgeContent:ji,invisible:ml,max:gl,displayValue:pl}=Vr({max:ee,invisible:j,badgeContent:te,showZero:E}),fl=wc({anchorOrigin:w,color:q,overlap:R,variant:P,badgeContent:te}),Li=ml||ji==null&&P!=="dot",{color:$l=q,overlap:_l=R,anchorOrigin:yl=w,variant:Hi=P}=Li?fl:g,Ki=Hi!=="dot"?pl:void 0,Gn=fe({},g,{badgeContent:ji,invisible:Li,max:gl,displayValue:Ki,showZero:E,anchorOrigin:yl,color:$l,overlap:_l,variant:Hi}),Wi=Fr(Gn),Ni=(a=(o=F==null?void 0:F.root)!=null?o:$.Root)!=null?a:jr,Gi=(c=(s=F==null?void 0:F.badge)!=null?s:$.Badge)!=null?c:Lr,Un=(r=I==null?void 0:I.root)!=null?r:y.root,Jn=(d=I==null?void 0:I.badge)!=null?d:y.badge,bl=Ui({elementType:Ni,externalSlotProps:Un,externalForwardedProps:ne,additionalProps:{ref:n,as:S},ownerState:Gn,className:dn(Un==null?void 0:Un.className,Wi.root,D)}),xl=Ui({elementType:Gi,externalSlotProps:Jn,ownerState:Gn,className:dn(Wi.badge,Jn==null?void 0:Jn.className)});return Ce.jsxs(Ni,fe({},bl,{children:[k,Ce.jsx(Gi,fe({},xl,{children:Ki}))]}))});function Hr(e){return kc("MuiFormControlLabel",e)}const Et=vc("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),Kr=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],Wr=e=>{const{classes:t,disabled:n,labelPlacement:a,error:o,required:c}=e,s={root:["root",n&&"disabled",`labelPlacement${H(a)}`,o&&"error",c&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",o&&"error"]};return Dc(s,Hr,t)},Nr=$n("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Et.label}`]:t.label},t.root,t[`labelPlacement${H(n.labelPlacement)}`]]}})(({theme:e,ownerState:t})=>fe({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Et.disabled}`]:{cursor:"default"}},t.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},t.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},t.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${Et.label}`]:{[`&.${Et.disabled}`]:{color:(e.vars||e).palette.text.disabled}}})),Gr=$n("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${Et.error}`]:{color:(e.vars||e).palette.error.main}})),Ur=v.forwardRef(function(t,n){var a,o;const c=Cc({props:t,name:"MuiFormControlLabel"}),{className:s,componentsProps:r={},control:d,disabled:g,disableTypography:w,label:D,labelPlacement:S="end",required:$,slotProps:y={}}=c,k=Sc(c,Kr),R=wl(),q=(a=g??d.props.disabled)!=null?a:R==null?void 0:R.disabled,j=$??d.props.required,ee={disabled:q,required:j};["checked","name","onChange","value","inputRef"].forEach(ne=>{typeof d.props[ne]>"u"&&typeof c[ne]<"u"&&(ee[ne]=c[ne])});const te=vl({props:c,muiFormControl:R,states:["error"]}),F=fe({},c,{disabled:q,labelPlacement:S,required:j,error:te.error}),I=Wr(F),E=(o=y.typography)!=null?o:r.typography;let P=D;return P!=null&&P.type!==O&&!w&&(P=Ce.jsx(O,fe({component:"span"},E,{className:dn(I.label,E==null?void 0:E.className),children:P}))),Ce.jsxs(Nr,fe({className:dn(I.root,s),ownerState:F,ref:n},k,{children:[v.cloneElement(d,ee),j?Ce.jsxs(Rc,{display:"block",children:[P,Ce.jsxs(Gr,{ownerState:F,"aria-hidden":!0,className:I.asterisk,children:["â€‰","*"]})]}):P]}))}),Jr={};class Xc{constructor(t,n){this.root=new Yr(t,n)}subset(t){const n=[];return this._subset(t,a=>n.push(...a[Ji].map(o=>o.value))),n}entries(t){const n=[];return this._subset(t,a=>n.push(...a[Ji])),n}_subset(t,n){const a=t.length;function o(c,s){c<a?s.subset(t[c]).forEach(r=>o(c+1,r)):n(s.leaf)}o(0,this.root)}}let Yr=class el{constructor(t,n){if(this.children=[],t>0)for(const[a,o]of Object.entries(n)){const c=new Map;for(const[s,r]of Object.entries(o))c.set(+s,new el(t-1,r));this.children.push({mask:+a,map:c})}else this.leaf=n}subset(t){return this.children.map(({mask:n,map:a})=>a.get(t&n)).filter(n=>!!n)}};class ea{constructor(t){this.root=new zi(void 0),this.keys=t}at(t){const n=this.keys.get(t),a=n.reduce((o,c)=>o.child(c),this.root);return a.leaf||(a.leaf=new Bi(t,n,this.keys,a)),a.leaf}}class zi{constructor(t){this.children=new Map,this.parent=t}child(t){let n=this.children.get(t);return n||(n=new zi(this),this.children.set(t,n),n)}}class Bi{constructor(t,n,a,o){this.tag=Object.fromEntries(Object.entries(t).filter(([c,s])=>s!=null)),this.id=n,this.keys=a,this.internal=o}with(t){const{keys:n}=this,{id:a,firstReplacedByte:o}=n.combine(this.id,t);let c=this.internal;for(let s=o;s<n.tagLen;s++)c=c.parent;for(let s=o;s<n.tagLen;s++)c=c.child(a[s]);return c.leaf||(c.leaf=new Bi({...this.tag,...t},a,n,c)),c.leaf}}class Zr{constructor(t,n){this.keys=new Ic(t),this.values=new Xc(t.tagLen,n)}subset(t){return this.values.subset(this.keys.get(t))}}const Pt={sum:e=>e.reduce((t,n)=>t+n,0),prod:e=>e.reduce((t,n)=>t*n,1),min:e=>Math.min(...e),max:e=>Math.max(...e),sumfrac:([e,t])=>e/(e+t),unique:([e])=>e},tl={match:([e,t])=>e===t?0:1,thres:([e,t])=>e>=t?0:1,lookup:([e],t)=>t[e]??0},tn=e=>Sl(e,"val");let nl=class{constructor(t,...n){const a=new Ic(t);this.nodes=new Xc(a.tagLen,kl(n)),this.cache=new ea(a).at({}),this.calc=new ea(a).at({}),this.calc.val=this}withTag(t){const n=this.calc.with(t);return n.val??(n.val=Object.assign(new this.constructor(this.cache.keys),this,{cache:this.cache.with(t),calc:n}))}gather(t){return this._gather(this.cache.with(t)).pre}compute(t){return this._compute(t,this.cache)}_gather(t){if(t.val)return t.val;const n=this.nodes.entries(t.id).flatMap(({tag:a,value:o})=>o.op==="reread"?this._gather(t.with(o.tag)).pre:[this.markGathered(t.tag,a,o,this._compute(o,t))]);return t.val={pre:n}}_compute(t,n){const a=(c,s,r,d)=>Object.freeze({val:c,meta:this.computeMeta(t,c,s,r,d)}),{op:o}=t;switch(o){case"const":return a(t.ex,[],[]);case"sum":case"prod":case"min":case"max":case"sumfrac":{const c=t.x.map(s=>this._compute(s,n));return a(Pt[o](tn(c)),c,[])}case"thres":case"match":case"lookup":{const c=t.br.map(g=>this._compute(g,n)),s=tl[o](tn(c),t.ex),r=[...Array(t.x.length)],d=r[s]=this._compute(t.x[s],n);return a(d.val,r,c)}case"subscript":{const c=this._compute(t.br[0],n);return a(t.ex[c.val],[],[c])}case"vtag":return a(n.tag[t.ex]??"",[],[]);case"tag":{const c=n.with(t.tag),s=this._compute(t.x[0],c);return a(s.val,[s],[],c.tag)}case"dtag":{const c=t.br.map(d=>this._compute(d,n)),s=n.with(Object.fromEntries(c.map((d,g)=>[t.ex[g],d.val]))),r=this._compute(t.x[0],s);return a(r.val,[r],c,s.tag)}case"read":{const c=n.with(t.tag),s=this._gather(c),{pre:r}=s,d=t.ex??this.defaultAccu(c.tag)??"unique";if(d!==t.ex&&(t={...t,ex:d}),s[d])return s[d];if(Dl()&&d==="unique"&&r.length!==1)throw new Error(`Ill-form read for ${Mc(c.tag)}`);const g=Pt[d](tn(r));return s[d]=a(g,r,[],c.tag)}case"custom":{const c=t.x.map(s=>this._compute(s,n));return a(Jr[t.ex].calc(tn(c)),c,[])}default:Cl(o)}}defaultAccu(t){}markGathered(t,n,a,o){return o}computeMeta(t,n,a,o,c){}toDebug(){throw new Error("not implemented")}};const Qr={arithmetic:Pt,branching:tl};class Xr extends nl{constructor(t,n=Mc,a=()=>!0){super(t.cache.keys),this.gathering=new Set,this.nodes=t.nodes,this.tagStr=n,this.filter=a,this.defaultAccu=o=>t.defaultAccu(o),this.cache=this.cache.with(t.cache.tag)}withTag(t){throw new Error("Unimplemented")}_gather(t){if(this.gathering.has(t))throw new Error(`Loop detected for ${this.tagStr(t.tag)}`);this.gathering.add(t);const n=this.__gather(t);return this.gathering.delete(t),n}__gather(t){if(t.val)return t.val;const n=this.nodes.entries(t.id).flatMap(({tag:a,value:o})=>o.op==="reread"?this._gather(t.with(o.tag)).pre.map(c=>{const s=`${this.tagStr(a)} <= ${this.tagStr(o.tag)} : ${c.meta.readSeq}`;return Object.freeze({...c,meta:{...c.meta,readSeq:s}})}):[this.markGathered(t.tag,a,o,this._compute(o,t))]);return t.val={pre:n}}_compute(t,n){try{return super._compute(t,n)}catch(a){return Object.freeze({val:NaN,meta:{formula:`${a}`,deps:[],omitted:[],val:NaN,x:[],br:[],comp:"ERR",pivot:!0,toJSON:na}})}}markGathered(t,n,a,o){const c=`${this.tagStr(n)} <- ${this.tagStr(t)}`;return{...o,meta:{...o.meta,readSeq:c,pivot:!0}}}computeMeta(t,n,a,o,c){let s,r;const d=a.filter($=>$).map($=>$.meta),g=o.map($=>$.meta),w=[],D=t.op==="read"?t.ex:t.op,S=[];if(D in Pt){const $=Pt[D]([]);for(const y of[...g,...d])y.val!==$||this.filter(y)?w.push(y):S.push(y)}else w.push(...g,...d);switch(t.op){case"const":s=ta(t.ex);break;case"read":r=`gather ${d.length} node(s)`,r+=` matching ${this.tagStr(c,t.ex)}`,r+=` (for ${this.tagStr(t.tag)})`,S.length&&(r+=` <${S.length} omitted>`),s=`${this.tagStr(t.tag)}`;break;default:{const $=[];t.ex&&t.op!=="subscript"&&$.push(JSON.stringify(t.ex)),t.tag&&$.push(this.tagStr(t.tag)),$.push(...w.map(y=>y.comp)),S.length&&$.push(`<${S.length} omitted>`),s=`${t.op}(`+$.join(", ")+")"}}return S.push(...w.flatMap($=>$.pivot?[]:$.omitted)),Object.freeze({formula:`[${ta(n)}] ${r??s}`,deps:[...new Set(w.flatMap($=>$.pivot?[$]:$.deps))],omitted:[...new Set(S)],val:n,x:d,br:g,comp:s,pivot:t.op==="read",toJSON:na})}}const ta=e=>typeof e=="string"?`"${e}"`:e.toString();function na(){const{formula:e,readSeq:t,deps:n}=this,a={readSeq:t,formula:e,deps:n};return a.readSeq||delete a.readSeq,a.deps.length||delete a.deps,Object.keys(a).length===1?a.formula:a}function yn(e){const{database:t}=oe();return Tc(t.chars,e)}function ed(e){const{database:t}=oe();return Tc(t.charOpts,e)}const{arithmetic:td}=Qr;let nd=class extends nl{computeMeta({op:t,ex:n,tag:a},o,c,s,r){let d=c.filter($=>!!$);const g=id(d,s);function w($){return Object.freeze(r&&!$.tag?{tag:r,...$}:$)}function D($,y){return w({op:$,ops:y,...g})}function S($,y){let{meta:k}=$;return y!=null&&y.some(R=>!k.usedCats.has(R))&&(k={...k,usedCats:new Set([...k.usedCats,...y])}),w(k.conds===g.conds?k:{...k,...g})}if(t==="read"&&(r==null?void 0:r.qt)==="cond"){const{src:$,dst:y,sheet:k,q:R}=r;$&&k&&R&&(g.conds=pn(g.conds,{[y??"All"]:{[$]:{[k]:{[R]:o}}}}))}switch(t==="read"&&n!=="unique"&&([t,n]=[n,void 0]),t){case"sum":case"prod":case"min":case"max":case"sumfrac":if(d.length>1){const $=td[t]([]);d=d.filter(y=>y.val!==$)}return d.length===1?S(d[0]):D(d.length?t:"const",d);case"const":case"subscript":return D("const",[]);case"vtag":return g.usedCats=new Set([n]),D("const",[]);case"match":case"thres":case"lookup":case"read":return S(d[0]);case"tag":return S(d[0],Object.keys(a));case"dtag":return S(d[0],n);case"custom":return D(n,d);default:Rl(t)}}markGathered(t,n,a,o){const{val:c}=o,s={...o.meta};let r=!1;const d=new Set([...s.usedCats,...Object.keys(n)]);return s.usedCats.size!==d.size&&(s.usedCats=d,r=!0),r?{val:c,meta:Object.freeze(s)}:o}listFormulas(t){return this.gather(t.tag).filter(n=>n.val).map(({val:n,meta:a})=>Il.withTag(a.tag)[n])}listCondFormulas(t){return this.listFormulas(t).map(n=>this.compute(n).meta.conds).reduce(pn,{})}};function id(e,t){var s;const n=[...e.map(r=>r.meta),...t.map(r=>r.meta)];let a={},o=new Set;for(const r of n)a=pn(a,r.conds),r.usedCats.forEach(d=>o.add(d));const c=o.size;return o=((s=n.find(r=>r.usedCats.size===c))==null?void 0:s.usedCats)??o,{usedCats:o,conds:a}}function pn(e,t){if(e===t)return e;if(typeof e!="object")throw new Error(`cannot merge ${e} and ${t}`);if(Object.keys(t).length>Object.keys(e).length&&([e,t]=[t,e]),!Object.keys(t).length)return e;let n=!1;const a={...e};for(const[o,c]of Object.entries(t)){const s=a[o],r=o in a?pn(s,c):c;s!==r&&(a[o]=r,n=!0)}return Object.freeze(n?a:e)}function ad(e){const t=new Set(e);return n=>!od(n,t)}function od(e,t){const n=e.formula.match(/(\S+) (\S+) common.count/);if(!n)return!1;const[,a,o]=n;return o==="own"&&t.has(a)}class sd extends nd{toDebug(){return new Xr(this,Ml,ad([...Bc,...Ec]))}defaultAccu(t){var o,c,s,r;const{qt:n,q:a}=t;if(!(!n||!a))switch(t.et){case"own":case"target":return(c=(o=zc[n])==null?void 0:o[a])==null?void 0:c.accu;case"enemy":return(r=(s=Tl[n])==null?void 0:s[a])==null?void 0:r.accu;case"team":if(n==="common"&&a==="count")return"sum";throw new Error("non-explicit team value accumulator")}}listFormulas(t){return super.listFormulas(t).filter(n=>zl)}}function rn(e,...t){return t.map(({tag:n,value:a})=>({tag:{...n,preset:e},value:a}))}function il(e,...t){return t.map(({tag:n,value:a})=>({tag:{...n,src:e},value:a}))}function al(e){const{lvl:t,promotion:n,basic:a,dodge:o,special:c,chain:s,assist:r,core:d,mindscape:g}=A.char,{char:w,iso:D,[e.key]:S}=V.withAll("sheet",[]);return[w.reread(S),D.reread(S),t.add(e.level),a.add(e.basic),o.add(e.dodge),c.add(e.special),s.add(e.chain),r.add(e.assist),d.add(e.core),n.add(e.promotion),g.add(e.mindscape),hn.base.crit_.add(.05),hn.base.crit_dmg_.add(.5)]}function cd(e){return[V.sheet("agg").reread(V.sheet("wengine")),...e?[A.common.count.sheet(e.key).add(1),A.wengine.lvl.add(e.level),A.wengine.modification.add(e.modification),A.wengine.phase.add(e.phase)]:[]]}function ol(e,t){const{common:{count:n},initial:a}=Vl(zc,{sheet:"disc",et:"own"});return[V.sheet("agg").reread(V.sheet("disc")),V.withTag({sheet:"disc",qt:"initial"}).reread(V.sheet("dyn")),...Object.entries(e).map(([o,c])=>Al(a,o).sheet("dyn").add(c)),...Object.entries(t).map(([o,c])=>n.sheet(o).add(c))]}function ld(e){const t={},n={};return e.forEach(({setKey:a,mainStatKey:o,substats:c,level:s,rarity:r})=>{t[a]=(t[a]??0)+1,n[o]=(n[o]??0)+Ol(r,o,s),c.forEach(({key:d,upgrades:g})=>{!d||!g||(n[d]=(n[d]??0)+Pl(d,r)*g)})}),ol(n,t)}function sl(e){const t=V.with("et","team"),{own:n,enemy:a,teamBuff:o,notOwnBuff:c}=V.sheet("agg").withAll("et",[]);return[e.map(s=>V.withTag({et:"target",dst:s}).reread(V.withTag({et:"own",dst:null,src:s}))),e.flatMap(s=>{const r=n.with("src",s);return e.map(d=>r.reread(o.withTag({dst:s,src:d,name:null})))}),e.flatMap(s=>{const r=n.with("src",s);return e.filter(d=>d!==s).map(d=>r.reread(c.withTag({dst:s,src:d,name:null})))}),e.map(s=>a.reread(V.withTag({et:"enemyDeBuff",dst:null,src:s,name:null}))),e.flatMap((s,r)=>{const{stackIn:d,stackTmp:g}=V.withAll("qt",[]),w=V.withTag({src:s,et:"own"});return[w.with("qt","stackTmp").add(Bl(d,0,r+1)),w.with("qt","stackOut").add(El(g.max.with("et","team"),r+1,d))]}),e.map(s=>t.add(V.withTag({src:s,et:"own"})))].flat()}function cl(e){const t=Oc(un,e);return new sd(un,ql,t)}function rd(e){return new Zr(un,Oc(un,e))}function dd({characterKey:e}){return i(mn,{ns:"charNames_gen",key18:e})}function hd({attribute:e}){return pe[e]}function ud({characterKey:e,onClick:t,charCardConfig:n}){const{level:a=0,promotion:o=0}=yn(e)??{},c=ie(e),s=n||{cardWidth:"100%",charImgWidth:"100%",iconsSize:1.7,isEditing:!1,charNameWidth:"191px",charNameVariant:"h6",scrollingBgSize:"200px"},r=v.useCallback(()=>e&&(t==null?void 0:t(e)),[e,t]),d=v.useCallback(g=>i(ki,{onClick:r,sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:g}),[r]);return i(Vt,{children:i(Fl,{condition:!!t,wrapper:d,children:x(Y,{sx:{display:"flex",flexDirection:"column",width:s.cardWidth},children:[i(md,{characterKey:e,characterStat:c,charCardConfig:s}),i(gd,{characterKey:e,characterStat:c,promotion:o,level:a,charCardConfig:s})]})})})}function md({characterKey:e,characterStat:t,charCardConfig:n}){const{attribute:a,id:o}=t;return x(Y,{sx:s=>({width:"100%",height:"100%",position:"relative",display:"flex",background:`${s.palette[a].main}`,zIndex:1,overflow:"hidden"}),children:[x(Y,{sx:{position:"absolute",left:"0",right:"0",display:"flex",transform:"rotate(5deg) translateX(-50%)",zIndex:2},children:[i(ia,{characterKey:e,charCardConfig:n}),i(ia,{characterKey:e,charCardConfig:n})]}),i(Y,{src:`https://act-webstatic.hoyoverse.com/game_record/zzzv2/role_vertical_painting/role_vertical_painting_${o}.png`,component:gn?gn:"img",width:n.charImgWidth,height:"auto",position:"relative",zIndex:"2"})]})}function gd({characterKey:e,characterStat:t,promotion:n,level:a,charCardConfig:o}){const{t:c}=N("page_characters"),{attribute:s,rarity:r,specialty:d}=t,g=yn(e);return i(Y,{sx:{width:"100%",height:"100%",padding:"8px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:x(Y,{sx:{display:"flex",flexDirection:"column"},children:[x(Y,{gap:1,sx:{display:"flex",alignItems:"center"},children:[i(U,{size:o.iconsSize,src:Pc(r)}),i(O,{variant:o.charNameVariant,sx:{fontWeight:"900",maxWidth:o.charNameWidth,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:i(dd,{characterKey:e})}),i(jl,{ele:s,iconProps:{sx:{fontSize:`${o.iconsSize}em`}}}),i(U,{size:o.iconsSize,src:Vc(d)}),o.isEditing?"":i(O,{variant:"h5",color:"primary",sx:{fontWeight:"900"},children:c("mindscape",{level:g?g.mindscape:0})})]}),o.isEditing?"":x(Y,{sx:{mt:"12px",display:"flex",gap:"14px",flexWrap:"wrap"},children:[x(Y,{sx:w=>({border:`2px solid ${w.palette.contentZzz.main}`,borderRadius:"20px",display:"flex"}),children:[i(O,{sx:{fontWeight:"900",paddingLeft:"12px",fontSize:"16px"},children:c("charLevel",{level:a})}),x(O,{color:"primary",sx:{fontWeight:"900",paddingLeft:"4px",pr:"10px"},children:["/ ",Ac[n]]})]}),x(Y,{gap:1.5,sx:{display:"flex",alignItems:"center"},children:[Ci.map((w,D)=>i(Xi,{anchorOrigin:{vertical:"bottom",horizontal:"left"},badgeContent:`${g?g[w]:0}`,color:"primary",children:i(U,{size:1.9,src:de(w)})},D)),i(Xi,{anchorOrigin:{vertical:"bottom",horizontal:"left"},badgeContent:`${g?g.core:0}`,color:"primary",children:i(U,{size:1.9,src:de("core")})},6)]})]})]})})}function ia({characterKey:e,charCardConfig:t}){const{t:n}=N("charNames_gen"),a={animation:"scroll 16s infinite linear","@keyframes scroll":{"0%":{transform:"translateX(-100%)"},"100%":{transform:"translateX(0)"}}};return i(Y,{component:"span",sx:{color:"#000",marginTop:"20px",fontStyle:"italic",fontSize:t.scrollingBgSize,lineHeight:"150px",whiteSpace:"nowrap",textTransform:"uppercase",display:"flex",justifyContent:"center",fontFamily:"Impact",opacity:.1,...a},children:n(`${e}`)})}function pd({mindscape:e,setMindscape:t}){const{t:n}=N("page_characters");return i(M,{sx:{display:"flex",flexWrap:"wrap",gap:2,mt:"12px"},children:Si(1,6).map(a=>i(M,{children:i(Vt,{sx:{position:"relative",borderRadius:"40px"},children:i(Ur,{control:i(Ll,{checked:e>=a,onChange:()=>t(a===e?a-1:a)}),label:x(M,{sx:{position:"absolute",top:9,left:e>=a?75:16,transition:"left 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",textAlign:"center"},children:[i(O,{variant:"subtitle1",sx:o=>({fontWeight:900,color:e>=a?o.palette.mindscapeActive.main:o.palette.mindscapeInactive.main}),children:n("mindscape",{level:a})}),i(O,{variant:"subtitle2",sx:o=>({lineHeight:.2,fontWeight:900,color:e>=a?o.palette.mindscapeActive.main:o.palette.mindscapeInactive.main}),children:n("mindscapeTitle")})]}),sx:{margin:0}})})},a))})}function fd(e){return{new:t=>e.chars.get(t)?0:1,name:t=>qc.t(t).toString(),level:t=>{const n=e.chars.get(t);return n?n.level*(n.promotion+1):0},rarity:t=>ie(t).rarity??0}}function $d(e){return{attribute:(t,n)=>n.includes(ie(t).attribute),specialtyType:(t,n)=>n.includes(ie(t).specialty),rarity:(t,n)=>n.includes(ie(t).rarity),name:(t,n)=>n===void 0||qc.t(t).toLowerCase().includes(n.toLowerCase()),new:(t,n)=>n===void 0||n===(e.chars.get(t)?"no":"yes")}}const ll={name:["name"],level:["level","rarity","name"],rarity:["rarity","level","name"]};function oy({show:e,onHide:t,onSelect:n,newFirst:a=!1}){const{database:o}=oe(),c=Fc(o.displayCharacter),[s,r]=v.useState(""),d=v.useDeferredValue(s),g=v.useDeferredValue(c),w=v.useMemo(()=>{const{attribute:$,specialtyType:y,sortType:k,ascending:R}=g,q=[...a?["new"]:[],...ll[k]??[]];return Hl.filter(jc({attribute:$,specialtyType:y,name:d},$d(o))).sort(Kl(q,R,fd(o),["new"]))},[g,a,d,o]);return i(yd,{show:e,charactersToShow:w,filterSearchSortProps:{searchTerm:s,onChangeSpecialtyFilter:$=>{o.displayCharacter.set({specialtyType:$})},onChangeAttributeFilter:$=>{o.displayCharacter.set({attribute:$})},onChangeSearch:$=>{r($.target.value)},onChangeSort:$=>{o.displayCharacter.set({sortType:$})},onChangeAsc:$=>{o.displayCharacter.set({ascending:$})}},onClose:()=>{r(""),t()},children:i(ae,{sx:{flex:"1",overflow:"auto"},children:i(v.Suspense,{fallback:i($e,{variant:"rectangular",width:"100%",height:1e3}),children:i(K,{container:!0,spacing:.5,columns:{xs:2,sm:3,md:4,lg:5},children:w.map($=>i(K,{item:!0,xs:1,children:i(Se,{bgt:"light",sx:y=>({position:"relative",flexGrow:1,display:"flex",flexDirection:"column",borderRadius:"40px 16px 16px 40px",border:`3px solid ${y.palette.contentZzz.main}`}),children:i(bd,{characterKey:$,onClick:()=>{t(),n($)}})})},$))})})})})}const _d=Object.keys(ll);function yd({show:e,charactersToShow:t,filterSearchSortProps:n,onClose:a,children:o}){const{t:c}=N("page_characters"),{database:s}=oe(),r=Fc(s.displayCharacter),d=v.useMemo(()=>Yi(Lc,y=>s.chars.entries.forEach(([k,R])=>{const q=ie(R.key).specialty;y[q].total++,t.includes(k)&&y[q].current++})),[t,s.chars.entries]),g=v.useMemo(()=>Yi(ve,y=>Object.entries(s.chars.data).forEach(([k])=>{const R=ie(k).attribute;y[R].total++,t.includes(k)&&y[R].current++})),[t,s.chars.data]),{specialtyType:w,attribute:D,sortType:S,ascending:$}=r;return i(Ii,{open:e,onClose:a,containerProps:{sx:{height:"100vh",p:{xs:1}}},children:x(Se,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[x(ae,{sx:{display:"flex",flexDirection:"column",gap:1},children:[x(M,{sx:{display:"flex",justifyContent:"space-between"},children:[x(M,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:[i(Gl,{onChange:y=>s.displayCharacter.set({specialtyType:y}),value:w,totals:d,size:"small"}),i(Ul,{onChange:y=>s.displayCharacter.set({attribute:y}),value:D,totals:g,size:"small"})]}),i(Di,{sx:{ml:"auto"},onClick:()=>a(),children:i(Ri,{})})]}),x(M,{display:"flex",gap:1,children:[i(Jl,{autoFocus:!0,value:n.searchTerm,onChange:y=>n.onChangeSearch(y),label:c("characterName"),size:"small",sx:{height:"100%",mr:"auto"},InputProps:{sx:{height:"100%"}}}),i(Yl,{sortKeys:_d,value:S,onChange:y=>n.onChangeSort(y),ascending:$,onChangeAsc:y=>n.onChangeAsc(y)})]})]}),i(Ot,{}),o]})})}function bd({characterKey:e,onClick:t}){const{t:n}=N(["page_characters","charNames_gen"]),a=Wl(),o=yn(e),{rarity:c,attribute:s}=ie(e),{level:r=1,promotion:d=0,mindscape:g=0}=o??{},w=s==="electric"?a.palette[s].light:a.palette[s].main;return i(ki,{onClick:t,children:x(M,{sx:{position:"relative",width:"100%",display:"flex",padding:"3px",gap:.5,"&::before":{content:'""',display:"block",position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:.7,background:w}},children:[i(M,{sx:{maxWidth:{xs:"33%",lg:"30%"},alignSelf:"flex-end",display:"flex",flexDirection:"column",zIndex:1,flexShrink:1},children:i(M,{component:gn?gn:"img",src:Nl(e,"interknot")})}),x(M,{sx:{display:"flex",flexDirection:"column",zIndex:1,justifyContent:"space-evenly"},children:[x(M,{sx:{display:"flex",alignItems:"center",gap:.5},children:[i(U,{size:1.5,src:Pc(c)}),i(O,{variant:"subtitle2",sx:D=>({flexGrow:1,color:D.palette.contentNormal.main,fontWeight:"900"}),children:n(`charNames_gen:${e}`)})]}),o?x(M,{sx:D=>({display:"flex",gap:1,alignItems:"center",background:D.palette.contentNormal.main,padding:"4px 12px",borderRadius:"20px"}),children:[x(M,{sx:{textShadow:"0 0 5px gray"},children:[i(O,{variant:"body2",component:"span",whiteSpace:"nowrap",children:n("charLevel",{level:r})}),x(O,{variant:"body2",component:"span",color:"text.secondary",children:["/",Ac[d]]})]}),x(O,{variant:"body2",children:["M",g]})]}):i(O,{component:"span",variant:"body2",children:i(wi,{color:"electric",children:n("characterEditor.new")})})]})]})})}function xd(){const{t:e}=N("page_characters"),{database:t}=oe(),n=_n(),{core:a=0,promotion:o=0,key:c}=n??{},s=v.useCallback(r=>c&&t.chars.set(c,{core:r}),[t,c]);return i(Kc,{fullWidth:!0,title:e("core",{level:a}),color:"primary",startIcon:i(U,{src:de("core"),size:1.75,sideMargin:!0}),children:Si(0,Zl[o]).map(r=>i(Hc,{selected:a===r,disabled:a===r,onClick:()=>s(r),children:e("core",{level:r})},r))})}const wd={xs:2*3,sm:2*3,md:3*3,lg:4*3,xl:4*3};function rl({disc:e,onChangeId:t,slotKey:n,show:a,onClose:o}){const{t:c}=N(["page_characters","disc"]),{database:s}=oe(),r=e==null?void 0:e.id,d=v.useCallback((I,E)=>({...I,...E,slotKeys:[n]}),[n]),[g,w]=v.useReducer(d,{...Or(),slotKeys:[n]}),D=Ql(),S=v.useMemo(()=>Pr(),[]),$=Xl(s.discs),y=$.filter(I=>I.slotKey===g.slotKeys[0]).length,k=v.useMemo(()=>{const I=jc(g,S);let E=$.filter(I).map(P=>P.id);return r&&s.discs.get(r)&&(E=E.filter(P=>P!==r),E.unshift(r)),E},[g,S,$,r,s.discs]),{numShow:R,setTriggerElement:q}=er(wd[D],k.length),j=v.useMemo(()=>k.slice(0,R),[k,R]),ee=k.length!==y?`${k.length}/${y}`:`${y}`,te={numShowing:j.length,total:ee,t:c,namespace:"disc"},F=v.useCallback(I=>{tr.includes(I)?t(null):I&&t(I),o()},[t,o]);return i(Ii,{open:a,onClose:o,containerProps:{maxWidth:"xl"},children:x(Se,{children:[x(ae,{sx:{py:1,display:"flex",alignItems:"center"},children:[i(O,{variant:"h6",children:c("tabEquip.swapDisc")}),i(Di,{onClick:o,sx:{ml:"auto"},children:i(Ri,{})})]}),i(Ot,{}),i(ae,{children:i(v.Suspense,{fallback:i($e,{variant:"rectangular",width:"100%",height:200}),children:i(nr,{filterOption:g,filterOptionDispatch:w,filteredIds:k,disableSlotFilter:!0})})}),i(Ot,{}),x(ae,{children:[i(M,{pb:1,display:"flex",justifyContent:"space-between",alignItems:"flex-end",flexWrap:"wrap",children:i(ir,{showingTextProps:te})}),i(M,{mt:1,children:i(v.Suspense,{fallback:i($e,{variant:"rectangular",width:"100%",height:1e3}),children:x(K,{container:!0,spacing:1,columns:{xs:2,md:3,lg:4},children:[r&&i(K,{item:!0,xs:1,children:i(Se,{bgt:"light",sx:{width:"100%",height:"100%"},children:i(ki,{sx:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},onClick:()=>F(n),children:x(M,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[i(ar,{sx:{fontSize:"10em"}}),i(O,{children:c("disc:button.unequipDisc")})]})})})}),j.map(I=>i(K,{item:!0,xs:1,sx:E=>({...r===I&&{"> .MuiCard-root":{outline:`${E.spacing(.5)} solid ${E.palette.warning.main}`}}}),children:i(Wc,{disc:s.discs.get(I),onClick:r===I?void 0:()=>F(I)})},I))]})})}),k.length!==j.length&&i($e,{ref:I=>{I&&q(I)},sx:{borderRadius:1,mt:1},variant:"rectangular",width:"100%",height:100})]})]})})}function vd(e){return"fieldRef"in e}var Dt={},aa;function kd(){if(aa)return Dt;aa=1;var e=or();Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.default=void 0;var t=e(sr()),n=cr(),a=(0,t.default)((0,n.jsx)("path",{d:"M6.99 11 3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z"}),"SwapHoriz");return Dt.default=a,Dt}var Cd=kd();const Ft=lr(Cd),Sd={xs:1,sm:2,md:3,lg:3,xl:3};function Dd({setWengine:e,setDisc:t}){const{database:n}=oe(),a=v.useContext(Nc),[o,c]=v.useState(),[s,r]=v.useState(""),d=v.useCallback(y=>{r(y)},[]),g=v.useCallback(y=>{c(y)},[]),w=Gc(a==null?void 0:a.equippedWengine),D=a?ie(a.key).specialty:Lc[0],S=Uc(a==null?void 0:a.equippedDiscs),$=rr(o);return i(M,{children:x(Rc,{spacing:2,children:[i(v.Suspense,{fallback:!1,children:s&&i(dr,{wengineId:s,footer:!0,onClose:()=>r(""),extraButtons:i(zd,{wengineId:(w==null?void 0:w.id)||"",wengineTypeKey:D,onChangeId:e})})}),i(v.Suspense,{fallback:!1,children:$&&i(hr,{disc:$,show:!!o,onShow:()=>c(o),onClose:()=>c(void 0),cancelEdit:()=>c(void 0)})}),i(M,{children:w!=null&&w.id?i(ur,{wengine:w,onEdit:()=>d(w.id),extraButtons:i(Td,{wengineId:w.id,wengineTypeKey:D,onChangeId:e})}):i(Rd,{wengineId:"",wengineTypeKey:D,onChangeId:e})}),i(M,{children:i(K,{item:!0,columns:Sd,container:!0,spacing:1,children:!!S&&Object.entries(S).map(([y,k])=>i(K,{item:!0,xs:1,children:k!=null&&k.id?i(Wc,{disc:k,extraButtons:i(Md,{disc:k,slotKey:y,onChangeId:R=>t(y,R)}),onEdit:()=>g(k.id),onLockToggle:()=>n.discs.set(k.id,({lock:R})=>({lock:!R}))}):i(Id,{slotKey:y,onChangeId:R=>t(y,R)})},(k==null?void 0:k.id)||y))})})]})})}function Rd({wengineId:e,wengineTypeKey:t,onChangeId:n}){const[a,o,c]=At();return x(Vt,{bgt:"light",sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[i(ae,{children:x(O,{children:[i(U,{src:Vc(t)})," "]})}),i(Ot,{}),x(M,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:[i(Mi,{wengineId:e,wengineTypeKey:t,show:a,onClose:c,onChangeId:n}),i(De,{onClick:o,color:"info",sx:{borderRadius:"1em"},children:i(Ft,{sx:{height:100,width:100}})})]})]})}function Id({slotKey:e,onChangeId:t}){const[n,a,o]=At(),{t:c}=N("disc");return x(Vt,{bgt:"light",sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[i(ae,{children:i(O,{children:c("slotName",{slotKey:e})})}),i(Ot,{}),x(M,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:[i(rl,{disc:void 0,slotKey:e,show:n,onClose:o,onChangeId:t}),i(De,{onClick:a,color:"info",sx:{borderRadius:"1em"},children:i(Ft,{sx:{height:100,width:100}})})]})]})}function Md({disc:e,slotKey:t,onChangeId:n}){const{t:a}=N("page_characters"),[o,c,s]=At();return x(qt,{children:[i(Jc,{title:i(O,{children:a("tabEquip.swapDisc")}),placement:"top",arrow:!0,children:i(De,{color:"info",size:"small",onClick:c,"aria-label":a("tabEquip.swapDisc"),children:i(Ft,{})})}),i(rl,{disc:e,slotKey:t,show:o,onClose:s,onChangeId:n})]})}function Td({wengineId:e,wengineTypeKey:t,onChangeId:n}){const{t:a}=N("page_characters"),[o,c,s]=At();return x(qt,{children:[i(Jc,{title:i(O,{children:a("tabEquip.swapWengine")}),placement:"top",arrow:!0,children:i(De,{color:"info",size:"small",onClick:c,children:i(Ft,{})})}),i(Mi,{wengineId:e,wengineTypeKey:t,onChangeId:n,show:o,onClose:s})]})}function zd({wengineId:e,wengineTypeKey:t,onChangeId:n}){const{t:a}=N("page_characters"),[o,c,s]=At();return x(qt,{children:[i(De,{color:"info",onClick:c,startIcon:i(Ft,{}),children:a("tabEquip.swapWengine")}),i(Mi,{wengineId:e,wengineTypeKey:t,onChangeId:n,show:o,onClose:s})]})}function Bd({skillKey:e}){const{database:t}=oe(),{t:n}=N("page_characters"),a=_n(),{[e]:o=0,promotion:c=0,key:s}=a??{},r=v.useCallback(d=>s&&t.chars.set(s,{[e]:d}),[t,s,e]);return i(Kc,{fullWidth:!0,title:n(e,{level:o}),color:"primary",startIcon:i(U,{src:de(e),size:1.75,sideMargin:!0}),children:Si(1,mr[c]).map(d=>i(Hc,{selected:o===d,disabled:o===d,onClick:()=>r(d),children:n(e,{level:d})},d))})}function bn(){const e=v.useContext(Ti),t=v.useContext(gr);return v.useMemo(()=>e==null?void 0:e.withTag(t),[e,t])}const W=(e,t)=>i(mn,{ns:"sheet",key18:e,values:t});function h(e,t){return[(n,a)=>i(mn,{ns:`${e}_${t}_gen`,key18:n,values:a}),(n,a)=>i(mn,{ns:`${e}_${t}`,key18:n,values:a})]}function l(e){return{title:i(xn,{tag:e}),fieldRef:e}}function Ed(e){if(!e)return"";const{et:t,q:n,qt:a,name:o}=e;return t==="own"&&a==="formula"&&n!=="base"?o??n??"":n??""}const Od={initial:"Initial",combat:"Combat",final:"Final",base:"Base"};function xn({tag:e,showPercent:t,preventRecursion:n}){return i(ke,{color:Z_(e),children:i(Ad,{tag:e,showPercent:t,preventRecursion:n})})}function sy({tag:e,showPercent:t}){return x(qt,{children:[i(xn,{tag:e,showPercent:t}),X_(e).map(n=>i(wi,{children:fn[n]},n)),e.attribute&&i(wi,{color:e.attribute,children:i(hd,{attribute:e.attribute})})]})}const Pd=["hp","hp_","atk","atk_","def","def_"],Vd=e=>Pd.includes(e),oa={dmg_:"DMG",common_dmg_:"DMG",defIgn_:"DEF Ignore",resIgn_:"Res Ignore",dazeInc_:"Daze Increase"};function Ad({tag:e,showPercent:t,preventRecursion:n}){var s;const a=bn(),o=(s=ey.subset(e)[0])==null?void 0:s.title;if(o&&!n)return o;if(e.qt==="cond"&&e.q&&e.sheet&&a){const r=vi.get(`${e.sheet}:${e.q}`);if(r)return pr(r.label,a,a==null?void 0:a.compute(new fr(e,"max")).val)}const c=Ed(e);if(Vd(c))return x("span",{children:[i(_r,{statKey:c,iconProps:$r})," ",x("span",{children:[(e.qt&&Od[e.qt])??e.qt," ",yr[c],t&&Yc(c)]})]});if(oa[c]){const r=[...e.attribute?[pe[e.attribute]]:[],...e.damageType1?[fn[e.damageType1]]:[],...e.damageType2?[fn[e.damageType2]]:[],oa[c]];return i("span",{children:r.join(" ")})}return i(Bt,{statKey:c,showPercent:t})}function qd(){const e=bn();return i(Vt,{children:i(ae,{children:e==null?void 0:e.listFormulas(A.listing.formulas).map((t,n)=>i(Fd,{read:t},n))})})}function Fd({read:e}){var k,R,q,j,ee,te,F;const t=bn(),{setRead:n}=v.useContext(br),a=_n(),o=ed(a==null?void 0:a.key),c=e.tag.sheet===((k=o==null?void 0:o.target)==null?void 0:k.sheet)&&e.tag.name===((R=o==null?void 0:o.target)==null?void 0:R.name)||((q=o==null?void 0:o.target)==null?void 0:q.q)===e.tag.q,s=v.useMemo(()=>{var I,E,P,ne;return e.tag.sheet===((I=o==null?void 0:o.target)==null?void 0:I.sheet)&&e.tag.name===((E=o==null?void 0:o.target)==null?void 0:E.name)?xr(e.tag,(P=o==null?void 0:o.target)==null?void 0:P.damageType1,(ne=o==null?void 0:o.target)==null?void 0:ne.damageType2):e.tag},[e.tag,(j=o==null?void 0:o.target)==null?void 0:j.sheet,(ee=o==null?void 0:o.target)==null?void 0:ee.name,(te=o==null?void 0:o.target)==null?void 0:te.damageType1,(F=o==null?void 0:o.target)==null?void 0:F.damageType2]),r=v.useMemo(()=>({...e,tag:s}),[s,e]),d=t==null?void 0:t.compute(r),g=s.name||s.q,{statHighlight:w,setStatHighlight:D}=v.useContext(wr),S=s.name?"":s.attribute?`${s.attribute}_${s.q}`:s.q==="cappedCrit_"?"crit_":s.q==="anom_cappedCrit_"?"anom_crit_":s.q,$=S?vr(w,S):!1;if(!d)return null;const y=kr(d.val,Yc(g??""));return x(M,{onMouseEnter:()=>S&&D(S),onMouseLeave:()=>D(""),sx:{display:"flex",gap:1,alignItems:"center",p:.5,borderRadius:.5,backgroundColor:c?"rgba(0,200,0,0.2)":void 0,position:"relative","::after":{content:'""',position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:.5,backgroundColor:Cr($),transition:"background-color 0.3s ease-in-out",pointerEvents:"none"}},children:[i(M,{sx:{flexGrow:1},children:i(xn,{tag:s})}),y,i(Sr,{tag:s,onClick:()=>{n(r)}})]})}function cy({characterKey:e,onClose:t}){return i(Ii,{open:!!e,onClose:t,children:i(v.Suspense,{fallback:i($e,{variant:"rectangular",width:"100%",height:1e3}),children:e&&i(jd,{characterKey:e,onClose:t},e)})})}function jd({characterKey:e,onClose:t}){const n=yn(e);return i(Se,{children:i(ae,{sx:{display:"flex",flexDirection:"column",gap:1},children:i(v.Suspense,{fallback:i($e,{variant:"rectangular",width:"100%",height:1e3}),children:n?i(Nc.Provider,{value:n,children:i(Hd,{onClose:t})}):i($e,{variant:"rectangular",width:"100%",height:1e3})})})})}const Ld={cardWidth:"500px",charImgWidth:"75%",iconsSize:1.5,isEditing:!0,charNameWidth:"166px",charNameVariant:"h6",scrollingBgSize:"220px"};function Hd({onClose:e}){const{t}=N(["page_characters"]),n=Dr(),{database:a}=oe(),o=_n(),{key:c,equippedDiscs:s,equippedWengine:r}=o,d=v.useCallback(async()=>{const g=t(`${c}`);window.confirm(t("removeCharacter",{value:g}))&&(a.chars.remove(c),n("/characters"))},[a,n,c,t]);return x(M,{display:"flex",flexDirection:"column",gap:1,children:[x(M,{display:"flex",gap:1,children:[i(De,{color:"error",onClick:()=>d(),startIcon:i(Rr,{}),sx:{marginLeft:"auto"},children:t("characterEditor.delete")}),!!e&&i(Di,{onClick:e,children:i(Ri,{})})]}),i(M,{children:x(K,{container:!0,spacing:1,sx:{justifyContent:"center"},children:[i(K,{item:!0,xs:6,sm:4,md:4,lg:4,xl:4,children:x(Se,{sx:{height:"100%",display:"flex",flexDirection:"column",gap:1},children:[i(ud,{characterKey:c,charCardConfig:Ld}),i(M,{sx:{px:1},children:i(Ir,{level:o.level,milestone:o.promotion,setBoth:({level:g,milestone:w})=>a.chars.set(c,{level:g,promotion:w})})}),i(qd,{}),i(pd,{mindscape:o.mindscape,setMindscape:g=>a.chars.set(c,{mindscape:g})})]})}),x(K,{item:!0,xs:6,sm:8,md:8,lg:8,xl:8,sx:{display:"flex",flexDirection:"column",gap:1},children:[i(M,{children:x(K,{container:!0,columns:3,spacing:1,children:[Ci.map(g=>i(K,{item:!0,xs:1,children:i(Bd,{skillKey:g},g)},g)),i(K,{item:!0,xs:1,children:i(xd,{})},"core")]})}),i(M,{children:i(Dd,{setWengine:g=>{g?a.wengines.set(g,{location:c}):r&&a.wengines.set(r,{location:""})},setDisc:(g,w)=>{w?a.discs.set(w,{location:c}):s[g]&&a.discs.set(s[g],{location:""})}})})]})]})})]})}function ly({character:e,charOpt:t,wengineId:n,discIds:a,children:o}){const c=Kd(e,n,a),s=v.useMemo(()=>cl([...sl([e.key]),...c,hn.common.critMode.add(t.critMode),X.common.lvl.add(t.enemyLvl),X.common.def.add(t.enemyDef),X.common.isStunned.add(t.enemyisStunned?1:0),X.common.stun_.add(t.enemyStunMultiplier/100),X.common.unstun_.add(1),...t.conditionals.flatMap(({sheet:d,src:g,dst:w,condKey:D,condValue:S})=>rn("preset0",Zc(d,g,w)(D,S))),...t.bonusStats.filter(({disabled:d})=>!d).flatMap(({tag:d,value:g})=>rn("preset0",{tag:{...d,src:e.key,sheet:"agg",et:"own"},value:Zi(Qi(g,d.q??""))})),...t.enemyStats.flatMap(({tag:d,value:g})=>rn("preset0",{tag:{...d,qt:"common",et:"enemy",sheet:"agg"},value:Zi(Qi(g,d.q??""))}))]),[c,t,e.key]),r=v.useMemo(()=>s&&new Map,[s]);return i(Mr.Provider,{value:r,children:i(Ti.Provider,{value:s,children:o})})}function Kd(e,t,n){const a=Gc(t),o=Uc(n),c=v.useMemo(()=>cd(a),[a]),s=v.useMemo(()=>ld(Object.values(o).filter(Tr)),[o]);return v.useMemo(()=>il(e.key,...al(e),...c,...s),[e,c,s])}function ry({character:e,conditionals:t,children:n}){const a=v.useMemo(()=>cl([...sl([e.key]),...il(e.key,...al(e),...ol({},Qc(Ec,()=>4)),V.sheet("agg").reread(V.sheet("wengine")),A.wengine.lvl.add(60),A.wengine.modification.add(5),A.wengine.phase.add(1),...Bc.map(o=>A.common.count.sheet(o).add(1))),hn.common.critMode.add("avg"),X.common.lvl.add(100),X.common.def.add(900),X.common.isStunned.add(0),X.common.stun_.add(1.5),X.common.unstun_.add(1),...t.flatMap(({sheet:o,src:c,dst:s,condKey:r,condValue:d})=>rn("preset0",Zc(o,c,s)(r,d)))]),[e,t]);return i(Ti.Provider,{value:a,children:n})}function C(e,t={}){return{...Wd(e,t==null?void 0:t.perSkillAbility),core:Gd(e,t==null?void 0:t.core,t==null?void 0:t.ability),m1:ye(e,1,t==null?void 0:t.m1),m2:ye(e,2,t==null?void 0:t.m2),m3:ye(e,3,t==null?void 0:t.m3),m4:ye(e,4,t==null?void 0:t.m4),m5:ye(e,5,t==null?void 0:t.m5),m6:ye(e,6,t==null?void 0:t.m6)}}function _(e){return{title:i(xn,{tag:e.tag,preventRecursion:!0}),fieldRef:e.tag}}function Wd(e,t){const n=b.char[e],a=Z[e],[o,c]=h("char",e);return Qc(Ci,s=>({title:s,img:de(`${s}Flat`),documents:Object.keys(n[s]).flatMap(r=>{var d;return[{type:"text",header:{icon:i(U,{src:de(`${s}Flat`),size:1.5}),text:o(`${s}.${r}.name`)},text:o(`${s}.${r}.desc`)},{type:"fields",fields:Object.values(a).filter(g=>g.name.includes(r)).map(g=>({title:Nd(e,s,g.name),fieldRef:g.tag}))},...((d=t==null?void 0:t[s])==null?void 0:d[r])??[]]})}))}function Nd(e,t,n){const[a,o,c]=n.split("_");return W(c,{val:`$t(char_${e}_gen:${t}.${a}.params.${o})`})}function Gd(e,t=[],n=[]){const[a,o]=h("char",e);return{title:"core",documents:[{type:"text",header:{icon:i(U,{src:de("coreFlat"),size:1.5}),text:a("core.name")},text:c=>a(`core.desc.${c.compute(A.char.core).val}`)},...t,{type:"text",header:{icon:i(U,{src:de("coreFlat"),size:1.5}),text:a("ability.name")},text:a("ability.desc")},...n]}}function ye(e,t,n=[]){const[a,o]=h("char",e);return{title:`mindscape${t}`,documents:[{type:"text",header:{icon:i(U,{src:zr(t),size:1.5}),text:a(`mindscapes.${t}.name`)},text:x(qt,{children:[a(`mindscapes.${t}.desc`),i("br",{}),i("br",{}),i("i",{children:a(`mindscapes.${t}.flavor`)})]})},...n]}}const wn="Anby",[,nn]=h("char",wn),Qn=m[wn],be=u[wn],Ud=C(wn,{core:[{type:"conditional",conditional:{label:nn("coreCond"),metadata:Qn.core_after3rdBasic,fields:[{title:nn("core_dazeInc_"),fieldRef:be.core_after3rdBasic_dazeInc_.tag}]}}],m1:[{type:"conditional",conditional:{label:nn("m1Cond"),metadata:Qn.m1After4thBasicHit,fields:[_(be.m1_after4thHit_energyRegen_)]}}],m2:[{type:"fields",fields:[_(be.m2_stunned_basic_dmg_),_(be.m2_unstunned_ex_dazeInc_)]}],m6:[{type:"conditional",conditional:{label:nn("m6Cond"),metadata:Qn.m6ChargeConsumed,fields:[_(be.m6_charge_basic_dmg_),_(be.m6_charge_exSpecial_dmg_)]}}]}),Jd="Anton",Yd=C(Jd),Zd="AstraYao",Qd=C(Zd),Xd="Ben",eh=C(Xd),th="Billy",nh=C(th),Re="Burnice",[,G]=h("char",Re),sa=m[Re],ce=u[Re],an=Z[Re],ih=b.char[Re],ah=C(Re,{core:[{type:"fields",fields:[{title:G("core_afterburn_dmg"),fieldRef:an.core_afterburn_dmg.tag},{title:G("core_afterburn_anomBuildup"),fieldRef:an.core_afterburn_anomBuildup.tag},{title:G("core_afterburn_dmg_"),fieldRef:ce.core_afterburn_dmg_.tag}]}],ability:[{type:"fields",fields:[_(ce.ability_fire_anomBuildup_)]}],m1:[{type:"fields",fields:[{title:G("m1_afterburn_mv_mult"),fieldValue:ih.m1.afterburn_dmg*100,unit:"%"},{title:G("m1_afterburn_anomBuildup"),fieldRef:ce.m1_afterburn_fire_anomBuildup_.tag}]}],m2:[{type:"conditional",conditional:{label:G("m2Cond"),metadata:sa.thermal_penetration,fields:[_(ce.m2_pen_)]}}],m4:[{type:"fields",fields:[{title:G("m4_exSpecial_crit_"),fieldRef:ce.m4_exSpecial_crit_.tag},{title:G("m4_assistSkill_crit_"),fieldRef:ce.m4_assistSkill_crit_.tag}]}],m6:[{type:"fields",fields:[{title:G("m6_additional_afterburn_dmg"),fieldRef:an.m6_additional_afterburn_dmg.tag}]},{type:"conditional",conditional:{label:G("m6Cond"),metadata:sa.exSpecial_active,fields:[_(ce.m6_burn_fire_resIgn_),{title:G("m6_fire_resIgn"),fieldRef:ce.m6_fire_resIgn_.tag},{title:G("m6_additional_burn_dmg"),fieldRef:an.m6_additional_burn_dmg.tag}]}}]}),oh="Caesar",sh=C(oh),ch="Corin",lh=C(ch),rh="Ellen",dh=C(rh),jt="Evelyn",[,he]=h("char",jt),Xn=m[jt],xe=u[jt],ca=Z[jt],hh=C(jt,{core:[{type:"conditional",conditional:{label:he("coreCond"),metadata:Xn.binding_seal,fields:[_(xe.core_crit_)]}}],ability:[{type:"fields",fields:[{title:he("ability_dmg_"),fieldRef:xe.ability_chain_ult_dmg_.tag},{title:he("ability_mv_mult"),fieldRef:xe.ability_chainSkill_mv_mult.tag}]}],m1:[{type:"conditional",conditional:{label:he("m1Cond"),metadata:Xn.enemy_bound,fields:[_(xe.m1_defIgn_)]}}],m2:[{type:"fields",fields:[_(xe.m2_atk_)]}],m4:[{type:"fields",fields:[{title:he("m4_shield"),fieldRef:ca.m4_shield.tag}]},{type:"conditional",conditional:{label:he("m4Cond"),metadata:Xn.m4_shield_exists,fields:[_(xe.m4_crit_dmg_)]}}],m6:[{type:"fields",fields:[{title:he("m6_follow_up_dmg"),fieldRef:ca.m6_follow_up_dmg_.tag}]}]}),uh="Grace",mh=C(uh),gh="Harumasa",ph=C(gh),fh="Hugo",$h=C(fh),Lt="Jane",[,le]=h("char",Lt),ue=m[Lt],L=u[Lt],_h=Z[Lt],yh=C(Lt,{perSkillAbility:{basic:{Passion:[{type:"conditional",conditional:{label:le("passionCond"),metadata:ue.passion,fields:[_(L.passion_physical_anomBuildup_),_(L.passion_atk)]}}]}},core:[{type:"conditional",conditional:{label:le("gnawedCond"),metadata:ue.gnawed,fields:[_(L.core_assault_crit_),_(L.core_assault_crit_dmg_)]}}],ability:[{type:"conditional",conditional:{label:le("abilityCond"),metadata:ue.enemy_suffering_anomaly,fields:[_(L.ability_physical_anomBuildup_)]}}],m1:[{type:"conditional",conditional:{label:le("passionCond"),metadata:ue.passion,fields:[_(L.m1_physical_anomBuildup_),_(L.m1_common_dmg_)]}}],m2:[{type:"conditional",conditional:{label:le("gnawedCond"),metadata:ue.gnawed,fields:[_(L.m2_defIgn_),_(L.m2_assault_defIgn_),_(L.m2_assault_crit_dmg_)]}}],m4:[{type:"conditional",conditional:{label:le("m4Cond"),metadata:ue.assault_or_disorder_triggered,fields:[_(L.m4_anomaly_dmg_)]}}],m6:[{type:"conditional",conditional:{label:le("passionCond"),metadata:ue.passion,fields:[_(L.m6_crit_),_(L.m6_crit_dmg_)]}},{type:"fields",fields:[{title:le("m6_additional_dmg"),fieldRef:_h.m6_additional_dmg.tag}]}]}),bh="JuFufu",xh=C(bh),wh="Koleda",vh=C(wh),Ie="Lighter",[,re]=h("char",Ie),Rt=m[Ie],Q=u[Ie],kh=Z[Ie],Ch=b.char[Ie],Sh=C(Ie,{core:[{type:"conditional",conditional:{label:re("coreCond.morale_consumed"),metadata:Rt.morale_consumed,fields:[_(Q.core_impact_)]}},{type:"conditional",conditional:{label:re("coreCond.morale_burst_hit"),metadata:Rt.morale_burst_hit,fields:[_(Q.core_ice_resRed_),_(Q.core_fire_resRed_)]}}],ability:[{type:"conditional",conditional:{label:re("abilityCond"),metadata:Rt.elation,fields:[_(Q.ability_ice_dmg_),_(Q.ability_fire_dmg_)]}}],m1:[{type:"conditional",conditional:{label:re("collapseCond"),metadata:Rt.collapse,fields:[_(Q.m1_ice_resRed_),_(Q.m1_fire_resRed_)]}},{type:"fields",fields:[{title:re("m1_finishing_move_dmg_"),fieldRef:Q.m1_finishing_move_dmg_.tag}]}],m2:[{type:"conditional",conditional:{label:re("collapseCond"),metadata:Rt.collapse,fields:[_(Q.m2_stun_)]}},{type:"fields",fields:[{title:re("m2_elation_inc_"),fieldValue:Ch.m2.ability_buff_inc_*100,unit:"%"}]}],m4:[{type:"fields",fields:[_(Q.m4_enerRegen_)]}],m6:[{type:"fields",fields:[{title:re("m6_blazing_impact_dmg"),fieldRef:kh.m6_blazing_impact_dmg.tag}]}]}),Dh="Lucy",Rh=C(Dh),Ih="Lycaon",Mh=C(Ih),Th="Miyabi",zh=C(Th),Bh="Nekomata",Eh=C(Bh),vn="Nicole",[,ei]=h("char",vn),la=m[vn],It=u[vn],Oh=C(vn,{core:[{type:"conditional",conditional:{label:ei("coreCond"),metadata:la.bulletsOrFieldHit,fields:[_(It.core_defRed_)]}}],ability:[{type:"fields",fields:[_(It.ability_ether_dmg_)]}],m1:[{type:"fields",fields:[_(It.m1_exSpecial_dmg_),{title:ei("m1_exSpecial_anomBuildup"),fieldRef:It.m1_exSpecial_anomBuildup_.tag}]}],m6:[{type:"conditional",conditional:{label:ei("m6Cond"),metadata:la.fieldHitsEnemy,fields:[_(It.m6_crit_)]}}]}),Ph="PanYinhu",Vh=C(Ph),Ah="Piper",qh=C(Ah),Fh="Pulchra",jh=C(Fh),Me="Qingyi",[,Mt]=h("char",Me),ti=m[Me],J=u[Me],Lh=Z[Me],Hh=b.char[Me],Kh=C(Me,{perSkillAbility:{basic:{BasicAttackEnchantedMoonlitBlossoms:[{type:"conditional",conditional:{label:Mt("flashConnectCond"),metadata:ti.flash_connect_consumed,fields:[_(J.flash_connect_dmg_),_(J.flash_connect_dazeInc_)]}}]},chain:{ChainAttackTranquilSerenade:[{type:"fields",fields:[_(J.chain_dmg_)]}]}},core:[{type:"conditional",conditional:{label:Mt("subjugationCond"),metadata:ti.subjugation,fields:[_(J.core_stun_)]}}],ability:[{type:"fields",fields:[_(J.ability_basic_dazeInc_),_(J.ability_atk)]}],m1:[{type:"fields",fields:[_(J.m1_defRed_),_(J.m1_crit_)]}],m2:[{type:"fields",fields:[{title:Mt("m2_stun_"),fieldValue:Hh.m2.stun_mult_*100,unit:"%"},_(J.m2_dazeInc_)]}],m4:[{type:"fields",fields:[{title:Mt("m4_shield"),fieldRef:Lh.m4_shield.tag}]}],m6:[{type:"fields",fields:[_(J.m6_crit_dmg_)]},{type:"conditional",conditional:{label:Mt("m6Cond"),metadata:ti.moonlit_blossoms_hit,fields:[_(J.m6_resRed_)]}}]}),Wh="Rina",Nh=C(Wh),Gh="Seth",Uh=C(Gh),Ht="Soldier0Anby",[,on]=h("char",Ht),ni=m[Ht],we=u[Ht],Jh=Z[Ht],Yh=C(Ht,{core:[{type:"conditional",conditional:{label:on("coreCond"),metadata:ni.markedWithSilverStar,fields:[_(we.core_common_dmg_),_(we.core_markedWithSilverStar_crit_dmg_)]}}],ability:[{type:"fields",fields:[_(we.ability_crit_),_(we.ability_aftershock_dmg_)]}],m2:[{type:"conditional",conditional:{label:on("coreCond"),metadata:ni.markedWithSilverStar,fields:[_(we.m2_crit_)]}}],m4:[{type:"conditional",conditional:{label:on("coreCond"),metadata:ni.markedWithSilverStar,fields:[_(we.m4_electric_resIgn_)]}}],m6:[{type:"fields",fields:[{title:on("m6_additional_dmg"),fieldRef:Jh.m6_additional_dmg.tag}]}]}),Zh="Soldier11",Qh=C(Zh),Xh="Soukaku",eu=C(Xh),Kt="Trigger",[,me]=h("char",Kt),ra=m[Kt],Tt=u[Kt],ii=Z[Kt],tu=C(Kt,{core:[{type:"conditional",conditional:{label:me("coreCond"),metadata:ra.aftershock_hit,fields:[_(Tt.core_stun_)]}}],ability:[{type:"fields",fields:[{title:me("ability_dazeInc_"),fieldRef:Tt.ability_aftershock_dazeInc_.tag}]}],m1:[{type:"fields",fields:[_(Tt.m1_stun_)]}],m2:[{type:"conditional",conditional:{label:me("m2Cond"),metadata:ra.hunters_gaze,fields:[_(Tt.m2_crit_dmg_)]}}],m4:[{type:"fields",fields:[{title:me("m4_disconnect_dmg"),fieldRef:ii.m4_disconnect_dmg.tag},{title:me("m4_disconnect_daze"),fieldRef:ii.m4_disconnect_daze.tag}]}],m6:[{type:"fields",fields:[{title:me("m6_armor_break_rounds_dmg"),fieldRef:ii.m6_armor_break_rounds_dmg.tag},{title:me("m6_armor_break_rounds_dmg_"),fieldRef:Tt.m6_armor_break_rounds_dmg_.tag}]}]}),nu="Vivian",iu=C(nu),au="Yanagi",ou=C(au),su="Yixuan",cu=C(su),Wt="ZhuYuan",[,ge]=h("char",Wt),ai=m[Wt],zt=u[Wt],lu=Z[Wt],ru=C(Wt,{core:[{type:"fields",fields:[{title:ge("core_dmg_"),fieldRef:zt.core_dmg_.tag}]}],ability:[{type:"conditional",conditional:{label:ge("abilityCond"),metadata:ai.ex_chain_ult_used,fields:[_(zt.ability_crit_)]}}],m2:[{type:"conditional",conditional:{label:ge("m2SuppresiveModeCond"),metadata:ai.suppresive_mode,fields:[_(zt.m2_dmg_red_)]}},{type:"conditional",conditional:{label:ge("m2BasicDashEtherCond"),metadata:ai.shotshells_hit,fields:[{title:ge("m2_basic_dash_ether_dmg_"),fieldRef:zt.m2_basic_dash_ether_dmg_.tag}]}}],m4:[{type:"fields",fields:[{title:ge("m4_ether_resIgn_"),fieldRef:zt.m4_basic_dash_ether_res_ign_.tag}]}],m6:[{type:"fields",fields:[{title:ge("m6_ether_afterglow"),fieldRef:lu.m6_ether_afterglow.tag}]}]}),du={Anby:Ud,Anton:Yd,AstraYao:Qd,Ben:eh,Billy:nh,Burnice:ah,Caesar:sh,Corin:lh,Ellen:dh,Evelyn:hh,Grace:mh,Harumasa:ph,Hugo:$h,Jane:yh,JuFufu:xh,Koleda:vh,Lighter:Sh,Lucy:Rh,Lycaon:Mh,Miyabi:zh,Nekomata:Eh,Nicole:Oh,Piper:qh,Pulchra:jh,Qingyi:Kh,Rina:Nh,Seth:Uh,Soldier0Anby:Yh,Soldier11:Qh,Soukaku:eu,Trigger:tu,Vivian:iu,Yanagi:ou,PanYinhu:Vh,Yixuan:cu,ZhuYuan:ru},kn="AstralVoice",[da,hu]=h("disc",kn),ha=T(kn),uu=m[kn],mu=u[kn],gu={2:{title:i(z,{}),img:ha,documents:[{type:"text",text:da("desc2")}]},4:{title:i(B,{}),img:ha,documents:[{type:"text",text:da("desc4")},{type:"conditional",conditional:{label:hu("set4_cond"),metadata:uu.astral,fields:[l(mu.set4_team_dmg_.tag)]}}]}},Cn="BranchBladeSong",[ua,pu]=h("disc",Cn),ma=T(Cn),fu=m[Cn],ga=u[Cn],$u={2:{title:i(z,{}),img:ma,documents:[{type:"text",text:ua("desc2")}]},4:{title:i(B,{}),img:ma,documents:[{type:"text",text:ua("desc4")},{type:"fields",fields:[l(ga.set4_passive.tag)]},{type:"conditional",conditional:{label:pu("set4_cond"),metadata:fu.apply_or_trigger,fields:[l(ga.set4_cond.tag)]}}]}},Sn="ChaosJazz",[pa,_u]=h("disc",Sn),fa=T(Sn),yu=m[Sn],sn=u[Sn],bu={2:{title:i(z,{}),img:fa,documents:[{type:"text",text:pa("desc2")}]},4:{title:i(B,{}),img:fa,documents:[{type:"text",text:pa("desc4")},{type:"fields",fields:[l(sn.set4_passive_fire_dmg_.tag),l(sn.set4_passive_electric_dmg_.tag)]},{type:"conditional",conditional:{label:_u("set4_cond"),metadata:yu.while_off_field,fields:[{title:"EX Special Attack DMG",fieldRef:sn.set4_off_field_special_dmg_.tag},{title:"Assist Attack Attack DMG",fieldRef:sn.set4_off_field_assist_dmg_.tag}]}}]}},Dn="ChaoticMetal",[$a,xu]=h("disc",Dn),_a=T(Dn),wu=m[Dn],ya=u[Dn],vu={2:{title:i(z,{}),img:_a,documents:[{type:"text",text:$a("desc2")}]},4:{title:i(B,{}),img:_a,documents:[{type:"text",text:$a("desc4")},{type:"fields",fields:[l(ya.set4_passive.tag)]},{type:"conditional",conditional:{label:xu("set4_cond"),metadata:wu.trigger_corruption,fields:[l(ya.set4_cond_trigger_corruption.tag)]}}]}},Rn="FangedMetal",[ba,ku]=h("disc",Rn),xa=T(Rn),Cu=m[Rn],Su=u[Rn],Du={2:{title:i(z,{}),img:xa,documents:[{type:"text",text:ba("desc2")}]},4:{title:i(B,{}),img:xa,documents:[{type:"text",text:ba("desc4")},{type:"conditional",conditional:{label:ku("set4_cond"),metadata:Cu.inflict_assault,fields:[l(Su.set4_cond_inflict_assault.tag)]}}]}},In="FreedomBlues",[wa,Ru]=h("disc",In),va=T(In),Iu=m[In],Mu=u[In],Tu={2:{title:i(z,{}),img:va,documents:[{type:"text",text:wa("desc2")}]},4:{title:i(B,{}),img:va,documents:[{type:"text",text:wa("desc4")},{type:"conditional",conditional:{label:Ru("set4_cond"),metadata:Iu.exSpecialHit,fields:[l(Mu.anomBuildupRes_.tag)]}}]}},Mn="HormonePunk",[ka,zu]=h("disc",Mn),Ca=T(Mn),Bu=m[Mn],Eu=u[Mn],Ou={2:{title:i(z,{}),img:Ca,documents:[{type:"text",text:ka("desc2")}]},4:{title:i(B,{}),img:Ca,documents:[{type:"text",text:ka("desc4")},{type:"conditional",conditional:{label:zu("set4_cond"),metadata:Bu.entering_combat,fields:[l(Eu.set4_cond_entering_combat.tag)]}}]}},Tn="InfernoMetal",[Sa,Pu]=h("disc",Tn),Da=T(Tn),Vu=m[Tn],Au=u[Tn],qu={2:{title:i(z,{}),img:Da,documents:[{type:"text",text:Sa("desc2")}]},4:{title:i(B,{}),img:Da,documents:[{type:"text",text:Sa("desc4")},{type:"conditional",conditional:{label:Pu("set4_cond"),metadata:Vu.hitting_burning_enemy,fields:[l(Au.set4_cond_hitting_burning_enemy.tag)]}}]}},zn="KingOfTheSummit",[Ra,dy]=h("disc",zn),Ia=T(zn),Fu=m[zn],Ma=u[zn],ju={2:{title:i(z,{}),img:Ia,documents:[{type:"text",text:Ra("desc2")},{type:"fields",fields:[l(Ma.set2.tag)]}]},4:{title:i(B,{}),img:Ia,documents:[{type:"text",text:Ra("desc4")},{type:"conditional",conditional:{metadata:Fu.launchExSpecialOrChain,label:W("uponLaunch.2",{val1:"$t(skills.exSpecial)",val2:"$t(skills.chain)"}),fields:[l(Ma.set4_team_launchExSpecialOrChain_crit_dmg_.tag)]}}]}},Bn="PhaethonsMelody",[Ta,za]=h("disc",Bn),Ba=T(Bn),Ea=m[Bn],Oa=u[Bn],Lu={2:{title:i(z,{}),img:Ba,documents:[{type:"text",text:Ta("desc2")}]},4:{title:i(B,{}),img:Ba,documents:[{type:"text",text:Ta("desc4")},{type:"conditional",conditional:{label:za("set4_cond_squad_use_ex"),metadata:Ea.squad_use_ex,fields:[l(Oa.set4_squad_anomProf.tag)]}},{type:"conditional",conditional:{label:za("set4_cond_not_char_use_ex"),metadata:Ea.not_char_use_ex,fields:[l(Oa.set4_not_self_ether_.tag)]}}]}},En="PolarMetal",[Pa,Hu]=h("disc",En),Va=T(En),Ku=m[En],Aa=u[En],Wu={2:{title:i(z,{}),img:Va,documents:[{type:"text",text:Pa("desc2")}]},4:{title:i(B,{}),img:Va,documents:[{type:"text",text:Pa("desc4")},{type:"conditional",conditional:{label:Hu("set4_cond"),metadata:Ku.freeze_shatter}},{type:"fields",fields:[{title:"Basic Attack DMG",fieldRef:Aa.set4_basic_dmg_.tag},{title:"Dash Attack DMG",fieldRef:Aa.set4_dash_dmg_.tag}]}]}},On="ProtoPunk",[qa,Nu]=h("disc",On),Fa=T(On),Gu=m[On],Uu=u[On],Ju={2:{title:i(z,{}),img:Fa,documents:[{type:"text",text:qa("desc2")}]},4:{title:i(B,{}),img:Fa,documents:[{type:"text",text:qa("desc4")},{type:"conditional",conditional:{label:Nu("set4_cond"),metadata:Gu.def_assist_or_evasive_assist,fields:[l(Uu.set4_cond_def_assist_or_evasive_assist_dmg_.tag)]}}]}},Pn="PufferElectro",[ja,Yu]=h("disc",Pn),La=T(Pn),Zu=m[Pn],Ha=u[Pn],Qu={2:{title:i(z,{}),img:La,documents:[{type:"text",text:ja("desc2")}]},4:{title:i(B,{}),img:La,documents:[{type:"text",text:ja("desc4")},{type:"fields",fields:[{title:"Ultimate DMG",fieldRef:Ha.set4_dmg_.tag}]},{type:"conditional",conditional:{label:Yu("set4_cond"),metadata:Zu.launching_ult,fields:[l(Ha.set4_cond_launching_ult_atk_.tag)]}}]}},Vn="ShadowHarmony",[Ka,Xu]=h("disc",Vn),Wa=T(Vn),em=m[Vn],Na=u[Vn],tm={2:{title:i(z,{}),img:Wa,documents:[{type:"text",text:Ka("desc2")}]},4:{title:i(B,{}),img:Wa,documents:[{type:"text",text:Ka("desc4")},{type:"conditional",conditional:{label:Xu("set4_cond_stacks"),metadata:em.stacks,fields:[l(Na.set4_stack_atk_.tag),l(Na.set4_stack_crit_.tag)]}}]}},Ei="ShockstarDisco",[Ga,hy]=h("disc",Ei),Ua=T(Ei),oi=u[Ei],nm={2:{title:i(z,{}),img:Ua,documents:[{type:"text",text:Ga("desc2")}]},4:{title:i(B,{}),img:Ua,documents:[{type:"text",text:Ga("desc4")},{type:"fields",fields:[{title:"Basic Attack Daze",fieldRef:oi.set4_basic_daze_.tag},{title:"Dash Attack Daze",fieldRef:oi.set4_dash_daze_.tag},{title:"Dodge Counter Daze",fieldRef:oi.set4_dodgeCounter_daze_.tag}]}]}},dl="SoulRock",[Ja,uy]=h("disc",dl),Ya=T(dl),im={2:{title:i(z,{}),img:Ya,documents:[{type:"text",text:Ja("desc2")}]},4:{title:i(B,{}),img:Ya,documents:[{type:"text",text:Ja("desc4")}]}},An="SwingJazz",[Za,am]=h("disc",An),Qa=T(An),om=m[An],sm=u[An],cm={2:{title:i(z,{}),img:Qa,documents:[{type:"text",text:Za("desc2")}]},4:{title:i(B,{}),img:Qa,documents:[{type:"text",text:Za("desc4")},{type:"conditional",conditional:{label:am("set4_cond"),metadata:om.chain_or_ult,fields:[l(sm.set4_cond_chain_or_ult.tag)]}}]}},qn="ThunderMetal",[Xa,lm]=h("disc",qn),eo=T(qn),rm=m[qn],dm=u[qn],hm={2:{title:i(z,{}),img:eo,documents:[{type:"text",text:Xa("desc2")}]},4:{title:i(B,{}),img:eo,documents:[{type:"text",text:Xa("desc4")},{type:"conditional",conditional:{label:lm("set4_cond"),metadata:rm.enemy_shocked,fields:[l(dm.set4_cond_enemy_shocked_atk_.tag)]}}]}},Fn="WoodpeckerElectro",[to,um]=h("disc",Fn),no=T(Fn),mm=m[Fn],gm=u[Fn],pm={2:{title:i(z,{}),img:no,documents:[{type:"text",text:to("desc2")}]},4:{title:i(B,{}),img:no,documents:[{type:"text",text:to("desc4")},{type:"conditional",conditional:{label:um("set4_cond"),metadata:mm.crit_basic_dodge_ex,fields:[l(gm.set4_cond_crit_basic_dodge_ex_atk_.tag)]}}]}},jn="YunkuiTales",[io,my]=h("disc",jn),ao=T(jn),fm=m[jn],si=u[jn],$m={2:{title:i(z,{}),img:ao,documents:[{type:"text",text:io("desc2")},{type:"fields",fields:[l(si.set2.tag)]}]},4:{title:i(B,{}),img:ao,documents:[{type:"text",text:io("desc4")},{type:"conditional",conditional:{metadata:fm.uponLaunchExSpecialChainOrUlt,label:W("uponLaunch.3",{val1:"$t(skills.exSpecial)",val2:"$t(skills.chain)",val3:"$t(skills.ult)"}),fields:[l(si.set4_crit_.tag),l(si.set4_sheer_dmg_.tag)]}}]}},_m={AstralVoice:gu,BranchBladeSong:$u,ChaosJazz:bu,ChaoticMetal:vu,FangedMetal:Du,FreedomBlues:Tu,HormonePunk:Ou,InfernoMetal:qu,KingOfTheSummit:ju,PhaethonsMelody:Lu,PolarMetal:Wu,ProtoPunk:Ju,PufferElectro:Qu,ShadowHarmony:tm,ShockstarDisco:nm,SoulRock:im,SwingJazz:cm,ThunderMetal:hm,WoodpeckerElectro:pm,YunkuiTales:$m};function z(){return"2-Set"}function B(){return"4-Set"}function p({wKey:e,children:t}){const n=bn();let a=1;return n&&n.compute(A.common.count.sheet(e)).val&&(a=n.compute(A.wengine.phase).val??1),t(a)}const Te="BashfulDemon",[oo,ym]=h("wengine",Te),bm=b.wengine[Te],xm=f(Te,"icon"),wm=m[Te],so=u[Te],vm={title:oo("phase"),img:xm,documents:[{type:"text",text:i(p,{wKey:Te,children:e=>oo(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(so.passive_ice_dmg_.tag)]},{type:"conditional",conditional:{label:ym("cond"),metadata:wm.launch_ex_attack,fields:[l(so.team_atk_.tag),{title:"Duration",fieldValue:bm.duration}]}}]},ze="BigCylinder",[co,gy]=h("wengine",ze),km=b.wengine[ze],Cm=f(ze,"icon"),Sm=u[ze],Dm=Z[ze],Rm={title:co("phase"),img:Cm,documents:[{type:"text",text:i(p,{wKey:ze,children:e=>co(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Sm.passive_dmg_red_.tag)]},{type:"fields",fields:[{title:"Additional DMG",fieldRef:Dm.damage.tag},{title:"Cooldown",fieldValue:km.cooldown}]}]},Be="BlazingLaurel",[lo,ro]=h("wengine",Be),ho=b.wengine[Be],Im=f(Be,"icon"),uo=m[Be],ci=u[Be],Mm={title:lo("phase"),img:Im,documents:[{type:"text",text:i(p,{wKey:Be,children:e=>lo(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:ro("cond1"),metadata:uo.quickOrPerfectAssistUsed,fields:[l(ci.impact_.tag),{title:"Duration",fieldValue:ho.duration}]}},{type:"conditional",conditional:{label:ro("cond2"),metadata:uo.wilt,fields:[l(ci.crit_dmg_ice_.tag),l(ci.crit_dmg_fire_.tag),{title:"Duration",fieldValue:ho.wilt_duration}]}}]},Ee="BoxCutter",[mo,Tm]=h("wengine",Ee),zm=b.wengine[Ee],Bm=f(Ee,"icon"),Em=m[Ee],go=u[Ee],Om={title:mo("phase"),img:Bm,documents:[{type:"text",text:i(p,{wKey:Ee,children:e=>mo(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Tm("cond"),metadata:Em.launchedAftershock,fields:[l(go.physical_dmg_.tag),l(go.daze_.tag),{title:"Duration",fieldValue:zm.duration}]}}]},Nt="BunnyBand",[po,Pm]=h("wengine",Nt),Vm=f(Nt,"icon"),Am=m[Nt],fo=u[Nt],qm={title:po("phase"),img:Vm,documents:[{type:"text",text:i(p,{wKey:Nt,children:e=>po(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(fo.passive_hp_.tag)]},{type:"conditional",conditional:{label:Pm("cond"),metadata:Am.wearerShielded,fields:[l(fo.atk_.tag)]}}]},_e="CannonRotor",[$o,py]=h("wengine",_e),Fm=b.wengine[_e],jm=f(_e,"icon"),Lm=Z[_e],Hm=u[_e],Km={title:$o("phase"),img:jm,documents:[{type:"text",text:i(p,{wKey:_e,children:e=>$o(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Hm.passive_atk_.tag)]},{type:"fields",fields:[{title:"Additional DMG",fieldRef:Lm.damage.tag},{title:"Cooldown",fieldValue:i(p,{wKey:_e,children:e=>Fm.cooldown[e]})}]}]},Oe="CinderCobalt",[_o]=h("wengine",Oe),yo=b.wengine[Oe],Wm=f(Oe,"icon"),Nm=m[Oe],Gm=u[Oe],Um={title:_o("phase"),img:Wm,documents:[{type:"text",text:i(p,{wKey:Oe,children:e=>_o(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:W("enterCombatOrSwitchIn"),metadata:Nm.enteringCombatOrSwitchingIn,fields:[l(Gm.enteringCombatOrSwitchingIn_atk_.tag),{title:W("duration"),fieldValue:yo.duration},{title:W("cd"),fieldValue:yo.cd}]}}]},Pe="DeepSeaVisitor",[bo,xo]=h("wengine",Pe),wo=b.wengine[Pe],Jm=f(Pe,"icon"),vo=m[Pe],li=u[Pe],Ym={title:bo("phase"),img:Jm,documents:[{type:"text",text:i(p,{wKey:Pe,children:e=>bo(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(li.passive_ice_dmg_.tag)]},{type:"conditional",conditional:{label:xo("cond1"),metadata:vo.basicHit,fields:[l(li.crit_.tag),{title:"Duration",fieldValue:wo.duration}]}},{type:"conditional",conditional:{label:xo("cond2"),metadata:vo.iceDashAtkHit,fields:[l(li.extra_crit_.tag),{title:"Duration",fieldValue:wo.extra_duration}]}}]},Ve="DemaraBatteryMarkII",[ko,Zm]=h("wengine",Ve),Qm=b.wengine[Ve],Xm=f(Ve,"icon"),eg=m[Ve],Co=u[Ve],tg={title:ko("phase"),img:Xm,documents:[{type:"text",text:i(p,{wKey:Ve,children:e=>ko(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Co.passive_electric_dmg_.tag)]},{type:"conditional",conditional:{label:Zm("cond"),metadata:eg.dodgeCounterOrAssistHit,fields:[l(Co.enerRegen_.tag),{title:"Duration",fieldValue:Qm.duration}]}}]},Ae="DrillRigRedAxis",[So,ng]=h("wengine",Ae),Do=b.wengine[Ae],ig=f(Ae,"icon"),ag=m[Ae],Ro=u[Ae],og={title:So("phase"),img:ig,documents:[{type:"text",text:i(p,{wKey:Ae,children:e=>So(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:ng("cond"),metadata:ag.exSpecialOrChainUsed,fields:[l(Ro.basic_eletric_dmg_.tag),l(Ro.dash_eletric_dmg_.tag),{title:"Duration",fieldValue:Do.duration},{title:"Cooldown",fieldValue:Do.cooldown}]}}]},Gt="ElectroLipGloss",[Io,sg]=h("wengine",Gt),cg=f(Gt,"icon"),lg=m[Gt],Mo=u[Gt],rg={title:Io("phase"),img:cg,documents:[{type:"text",text:i(p,{wKey:Gt,children:e=>Io(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:sg("cond"),metadata:lg.anomalyOnEnemy,fields:[l(Mo.atk_.tag),l(Mo.common_dmg_.tag)]}}]},qe="ElegantVanity",[To,dg]=h("wengine",qe),hg=b.wengine[qe],ug=f(qe,"icon"),mg=m[qe],gg=u[qe],pg={title:To("phase"),img:ug,documents:[{type:"text",text:i(p,{wKey:qe,children:e=>To(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:dg("cond"),metadata:mg.consumed25Energy,fields:[l(gg.common_dmg_.tag),{title:"Duration",fieldValue:hg.buffDuration}]}}]},Fe="FlamemakerShaker",[zo,Bo]=h("wengine",Fe),ri=b.wengine[Fe],fg=f(Fe,"icon"),Eo=m[Fe],di=u[Fe],$g={title:zo("phase"),img:fg,documents:[{type:"text",text:i(p,{wKey:Fe,children:e=>zo(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Bo("cond1"),metadata:Eo.offField,fields:[l(di.enerRegen.tag)]}},{type:"conditional",conditional:{label:Bo("cond2"),metadata:Eo.exSpecialAssistHits,fields:[l(di.common_dmg_.tag),{title:"Duration",fieldValue:ri.duration},{title:"Cooldown",fieldValue:ri.cooldown},l(di.anomProf.tag),{title:"Duration",fieldValue:ri.anomProfDuration}]}}]},je="FlightOfFancy",[Oo,_g]=h("wengine",je),Po=b.wengine[je],yg=f(je,"icon"),bg=m[je],Vo=u[je],xg={title:Oo("phase"),img:yg,documents:[{type:"text",text:i(p,{wKey:je,children:e=>Oo(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Vo.anomBuildup_.tag)]},{type:"conditional",conditional:{label:_g("cond"),metadata:bg.etherDmg,fields:[l(Vo.etherDmg_anomProf.tag),{title:"Duration",fieldValue:Po.duration},{title:"Cooldown",fieldValue:Po.cd}]}}]},Le="FusionCompiler",[Ao,wg]=h("wengine",Le),vg=b.wengine[Le],kg=f(Le,"icon"),Cg=m[Le],qo=u[Le],Sg={title:Ao("phase"),img:kg,documents:[{type:"text",text:i(p,{wKey:Le,children:e=>Ao(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(qo.passive_atk_.tag)]},{type:"conditional",conditional:{label:wg("cond"),metadata:Cg.specialUsed,fields:[l(qo.anomProf.tag),{title:"Duration",fieldValue:vg.duration}]}}]},Ln="GildedBlossom",[Fo,fy]=h("wengine",Ln),Dg=f(Ln,"icon"),jo=u[Ln],Rg={title:Fo("phase"),img:Dg,documents:[{type:"text",text:i(p,{wKey:Ln,children:e=>Fo(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(jo.passive_atk_.tag),l(jo.passive_exSpecial_dmg_.tag)]}]},He="HailstormShrine",[Lo,Ig]=h("wengine",He),Mg=b.wengine[He],Tg=f(He,"icon"),zg=m[He],Ho=u[He],Bg={title:Lo("phase"),img:Tg,documents:[{type:"text",text:i(p,{wKey:He,children:e=>Lo(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Ho.passive_crit_dmg_.tag)]},{type:"conditional",conditional:{label:Ig("cond"),metadata:zg.exSpecialOrAnomaly,fields:[l(Ho.ice_dmg_.tag),{title:"Duration",fieldValue:Mg.duration}]}}]},Ke="HeartstringNocturne",[Ko,Eg]=h("wengine",Ke),Og=b.wengine[Ke],Pg=f(Ke,"icon"),Vg=m[Ke],hi=u[Ke],Ag={title:Ko("phase"),img:Pg,documents:[{type:"text",text:i(p,{wKey:Ke,children:e=>Ko(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(hi.passive_crit_dmg_.tag)]},{type:"conditional",conditional:{label:Eg("cond"),metadata:Vg.heartstring,fields:[l(hi.chain_resIgn_fire_.tag),l(hi.ult_resIgn_fire_.tag),{title:"Duration",fieldValue:Og.duration}]}}]},We="HellfireGears",[Wo,No]=h("wengine",We),qg=b.wengine[We],Fg=f(We,"icon"),Go=m[We],Uo=u[We],jg={title:Wo("phase"),img:Fg,documents:[{type:"text",text:i(p,{wKey:We,children:e=>Wo(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:No("cond1"),metadata:Go.offField,fields:[l(Uo.enerRegen.tag)]}},{type:"conditional",conditional:{label:No("cond1"),metadata:Go.exSpecialUsed,fields:[l(Uo.impact_.tag),{title:"Duration",fieldValue:qg.duration}]}}]},Ne="Housekeeper",[Jo,Yo]=h("wengine",Ne),Lg=b.wengine[Ne],Hg=f(Ne,"icon"),Zo=m[Ne],Qo=u[Ne],Kg={title:Jo("phase"),img:Hg,documents:[{type:"text",text:i(p,{wKey:Ne,children:e=>Jo(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Yo("cond1"),metadata:Zo.offField,fields:[l(Qo.enerRegen.tag)]}},{type:"conditional",conditional:{label:Yo("cond2"),metadata:Zo.exSpecialHits,fields:[l(Qo.physical_dmg_.tag),{title:"Duration",fieldValue:Lg.duration}]}}]},Ge="IceJadeTeapot",[Xo,Wg]=h("wengine",Ge),es=b.wengine[Ge],Ng=f(Ge,"icon"),Gg=m[Ge],ts=u[Ge],Ug={title:Xo("phase"),img:Ng,documents:[{type:"text",text:i(p,{wKey:Ge,children:e=>Xo(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Wg("cond"),metadata:Gg.teariffic,fields:[l(ts.impact_.tag),{title:"Duration",fieldValue:es.duration},l(ts.common_dmg_.tag),{title:"Duration",fieldValue:es.teamBuffDuration}]}}]},Ue="IdentityBase",[ns,Jg]=h("wengine",Ue),Yg=b.wengine[Ue],Zg=f(Ue,"icon"),Qg=m[Ue],Xg=u[Ue],ep={title:ns("phase"),img:Zg,documents:[{type:"text",text:i(p,{wKey:Ue,children:e=>ns(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Jg("cond"),metadata:Qg.equipperAttacked,fields:[l(Xg.def_.tag),{title:"Duration",fieldValue:Yg.duration}]}}]},Oi="IdentityInflection",[is,$y]=h("wengine",Oi),tp=f(Oi,"icon"),np={title:is("phase"),img:tp,documents:[{type:"text",text:i(p,{wKey:Oi,children:e=>is(`phaseDescs.${e-1}`)})}]},Je="KaboomTheCannon",[as,ip]=h("wengine",Je),ap=b.wengine[Je],op=f(Je,"icon"),sp=m[Je],cp=u[Je],lp={title:as("phase"),img:op,documents:[{type:"text",text:i(p,{wKey:Je,children:e=>as(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:ip("cond"),metadata:sp.allyHitsEnemy,fields:[l(cp.atk_.tag),{title:"Duration",fieldValue:ap.duration}]}}]},Ye="LunarDecrescent",[os,rp]=h("wengine",Ye),dp=b.wengine[Ye],hp=f(Ye,"icon"),up=m[Ye],mp=u[Ye],gp={title:os("phase"),img:hp,documents:[{type:"text",text:i(p,{wKey:Ye,children:e=>os(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:rp("cond"),metadata:up.chainOrUltUsed,fields:[l(mp.common_dmg_.tag),{title:"Duration",fieldValue:dp.duration}]}}]},Pi="LunarNoviluna",[ss,_y]=h("wengine",Pi),pp=f(Pi,"icon"),fp={title:ss("phase"),img:pp,documents:[{type:"text",text:i(p,{wKey:Pi,children:e=>ss(`phaseDescs.${e-1}`)})}]},Hn="LunarPleniluna",[cs,yy]=h("wengine",Hn),$p=f(Hn,"icon"),ui=u[Hn],_p={title:cs("phase"),img:$p,documents:[{type:"text",text:i(p,{wKey:Hn,children:e=>cs(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(ui.basic_dmg_.tag),l(ui.dash_dmg_.tag),l(ui.dodgeCounter_dmg_.tag)]}]},Ze="MagneticStormAlpha",[ls,yp]=h("wengine",Ze),rs=b.wengine[Ze],bp=f(Ze,"icon"),xp=m[Ze],wp=u[Ze],vp={title:ls("phase"),img:bp,documents:[{type:"text",text:i(p,{wKey:Ze,children:e=>ls(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:yp("cond"),metadata:xp.anomalyBuildupIncreased,fields:[l(wp.anomMas.tag),{title:"Duration",fieldValue:rs.duration},{title:"Cooldown",fieldValue:rs.cooldown}]}}]},Qe="MagneticStormBravo",[ds,kp]=h("wengine",Qe),hs=b.wengine[Qe],Cp=f(Qe,"icon"),Sp=m[Qe],Dp=u[Qe],Rp={title:ds("phase"),img:Cp,documents:[{type:"text",text:i(p,{wKey:Qe,children:e=>ds(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:kp("cond"),metadata:Sp.anomalyBuildupIncreased,fields:[l(Dp.anomProf.tag),{title:"Duration",fieldValue:hs.duration},{title:"Cooldown",fieldValue:hs.cooldown}]}}]},Vi="MagneticStormCharlie",[us,by]=h("wengine",Vi),Ip=f(Vi,"icon"),Mp={title:us("phase"),img:Ip,documents:[{type:"text",text:i(p,{wKey:Vi,children:e=>us(`phaseDescs.${e-1}`)})}]},Xe="MarcatoDesire",[ms,gs]=h("wengine",Xe),Tp=b.wengine[Xe],zp=f(Xe,"icon"),ps=m[Xe],Bp=u[Xe],Ep={title:ms("phase"),img:zp,documents:[{type:"text",text:i(p,{wKey:Xe,children:e=>ms(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:gs("cond1"),metadata:ps.exSpecialOrChainHitsEnemy,fields:[l(Bp.atk_.tag),{title:"Duration",fieldValue:Tp.duration}]}},{type:"conditional",conditional:{label:gs("cond2"),metadata:ps.attributeAnomalyInflicted}}]},et="MyriadEclipse",[fs,Op]=h("wengine",et),Pp=b.wengine[et],Vp=f(et,"icon"),Ap=m[et],$s=u[et],qp={title:fs("phase"),img:Vp,documents:[{type:"text",text:i(p,{wKey:et,children:e=>fs(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l($s.crit_dmg_.tag)]},{type:"conditional",conditional:{label:Op("cond"),metadata:Ap.deathSentence,fields:[l($s.deathSentence_defIgn_.tag),{title:"Duration",fieldValue:Pp.duration}]}}]},tt="OriginalTransmorpher",[_s,Fp]=h("wengine",tt),jp=b.wengine[tt],Lp=f(tt,"icon"),Hp=m[tt],ys=u[tt],Kp={title:_s("phase"),img:Lp,documents:[{type:"text",text:i(p,{wKey:tt,children:e=>_s(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(ys.passive_hp_.tag)]},{type:"conditional",conditional:{label:Fp("cond"),metadata:Hp.equipperHit,fields:[l(ys.impact_.tag),{title:"Duration",fieldValue:jp.duration}]}}]},Ut="PeacekeeperSpecialized",[bs,Wp]=h("wengine",Ut),Np=f(Ut,"icon"),Gp=m[Ut],mi=u[Ut],Up={title:bs("phase"),img:Np,documents:[{type:"text",text:i(p,{wKey:Ut,children:e=>bs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Wp("cond"),metadata:Gp.shielded,fields:[l(mi.enerRegen.tag)]}},{type:"fields",fields:[l(mi.passive_exSpecial_anomBuildup_.tag),l(mi.passive_assist_anomBuildup_.tag)]}]},Jt="PreciousFossilizedCore",[xs,ws]=h("wengine",Jt),Jp=f(Jt,"icon"),vs=m[Jt],Yp=u[Jt],Zp={title:xs("phase"),img:Jp,documents:[{type:"text",text:i(p,{wKey:Jt,children:e=>xs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:ws("cond1"),metadata:vs.enemyHpGE50,fields:[l(Yp.daze_.tag)]}},{type:"conditional",conditional:{label:ws("cond2"),metadata:vs.enemyHpGE75}}]},nt="PuzzleSphere",[ks]=h("wengine",nt),Cs=b.wengine[nt],Qp=f(nt,"icon"),Ss=m[nt],Ds=u[nt],Xp={title:ks("phase"),img:Qp,documents:[{type:"text",text:i(p,{wKey:nt,children:e=>ks(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:W("uponLaunch.1",{val1:"$t(skills.exSpecial)"}),metadata:Ss.launchingExSpecial,fields:[l(Ds.launchingExSpecial_crit_dmg_.tag),{title:W("duration"),fieldValue:Cs.duration}]}},{type:"conditional",conditional:{label:W("targetHpLe",{val:Cs.hpThresh*100}),metadata:Ss.targetHpBelow50,fields:[l(Ds.targetHpBelow50_exSpecial_dmg_.tag)]}}]},it="QingmingBirdcage",[Rs,ef]=h("wengine",it),tf=b.wengine[it],nf=f(it,"icon"),af=m[it],cn=u[it],of={title:Rs("phase"),img:nf,documents:[{type:"text",text:i(p,{wKey:it,children:e=>Rs(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(cn.crit_.tag)]},{type:"conditional",conditional:{metadata:af.qingmingCompanionStacks,label:ef("cond"),fields:[l(cn.qingmingCompanionStacks_ether_dmg_.tag),l(cn.qingmingCompanionStacks_ult_ether_sheer_dmg_.tag),l(cn.qingmingCompanionStacks_exSpecial_ether_sheer_dmg_.tag),{title:W("cd"),fieldValue:tf.duration}]}}]},at="RadiowaveJourney",[Is]=h("wengine",at),sf=b.wengine[at],cf=f(at,"icon"),lf=m[at],rf=u[at],df={title:Is("phase"),img:cf,documents:[{type:"text",text:i(p,{wKey:at,children:e=>Is(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{metadata:lf.launchingChainOrUlt,label:W("uponLaunch.2",{val1:"$t(skills.chain)",val2:"$t(skills.ult)"}),fields:[l(rf.launchingChainOrUlt_sheerForce.tag),{title:W("duration"),fieldValue:sf.duration}]}}]},ot="RainforestGourmet",[Ms,hf]=h("wengine",ot),uf=b.wengine[ot],mf=f(ot,"icon"),gf=m[ot],pf=u[ot],ff={title:Ms("phase"),img:mf,documents:[{type:"text",text:i(p,{wKey:ot,children:e=>Ms(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:hf("cond"),metadata:gf.energyConsumed,fields:[l(pf.atk_.tag),{title:"Duration",fieldValue:uf.duration}]}}]},Ai="ReelProjector",[Ts]=h("wengine",Ai),$f=f(Ai,"icon"),_f={title:Ts("phase"),img:$f,documents:[{type:"text",text:i(p,{wKey:Ai,children:e=>Ts(`phaseDescs.${e-1}`)})}]},st="ReverbMarkI",[zs,yf]=h("wengine",st),bf=b.wengine[st],xf=f(st,"icon"),wf=m[st],vf=u[st],kf={title:zs("phase"),img:xf,documents:[{type:"text",text:i(p,{wKey:st,children:e=>zs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:yf("cond"),metadata:wf.exSpecialUsed,fields:[l(vf.impact_.tag),{title:"Duration",fieldValue:bf.duration}]}}]},ct="ReverbMarkII",[Bs,Cf]=h("wengine",ct),Sf=b.wengine[ct],Df=f(ct,"icon"),Rf=m[ct],Es=u[ct],If={title:Bs("phase"),img:Df,documents:[{type:"text",text:i(p,{wKey:ct,children:e=>Bs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Cf("cond"),metadata:Rf.exSpecialOrChainUsed,fields:[l(Es.anomMas.tag),l(Es.anomProf.tag),{title:"Duration",fieldValue:Sf.duration}]}}]},lt="ReverbMarkIII",[Os,Mf]=h("wengine",lt),Tf=b.wengine[lt],zf=f(lt,"icon"),Bf=m[lt],Ef=u[lt],Of={title:Os("phase"),img:zf,documents:[{type:"text",text:i(p,{wKey:lt,children:e=>Os(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Mf("cond"),metadata:Bf.chainOrUltUsed,fields:[l(Ef.atk_.tag),{title:"Duration",fieldValue:Tf.duration}]}}]},Yt="RiotSuppressorMarkVI",[Ps,Pf]=h("wengine",Yt),Vf=f(Yt,"icon"),Af=m[Yt],Vs=u[Yt],qf={title:Ps("phase"),img:Vf,documents:[{type:"text",text:i(p,{wKey:Yt,children:e=>Ps(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Vs.passive_crit_.tag)]},{type:"conditional",conditional:{label:Pf("cond"),metadata:Af.charge,fields:[l(Vs.basic_ether_dmg_.tag)]}}]},rt="RoaringFurnace",[As,Ff]=h("wengine",rt),jf=b.wengine[rt],Lf=f(rt,"icon"),Hf=m[rt],ln=u[rt],Kf={title:As("phase"),img:Lf,documents:[{type:"text",text:i(p,{wKey:rt,children:e=>As(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(ln.exSpecial_dazeInc_.tag),l(ln.chain_dazeInc_.tag),l(ln.ult_dazeInc_.tag)]},{type:"conditional",conditional:{metadata:Hf.chainOrUlt,label:Ff("cond"),fields:[l(ln.team_chainOrUlt_fire_dmg_.tag),{title:W("duration"),fieldValue:jf.duration}]}}]},dt="RoaringRide",[qs,gi]=h("wengine",dt),pi=b.wengine[dt],Wf=f(dt,"icon"),fi=m[dt],$i=u[dt],Nf={title:qs("phase"),img:Wf,documents:[{type:"text",text:i(p,{wKey:dt,children:e=>qs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:gi("cond_atk_"),metadata:fi.atk_,fields:[l($i.atk_.tag),{title:"Duration",fieldValue:pi.duration}]}},{type:"conditional",conditional:{label:gi("cond_anomProf"),metadata:fi.anomProf,fields:[l($i.anomProf.tag),{title:"Duration",fieldValue:pi.duration}]}},{type:"conditional",conditional:{label:gi("cond_anomBuildup_"),metadata:fi.anomBuildup_,fields:[l($i.anomBuildup_.tag),{title:"Duration",fieldValue:pi.duration}]}}]},ht="SeveredInnocence",[Fs,Gf]=h("wengine",ht),Uf=b.wengine[ht],Jf=f(ht,"icon"),Yf=m[ht],_i=u[ht],Zf={title:Fs("phase"),img:Jf,documents:[{type:"text",text:i(p,{wKey:ht,children:e=>Fs(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(_i.passive_crit_dmg_.tag)]},{type:"conditional",conditional:{label:Gf("cond"),metadata:Yf.basicSpecialAftershockHit,fields:[l(_i.crit_dmg_.tag),l(_i.electric_dmg_.tag),{title:"Duration",fieldValue:Uf.duration}]}}]},ut="SharpenedStinger",[js,Qf]=h("wengine",ut),Xf=b.wengine[ut],e$=f(ut,"icon"),t$=m[ut],Ls=u[ut],n$={title:js("phase"),img:e$,documents:[{type:"text",text:i(p,{wKey:ut,children:e=>js(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Qf("cond"),metadata:t$.predatoryInstinct,fields:[l(Ls.physical_dmg_.tag),{title:"Duration",fieldValue:Xf.duration}]}},{type:"fields",fields:[l(Ls.anomBuildup_.tag)]}]},Zt="SixShooter",[Hs,i$]=h("wengine",Zt),a$=f(Zt,"icon"),o$=m[Zt],s$=u[Zt],c$={title:Hs("phase"),img:a$,documents:[{type:"text",text:i(p,{wKey:Zt,children:e=>Hs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:i$("cond"),metadata:o$.charge,fields:[l(s$.exSpecial_daze_.tag)]}}]},qi="SliceOfTime",[Ks,xy]=h("wengine",qi),l$=f(qi,"icon"),r$={title:Ks("phase"),img:l$,documents:[{type:"text",text:i(p,{wKey:qi,children:e=>Ks(`phaseDescs.${e-1}`)})}]},mt="SpectralGaze",[Ws,Ns]=h("wengine",mt),Gs=b.wengine[mt],d$=f(mt,"icon"),Us=m[mt],Js=u[mt],h$={title:Ws("phase"),img:d$,documents:[{type:"text",text:i(p,{wKey:mt,children:e=>Ws(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Ns("cond1"),metadata:Us.hit_aftershock_electric,fields:[l(Js.cond_defRed_.tag),{title:"Duration",fieldValue:Gs.duration1}]}},{type:"conditional",conditional:{label:Ns("cond2"),metadata:Us.spiritLock,fields:[l(Js.cond_impact_.tag),{title:"Duration",fieldValue:Gs.duration2}]}}]},gt="SpringEmbrace",[Ys,u$]=h("wengine",gt),m$=b.wengine[gt],g$=f(gt,"icon"),p$=m[gt],Zs=u[gt],f$={title:Ys("phase"),img:g$,documents:[{type:"text",text:i(p,{wKey:gt,children:e=>Ys(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Zs.passive_dmg_red_.tag)]},{type:"conditional",conditional:{label:u$("cond"),metadata:p$.when_attacked,fields:[l(Zs.cond_enerRegen_.tag),{title:"Duration",fieldValue:m$.duration}]}}]},pt="StarlightEngine",[Qs,$$]=h("wengine",pt),_$=b.wengine[pt],y$=f(pt,"icon"),b$=m[pt],x$=u[pt],w$={title:Qs("phase"),img:y$,documents:[{type:"text",text:i(p,{wKey:pt,children:e=>Qs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:$$("cond"),metadata:b$.dodgecounter_quickassist,fields:[l(x$.cond_dmg_.tag),{title:"Duration",fieldValue:_$.duration}]}}]},ft="StarlightEngineReplica",[Xs,v$]=h("wengine",ft),k$=b.wengine[ft],C$=f(ft,"icon"),S$=m[ft],D$=u[ft],R$={title:Xs("phase"),img:C$,documents:[{type:"text",text:i(p,{wKey:ft,children:e=>Xs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:v$("cond"),metadata:S$.hit_away,fields:[l(D$.cond_dmg_.tag),{title:"Duration",fieldValue:k$.duration}]}}]},$t="SteamOven",[ec,I$]=h("wengine",$t),M$=b.wengine[$t],T$=f($t,"icon"),z$=m[$t],B$=u[$t],E$={title:ec("phase"),img:T$,documents:[{type:"text",text:i(p,{wKey:$t,children:e=>ec(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:I$("cond"),metadata:z$.stacks,fields:[l(B$.cond_impact_.tag),{title:"Duration",fieldValue:M$.duration}]}}]},Qt="SteelCushion",[tc,O$]=h("wengine",Qt),P$=f(Qt,"icon"),V$=m[Qt],nc=u[Qt],A$={title:tc("phase"),img:P$,documents:[{type:"text",text:i(p,{wKey:Qt,children:e=>tc(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(nc.passive_physical_dmg_.tag)]},{type:"conditional",conditional:{label:O$("cond"),metadata:V$.hit_behind,fields:[l(nc.cond_dmg_.tag)]}}]},Xt="StreetSuperstar",[ic,q$]=h("wengine",Xt),F$=f(Xt,"icon"),j$=m[Xt],L$=u[Xt],H$={title:ic("phase"),img:F$,documents:[{type:"text",text:i(p,{wKey:Xt,children:e=>ic(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:q$("cond"),metadata:j$.charge,fields:[l(L$.cond_ult_dmg_.tag)]}}]},_t="TheBrimstone",[ac,K$]=h("wengine",_t),W$=b.wengine[_t],N$=f(_t,"icon"),G$=m[_t],U$=u[_t],J$={title:ac("phase"),img:N$,documents:[{type:"text",text:i(p,{wKey:_t,children:e=>ac(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:K$("cond"),metadata:G$.hit_basic_dash_dodge,fields:[l(U$.cond_atk_.tag),{title:"Duration",fieldValue:W$.duration}]}}]},yt="TheRestrained",[oc,Y$]=h("wengine",yt),Z$=b.wengine[yt],Q$=f(yt,"icon"),X$=m[yt],sc=u[yt],e_={title:oc("phase"),img:Q$,documents:[{type:"text",text:i(p,{wKey:yt,children:e=>oc(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Y$("cond"),metadata:X$.dmg_daze_,fields:[l(sc.basic_dmg_.tag),l(sc.basic_daze_.tag),{title:"Duration",fieldValue:Z$.duration}]}}]},bt="TheVault",[cc,t_]=h("wengine",bt),n_=b.wengine[bt],i_=f(bt,"icon"),a_=m[bt],o_=u[bt],s_={title:cc("phase"),img:i_,documents:[{type:"text",text:i(p,{wKey:bt,children:e=>cc(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:t_("cond"),metadata:a_.ether_hit,fields:[l(o_.cond_dmg_.tag),{title:"Duration",fieldValue:n_.duration}]}}]},xt="Timeweaver",[lc,c_]=h("wengine",xt),l_=b.wengine[xt],r_=f(xt,"icon"),d_=m[xt],yi=u[xt],h_={title:lc("phase"),img:r_,documents:[{type:"text",text:i(p,{wKey:xt,children:e=>lc(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(yi.passive_electric_anomBuildup_.tag),l(yi.passive_disorder_dmg_.tag)]},{type:"conditional",conditional:{label:c_("cond"),metadata:d_.hit_anomaly,fields:[l(yi.cond_anomProf.tag),{title:"Duration",fieldValue:l_.duration}]}}]},Kn="TremorTrigramVessel",[rc]=h("wengine",Kn),u_=f(Kn,"icon"),dc=u[Kn],m_={title:rc("phase"),img:u_,documents:[{type:"text",text:i(p,{wKey:Kn,children:e=>rc(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(dc.exSpecial_dmg_.tag),l(dc.ult_dmg_.tag)]}]},wt="TusksOfFury",[hc,g_]=h("wengine",wt),p_=b.wengine[wt],f_=f(wt,"icon"),$_=m[wt],bi=u[wt],__={title:hc("phase"),img:f_,documents:[{type:"text",text:i(p,{wKey:wt,children:e=>hc(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(bi.passive_shield_.tag)]},{type:"conditional",conditional:{label:g_("cond"),metadata:$_.interrupt_perfdodge,fields:[l(bi.cond_dmg_.tag),l(bi.daze_.tag),{title:"Duration",fieldValue:p_.duration}]}}]},vt="UnfetteredGameBall",[uc,y_]=h("wengine",vt),b_=b.wengine[vt],x_=f(vt,"icon"),w_=m[vt],v_=u[vt],k_={title:uc("phase"),img:x_,documents:[{type:"text",text:i(p,{wKey:vt,children:e=>uc(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:y_("cond"),metadata:w_.anomaly_counter,fields:[l(v_.cond_crit_.tag),{title:"Duration",fieldValue:b_.duration}]}}]},Wn="VortexArrow",[mc,wy]=h("wengine",Wn),C_=f(Wn,"icon"),S_=u[Wn],D_={title:mc("phase"),img:C_,documents:[{type:"text",text:i(p,{wKey:Wn,children:e=>mc(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(S_.passive_daze_.tag)]}]},kt="VortexHatchet",[gc,R_]=h("wengine",kt),pc=b.wengine[kt],I_=f(kt,"icon"),M_=m[kt],T_=u[kt],z_={title:gc("phase"),img:I_,documents:[{type:"text",text:i(p,{wKey:kt,children:e=>gc(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:R_("cond"),metadata:M_.entering,fields:[l(T_.cond_impact_.tag),{title:"Duration",fieldValue:pc.duration},{title:"Cooldown",fieldValue:pc.cooldown}]}}]},Nn="VortexRevolver",[fc,vy]=h("wengine",Nn),B_=f(Nn,"icon"),E_=u[Nn],O_={title:fc("phase"),img:B_,documents:[{type:"text",text:i(p,{wKey:Nn,children:e=>fc(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(E_.passive_exSpecial_daze_.tag)]}]},Ct="WeepingCradle",[$c,_c]=h("wengine",Ct),P_=b.wengine[Ct],V_=f(Ct,"icon"),yc=m[Ct],A_=u[Ct],q_={title:$c("phase"),img:V_,documents:[{type:"text",text:i(p,{wKey:Ct,children:e=>$c(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:_c("cond_atk"),metadata:yc.attack}},{type:"conditional",conditional:{label:_c("cond_stacks"),metadata:yc.stacks,fields:[l(A_.cond_dmg_.tag),{title:"Duration",fieldValue:P_.duration}]}}]},en="WeepingGemini",[bc,F_]=h("wengine",en),j_=f(en,"icon"),L_=m[en],H_=u[en],K_={title:bc("phase"),img:j_,documents:[{type:"text",text:i(p,{wKey:en,children:e=>bc(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:F_("cond"),metadata:L_.anomaly_stack,fields:[l(H_.anomProf.tag)]}}]},St="ZanshinHerbCase",[xc,W_]=h("wengine",St),N_=b.wengine[St],G_=f(St,"icon"),U_=m[St],xi=u[St],J_={title:xc("phase"),img:G_,documents:[{type:"text",text:i(p,{wKey:St,children:e=>xc(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(xi.passive_crit_.tag),l(xi.passive_electric_dmg_.tag)]},{type:"conditional",conditional:{label:W_("cond"),metadata:U_.apply_anom_stun,fields:[l(xi.cond_crit_.tag),{title:"Duration",fieldValue:N_.duration}]}}]},Y_={BashfulDemon:vm,BigCylinder:Rm,BlazingLaurel:Mm,BoxCutter:Om,BunnyBand:qm,CannonRotor:Km,CinderCobalt:Um,DeepSeaVisitor:Ym,DemaraBatteryMarkII:tg,DrillRigRedAxis:og,ElectroLipGloss:rg,ElegantVanity:pg,FlamemakerShaker:$g,FlightOfFancy:xg,FusionCompiler:Sg,GildedBlossom:Rg,HailstormShrine:Bg,HeartstringNocturne:Ag,HellfireGears:jg,Housekeeper:Kg,IceJadeTeapot:Ug,IdentityBase:ep,IdentityInflection:np,KaboomTheCannon:lp,LunarDecrescent:gp,LunarNoviluna:fp,LunarPleniluna:_p,MagneticStormAlpha:vp,MagneticStormBravo:Rp,MagneticStormCharlie:Mp,MarcatoDesire:Ep,MyriadEclipse:qp,OriginalTransmorpher:Kp,PeacekeeperSpecialized:Up,PreciousFossilizedCore:Zp,PuzzleSphere:Xp,QingmingBirdcage:of,RadiowaveJourney:df,RainforestGourmet:ff,ReelProjector:_f,ReverbMarkI:kf,ReverbMarkII:If,ReverbMarkIII:Of,RiotSuppressorMarkVI:qf,RoaringFurnace:Kf,RoaringRide:Nf,SeveredInnocence:Zf,SharpenedStinger:n$,SixShooter:c$,SliceOfTime:r$,SpectralGaze:h$,SpringEmbrace:f$,StarlightEngine:w$,StarlightEngineReplica:R$,SteamOven:E$,SteelCushion:A$,StreetSuperstar:H$,TheBrimstone:J$,TheRestrained:e_,TheVault:s_,Timeweaver:h_,TremorTrigramVessel:m_,TusksOfFury:__,UnfetteredGameBall:k_,VortexArrow:D_,VortexHatchet:z_,VortexRevolver:O_,WeepingCradle:q_,WeepingGemini:K_,ZanshinHerbCase:J_};function Z_(e){const{attribute:t}=e;if(t)return t}function Q_(e){const{q:t}=e;return["standardDmg","anomalyDmg"].includes(t)}function X_(e){const{damageType1:t,damageType2:n}=e,a=[];return Q_(e)?(t&&a.push(t),n&&a.push(n),a):[]}const fn={basic:"Basic",dash:"Dash",dodgeCounter:"Dodge Counter",special:"Special",exSpecial:"EX Special",chain:"Chain",ult:"Ultimate",quickAssist:"Quick Assist",defensiveAssist:"Defensive Assist",evasiveAssist:"Evasive Assist",assistFollowUp:"Assist Follow Up",anomaly:"Anomaly",disorder:"Disorder",aftershock:"Aftershock",elemental:"Elemental",sheer:"Sheer"},hl=["crit_","crit_dmg_","impact","pen","pen_","enerRegen","anomProf","anomMas","anom_crit_","anom_crit_dmg_"].map(e=>{if(Br.includes(e)){const t={...A.final.dmg_.tag,attribute:e.slice(0,-5)};return{title:i(Bt,{statKey:e}),fieldRef:t}}return e==="crit_"?{fieldRef:A.common.cappedCrit_.tag,title:i(Bt,{statKey:e})}:e==="anom_crit_"?{fieldRef:A.common.anom_cappedCrit_.tag,title:i(Bt,{statKey:e})}:{fieldRef:A.final[e].tag,title:i(Bt,{statKey:e})}});hl.push(...ve.map(e=>({fieldRef:{et:"own",qt:"formula",q:"standardDmg",attribute:e,name:"standardDmgInst"},title:x(ke,{color:e,children:[pe[e]," Damage"]})})),...ve.map(e=>({fieldRef:{et:"own",qt:"formula",q:"sheerDmg",attribute:e,name:"sheerDmgInst"},title:x(ke,{color:e,children:[pe[e]," Damage"]})})),...ve.flatMap(e=>Er.map(t=>({fieldRef:{et:"own",qt:"formula",q:"standardDmg",attribute:e,damageType1:t,name:"standardDmgInst"},title:x(ke,{color:e,children:[pe[e]," ",fn[t]," Damage"]})}))),...ve.map(e=>({fieldRef:{et:"own",qt:"formula",q:"anomalyDmg",attribute:e,damageType1:"anomaly",name:"anomalyDmgInst"},title:x(ke,{color:e,children:[pe[e]," Anomaly Damage"]})})),...ve.map(e=>({fieldRef:{et:"own",qt:"formula",q:"anomBuildup",attribute:e,name:"anomalyBuildupInst"},title:x(ke,{color:e,children:[pe[e]," Anomaly Buildup"]})})),{fieldRef:{et:"own",qt:"formula",q:"dazeBuildup",name:"dazeInst"},title:"Daze Buildup"});const Fi=[];Object.values(du).forEach(e=>Object.values(e).forEach(t=>t.documents.forEach(n=>n.type==="fields"&&n.fields.forEach(a=>vd(a)&&Fi.push({tag:a.fieldRef,value:a})))));hl.forEach(e=>{Fi.push({tag:e.fieldRef,value:e})});const ey=rd(Fi),vi=new Map;function ul(e,t){if(vi.get(e))throw new Error(`Duplicate conditional ${e}`);vi.set(e,t)}Object.values(Y_).forEach(({documents:e})=>{e.forEach(t=>{t.type==="conditional"&&ul(`${t.conditional.metadata.sheet}:${t.conditional.metadata.name}`,t.conditional)})});Object.values(_m).forEach(e=>Object.values(e).forEach(({documents:t})=>{t.forEach(n=>{n.type==="conditional"&&ul(`${n.conditional.metadata.sheet}:${n.conditional.metadata.name}`,n.conditional)})}));export{hd as A,ry as C,ea as D,sy as F,xn as T,Pt as a,tl as b,Qr as c,Jr as d,_m as e,fn as f,Ed as g,du as h,bn as i,qd as j,ly as k,cy as l,ud as m,yn as n,dd as o,oy as p,Od as q,$d as r,fd as s,ll as t,ed as u,Y_ as w};
