import{b$ as qs,E as As,z as Fs,c as w,H as Ls,_ as js,L as oe,c0 as mo,V as Ot,U as jt,Q as he,c1 as L,W as Hs,c2 as Vc,c3 as qc,T as E,w as Ks,c4 as fo,c5 as Ws,c6 as Ac,a3 as Fc,c7 as Lc,a6 as jc,c8 as Ns,u as Y,aL as Hn,aJ as Hc,c9 as Kc,ca as Wc,cb as Nc,cc as Gs,cd as Gc,b1 as Us,b0 as Js,ce as O,cf as Uc,cg as Jc,bx as q,b6 as Yc,b7 as Zc,ch as Pt,ci as Qc,cj as Xc,ck as Ys,cl as Vt,cm as el,j as o,cn as qt,co as ne,bp as Q,by as Kn,cp as tl,d as x,al as U,ay as mt,cq as At,h as K,av as W,bS as Zs,cr as nl,cs as Qs,ct as Xs,cu as Wn,cv as te,ad as Nn,n as M,cw as ol,cx as ec,bF as al,k as tc,bW as il,e as X,G as j,C as ue,S as ae,N as sl,bJ as cl,bd as Ln,bX as $o,bn as nc,aV as re,bY as ll,bZ as rl,I as Gn,q as Un,a1 as dl,cy as hl,s as gt,M as Jn,aK as Ht,ab as oc,ac,cz as ul,i as gl,l as pl,m as ml,bc as fl,D as $l,b_ as yl,cA as xl,o as ic,r as bl,a as _l,b as wl,g as vl,bt as sc,bB as cc,bz as lc,cB as kl,y as Sl,cC as Cl,x as ft,B as ge,cD as Yn,F as $t,cE as rc,cF as Dl,ag as Zn,af as Ml,aW as de,ao as Tl,b3 as Il,cG as Rl,cH as zl,cI as Bl,aF as dc,aD as Bt,ah as El,cJ as Ol,bv as Pl,cK as Vl,aI as ql,cL as Al,cM as Fl,bV as Ll,cN as jl,cO as Hl,cP as J,cQ as hc,a4 as yo,b5 as xo,cR as Kl,cS as Wl,bb as uc,cT as Nl,cU as b,cV as Qn,aY as p,aX as g,aw as I,aB as f,cW as Gl,bE as Ul}from"./index-DgoyezzA.js";import{u as gc}from"./useDataEntryBase-bmWJ9q4a.js";import{i as Jl,d as Yl}from"./discSortUtil-lO4ECXNL.js";function Zl(e){const{badgeContent:t,invisible:n=!1,max:a=99,showZero:i=!1}=e,c=qs({badgeContent:t,max:a});let s=n;n===!1&&t===0&&!i&&(s=!0);const{badgeContent:r,max:d=a}=s?c:e,u=r&&Number(r)>d?`${d}+`:r;return{badgeContent:r,invisible:s,max:d,displayValue:u}}function Ql(e){return Fs("MuiBadge",e)}const ee=As("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),Xl=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],_n=10,wn=4,er=e=>{const{color:t,anchorOrigin:n,invisible:a,overlap:i,variant:c,classes:s={}}=e,r={root:["root"],badge:["badge",c,a&&"invisible",`anchorOrigin${L(n.vertical)}${L(n.horizontal)}`,`anchorOrigin${L(n.vertical)}${L(n.horizontal)}${L(i)}`,`overlap${L(i)}`,t!=="default"&&`color${L(t)}`]};return Hs(r,Ql,s)},tr=jt("span",{name:"MuiBadge",slot:"Root",overridesResolver:(e,t)=>t.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),nr=jt("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.badge,t[n.variant],t[`anchorOrigin${L(n.anchorOrigin.vertical)}${L(n.anchorOrigin.horizontal)}${L(n.overlap)}`],n.color!=="default"&&t[`color${L(n.color)}`],n.invisible&&t.invisible]}})(({theme:e})=>{var t;return{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(12),minWidth:_n*2,lineHeight:1,padding:"0 6px",height:_n*2,borderRadius:_n,zIndex:1,transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.enteringScreen}),variants:[...Object.keys(((t=e.vars)!=null?t:e).palette).filter(n=>{var a,i;return((a=e.vars)!=null?a:e).palette[n].main&&((i=e.vars)!=null?i:e).palette[n].contrastText}).map(n=>({props:{color:n},style:{backgroundColor:(e.vars||e).palette[n].main,color:(e.vars||e).palette[n].contrastText}})),{props:{variant:"dot"},style:{borderRadius:wn,height:wn*2,minWidth:wn*2,padding:0}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${ee.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${ee.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${ee.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${ee.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${ee.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${ee.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${ee.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${ee.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.leavingScreen})}}]}}),bo=w.forwardRef(function(t,n){var a,i,c,s,r,d;const u=Ls({props:t,name:"MuiBadge"}),{anchorOrigin:_={vertical:"top",horizontal:"right"},className:D,component:S,components:$={},componentsProps:y={},children:v,overlap:C="rectangular",color:P="default",invisible:N=!1,max:G=99,badgeContent:Z,slots:F,slotProps:V,showZero:A=!1,variant:T="standard"}=u,B=js(u,Xl),{badgeContent:se,invisible:Mc,max:Tc,displayValue:Ic}=Zl({max:G,invisible:N,badgeContent:Z,showZero:A}),Rc=qs({anchorOrigin:_,color:P,overlap:C,variant:T,badgeContent:Z}),lo=Mc||se==null&&T!=="dot",{color:zc=P,overlap:Bc=C,anchorOrigin:Ec=_,variant:ro=T}=lo?Rc:u,ho=ro!=="dot"?Ic:void 0,yn=oe({},u,{badgeContent:se,invisible:lo,max:Tc,displayValue:ho,showZero:A,anchorOrigin:Ec,color:zc,overlap:Bc,variant:ro}),uo=er(yn),go=(a=(i=F==null?void 0:F.root)!=null?i:$.Root)!=null?a:tr,po=(c=(s=F==null?void 0:F.badge)!=null?s:$.Badge)!=null?c:nr,xn=(r=V==null?void 0:V.root)!=null?r:y.root,bn=(d=V==null?void 0:V.badge)!=null?d:y.badge,Oc=mo({elementType:go,externalSlotProps:xn,externalForwardedProps:B,additionalProps:{ref:n,as:S},ownerState:yn,className:Ot(xn==null?void 0:xn.className,uo.root,D)}),Pc=mo({elementType:po,externalSlotProps:bn,ownerState:yn,className:Ot(uo.badge,bn==null?void 0:bn.className)});return he.jsxs(go,oe({},Oc,{children:[v,he.jsx(po,oe({},Pc,{children:ho}))]}))});function or(e){return Fs("MuiFormControlLabel",e)}const ut=As("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),ar=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],ir=e=>{const{classes:t,disabled:n,labelPlacement:a,error:i,required:c}=e,s={root:["root",n&&"disabled",`labelPlacement${L(a)}`,i&&"error",c&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",i&&"error"]};return Hs(s,or,t)},sr=jt("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${ut.label}`]:t.label},t.root,t[`labelPlacement${L(n.labelPlacement)}`]]}})(({theme:e,ownerState:t})=>oe({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${ut.disabled}`]:{cursor:"default"}},t.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},t.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},t.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${ut.label}`]:{[`&.${ut.disabled}`]:{color:(e.vars||e).palette.text.disabled}}})),cr=jt("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${ut.error}`]:{color:(e.vars||e).palette.error.main}})),lr=w.forwardRef(function(t,n){var a,i;const c=Ls({props:t,name:"MuiFormControlLabel"}),{className:s,componentsProps:r={},control:d,disabled:u,disableTypography:_,label:D,labelPlacement:S="end",required:$,slotProps:y={}}=c,v=js(c,ar),C=Vc(),P=(a=u??d.props.disabled)!=null?a:C==null?void 0:C.disabled,N=$??d.props.required,G={disabled:P,required:N};["checked","name","onChange","value","inputRef"].forEach(B=>{typeof d.props[B]>"u"&&typeof c[B]<"u"&&(G[B]=c[B])});const Z=qc({props:c,muiFormControl:C,states:["error"]}),F=oe({},c,{disabled:P,labelPlacement:S,required:N,error:Z.error}),V=ir(F),A=(i=y.typography)!=null?i:r.typography;let T=D;return T!=null&&T.type!==E&&!_&&(T=he.jsx(E,oe({component:"span"},A,{className:Ot(V.label,A==null?void 0:A.className),children:T}))),he.jsxs(sr,oe({className:Ot(V.root,s),ownerState:F,ref:n},v,{children:[w.cloneElement(d,G),N?he.jsxs(Ks,{display:"block",children:[T,he.jsxs(cr,{ownerState:F,"aria-hidden":!0,className:V.asterisk,children:["â€‰","*"]})]}):T]}))}),rr={};class pc{constructor(t,n){this.root=new dr(t,n)}subset(t){const n=[];return this._subset(t,a=>n.push(...a[fo].map(i=>i.value))),n}entries(t){const n=[];return this._subset(t,a=>n.push(...a[fo])),n}_subset(t,n){const a=t.length;function i(c,s){c<a?s.subset(t[c]).forEach(r=>i(c+1,r)):n(s.leaf)}i(0,this.root)}}let dr=class mc{constructor(t,n){if(this.children=[],t>0)for(const[a,i]of Object.entries(n)){const c=new Map;for(const[s,r]of Object.entries(i))c.set(+s,new mc(t-1,r));this.children.push({mask:+a,map:c})}else this.leaf=n}subset(t){return this.children.map(({mask:n,map:a})=>a.get(t&n)).filter(n=>!!n)}};class _o{constructor(t){this.root=new Xn(void 0),this.keys=t}at(t){const n=this.keys.get(t),a=n.reduce((i,c)=>i.child(c),this.root);return a.leaf||(a.leaf=new eo(t,n,this.keys,a)),a.leaf}}class Xn{constructor(t){this.children=new Map,this.parent=t}child(t){let n=this.children.get(t);return n||(n=new Xn(this),this.children.set(t,n),n)}}class eo{constructor(t,n,a,i){this.tag=Object.fromEntries(Object.entries(t).filter(([c,s])=>s!=null)),this.id=n,this.keys=a,this.internal=i}with(t){const{keys:n}=this,{id:a,firstReplacedByte:i}=n.combine(this.id,t);let c=this.internal;for(let s=i;s<n.tagLen;s++)c=c.parent;for(let s=i;s<n.tagLen;s++)c=c.child(a[s]);return c.leaf||(c.leaf=new eo({...this.tag,...t},a,n,c)),c.leaf}}class hr{constructor(t,n){this.keys=new Ws(t),this.values=new pc(t.tagLen,n)}subset(t){return this.values.subset(this.keys.get(t))}}const pt={sum:e=>e.reduce((t,n)=>t+n,0),prod:e=>e.reduce((t,n)=>t*n,1),min:e=>Math.min(...e),max:e=>Math.max(...e),sumfrac:([e,t])=>e/(e+t),unique:([e])=>e},fc={match:([e,t])=>e===t?0:1,thres:([e,t])=>e>=t?0:1,lookup:([e],t)=>t[e]??0},Mt=e=>Lc(e,"val");let $c=class{constructor(t,...n){const a=new Ws(t);this.nodes=new pc(a.tagLen,Ac(n)),this.cache=new _o(a).at({}),this.calc=new _o(a).at({}),this.calc.val=this}withTag(t){const n=this.calc.with(t);return n.val??(n.val=Object.assign(new this.constructor(this.cache.keys),this,{cache:this.cache.with(t),calc:n}))}gather(t){return this._gather(this.cache.with(t)).pre}compute(t){return this._compute(t,this.cache)}_gather(t){if(t.val)return t.val;const n=this.nodes.entries(t.id).flatMap(({tag:a,value:i})=>i.op==="reread"?this._gather(t.with(i.tag)).pre:[this.markGathered(t.tag,a,i,this._compute(i,t))]);return t.val={pre:n}}_compute(t,n){const a=(c,s,r,d)=>Object.freeze({val:c,meta:this.computeMeta(t,c,s,r,d)}),{op:i}=t;switch(i){case"const":return a(t.ex,[],[]);case"sum":case"prod":case"min":case"max":case"sumfrac":{const c=t.x.map(s=>this._compute(s,n));return a(pt[i](Mt(c)),c,[])}case"thres":case"match":case"lookup":{const c=t.br.map(u=>this._compute(u,n)),s=fc[i](Mt(c),t.ex),r=[...Array(t.x.length)],d=r[s]=this._compute(t.x[s],n);return a(d.val,r,c)}case"subscript":{const c=this._compute(t.br[0],n);return a(t.ex[c.val],[],[c])}case"vtag":return a(n.tag[t.ex]??"",[],[]);case"tag":{const c=n.with(t.tag),s=this._compute(t.x[0],c);return a(s.val,[s],[],c.tag)}case"dtag":{const c=t.br.map(d=>this._compute(d,n)),s=n.with(Object.fromEntries(c.map((d,u)=>[t.ex[u],d.val]))),r=this._compute(t.x[0],s);return a(r.val,[r],c,s.tag)}case"read":{const c=n.with(t.tag),s=this._gather(c),{pre:r}=s,d=t.ex??this.defaultAccu(c.tag)??"unique";if(d!==t.ex&&(t={...t,ex:d}),s[d])return s[d];if(jc()&&d==="unique"&&r.length!==1)throw new Error(`Ill-form read for ${Ns(c.tag)}`);const u=pt[d](Mt(r));return s[d]=a(u,r,[],c.tag)}case"custom":{const c=t.x.map(s=>this._compute(s,n));return a(rr[t.ex].calc(Mt(c)),c,[])}default:Fc(i)}}defaultAccu(t){}markGathered(t,n,a,i){return i}computeMeta(t,n,a,i,c){}toDebug(){throw new Error("not implemented")}};const ur={arithmetic:pt,branching:fc};class gr extends $c{constructor(t,n=Ns,a=()=>!0){super(t.cache.keys),this.gathering=new Set,this.nodes=t.nodes,this.tagStr=n,this.filter=a,this.defaultAccu=i=>t.defaultAccu(i),this.cache=this.cache.with(t.cache.tag)}withTag(t){throw new Error("Unimplemented")}_gather(t){if(this.gathering.has(t))throw new Error(`Loop detected for ${this.tagStr(t.tag)}`);this.gathering.add(t);const n=this.__gather(t);return this.gathering.delete(t),n}__gather(t){if(t.val)return t.val;const n=this.nodes.entries(t.id).flatMap(({tag:a,value:i})=>i.op==="reread"?this._gather(t.with(i.tag)).pre.map(c=>{const s=`${this.tagStr(a)} <= ${this.tagStr(i.tag)} : ${c.meta.readSeq}`;return Object.freeze({...c,meta:{...c.meta,readSeq:s}})}):[this.markGathered(t.tag,a,i,this._compute(i,t))]);return t.val={pre:n}}_compute(t,n){try{return super._compute(t,n)}catch(a){return Object.freeze({val:NaN,meta:{formula:`${a}`,deps:[],omitted:[],val:NaN,x:[],br:[],comp:"ERR",pivot:!0,toJSON:vo}})}}markGathered(t,n,a,i){const c=`${this.tagStr(n)} <- ${this.tagStr(t)}`;return{...i,meta:{...i.meta,readSeq:c,pivot:!0}}}computeMeta(t,n,a,i,c){let s,r;const d=a.filter($=>$).map($=>$.meta),u=i.map($=>$.meta),_=[],D=t.op==="read"?t.ex:t.op,S=[];if(D in pt){const $=pt[D]([]);for(const y of[...u,...d])y.val!==$||this.filter(y)?_.push(y):S.push(y)}else _.push(...u,...d);switch(t.op){case"const":s=wo(t.ex);break;case"read":r=`gather ${d.length} node(s)`,r+=` matching ${this.tagStr(c,t.ex)}`,r+=` (for ${this.tagStr(t.tag)})`,S.length&&(r+=` <${S.length} omitted>`),s=`${this.tagStr(t.tag)}`;break;default:{const $=[];t.ex&&t.op!=="subscript"&&$.push(JSON.stringify(t.ex)),t.tag&&$.push(this.tagStr(t.tag)),$.push(..._.map(y=>y.comp)),S.length&&$.push(`<${S.length} omitted>`),s=`${t.op}(`+$.join(", ")+")"}}return S.push(..._.flatMap($=>$.pivot?[]:$.omitted)),Object.freeze({formula:`[${wo(n)}] ${r??s}`,deps:[...new Set(_.flatMap($=>$.pivot?[$]:$.deps))],omitted:[...new Set(S)],val:n,x:d,br:u,comp:s,pivot:t.op==="read",toJSON:vo})}}const wo=e=>typeof e=="string"?`"${e}"`:e.toString();function vo(){const{formula:e,readSeq:t,deps:n}=this,a={readSeq:t,formula:e,deps:n};return a.readSeq||delete a.readSeq,a.deps.length||delete a.deps,Object.keys(a).length===1?a.formula:a}function Kt(e){const{database:t}=Y();return Hn(t.chars,e)}function pr(e){const{database:t}=Y();return Hn(t.charOpts,e)}function mr(e){const{database:t}=Y();return Hn(t.discs,e??"")}const{arithmetic:fr}=ur;let $r=class extends $c{computeMeta({op:t,ex:n,tag:a},i,c,s,r){let d=c.filter($=>!!$);const u=yr(d,s);function _($){return Object.freeze(r&&!$.tag?{tag:r,...$}:$)}function D($,y){return _({op:$,ops:y,...u})}function S($,y){let{meta:v}=$;return y!=null&&y.some(C=>!v.usedCats.has(C))&&(v={...v,usedCats:new Set([...v.usedCats,...y])}),_(v.conds===u.conds?v:{...v,...u})}if(t==="read"&&(r==null?void 0:r.qt)==="cond"){const{src:$,dst:y,sheet:v,q:C}=r;$&&v&&C&&(u.conds=Ft(u.conds,{[y??"All"]:{[$]:{[v]:{[C]:i}}}}))}switch(t==="read"&&n!=="unique"&&([t,n]=[n,void 0]),t){case"sum":case"prod":case"min":case"max":case"sumfrac":if(d.length>1){const $=fr[t]([]);d=d.filter(y=>y.val!==$)}return d.length===1?S(d[0]):D(d.length?t:"const",d);case"const":case"subscript":return D("const",[]);case"vtag":return u.usedCats=new Set([n]),D("const",[]);case"match":case"thres":case"lookup":case"read":return S(d[0]);case"tag":return S(d[0],Object.keys(a));case"dtag":return S(d[0],n);case"custom":return D(n,d);default:Hc(t)}}markGathered(t,n,a,i){const{val:c}=i,s={...i.meta};let r=!1;const d=new Set([...s.usedCats,...Object.keys(n)]);return s.usedCats.size!==d.size&&(s.usedCats=d,r=!0),r?{val:c,meta:Object.freeze(s)}:i}listFormulas(t){return this.gather(t.tag).filter(n=>n.val).map(({val:n,meta:a})=>Kc.withTag(a.tag)[n])}listCondFormulas(t){return this.listFormulas(t).map(n=>this.compute(n).meta.conds).reduce(Ft,{})}};function yr(e,t){var s;const n=[...e.map(r=>r.meta),...t.map(r=>r.meta)];let a={},i=new Set;for(const r of n)a=Ft(a,r.conds),r.usedCats.forEach(d=>i.add(d));const c=i.size;return i=((s=n.find(r=>r.usedCats.size===c))==null?void 0:s.usedCats)??i,{usedCats:i,conds:a}}function Ft(e,t){if(e===t)return e;if(typeof e!="object")throw new Error(`cannot merge ${e} and ${t}`);if(Object.keys(t).length>Object.keys(e).length&&([e,t]=[t,e]),!Object.keys(t).length)return e;let n=!1;const a={...e};for(const[i,c]of Object.entries(t)){const s=a[i],r=i in a?Ft(s,c):c;s!==r&&(a[i]=r,n=!0)}return Object.freeze(n?a:e)}function xr(e){const t=new Set(e);return n=>!br(n,t)}function br(e,t){const n=e.formula.match(/(\S+) (\S+) common.count/);if(!n)return!1;const[,a,i]=n;return i==="own"&&t.has(a)}class _r extends $r{toDebug(){return new gr(this,Wc,xr([...Us,...Js]))}defaultAccu(t){var i,c,s,r;const{qt:n,q:a}=t;if(!(!n||!a))switch(t.et){case"own":case"target":return(c=(i=Gs[n])==null?void 0:i[a])==null?void 0:c.accu;case"enemy":return(r=(s=Nc[n])==null?void 0:s[a])==null?void 0:r.accu;case"team":if(n==="common"&&a==="count")return"sum";throw new Error("non-explicit team value accumulator")}}listFormulas(t){return super.listFormulas(t).filter(n=>Gc)}}function Et(e,...t){return t.map(({tag:n,value:a})=>({tag:{...n,preset:e},value:a}))}function yc(e,...t){return t.map(({tag:n,value:a})=>({tag:{...n,src:e},value:a}))}function xc(e){const{lvl:t,promotion:n,basic:a,dodge:i,special:c,chain:s,assist:r,core:d,mindscape:u}=q.char,{char:_,iso:D,[e.key]:S}=O.withAll("sheet",[]);return[_.reread(S),D.reread(S),t.add(e.level),a.add(e.basic),i.add(e.dodge),c.add(e.special),s.add(e.chain),r.add(e.assist),d.add(e.core),n.add(e.promotion),u.add(e.mindscape),Pt.base.crit_.add(.05),Pt.base.crit_dmg_.add(.5)]}function wr(e){return[O.sheet("agg").reread(O.sheet("wengine")),...e?[q.common.count.sheet(e.key).add(1),q.wengine.lvl.add(e.level),q.wengine.modification.add(e.modification),q.wengine.phase.add(e.phase)]:[]]}function bc(e,t){const{common:{count:n},initial:a}=Qc(Gs,{sheet:"disc",et:"own"});return[O.sheet("agg").reread(O.sheet("disc")),O.withTag({sheet:"disc",qt:"initial"}).reread(O.sheet("dyn")),...Object.entries(e).map(([i,c])=>Xc(a,i).sheet("dyn").add(c)),...Object.entries(t).map(([i,c])=>n.sheet(i).add(c))]}function vr(e){const t={},n={};return e.forEach(({setKey:a,mainStatKey:i,substats:c,level:s,rarity:r})=>{t[a]=(t[a]??0)+1,n[i]=(n[i]??0)+Yc(r,i,s),c.forEach(({key:d,upgrades:u})=>{!d||!u||(n[d]=(n[d]??0)+Zc(d,r)*u)})}),bc(n,t)}function _c(e){const t=O.with("et","team"),{own:n,enemy:a,teamBuff:i,notOwnBuff:c}=O.sheet("agg").withAll("et",[]);return[e.map(s=>O.withTag({et:"target",dst:s}).reread(O.withTag({et:"own",dst:null,src:s}))),e.flatMap(s=>{const r=n.with("src",s);return e.map(d=>r.reread(i.withTag({dst:s,src:d,name:null})))}),e.flatMap(s=>{const r=n.with("src",s);return e.filter(d=>d!==s).map(d=>r.reread(c.withTag({dst:s,src:d,name:null})))}),e.map(s=>a.reread(O.withTag({et:"enemyDeBuff",dst:null,src:s,name:null}))),e.flatMap((s,r)=>{const{stackIn:d,stackTmp:u}=O.withAll("qt",[]),_=O.withTag({src:s,et:"own"});return[_.with("qt","stackTmp").add(Uc(d,0,r+1)),_.with("qt","stackOut").add(Jc(u.max.with("et","team"),r+1,d))]}),e.map(s=>t.add(O.withTag({src:s,et:"own"})))].flat()}function wc(e){const t=Ys(Vt,e);return new _r(Vt,el,t)}function kr(e){return new hr(Vt,Ys(Vt,e))}function Sr({characterKey:e}){return o(qt,{ns:"charNames_gen",key18:e})}function Cr({attribute:e}){return ne[e]}function Dr({characterKey:e,onClick:t,charCardConfig:n}){const{level:a=0,promotion:i=0}=Kt(e)??{},c=Q(e),s=n||{cardWidth:"100%",charImgWidth:"100%",iconsSize:1.7,isEditing:!1,charNameWidth:"191px",charNameVariant:"h6",scrollingBgSize:"200px"},r=w.useCallback(()=>e&&(t==null?void 0:t(e)),[e,t]),d=w.useCallback(u=>o(Kn,{onClick:r,sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:u}),[r]);return o(mt,{children:o(tl,{condition:!!t,wrapper:d,children:x(U,{sx:{display:"flex",flexDirection:"column",width:s.cardWidth},children:[o(Mr,{characterKey:e,characterStat:c,charCardConfig:s}),o(Tr,{characterKey:e,characterStat:c,promotion:i,level:a,charCardConfig:s})]})})})}function Mr({characterKey:e,characterStat:t,charCardConfig:n}){const{attribute:a,id:i}=t;return x(U,{sx:s=>({width:"100%",height:"100%",position:"relative",display:"flex",background:`${s.palette[a].main}`,zIndex:1,overflow:"hidden"}),children:[x(U,{sx:{position:"absolute",left:"0",right:"0",display:"flex",transform:"rotate(5deg) translateX(-50%)",zIndex:2},children:[o(ko,{characterKey:e,charCardConfig:n}),o(ko,{characterKey:e,charCardConfig:n})]}),o(U,{src:`https://act-webstatic.hoyoverse.com/game_record/zzzv2/role_vertical_painting/role_vertical_painting_${i}.png`,component:At?At:"img",width:n.charImgWidth,height:"auto",position:"relative",zIndex:"2"})]})}function Tr({characterKey:e,characterStat:t,promotion:n,level:a,charCardConfig:i}){const{t:c}=K("page_characters"),{attribute:s,rarity:r,specialty:d}=t,u=Kt(e);return o(U,{sx:{width:"100%",height:"100%",padding:"8px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:x(U,{sx:{display:"flex",flexDirection:"column"},children:[x(U,{gap:1,sx:{display:"flex",alignItems:"center"},children:[o(W,{size:i.iconsSize,src:Zs(r)}),o(E,{variant:i.charNameVariant,sx:{fontWeight:"900",maxWidth:i.charNameWidth,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:o(Sr,{characterKey:e})}),o(nl,{ele:s,iconProps:{sx:{fontSize:`${i.iconsSize}em`}}}),o(W,{size:i.iconsSize,src:Qs(d)}),i.isEditing?"":o(E,{variant:"h5",color:"primary",sx:{fontWeight:"900"},children:c("mindscape",{level:u?u.mindscape:0})})]}),i.isEditing?"":x(U,{sx:{mt:"12px",display:"flex",gap:"14px",flexWrap:"wrap"},children:[x(U,{sx:_=>({border:`2px solid ${_.palette.contentZzz.main}`,borderRadius:"20px",display:"flex"}),children:[o(E,{sx:{fontWeight:"900",paddingLeft:"12px",fontSize:"16px"},children:c("charLevel",{level:a})}),x(E,{color:"primary",sx:{fontWeight:"900",paddingLeft:"4px",pr:"10px"},children:["/ ",Xs[n]]})]}),x(U,{gap:1.5,sx:{display:"flex",alignItems:"center"},children:[Wn.map((_,D)=>o(bo,{anchorOrigin:{vertical:"bottom",horizontal:"left"},badgeContent:`${u?u[_]:0}`,color:"primary",children:o(W,{size:1.9,src:te(_)})},D)),o(bo,{anchorOrigin:{vertical:"bottom",horizontal:"left"},badgeContent:`${u?u.core:0}`,color:"primary",children:o(W,{size:1.9,src:te("core")})},6)]})]})]})})}function ko({characterKey:e,charCardConfig:t}){const{t:n}=K("charNames_gen"),a={animation:"scroll 16s infinite linear","@keyframes scroll":{"0%":{transform:"translateX(-100%)"},"100%":{transform:"translateX(0)"}}};return o(U,{component:"span",sx:{color:"#000",marginTop:"20px",fontStyle:"italic",fontSize:t.scrollingBgSize,lineHeight:"150px",whiteSpace:"nowrap",textTransform:"uppercase",display:"flex",justifyContent:"center",fontFamily:"Impact",opacity:.1,...a},children:n(`${e}`)})}function Ir({mindscape:e,setMindscape:t}){const{t:n}=K("page_characters");return o(M,{sx:{display:"flex",flexWrap:"wrap",gap:2,mt:"12px"},children:Nn(1,6).map(a=>o(M,{children:o(mt,{sx:{position:"relative",borderRadius:"40px"},children:o(lr,{control:o(ol,{checked:e>=a,onChange:()=>t(a===e?a-1:a)}),label:x(M,{sx:{position:"absolute",top:9,left:e>=a?75:16,transition:"left 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",textAlign:"center"},children:[o(E,{variant:"subtitle1",sx:i=>({fontWeight:900,color:e>=a?i.palette.mindscapeActive.main:i.palette.mindscapeInactive.main}),children:n("mindscape",{level:a})}),o(E,{variant:"subtitle2",sx:i=>({lineHeight:.2,fontWeight:900,color:e>=a?i.palette.mindscapeActive.main:i.palette.mindscapeInactive.main}),children:n("mindscapeTitle")})]}),sx:{margin:0}})})},a))})}function Rr(e){return{new:t=>e.chars.get(t)?0:1,name:t=>ec.t(t).toString(),level:t=>{const n=e.chars.get(t);return n?n.level*(n.promotion+1):0},rarity:t=>Q(t).rarity??0}}function zr(e){return{attribute:(t,n)=>n.includes(Q(t).attribute),specialtyType:(t,n)=>n.includes(Q(t).specialty),rarity:(t,n)=>n.includes(Q(t).rarity),name:(t,n)=>n===void 0||ec.t(t).toLowerCase().includes(n.toLowerCase()),new:(t,n)=>n===void 0||n===(e.chars.get(t)?"no":"yes")}}const vc={name:["name"],level:["level","rarity","name"],rarity:["rarity","level","name"]};function wy({show:e,onHide:t,onSelect:n,newFirst:a=!1}){const{database:i}=Y(),c=gc(i.displayCharacter),[s,r]=w.useState(""),d=w.useDeferredValue(s),u=w.useDeferredValue(c),_=w.useMemo(()=>{const{attribute:$,specialtyType:y,sortType:v,ascending:C}=u,P=[...a?["new"]:[],...vc[v]??[]];return al.filter(tc({attribute:$,specialtyType:y,name:d},zr(i))).sort(il(P,C,Rr(i),["new"]))},[u,a,d,i]);return o(Er,{show:e,charactersToShow:_,filterSearchSortProps:{searchTerm:s,onChangeSpecialtyFilter:$=>{i.displayCharacter.set({specialtyType:$})},onChangeAttributeFilter:$=>{i.displayCharacter.set({attribute:$})},onChangeSearch:$=>{r($.target.value)},onChangeSort:$=>{i.displayCharacter.set({sortType:$})},onChangeAsc:$=>{i.displayCharacter.set({ascending:$})}},onClose:()=>{r(""),t()},children:o(X,{sx:{flex:"1",overflow:"auto"},children:o(w.Suspense,{fallback:o(ae,{variant:"rectangular",width:"100%",height:1e3}),children:o(j,{container:!0,spacing:.5,columns:{xs:2,sm:3,md:4,lg:5},children:_.map($=>o(j,{item:!0,xs:1,children:o(ue,{bgt:"light",sx:y=>({position:"relative",flexGrow:1,display:"flex",flexDirection:"column",borderRadius:"40px 16px 16px 40px",border:`3px solid ${y.palette.contentZzz.main}`}),children:o(Or,{characterKey:$,onClick:()=>{t(),n($)}})})},$))})})})})}const Br=Object.keys(vc);function Er({show:e,charactersToShow:t,filterSearchSortProps:n,onClose:a,children:i}){const{t:c}=K("page_characters"),{database:s}=Y(),r=gc(s.displayCharacter),d=w.useMemo(()=>$o(nc,y=>s.chars.entries.forEach(([v,C])=>{const P=Q(C.key).specialty;y[P].total++,t.includes(v)&&y[P].current++})),[t,s.chars.entries]),u=w.useMemo(()=>$o(re,y=>Object.entries(s.chars.data).forEach(([v])=>{const C=Q(v).attribute;y[C].total++,t.includes(v)&&y[C].current++})),[t,s.chars.data]),{specialtyType:_,attribute:D,sortType:S,ascending:$}=r;return o(Jn,{open:e,onClose:a,containerProps:{sx:{height:"100vh",p:{xs:1}}},children:x(ue,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[x(X,{sx:{display:"flex",flexDirection:"column",gap:1},children:[x(M,{sx:{display:"flex",justifyContent:"space-between"},children:[x(M,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:[o(ll,{onChange:y=>s.displayCharacter.set({specialtyType:y}),value:_,totals:d,size:"small"}),o(rl,{onChange:y=>s.displayCharacter.set({attribute:y}),value:D,totals:u,size:"small"})]}),o(Gn,{sx:{ml:"auto"},onClick:()=>a(),children:o(Un,{})})]}),x(M,{display:"flex",gap:1,children:[o(dl,{autoFocus:!0,value:n.searchTerm,onChange:y=>n.onChangeSearch(y),label:c("characterName"),size:"small",sx:{height:"100%",mr:"auto"},InputProps:{sx:{height:"100%"}}}),o(hl,{sortKeys:Br,value:S,onChange:y=>n.onChangeSort(y),ascending:$,onChangeAsc:y=>n.onChangeAsc(y)})]})]}),o(gt,{}),i]})})}function Or({characterKey:e,onClick:t}){const{t:n}=K(["page_characters","charNames_gen"]),a=sl(),i=Kt(e),{rarity:c,attribute:s}=Q(e),{level:r=1,promotion:d=0,mindscape:u=0}=i??{},_=s==="electric"?a.palette[s].light:a.palette[s].main;return o(Kn,{onClick:t,children:x(M,{sx:{position:"relative",width:"100%",display:"flex",padding:"3px",gap:.5,"&::before":{content:'""',display:"block",position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:.7,background:_}},children:[o(M,{sx:{maxWidth:{xs:"33%",lg:"30%"},alignSelf:"flex-end",display:"flex",flexDirection:"column",zIndex:1,flexShrink:1},children:o(M,{component:At?At:"img",src:cl(e,"interknot")})}),x(M,{sx:{display:"flex",flexDirection:"column",zIndex:1,justifyContent:"space-evenly"},children:[x(M,{sx:{display:"flex",alignItems:"center",gap:.5},children:[o(W,{size:1.5,src:Zs(c)}),o(E,{variant:"subtitle2",sx:D=>({flexGrow:1,color:D.palette.contentNormal.main,fontWeight:"900"}),children:n(`charNames_gen:${e}`)})]}),i?x(M,{sx:D=>({display:"flex",gap:1,alignItems:"center",background:D.palette.contentNormal.main,padding:"4px 12px",borderRadius:"20px"}),children:[x(M,{sx:{textShadow:"0 0 5px gray"},children:[o(E,{variant:"body2",component:"span",whiteSpace:"nowrap",children:n("charLevel",{level:r})}),x(E,{variant:"body2",component:"span",color:"text.secondary",children:["/",Xs[d]]})]}),x(E,{variant:"body2",children:["M",u]})]}):o(E,{component:"span",variant:"body2",children:o(Ln,{color:"electric",children:n("characterEditor.new")})})]})]})})}function Pr(){const{t:e}=K("page_characters"),{database:t}=Y(),n=Ht(),{core:a=0,promotion:i=0,key:c}=n??{},s=w.useCallback(r=>c&&t.chars.set(c,{core:r}),[t,c]);return o(ac,{fullWidth:!0,title:e("core",{level:a}),color:"primary",startIcon:o(W,{src:te("core"),size:1.75,sideMargin:!0}),children:Nn(0,ul[i]).map(r=>o(oc,{selected:a===r,disabled:a===r,onClick:()=>s(r),children:e("core",{level:r})},r))})}const Vr={xs:2*3,sm:2*3,md:3*3,lg:4*3,xl:4*3};function kc({disc:e,onChangeId:t,slotKey:n,show:a,onClose:i}){const{t:c}=K(["page_characters","disc"]),{database:s}=Y(),r=e==null?void 0:e.id,d=w.useCallback((T,B)=>({...T,...B,slotKeys:[n]}),[n]),[u,_]=w.useReducer(d,{...Jl(),slotKeys:[n]}),[D,S]=gl();w.useEffect(()=>s.discs.followAny(S),[s,S]);const $=pl(),y=w.useMemo(()=>Yl(),[]),v=s.discs.values.filter(T=>T.slotKey===u.slotKeys[0]).length,C=w.useMemo(()=>{const T=tc(u,y);let B=s.discs.values.filter(T).map(se=>se.id);return r&&s.discs.get(r)&&(B=B.filter(se=>se!==r),B.unshift(r)),D&&B},[u,y,s.discs,r,D]),{numShow:P,setTriggerElement:N}=ml(Vr[$],C.length),G=w.useMemo(()=>C.slice(0,P),[C,P]),Z=C.length!==v?`${C.length}/${v}`:`${v}`,F={numShowing:G.length,total:Z,t:c,namespace:"disc"},[V,A]=w.useState("");return w.useEffect(()=>{fl.includes(V)?(t(null),A(""),i()):V&&(t(V),A(""),i())},[t,i,V]),o(Jn,{open:a,onClose:i,containerProps:{maxWidth:"xl"},children:x(ue,{children:[x(X,{sx:{py:1,display:"flex",alignItems:"center"},children:[o(E,{variant:"h6",children:c("tabEquip.swapDisc")}),o(Gn,{onClick:i,sx:{ml:"auto"},children:o(Un,{})})]}),o(gt,{}),o(X,{children:o(w.Suspense,{fallback:o(ae,{variant:"rectangular",width:"100%",height:200}),children:o($l,{filterOption:u,filterOptionDispatch:_,filteredIds:C,disableSlotFilter:!0})})}),o(gt,{}),x(X,{children:[o(M,{pb:1,display:"flex",justifyContent:"space-between",alignItems:"flex-end",flexWrap:"wrap",children:o(yl,{showingTextProps:F})}),o(M,{mt:1,children:o(w.Suspense,{fallback:o(ae,{variant:"rectangular",width:"100%",height:1e3}),children:x(j,{container:!0,spacing:1,columns:{xs:2,md:3,lg:4},children:[r&&o(j,{item:!0,xs:1,children:o(ue,{bgt:"light",sx:{width:"100%",height:"100%"},children:o(Kn,{sx:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},onClick:()=>A(n),children:x(M,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[o(xl,{sx:{fontSize:"10em"}}),o(E,{children:c("disc:button.unequipDisc")})]})})})}),G.map(T=>o(j,{item:!0,xs:1,sx:B=>({...r===T&&{"> .MuiCard-root":{outline:`${B.spacing(.5)} solid ${B.palette.warning.main}`}}}),children:o(ic,{disc:s.discs.get(T),onClick:r===T?void 0:()=>A(T)})},T))]})})}),C.length!==G.length&&o(ae,{ref:T=>{T&&N(T)},sx:{borderRadius:1,mt:1},variant:"rectangular",width:"100%",height:100})]})]})})}function qr(e){return"fieldRef"in e}var dt={},So;function Ar(){if(So)return dt;So=1;var e=bl();Object.defineProperty(dt,"__esModule",{value:!0}),dt.default=void 0;var t=e(_l()),n=wl(),a=(0,t.default)((0,n.jsx)("path",{d:"M6.99 11 3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z"}),"SwapHoriz");return dt.default=a,dt}var Fr=Ar();const yt=vl(Fr),Lr={xs:1,sm:2,md:3,lg:3,xl:3};function jr({setWengine:e,setDisc:t}){const{database:n}=Y(),a=w.useContext(sc),[i,c]=w.useState(),[s,r]=w.useState(""),d=w.useCallback(y=>{r(y)},[]),u=w.useCallback(y=>{c(y)},[]),_=cc(a==null?void 0:a.equippedWengine),D=a?Q(a.key).specialty:nc[0],S=lc(a==null?void 0:a.equippedDiscs),$=mr(i);return o(M,{children:x(Ks,{spacing:2,children:[o(w.Suspense,{fallback:!1,children:s&&o(kl,{wengineId:s,footer:!0,onClose:()=>r(""),extraButtons:o(Gr,{wengineId:(_==null?void 0:_.id)||"",wengineTypeKey:D,onChangeId:e})})}),o(w.Suspense,{fallback:!1,children:$&&o(Sl,{disc:$,show:!!i,onShow:()=>c(i),onClose:()=>c(void 0),cancelEdit:()=>c(void 0)})}),o(M,{children:_&&_.id&&n.wengines.keys.includes(_.id)?o(Cl,{wengineId:_.id,onEdit:()=>d(_.id),extraButtons:o(Nr,{wengineId:_.id,wengineTypeKey:D,onChangeId:e})}):o(Hr,{wengineId:"",wengineTypeKey:D,onChangeId:e})}),o(M,{children:o(j,{item:!0,columns:Lr,container:!0,spacing:1,children:!!S&&Object.entries(S).map(([y,v])=>o(j,{item:!0,xs:1,children:v!=null&&v.id&&n.discs.keys.includes(v.id)?o(ic,{disc:v,extraButtons:o(Wr,{disc:v,slotKey:y,onChangeId:C=>t(y,C)}),onEdit:()=>u(v.id),onLockToggle:()=>n.discs.set(v.id,({lock:C})=>({lock:!C}))}):o(Kr,{slotKey:y,onChangeId:C=>t(y,C)})},(v==null?void 0:v.id)||y))})})]})})}function Hr({wengineId:e,wengineTypeKey:t,onChangeId:n}){const[a,i,c]=ft();return x(mt,{bgt:"light",sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[o(X,{children:x(E,{children:[o(W,{src:Qs(t)})," "]})}),o(gt,{}),x(M,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:[o(Yn,{wengineId:e,wengineTypeKey:t,show:a,onClose:c,onChangeId:n}),o(ge,{onClick:i,color:"info",sx:{borderRadius:"1em"},children:o(yt,{sx:{height:100,width:100}})})]})]})}function Kr({slotKey:e,onChangeId:t}){const[n,a,i]=ft(),{t:c}=K("disc");return x(mt,{bgt:"light",sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[o(X,{children:o(E,{children:c("slotName",{slotKey:e})})}),o(gt,{}),x(M,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:[o(kc,{disc:void 0,slotKey:e,show:n,onClose:i,onChangeId:t}),o(ge,{onClick:a,color:"info",sx:{borderRadius:"1em"},children:o(yt,{sx:{height:100,width:100}})})]})]})}function Wr({disc:e,slotKey:t,onChangeId:n}){const{t:a}=K("page_characters"),[i,c,s]=ft();return x($t,{children:[o(rc,{title:o(E,{children:a("tabEquip.swapDisc")}),placement:"top",arrow:!0,children:o(ge,{color:"info",size:"small",onClick:c,"aria-label":a("tabEquip.swapDisc"),children:o(yt,{})})}),o(kc,{disc:e,slotKey:t,show:i,onClose:s,onChangeId:n})]})}function Nr({wengineId:e,wengineTypeKey:t,onChangeId:n}){const{t:a}=K("page_characters"),[i,c,s]=ft();return x($t,{children:[o(rc,{title:o(E,{children:a("tabEquip.swapWengine")}),placement:"top",arrow:!0,children:o(ge,{color:"info",size:"small",onClick:c,children:o(yt,{})})}),o(Yn,{wengineId:e,wengineTypeKey:t,onChangeId:n,show:i,onClose:s})]})}function Gr({wengineId:e,wengineTypeKey:t,onChangeId:n}){const{t:a}=K("page_characters"),[i,c,s]=ft();return x($t,{children:[o(ge,{color:"info",onClick:c,startIcon:o(yt,{}),children:a("tabEquip.swapWengine")}),o(Yn,{wengineId:e,wengineTypeKey:t,onChangeId:n,show:i,onClose:s})]})}function Ur({skillKey:e}){const{database:t}=Y(),{t:n}=K("page_characters"),a=Ht(),{[e]:i=0,promotion:c=0,key:s}=a??{},r=w.useCallback(d=>s&&t.chars.set(s,{[e]:d}),[t,s,e]);return o(ac,{fullWidth:!0,title:n(e,{level:i}),color:"primary",startIcon:o(W,{src:te(e),size:1.75,sideMargin:!0}),children:Nn(1,Dl[c]).map(d=>o(oc,{selected:i===d,disabled:i===d,onClick:()=>r(d),children:n(e,{level:d})},d))})}function Wt(){const e=w.useContext(Zn),t=w.useContext(Ml);return w.useMemo(()=>e==null?void 0:e.withTag(t),[e,t])}const H=(e,t)=>o(qt,{ns:"sheet",key18:e,values:t});function h(e,t){return[(n,a)=>o(qt,{ns:`${e}_${t}_gen`,key18:n,values:a}),(n,a)=>o(qt,{ns:`${e}_${t}`,key18:n,values:a})]}function l(e){return{title:o(Nt,{tag:e}),fieldRef:e}}function Jr(e){if(!e)return"";const{et:t,q:n,qt:a,name:i}=e;return t==="own"&&a==="formula"&&n!=="base"?i??n??"":n??""}const Yr={initial:"Initial",combat:"Combat",final:"Final",base:"Base"};function Nt({tag:e,showPercent:t,preventRecursion:n}){return o(de,{color:gy(e),children:o(Xr,{tag:e,showPercent:t,preventRecursion:n})})}function vy({tag:e,showPercent:t}){return x($t,{children:[o(Nt,{tag:e,showPercent:t}),my(e).map(n=>o(Ln,{children:Lt[n]},n)),e.attribute&&o(Ln,{color:e.attribute,children:o(Cr,{attribute:e.attribute})})]})}const Zr=["hp","hp_","atk","atk_","def","def_"],Qr=e=>Zr.includes(e),Co={dmg_:"DMG",common_dmg_:"DMG",defIgn_:"DEF Ignore",resIgn_:"Res Ignore",dazeInc_:"Daze Increase"};function Xr({tag:e,showPercent:t,preventRecursion:n}){var s;const a=Wt(),i=(s=fy.subset(e)[0])==null?void 0:s.title;if(i&&!n)return i;if(e.qt==="cond"&&e.q&&e.sheet&&a){const r=jn.get(`${e.sheet}:${e.q}`);if(r)return Tl(r.label,a,a==null?void 0:a.compute(new Il(e,"max")).val)}const c=Jr(e);if(Qr(c))return x("span",{children:[o(zl,{statKey:c,iconProps:Rl})," ",x("span",{children:[(e.qt&&Yr[e.qt])??e.qt," ",Bl[c],t&&dc(c)]})]});if(Co[c]){const r=[...e.attribute?[ne[e.attribute]]:[],...e.damageType1?[Lt[e.damageType1]]:[],...e.damageType2?[Lt[e.damageType2]]:[],Co[c]];return o("span",{children:r.join(" ")})}return o(Bt,{statKey:c,showPercent:t})}function ed(){const e=Wt();return o(mt,{children:o(X,{children:e==null?void 0:e.listFormulas(q.listing.formulas).map((t,n)=>o(td,{read:t},n))})})}function td({read:e}){var v,C,P,N,G,Z,F;const t=Wt(),{setRead:n}=w.useContext(El),a=Ht(),i=pr(a==null?void 0:a.key),c=e.tag.sheet===((v=i==null?void 0:i.target)==null?void 0:v.sheet)&&e.tag.name===((C=i==null?void 0:i.target)==null?void 0:C.name)||((P=i==null?void 0:i.target)==null?void 0:P.q)===e.tag.q,s=w.useMemo(()=>{var V,A,T,B;return e.tag.sheet===((V=i==null?void 0:i.target)==null?void 0:V.sheet)&&e.tag.name===((A=i==null?void 0:i.target)==null?void 0:A.name)?Ol(e.tag,(T=i==null?void 0:i.target)==null?void 0:T.damageType1,(B=i==null?void 0:i.target)==null?void 0:B.damageType2):e.tag},[e.tag,(N=i==null?void 0:i.target)==null?void 0:N.sheet,(G=i==null?void 0:i.target)==null?void 0:G.name,(Z=i==null?void 0:i.target)==null?void 0:Z.damageType1,(F=i==null?void 0:i.target)==null?void 0:F.damageType2]),r=w.useMemo(()=>({...e,tag:s}),[s,e]),d=t==null?void 0:t.compute(r),u=s.name||s.q,{statHighlight:_,setStatHighlight:D}=w.useContext(Pl),S=s.name?"":s.attribute?`${s.attribute}_${s.q}`:s.q==="cappedCrit_"?"crit_":s.q,$=S?Vl(_,S):!1;if(!d)return null;const y=ql(d.val,dc(u??""));return x(M,{onMouseEnter:()=>S&&D(S),onMouseLeave:()=>D(""),sx:{display:"flex",gap:1,alignItems:"center",p:.5,borderRadius:.5,backgroundColor:c?"rgba(0,200,0,0.2)":void 0,position:"relative","::after":{content:'""',position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:.5,backgroundColor:Al($),transition:"background-color 0.3s ease-in-out",pointerEvents:"none"}},children:[o(M,{sx:{flexGrow:1},children:o(Nt,{tag:s})}),y,o(Fl,{tag:s,onClick:()=>{n(r)}})]})}function ky({characterKey:e,onClose:t}){return o(Jn,{open:!!e,onClose:t,children:o(w.Suspense,{fallback:o(ae,{variant:"rectangular",width:"100%",height:1e3}),children:e&&o(nd,{characterKey:e,onClose:t},e)})})}function nd({characterKey:e,onClose:t}){const n=Kt(e);return o(ue,{children:o(X,{sx:{display:"flex",flexDirection:"column",gap:1},children:o(w.Suspense,{fallback:o(ae,{variant:"rectangular",width:"100%",height:1e3}),children:n?o(sc.Provider,{value:n,children:o(ad,{onClose:t})}):o(ae,{variant:"rectangular",width:"100%",height:1e3})})})})}const od={cardWidth:"500px",charImgWidth:"75%",iconsSize:1.5,isEditing:!0,charNameWidth:"166px",charNameVariant:"h6",scrollingBgSize:"220px"};function ad({onClose:e}){const{t}=K(["page_characters"]),n=Ll(),{database:a}=Y(),i=Ht(),{key:c,equippedDiscs:s,equippedWengine:r}=i,d=w.useCallback(async()=>{const u=t(`${c}`);window.confirm(t("removeCharacter",{value:u}))&&(a.chars.remove(c),n("/characters"))},[a,n,c,t]);return x(M,{display:"flex",flexDirection:"column",gap:1,children:[x(M,{display:"flex",gap:1,children:[o(ge,{color:"error",onClick:()=>d(),startIcon:o(jl,{}),sx:{marginLeft:"auto"},children:t("characterEditor.delete")}),!!e&&o(Gn,{onClick:e,children:o(Un,{})})]}),o(M,{children:x(j,{container:!0,spacing:1,sx:{justifyContent:"center"},children:[o(j,{item:!0,xs:6,sm:4,md:4,lg:4,xl:4,children:x(ue,{sx:{height:"100%",display:"flex",flexDirection:"column",gap:1},children:[o(Dr,{characterKey:c,charCardConfig:od}),o(M,{sx:{px:1},children:o(Hl,{level:i.level,milestone:i.promotion,setBoth:({level:u,milestone:_})=>a.chars.set(c,{level:u,promotion:_})})}),o(ed,{}),o(Ir,{mindscape:i.mindscape,setMindscape:u=>a.chars.set(c,{mindscape:u})})]})}),x(j,{item:!0,xs:6,sm:8,md:8,lg:8,xl:8,sx:{display:"flex",flexDirection:"column",gap:1},children:[o(M,{children:x(j,{container:!0,columns:3,spacing:1,children:[Wn.map(u=>o(j,{item:!0,xs:1,children:o(Ur,{skillKey:u},u)},u)),o(j,{item:!0,xs:1,children:o(Pr,{})},"core")]})}),o(M,{children:o(jr,{setWengine:u=>{u?a.wengines.set(u,{location:c}):r&&a.wengines.set(r,{location:""})},setDisc:(u,_)=>{_?a.discs.set(_,{location:c}):s[u]&&a.discs.set(s[u],{location:""})}})})]})]})})]})}function Sy({character:e,charOpt:t,wengineId:n,discIds:a,children:i}){const c=id(e,n,a),s=w.useMemo(()=>wc([..._c([e.key]),...c,Pt.common.critMode.add(t.critMode),J.common.lvl.add(t.enemyLvl),J.common.def.add(t.enemyDef),J.common.isStunned.add(t.enemyisStunned?1:0),J.common.stun_.add(t.enemyStunMultiplier/100),J.common.unstun_.add(1),...t.conditionals.flatMap(({sheet:d,src:u,dst:_,condKey:D,condValue:S})=>Et("preset0",hc(d,u,_)(D,S))),...t.bonusStats.filter(({disabled:d})=>!d).flatMap(({tag:d,value:u})=>Et("preset0",{tag:{...d,src:e.key,sheet:"agg",et:"own"},value:yo(xo(u,d.q??""))})),...t.enemyStats.flatMap(({tag:d,value:u})=>Et("preset0",{tag:{...d,qt:"common",et:"enemy",sheet:"agg"},value:yo(xo(u,d.q??""))}))]),[c,t,e.key]),r=w.useMemo(()=>s&&new Map,[s]);return o(Kl.Provider,{value:r,children:o(Zn.Provider,{value:s,children:i})})}function id(e,t,n){const a=cc(t),i=lc(n),c=w.useMemo(()=>wr(a),[a]),s=w.useMemo(()=>vr(Object.values(i).filter(Wl)),[i]);return w.useMemo(()=>yc(e.key,...xc(e),...c,...s),[e,c,s])}function Cy({character:e,conditionals:t,children:n}){const a=w.useMemo(()=>wc([..._c([e.key]),...yc(e.key,...xc(e),...bc({},uc(Js,()=>4)),O.sheet("agg").reread(O.sheet("wengine")),q.wengine.lvl.add(60),q.wengine.modification.add(5),q.wengine.phase.add(1),...Us.map(i=>q.common.count.sheet(i).add(1))),Pt.common.critMode.add("avg"),J.common.lvl.add(100),J.common.def.add(900),J.common.isStunned.add(0),J.common.stun_.add(1.5),J.common.unstun_.add(1),...t.flatMap(({sheet:i,src:c,dst:s,condKey:r,condValue:d})=>Et("preset0",hc(i,c,s)(r,d)))]),[e,t]);return o(Zn.Provider,{value:a,children:n})}function k(e,t={}){return{...sd(e,t==null?void 0:t.perSkillAbility),core:ld(e,t==null?void 0:t.core,t==null?void 0:t.ability),m1:ce(e,1,t==null?void 0:t.m1),m2:ce(e,2,t==null?void 0:t.m2),m3:ce(e,3,t==null?void 0:t.m3),m4:ce(e,4,t==null?void 0:t.m4),m5:ce(e,5,t==null?void 0:t.m5),m6:ce(e,6,t==null?void 0:t.m6)}}function ht(e){return{title:o(Nt,{tag:e.tag,preventRecursion:!0}),fieldRef:e.tag}}function sd(e,t){const n=b.char[e],a=Qn[e],[i,c]=h("char",e);return uc(Wn,s=>({title:s,img:te(`${s}Flat`),documents:Object.keys(n[s]).flatMap(r=>{var d;return[{type:"text",header:{icon:o(W,{src:te(`${s}Flat`),size:1.5}),text:i(`${s}.${r}.name`)},text:i(`${s}.${r}.desc`)},{type:"fields",fields:Object.values(a).filter(u=>u.name.includes(r)).map(u=>({title:cd(e,s,u.name),fieldRef:u.tag}))},...((d=t==null?void 0:t[s])==null?void 0:d[r])??[]]})}))}function cd(e,t,n){const[a,i,c]=n.split("_");return H(c,{val:`$t(char_${e}_gen:${t}.${a}.params.${i})`})}function ld(e,t=[],n=[]){const[a,i]=h("char",e);return{title:"core",documents:[{type:"text",header:{icon:o(W,{src:te("coreFlat"),size:1.5}),text:a("core.name")},text:c=>a(`core.desc.${c.compute(q.char.core).val}`)},...t,{type:"text",header:{icon:o(W,{src:te("coreFlat"),size:1.5}),text:a("ability.name")},text:a("ability.desc")},...n]}}function ce(e,t,n=[]){const[a,i]=h("char",e);return{title:`mindscape${t}`,documents:[{type:"text",header:{icon:o(W,{src:Nl(t),size:1.5}),text:a(`mindscapes.${t}.name`)},text:x($t,{children:[a(`mindscapes.${t}.desc`),o("br",{}),o("br",{}),o("i",{children:a(`mindscapes.${t}.flavor`)})]})},...n]}}const Gt="Anby",[,Tt]=h("char",Gt),vn=p[Gt],le=g[Gt],rd=k(Gt,{core:[{type:"conditional",conditional:{label:Tt("coreCond"),metadata:vn.core_after3rdBasic,fields:[{title:Tt("core_dazeInc_"),fieldRef:le.core_after3rdBasic_dazeInc_.tag}]}}],m1:[{type:"conditional",conditional:{label:Tt("m1Cond"),metadata:vn.m1After4thBasicHit,fields:[ht(le.m1_after4thHit_energyRegen_)]}}],m2:[{type:"fields",fields:[ht(le.m2_stunned_basic_dmg_),ht(le.m2_unstunned_ex_dazeInc_)]}],m6:[{type:"conditional",conditional:{label:Tt("m6Cond"),metadata:vn.m6ChargeConsumed,fields:[ht(le.m6_charge_basic_dmg_),ht(le.m6_charge_exSpecial_dmg_)]}}]}),dd="Anton",hd=k(dd),ud="AstraYao",gd=k(ud),pd="Ben",md=k(pd),fd="Billy",$d=k(fd),yd="Burnice",xd=k(yd),bd="Caesar",_d=k(bd),wd="Corin",vd=k(wd),kd="Ellen",Sd=k(kd),Cd="Evelyn",Dd=k(Cd),Md="Grace",Td=k(Md),Id="Harumasa",Rd=k(Id),zd="Hugo",Bd=k(zd),Ed="Jane",Od=k(Ed),Pd="JuFufu",Vd=k(Pd),qd="Koleda",Ad=k(qd),Fd="Lighter",Ld=k(Fd),jd="Lucy",Hd=k(jd),Kd="Lycaon",Wd=k(Kd),Nd="Miyabi",Gd=k(Nd),Ud="Nekomata",Jd=k(Ud),Yd="Nicole",Zd=k(Yd),Qd="PanYinhu",Xd=k(Qd),eh="Piper",th=k(eh),nh="Pulchra",oh=k(nh),ah="Qingyi",ih=k(ah),sh="Rina",ch=k(sh),lh="Seth",rh=k(lh),dh="Soldier0Anby",hh=k(dh),uh="Soldier11",gh=k(uh),ph="Soukaku",mh=k(ph),fh="Trigger",$h=k(fh),yh="Vivian",xh=k(yh),bh="Yanagi",_h=k(bh),wh="Yixuan",vh=k(wh),kh="ZhuYuan",Sh=k(kh),Ch={Anby:rd,Anton:hd,AstraYao:gd,Ben:md,Billy:$d,Burnice:xd,Caesar:_d,Corin:vd,Ellen:Sd,Evelyn:Dd,Grace:Td,Harumasa:Rd,Hugo:Bd,Jane:Od,JuFufu:Vd,Koleda:Ad,Lighter:Ld,Lucy:Hd,Lycaon:Wd,Miyabi:Gd,Nekomata:Jd,Nicole:Zd,Piper:th,Pulchra:oh,Qingyi:ih,Rina:ch,Seth:rh,Soldier0Anby:hh,Soldier11:gh,Soukaku:mh,Trigger:$h,Vivian:xh,Yanagi:_h,PanYinhu:Xd,Yixuan:vh,ZhuYuan:Sh},Ut="AstralVoice",[Do,Dh]=h("disc",Ut),Mo=I(Ut),Mh=p[Ut],Th=g[Ut],Ih={2:{title:o(R,{}),img:Mo,documents:[{type:"text",text:Do("desc2")}]},4:{title:o(z,{}),img:Mo,documents:[{type:"text",text:Do("desc4")},{type:"conditional",conditional:{label:Dh("set4_cond"),metadata:Mh.astral,fields:[l(Th.set4_team_dmg_.tag)]}}]}},Jt="BranchBladeSong",[To,Rh]=h("disc",Jt),Io=I(Jt),zh=p[Jt],Ro=g[Jt],Bh={2:{title:o(R,{}),img:Io,documents:[{type:"text",text:To("desc2")}]},4:{title:o(z,{}),img:Io,documents:[{type:"text",text:To("desc4")},{type:"fields",fields:[l(Ro.set4_passive.tag)]},{type:"conditional",conditional:{label:Rh("set4_cond"),metadata:zh.apply_or_trigger,fields:[l(Ro.set4_cond.tag)]}}]}},Yt="ChaosJazz",[zo,Eh]=h("disc",Yt),Bo=I(Yt),Oh=p[Yt],It=g[Yt],Ph={2:{title:o(R,{}),img:Bo,documents:[{type:"text",text:zo("desc2")}]},4:{title:o(z,{}),img:Bo,documents:[{type:"text",text:zo("desc4")},{type:"fields",fields:[l(It.set4_passive_fire_dmg_.tag),l(It.set4_passive_electric_dmg_.tag)]},{type:"conditional",conditional:{label:Eh("set4_cond"),metadata:Oh.while_off_field,fields:[{title:"EX Special Attack DMG",fieldRef:It.set4_off_field_special_dmg_.tag},{title:"Assist Attack Attack DMG",fieldRef:It.set4_off_field_assist_dmg_.tag}]}}]}},Zt="ChaoticMetal",[Eo,Vh]=h("disc",Zt),Oo=I(Zt),qh=p[Zt],Po=g[Zt],Ah={2:{title:o(R,{}),img:Oo,documents:[{type:"text",text:Eo("desc2")}]},4:{title:o(z,{}),img:Oo,documents:[{type:"text",text:Eo("desc4")},{type:"fields",fields:[l(Po.set4_passive.tag)]},{type:"conditional",conditional:{label:Vh("set4_cond"),metadata:qh.trigger_corruption,fields:[l(Po.set4_cond_trigger_corruption.tag)]}}]}},Qt="FangedMetal",[Vo,Fh]=h("disc",Qt),qo=I(Qt),Lh=p[Qt],jh=g[Qt],Hh={2:{title:o(R,{}),img:qo,documents:[{type:"text",text:Vo("desc2")}]},4:{title:o(z,{}),img:qo,documents:[{type:"text",text:Vo("desc4")},{type:"conditional",conditional:{label:Fh("set4_cond"),metadata:Lh.inflict_assault,fields:[l(jh.set4_cond_inflict_assault.tag)]}}]}},Xt="FreedomBlues",[Ao,Kh]=h("disc",Xt),Fo=I(Xt),Wh=p[Xt],Nh=g[Xt],Gh={2:{title:o(R,{}),img:Fo,documents:[{type:"text",text:Ao("desc2")}]},4:{title:o(z,{}),img:Fo,documents:[{type:"text",text:Ao("desc4")},{type:"conditional",conditional:{label:Kh("set4_cond"),metadata:Wh.exSpecialHit,fields:[l(Nh.anomBuildupRes_.tag)]}}]}},en="HormonePunk",[Lo,Uh]=h("disc",en),jo=I(en),Jh=p[en],Yh=g[en],Zh={2:{title:o(R,{}),img:jo,documents:[{type:"text",text:Lo("desc2")}]},4:{title:o(z,{}),img:jo,documents:[{type:"text",text:Lo("desc4")},{type:"conditional",conditional:{label:Uh("set4_cond"),metadata:Jh.entering_combat,fields:[l(Yh.set4_cond_entering_combat.tag)]}}]}},tn="InfernoMetal",[Ho,Qh]=h("disc",tn),Ko=I(tn),Xh=p[tn],eu=g[tn],tu={2:{title:o(R,{}),img:Ko,documents:[{type:"text",text:Ho("desc2")}]},4:{title:o(z,{}),img:Ko,documents:[{type:"text",text:Ho("desc4")},{type:"conditional",conditional:{label:Qh("set4_cond"),metadata:Xh.hitting_burning_enemy,fields:[l(eu.set4_cond_hitting_burning_enemy.tag)]}}]}},nn="KingOfTheSummit",[Wo,Dy]=h("disc",nn),No=I(nn),nu=p[nn],Go=g[nn],ou={2:{title:o(R,{}),img:No,documents:[{type:"text",text:Wo("desc2")},{type:"fields",fields:[l(Go.set2.tag)]}]},4:{title:o(z,{}),img:No,documents:[{type:"text",text:Wo("desc4")},{type:"conditional",conditional:{metadata:nu.launchExSpecialOrChain,label:H("uponLaunch.2",{val1:"$t(skills.exSpecial)",val2:"$t(skills.chain)"}),fields:[l(Go.set4_team_launchExSpecialOrChain_crit_dmg_.tag)]}}]}},on="PhaethonsMelody",[Uo,Jo]=h("disc",on),Yo=I(on),Zo=p[on],Qo=g[on],au={2:{title:o(R,{}),img:Yo,documents:[{type:"text",text:Uo("desc2")}]},4:{title:o(z,{}),img:Yo,documents:[{type:"text",text:Uo("desc4")},{type:"conditional",conditional:{label:Jo("set4_cond_squad_use_ex"),metadata:Zo.squad_use_ex,fields:[l(Qo.set4_squad_anomProf.tag)]}},{type:"conditional",conditional:{label:Jo("set4_cond_not_char_use_ex"),metadata:Zo.not_char_use_ex,fields:[l(Qo.set4_not_self_ether_.tag)]}}]}},an="PolarMetal",[Xo,iu]=h("disc",an),ea=I(an),su=p[an],ta=g[an],cu={2:{title:o(R,{}),img:ea,documents:[{type:"text",text:Xo("desc2")}]},4:{title:o(z,{}),img:ea,documents:[{type:"text",text:Xo("desc4")},{type:"conditional",conditional:{label:iu("set4_cond"),metadata:su.freeze_shatter}},{type:"fields",fields:[{title:"Basic Attack DMG",fieldRef:ta.set4_basic_dmg_.tag},{title:"Dash Attack DMG",fieldRef:ta.set4_dash_dmg_.tag}]}]}},sn="ProtoPunk",[na,lu]=h("disc",sn),oa=I(sn),ru=p[sn],du=g[sn],hu={2:{title:o(R,{}),img:oa,documents:[{type:"text",text:na("desc2")}]},4:{title:o(z,{}),img:oa,documents:[{type:"text",text:na("desc4")},{type:"conditional",conditional:{label:lu("set4_cond"),metadata:ru.def_assist_or_evasive_assist,fields:[l(du.set4_cond_def_assist_or_evasive_assist_dmg_.tag)]}}]}},cn="PufferElectro",[aa,uu]=h("disc",cn),ia=I(cn),gu=p[cn],sa=g[cn],pu={2:{title:o(R,{}),img:ia,documents:[{type:"text",text:aa("desc2")}]},4:{title:o(z,{}),img:ia,documents:[{type:"text",text:aa("desc4")},{type:"fields",fields:[{title:"Ultimate DMG",fieldRef:sa.set4_dmg_.tag}]},{type:"conditional",conditional:{label:uu("set4_cond"),metadata:gu.launching_ult,fields:[l(sa.set4_cond_launching_ult_atk_.tag)]}}]}},ln="ShadowHarmony",[ca,mu]=h("disc",ln),la=I(ln),fu=p[ln],ra=g[ln],$u={2:{title:o(R,{}),img:la,documents:[{type:"text",text:ca("desc2")}]},4:{title:o(z,{}),img:la,documents:[{type:"text",text:ca("desc4")},{type:"conditional",conditional:{label:mu("set4_cond_stacks"),metadata:fu.stacks,fields:[l(ra.set4_stack_atk_.tag),l(ra.set4_stack_crit_.tag)]}}]}},to="ShockstarDisco",[da,My]=h("disc",to),ha=I(to),kn=g[to],yu={2:{title:o(R,{}),img:ha,documents:[{type:"text",text:da("desc2")}]},4:{title:o(z,{}),img:ha,documents:[{type:"text",text:da("desc4")},{type:"fields",fields:[{title:"Basic Attack Daze",fieldRef:kn.set4_basic_daze_.tag},{title:"Dash Attack Daze",fieldRef:kn.set4_dash_daze_.tag},{title:"Dodge Counter Daze",fieldRef:kn.set4_dodgeCounter_daze_.tag}]}]}},Sc="SoulRock",[ua,Ty]=h("disc",Sc),ga=I(Sc),xu={2:{title:o(R,{}),img:ga,documents:[{type:"text",text:ua("desc2")}]},4:{title:o(z,{}),img:ga,documents:[{type:"text",text:ua("desc4")}]}},rn="SwingJazz",[pa,bu]=h("disc",rn),ma=I(rn),_u=p[rn],wu=g[rn],vu={2:{title:o(R,{}),img:ma,documents:[{type:"text",text:pa("desc2")}]},4:{title:o(z,{}),img:ma,documents:[{type:"text",text:pa("desc4")},{type:"conditional",conditional:{label:bu("set4_cond"),metadata:_u.chain_or_ult,fields:[l(wu.set4_cond_chain_or_ult.tag)]}}]}},dn="ThunderMetal",[fa,ku]=h("disc",dn),$a=I(dn),Su=p[dn],Cu=g[dn],Du={2:{title:o(R,{}),img:$a,documents:[{type:"text",text:fa("desc2")}]},4:{title:o(z,{}),img:$a,documents:[{type:"text",text:fa("desc4")},{type:"conditional",conditional:{label:ku("set4_cond"),metadata:Su.enemy_shocked,fields:[l(Cu.set4_cond_enemy_shocked_atk_.tag)]}}]}},hn="WoodpeckerElectro",[ya,Mu]=h("disc",hn),xa=I(hn),Tu=p[hn],Iu=g[hn],Ru={2:{title:o(R,{}),img:xa,documents:[{type:"text",text:ya("desc2")}]},4:{title:o(z,{}),img:xa,documents:[{type:"text",text:ya("desc4")},{type:"conditional",conditional:{label:Mu("set4_cond"),metadata:Tu.crit_basic_dodge_ex,fields:[l(Iu.set4_cond_crit_basic_dodge_ex_atk_.tag)]}}]}},un="YunkuiTales",[ba,Iy]=h("disc",un),_a=I(un),zu=p[un],Sn=g[un],Bu={2:{title:o(R,{}),img:_a,documents:[{type:"text",text:ba("desc2")},{type:"fields",fields:[l(Sn.set2.tag)]}]},4:{title:o(z,{}),img:_a,documents:[{type:"text",text:ba("desc4")},{type:"conditional",conditional:{metadata:zu.uponLaunchExSpecialChainOrUlt,label:H("uponLaunch.3",{val1:"$t(skills.exSpecial)",val2:"$t(skills.chain)",val3:"$t(skills.ult)"}),fields:[l(Sn.set4_crit_.tag),l(Sn.set4_sheer_dmg_.tag)]}}]}},Eu={AstralVoice:Ih,BranchBladeSong:Bh,ChaosJazz:Ph,ChaoticMetal:Ah,FangedMetal:Hh,FreedomBlues:Gh,HormonePunk:Zh,InfernoMetal:tu,KingOfTheSummit:ou,PhaethonsMelody:au,PolarMetal:cu,ProtoPunk:hu,PufferElectro:pu,ShadowHarmony:$u,ShockstarDisco:yu,SoulRock:xu,SwingJazz:vu,ThunderMetal:Du,WoodpeckerElectro:Ru,YunkuiTales:Bu};function R(){return"2-Set"}function z(){return"4-Set"}function m({wKey:e,children:t}){const n=Wt();let a=1;return n&&n.compute(q.common.count.sheet(e)).val&&(a=n.compute(q.wengine.phase).val??1),t(a)}const pe="BashfulDemon",[wa,Ou]=h("wengine",pe),Pu=b.wengine[pe],Vu=f(pe,"icon"),qu=p[pe],va=g[pe],Au={title:wa("phase"),img:Vu,documents:[{type:"text",text:o(m,{wKey:pe,children:e=>wa(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(va.passive_ice_dmg_.tag)]},{type:"conditional",conditional:{label:Ou("cond"),metadata:qu.launch_ex_attack,fields:[l(va.team_atk_.tag),{title:"Duration",fieldValue:Pu.duration}]}}]},me="BigCylinder",[ka,Ry]=h("wengine",me),Fu=b.wengine[me],Lu=f(me,"icon"),ju=g[me],Hu=Qn[me],Ku={title:ka("phase"),img:Lu,documents:[{type:"text",text:o(m,{wKey:me,children:e=>ka(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(ju.passive_dmg_red_.tag)]},{type:"fields",fields:[{title:"Additional DMG",fieldRef:Hu.damage.tag},{title:"Cooldown",fieldValue:Fu.cooldown}]}]},fe="BlazingLaurel",[Sa,Ca]=h("wengine",fe),Da=b.wengine[fe],Wu=f(fe,"icon"),Ma=p[fe],Cn=g[fe],Nu={title:Sa("phase"),img:Wu,documents:[{type:"text",text:o(m,{wKey:fe,children:e=>Sa(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Ca("cond1"),metadata:Ma.quickOrPerfectAssistUsed,fields:[l(Cn.impact_.tag),{title:"Duration",fieldValue:Da.duration}]}},{type:"conditional",conditional:{label:Ca("cond2"),metadata:Ma.wilt,fields:[l(Cn.crit_dmg_ice_.tag),l(Cn.crit_dmg_fire_.tag),{title:"Duration",fieldValue:Da.wilt_duration}]}}]},$e="BoxCutter",[Ta,Gu]=h("wengine",$e),Uu=b.wengine[$e],Ju=f($e,"icon"),Yu=p[$e],Ia=g[$e],Zu={title:Ta("phase"),img:Ju,documents:[{type:"text",text:o(m,{wKey:$e,children:e=>Ta(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Gu("cond"),metadata:Yu.launchedAftershock,fields:[l(Ia.physical_dmg_.tag),l(Ia.daze_.tag),{title:"Duration",fieldValue:Uu.duration}]}}]},xt="BunnyBand",[Ra,Qu]=h("wengine",xt),Xu=f(xt,"icon"),eg=p[xt],za=g[xt],tg={title:Ra("phase"),img:Xu,documents:[{type:"text",text:o(m,{wKey:xt,children:e=>Ra(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(za.passive_hp_.tag)]},{type:"conditional",conditional:{label:Qu("cond"),metadata:eg.wearerShielded,fields:[l(za.atk_.tag)]}}]},ie="CannonRotor",[Ba,zy]=h("wengine",ie),ng=b.wengine[ie],og=f(ie,"icon"),ag=Qn[ie],ig=g[ie],sg={title:Ba("phase"),img:og,documents:[{type:"text",text:o(m,{wKey:ie,children:e=>Ba(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(ig.passive_atk_.tag)]},{type:"fields",fields:[{title:"Additional DMG",fieldRef:ag.damage.tag},{title:"Cooldown",fieldValue:o(m,{wKey:ie,children:e=>ng.cooldown[e]})}]}]},ye="CinderCobalt",[Ea]=h("wengine",ye),Oa=b.wengine[ye],cg=f(ye,"icon"),lg=p[ye],rg=g[ye],dg={title:Ea("phase"),img:cg,documents:[{type:"text",text:o(m,{wKey:ye,children:e=>Ea(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:H("enterCombatOrSwitchIn"),metadata:lg.enteringCombatOrSwitchingIn,fields:[l(rg.enteringCombatOrSwitchingIn_atk_.tag),{title:H("duration"),fieldValue:Oa.duration},{title:H("cd"),fieldValue:Oa.cd}]}}]},xe="DeepSeaVisitor",[Pa,Va]=h("wengine",xe),qa=b.wengine[xe],hg=f(xe,"icon"),Aa=p[xe],Dn=g[xe],ug={title:Pa("phase"),img:hg,documents:[{type:"text",text:o(m,{wKey:xe,children:e=>Pa(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Dn.passive_ice_dmg_.tag)]},{type:"conditional",conditional:{label:Va("cond1"),metadata:Aa.basicHit,fields:[l(Dn.crit_.tag),{title:"Duration",fieldValue:qa.duration}]}},{type:"conditional",conditional:{label:Va("cond2"),metadata:Aa.iceDashAtkHit,fields:[l(Dn.extra_crit_.tag),{title:"Duration",fieldValue:qa.extra_duration}]}}]},be="DemaraBatteryMarkII",[Fa,gg]=h("wengine",be),pg=b.wengine[be],mg=f(be,"icon"),fg=p[be],La=g[be],$g={title:Fa("phase"),img:mg,documents:[{type:"text",text:o(m,{wKey:be,children:e=>Fa(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(La.passive_electric_dmg_.tag)]},{type:"conditional",conditional:{label:gg("cond"),metadata:fg.dodgeCounterOrAssistHit,fields:[l(La.enerRegen_.tag),{title:"Duration",fieldValue:pg.duration}]}}]},_e="DrillRigRedAxis",[ja,yg]=h("wengine",_e),Ha=b.wengine[_e],xg=f(_e,"icon"),bg=p[_e],Ka=g[_e],_g={title:ja("phase"),img:xg,documents:[{type:"text",text:o(m,{wKey:_e,children:e=>ja(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:yg("cond"),metadata:bg.exSpecialOrChainUsed,fields:[l(Ka.basic_eletric_dmg_.tag),l(Ka.dash_eletric_dmg_.tag),{title:"Duration",fieldValue:Ha.duration},{title:"Cooldown",fieldValue:Ha.cooldown}]}}]},bt="ElectroLipGloss",[Wa,wg]=h("wengine",bt),vg=f(bt,"icon"),kg=p[bt],Na=g[bt],Sg={title:Wa("phase"),img:vg,documents:[{type:"text",text:o(m,{wKey:bt,children:e=>Wa(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:wg("cond"),metadata:kg.anomalyOnEnemy,fields:[l(Na.atk_.tag),l(Na.common_dmg_.tag)]}}]},we="ElegantVanity",[Ga,Cg]=h("wengine",we),Dg=b.wengine[we],Mg=f(we,"icon"),Tg=p[we],Ig=g[we],Rg={title:Ga("phase"),img:Mg,documents:[{type:"text",text:o(m,{wKey:we,children:e=>Ga(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Cg("cond"),metadata:Tg.consumed25Energy,fields:[l(Ig.common_dmg_.tag),{title:"Duration",fieldValue:Dg.buffDuration}]}}]},ve="FlamemakerShaker",[Ua,Ja]=h("wengine",ve),Mn=b.wengine[ve],zg=f(ve,"icon"),Ya=p[ve],Tn=g[ve],Bg={title:Ua("phase"),img:zg,documents:[{type:"text",text:o(m,{wKey:ve,children:e=>Ua(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Ja("cond1"),metadata:Ya.offField,fields:[l(Tn.enerRegen.tag)]}},{type:"conditional",conditional:{label:Ja("cond2"),metadata:Ya.exSpecialAssistHits,fields:[l(Tn.common_dmg_.tag),{title:"Duration",fieldValue:Mn.duration},{title:"Cooldown",fieldValue:Mn.cooldown},l(Tn.anomProf.tag),{title:"Duration",fieldValue:Mn.anomProfDuration}]}}]},ke="FlightOfFancy",[Za,Eg]=h("wengine",ke),Qa=b.wengine[ke],Og=f(ke,"icon"),Pg=p[ke],Xa=g[ke],Vg={title:Za("phase"),img:Og,documents:[{type:"text",text:o(m,{wKey:ke,children:e=>Za(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Xa.anomBuildup_.tag)]},{type:"conditional",conditional:{label:Eg("cond"),metadata:Pg.etherDmg,fields:[l(Xa.etherDmg_anomProf.tag),{title:"Duration",fieldValue:Qa.duration},{title:"Cooldown",fieldValue:Qa.cd}]}}]},Se="FusionCompiler",[ei,qg]=h("wengine",Se),Ag=b.wengine[Se],Fg=f(Se,"icon"),Lg=p[Se],ti=g[Se],jg={title:ei("phase"),img:Fg,documents:[{type:"text",text:o(m,{wKey:Se,children:e=>ei(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(ti.passive_atk_.tag)]},{type:"conditional",conditional:{label:qg("cond"),metadata:Lg.specialUsed,fields:[l(ti.anomProf.tag),{title:"Duration",fieldValue:Ag.duration}]}}]},gn="GildedBlossom",[ni,By]=h("wengine",gn),Hg=f(gn,"icon"),oi=g[gn],Kg={title:ni("phase"),img:Hg,documents:[{type:"text",text:o(m,{wKey:gn,children:e=>ni(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(oi.passive_atk_.tag),l(oi.passive_exSpecial_dmg_.tag)]}]},Ce="HailstormShrine",[ai,Wg]=h("wengine",Ce),Ng=b.wengine[Ce],Gg=f(Ce,"icon"),Ug=p[Ce],ii=g[Ce],Jg={title:ai("phase"),img:Gg,documents:[{type:"text",text:o(m,{wKey:Ce,children:e=>ai(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(ii.passive_crit_dmg_.tag)]},{type:"conditional",conditional:{label:Wg("cond"),metadata:Ug.exSpecialOrAnomaly,fields:[l(ii.ice_dmg_.tag),{title:"Duration",fieldValue:Ng.duration}]}}]},De="HeartstringNocturne",[si,Yg]=h("wengine",De),Zg=b.wengine[De],Qg=f(De,"icon"),Xg=p[De],In=g[De],ep={title:si("phase"),img:Qg,documents:[{type:"text",text:o(m,{wKey:De,children:e=>si(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(In.passive_crit_dmg_.tag)]},{type:"conditional",conditional:{label:Yg("cond"),metadata:Xg.heartstring,fields:[l(In.chain_resIgn_fire_.tag),l(In.ult_resIgn_fire_.tag),{title:"Duration",fieldValue:Zg.duration}]}}]},Me="HellfireGears",[ci,li]=h("wengine",Me),tp=b.wengine[Me],np=f(Me,"icon"),ri=p[Me],di=g[Me],op={title:ci("phase"),img:np,documents:[{type:"text",text:o(m,{wKey:Me,children:e=>ci(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:li("cond1"),metadata:ri.offField,fields:[l(di.enerRegen.tag)]}},{type:"conditional",conditional:{label:li("cond1"),metadata:ri.exSpecialUsed,fields:[l(di.impact_.tag),{title:"Duration",fieldValue:tp.duration}]}}]},Te="Housekeeper",[hi,ui]=h("wengine",Te),ap=b.wengine[Te],ip=f(Te,"icon"),gi=p[Te],pi=g[Te],sp={title:hi("phase"),img:ip,documents:[{type:"text",text:o(m,{wKey:Te,children:e=>hi(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:ui("cond1"),metadata:gi.offField,fields:[l(pi.enerRegen.tag)]}},{type:"conditional",conditional:{label:ui("cond2"),metadata:gi.exSpecialHits,fields:[l(pi.physical_dmg_.tag),{title:"Duration",fieldValue:ap.duration}]}}]},Ie="IceJadeTeapot",[mi,cp]=h("wengine",Ie),fi=b.wengine[Ie],lp=f(Ie,"icon"),rp=p[Ie],$i=g[Ie],dp={title:mi("phase"),img:lp,documents:[{type:"text",text:o(m,{wKey:Ie,children:e=>mi(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:cp("cond"),metadata:rp.teariffic,fields:[l($i.impact_.tag),{title:"Duration",fieldValue:fi.duration},l($i.common_dmg_.tag),{title:"Duration",fieldValue:fi.teamBuffDuration}]}}]},Re="IdentityBase",[yi,hp]=h("wengine",Re),up=b.wengine[Re],gp=f(Re,"icon"),pp=p[Re],mp=g[Re],fp={title:yi("phase"),img:gp,documents:[{type:"text",text:o(m,{wKey:Re,children:e=>yi(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:hp("cond"),metadata:pp.equipperAttacked,fields:[l(mp.def_.tag),{title:"Duration",fieldValue:up.duration}]}}]},no="IdentityInflection",[xi,Ey]=h("wengine",no),$p=f(no,"icon"),yp={title:xi("phase"),img:$p,documents:[{type:"text",text:o(m,{wKey:no,children:e=>xi(`phaseDescs.${e-1}`)})}]},ze="KaboomTheCannon",[bi,xp]=h("wengine",ze),bp=b.wengine[ze],_p=f(ze,"icon"),wp=p[ze],vp=g[ze],kp={title:bi("phase"),img:_p,documents:[{type:"text",text:o(m,{wKey:ze,children:e=>bi(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:xp("cond"),metadata:wp.allyHitsEnemy,fields:[l(vp.atk_.tag),{title:"Duration",fieldValue:bp.duration}]}}]},Be="LunarDecrescent",[_i,Sp]=h("wengine",Be),Cp=b.wengine[Be],Dp=f(Be,"icon"),Mp=p[Be],Tp=g[Be],Ip={title:_i("phase"),img:Dp,documents:[{type:"text",text:o(m,{wKey:Be,children:e=>_i(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Sp("cond"),metadata:Mp.chainOrUltUsed,fields:[l(Tp.common_dmg_.tag),{title:"Duration",fieldValue:Cp.duration}]}}]},oo="LunarNoviluna",[wi,Oy]=h("wengine",oo),Rp=f(oo,"icon"),zp={title:wi("phase"),img:Rp,documents:[{type:"text",text:o(m,{wKey:oo,children:e=>wi(`phaseDescs.${e-1}`)})}]},pn="LunarPleniluna",[vi,Py]=h("wengine",pn),Bp=f(pn,"icon"),Rn=g[pn],Ep={title:vi("phase"),img:Bp,documents:[{type:"text",text:o(m,{wKey:pn,children:e=>vi(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Rn.basic_dmg_.tag),l(Rn.dash_dmg_.tag),l(Rn.dodgeCounter_dmg_.tag)]}]},Ee="MagneticStormAlpha",[ki,Op]=h("wengine",Ee),Si=b.wengine[Ee],Pp=f(Ee,"icon"),Vp=p[Ee],qp=g[Ee],Ap={title:ki("phase"),img:Pp,documents:[{type:"text",text:o(m,{wKey:Ee,children:e=>ki(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Op("cond"),metadata:Vp.anomalyBuildupIncreased,fields:[l(qp.anomMas.tag),{title:"Duration",fieldValue:Si.duration},{title:"Cooldown",fieldValue:Si.cooldown}]}}]},Oe="MagneticStormBravo",[Ci,Fp]=h("wengine",Oe),Di=b.wengine[Oe],Lp=f(Oe,"icon"),jp=p[Oe],Hp=g[Oe],Kp={title:Ci("phase"),img:Lp,documents:[{type:"text",text:o(m,{wKey:Oe,children:e=>Ci(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Fp("cond"),metadata:jp.anomalyBuildupIncreased,fields:[l(Hp.anomProf.tag),{title:"Duration",fieldValue:Di.duration},{title:"Cooldown",fieldValue:Di.cooldown}]}}]},ao="MagneticStormCharlie",[Mi,Vy]=h("wengine",ao),Wp=f(ao,"icon"),Np={title:Mi("phase"),img:Wp,documents:[{type:"text",text:o(m,{wKey:ao,children:e=>Mi(`phaseDescs.${e-1}`)})}]},Pe="MarcatoDesire",[Ti,Ii]=h("wengine",Pe),Gp=b.wengine[Pe],Up=f(Pe,"icon"),Ri=p[Pe],Jp=g[Pe],Yp={title:Ti("phase"),img:Up,documents:[{type:"text",text:o(m,{wKey:Pe,children:e=>Ti(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Ii("cond1"),metadata:Ri.exSpecialOrChainHitsEnemy,fields:[l(Jp.atk_.tag),{title:"Duration",fieldValue:Gp.duration}]}},{type:"conditional",conditional:{label:Ii("cond2"),metadata:Ri.attributeAnomalyInflicted}}]},Ve="MyriadEclipse",[zi,Zp]=h("wengine",Ve),Qp=b.wengine[Ve],Xp=f(Ve,"icon"),em=p[Ve],Bi=g[Ve],tm={title:zi("phase"),img:Xp,documents:[{type:"text",text:o(m,{wKey:Ve,children:e=>zi(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Bi.crit_dmg_.tag)]},{type:"conditional",conditional:{label:Zp("cond"),metadata:em.deathSentence,fields:[l(Bi.deathSentence_defIgn_.tag),{title:"Duration",fieldValue:Qp.duration}]}}]},qe="OriginalTransmorpher",[Ei,nm]=h("wengine",qe),om=b.wengine[qe],am=f(qe,"icon"),im=p[qe],Oi=g[qe],sm={title:Ei("phase"),img:am,documents:[{type:"text",text:o(m,{wKey:qe,children:e=>Ei(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Oi.passive_hp_.tag)]},{type:"conditional",conditional:{label:nm("cond"),metadata:im.equipperHit,fields:[l(Oi.impact_.tag),{title:"Duration",fieldValue:om.duration}]}}]},_t="PeacekeeperSpecialized",[Pi,cm]=h("wengine",_t),lm=f(_t,"icon"),rm=p[_t],zn=g[_t],dm={title:Pi("phase"),img:lm,documents:[{type:"text",text:o(m,{wKey:_t,children:e=>Pi(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:cm("cond"),metadata:rm.shielded,fields:[l(zn.enerRegen.tag)]}},{type:"fields",fields:[l(zn.passive_exSpecial_anomBuildup_.tag),l(zn.passive_assist_anomBuildup_.tag)]}]},wt="PreciousFossilizedCore",[Vi,qi]=h("wengine",wt),hm=f(wt,"icon"),Ai=p[wt],um=g[wt],gm={title:Vi("phase"),img:hm,documents:[{type:"text",text:o(m,{wKey:wt,children:e=>Vi(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:qi("cond1"),metadata:Ai.enemyHpGE50,fields:[l(um.daze_.tag)]}},{type:"conditional",conditional:{label:qi("cond2"),metadata:Ai.enemyHpGE75}}]},Ae="PuzzleSphere",[Fi]=h("wengine",Ae),Li=b.wengine[Ae],pm=f(Ae,"icon"),ji=p[Ae],Hi=g[Ae],mm={title:Fi("phase"),img:pm,documents:[{type:"text",text:o(m,{wKey:Ae,children:e=>Fi(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:H("uponLaunch.1",{val1:"$t(skills.exSpecial)"}),metadata:ji.launchingExSpecial,fields:[l(Hi.launchingExSpecial_crit_dmg_.tag),{title:H("duration"),fieldValue:Li.duration}]}},{type:"conditional",conditional:{label:H("targetHpLe",{val:Li.hpThresh*100}),metadata:ji.targetHpBelow50,fields:[l(Hi.targetHpBelow50_exSpecial_dmg_.tag)]}}]},Fe="QingmingBirdcage",[Ki,fm]=h("wengine",Fe),$m=b.wengine[Fe],ym=f(Fe,"icon"),xm=p[Fe],Rt=g[Fe],bm={title:Ki("phase"),img:ym,documents:[{type:"text",text:o(m,{wKey:Fe,children:e=>Ki(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Rt.crit_.tag)]},{type:"conditional",conditional:{metadata:xm.qingmingCompanionStacks,label:fm("cond"),fields:[l(Rt.qingmingCompanionStacks_ether_dmg_.tag),l(Rt.qingmingCompanionStacks_ult_ether_sheer_dmg_.tag),l(Rt.qingmingCompanionStacks_exSpecial_ether_sheer_dmg_.tag),{title:H("cd"),fieldValue:$m.duration}]}}]},Le="RadiowaveJourney",[Wi]=h("wengine",Le),_m=b.wengine[Le],wm=f(Le,"icon"),vm=p[Le],km=g[Le],Sm={title:Wi("phase"),img:wm,documents:[{type:"text",text:o(m,{wKey:Le,children:e=>Wi(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{metadata:vm.launchingChainOrUlt,label:H("uponLaunch.2",{val1:"$t(skills.chain)",val2:"$t(skills.ult)"}),fields:[l(km.launchingChainOrUlt_sheerForce.tag),{title:H("duration"),fieldValue:_m.duration}]}}]},je="RainforestGourmet",[Ni,Cm]=h("wengine",je),Dm=b.wengine[je],Mm=f(je,"icon"),Tm=p[je],Im=g[je],Rm={title:Ni("phase"),img:Mm,documents:[{type:"text",text:o(m,{wKey:je,children:e=>Ni(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Cm("cond"),metadata:Tm.energyConsumed,fields:[l(Im.atk_.tag),{title:"Duration",fieldValue:Dm.duration}]}}]},io="ReelProjector",[Gi]=h("wengine",io),zm=f(io,"icon"),Bm={title:Gi("phase"),img:zm,documents:[{type:"text",text:o(m,{wKey:io,children:e=>Gi(`phaseDescs.${e-1}`)})}]},He="ReverbMarkI",[Ui,Em]=h("wengine",He),Om=b.wengine[He],Pm=f(He,"icon"),Vm=p[He],qm=g[He],Am={title:Ui("phase"),img:Pm,documents:[{type:"text",text:o(m,{wKey:He,children:e=>Ui(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Em("cond"),metadata:Vm.exSpecialUsed,fields:[l(qm.impact_.tag),{title:"Duration",fieldValue:Om.duration}]}}]},Ke="ReverbMarkII",[Ji,Fm]=h("wengine",Ke),Lm=b.wengine[Ke],jm=f(Ke,"icon"),Hm=p[Ke],Yi=g[Ke],Km={title:Ji("phase"),img:jm,documents:[{type:"text",text:o(m,{wKey:Ke,children:e=>Ji(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Fm("cond"),metadata:Hm.exSpecialOrChainUsed,fields:[l(Yi.anomMas.tag),l(Yi.anomProf.tag),{title:"Duration",fieldValue:Lm.duration}]}}]},We="ReverbMarkIII",[Zi,Wm]=h("wengine",We),Nm=b.wengine[We],Gm=f(We,"icon"),Um=p[We],Jm=g[We],Ym={title:Zi("phase"),img:Gm,documents:[{type:"text",text:o(m,{wKey:We,children:e=>Zi(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Wm("cond"),metadata:Um.chainOrUltUsed,fields:[l(Jm.atk_.tag),{title:"Duration",fieldValue:Nm.duration}]}}]},vt="RiotSuppressorMarkVI",[Qi,Zm]=h("wengine",vt),Qm=f(vt,"icon"),Xm=p[vt],Xi=g[vt],ef={title:Qi("phase"),img:Qm,documents:[{type:"text",text:o(m,{wKey:vt,children:e=>Qi(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Xi.passive_crit_.tag)]},{type:"conditional",conditional:{label:Zm("cond"),metadata:Xm.charge,fields:[l(Xi.basic_ether_dmg_.tag)]}}]},Ne="RoaringFurnace",[es,tf]=h("wengine",Ne),nf=b.wengine[Ne],of=f(Ne,"icon"),af=p[Ne],zt=g[Ne],sf={title:es("phase"),img:of,documents:[{type:"text",text:o(m,{wKey:Ne,children:e=>es(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(zt.exSpecial_dazeInc_.tag),l(zt.chain_dazeInc_.tag),l(zt.ult_dazeInc_.tag)]},{type:"conditional",conditional:{metadata:af.chainOrUlt,label:tf("cond"),fields:[l(zt.team_chainOrUlt_fire_dmg_.tag),{title:H("duration"),fieldValue:nf.duration}]}}]},Ge="RoaringRide",[ts,Bn]=h("wengine",Ge),En=b.wengine[Ge],cf=f(Ge,"icon"),On=p[Ge],Pn=g[Ge],lf={title:ts("phase"),img:cf,documents:[{type:"text",text:o(m,{wKey:Ge,children:e=>ts(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Bn("cond_atk_"),metadata:On.atk_,fields:[l(Pn.atk_.tag),{title:"Duration",fieldValue:En.duration}]}},{type:"conditional",conditional:{label:Bn("cond_anomProf"),metadata:On.anomProf,fields:[l(Pn.anomProf.tag),{title:"Duration",fieldValue:En.duration}]}},{type:"conditional",conditional:{label:Bn("cond_anomBuildup_"),metadata:On.anomBuildup_,fields:[l(Pn.anomBuildup_.tag),{title:"Duration",fieldValue:En.duration}]}}]},Ue="SeveredInnocence",[ns,rf]=h("wengine",Ue),df=b.wengine[Ue],hf=f(Ue,"icon"),uf=p[Ue],Vn=g[Ue],gf={title:ns("phase"),img:hf,documents:[{type:"text",text:o(m,{wKey:Ue,children:e=>ns(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Vn.passive_crit_dmg_.tag)]},{type:"conditional",conditional:{label:rf("cond"),metadata:uf.basicSpecialAftershockHit,fields:[l(Vn.crit_dmg_.tag),l(Vn.electric_dmg_.tag),{title:"Duration",fieldValue:df.duration}]}}]},Je="SharpenedStinger",[os,pf]=h("wengine",Je),mf=b.wengine[Je],ff=f(Je,"icon"),$f=p[Je],as=g[Je],yf={title:os("phase"),img:ff,documents:[{type:"text",text:o(m,{wKey:Je,children:e=>os(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:pf("cond"),metadata:$f.predatoryInstinct,fields:[l(as.physical_dmg_.tag),{title:"Duration",fieldValue:mf.duration}]}},{type:"fields",fields:[l(as.anomBuildup_.tag)]}]},kt="SixShooter",[is,xf]=h("wengine",kt),bf=f(kt,"icon"),_f=p[kt],wf=g[kt],vf={title:is("phase"),img:bf,documents:[{type:"text",text:o(m,{wKey:kt,children:e=>is(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:xf("cond"),metadata:_f.charge,fields:[l(wf.exSpecial_daze_.tag)]}}]},so="SliceOfTime",[ss,qy]=h("wengine",so),kf=f(so,"icon"),Sf={title:ss("phase"),img:kf,documents:[{type:"text",text:o(m,{wKey:so,children:e=>ss(`phaseDescs.${e-1}`)})}]},Ye="SpectralGaze",[cs,ls]=h("wengine",Ye),rs=b.wengine[Ye],Cf=f(Ye,"icon"),ds=p[Ye],hs=g[Ye],Df={title:cs("phase"),img:Cf,documents:[{type:"text",text:o(m,{wKey:Ye,children:e=>cs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:ls("cond1"),metadata:ds.hit_aftershock_electric,fields:[l(hs.cond_defRed_.tag),{title:"Duration",fieldValue:rs.duration1}]}},{type:"conditional",conditional:{label:ls("cond2"),metadata:ds.spiritLock,fields:[l(hs.cond_impact_.tag),{title:"Duration",fieldValue:rs.duration2}]}}]},Ze="SpringEmbrace",[us,Mf]=h("wengine",Ze),Tf=b.wengine[Ze],If=f(Ze,"icon"),Rf=p[Ze],gs=g[Ze],zf={title:us("phase"),img:If,documents:[{type:"text",text:o(m,{wKey:Ze,children:e=>us(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(gs.passive_dmg_red_.tag)]},{type:"conditional",conditional:{label:Mf("cond"),metadata:Rf.when_attacked,fields:[l(gs.cond_enerRegen_.tag),{title:"Duration",fieldValue:Tf.duration}]}}]},Qe="StarlightEngine",[ps,Bf]=h("wengine",Qe),Ef=b.wengine[Qe],Of=f(Qe,"icon"),Pf=p[Qe],Vf=g[Qe],qf={title:ps("phase"),img:Of,documents:[{type:"text",text:o(m,{wKey:Qe,children:e=>ps(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Bf("cond"),metadata:Pf.dodgecounter_quickassist,fields:[l(Vf.cond_dmg_.tag),{title:"Duration",fieldValue:Ef.duration}]}}]},Xe="StarlightEngineReplica",[ms,Af]=h("wengine",Xe),Ff=b.wengine[Xe],Lf=f(Xe,"icon"),jf=p[Xe],Hf=g[Xe],Kf={title:ms("phase"),img:Lf,documents:[{type:"text",text:o(m,{wKey:Xe,children:e=>ms(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Af("cond"),metadata:jf.hit_away,fields:[l(Hf.cond_dmg_.tag),{title:"Duration",fieldValue:Ff.duration}]}}]},et="SteamOven",[fs,Wf]=h("wengine",et),Nf=b.wengine[et],Gf=f(et,"icon"),Uf=p[et],Jf=g[et],Yf={title:fs("phase"),img:Gf,documents:[{type:"text",text:o(m,{wKey:et,children:e=>fs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Wf("cond"),metadata:Uf.stacks,fields:[l(Jf.cond_impact_.tag),{title:"Duration",fieldValue:Nf.duration}]}}]},St="SteelCushion",[$s,Zf]=h("wengine",St),Qf=f(St,"icon"),Xf=p[St],ys=g[St],e$={title:$s("phase"),img:Qf,documents:[{type:"text",text:o(m,{wKey:St,children:e=>$s(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(ys.passive_physical_dmg_.tag)]},{type:"conditional",conditional:{label:Zf("cond"),metadata:Xf.hit_behind,fields:[l(ys.cond_dmg_.tag)]}}]},Ct="StreetSuperstar",[xs,t$]=h("wengine",Ct),n$=f(Ct,"icon"),o$=p[Ct],a$=g[Ct],i$={title:xs("phase"),img:n$,documents:[{type:"text",text:o(m,{wKey:Ct,children:e=>xs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:t$("cond"),metadata:o$.charge,fields:[l(a$.cond_ult_dmg_.tag)]}}]},tt="TheBrimstone",[bs,s$]=h("wengine",tt),c$=b.wengine[tt],l$=f(tt,"icon"),r$=p[tt],d$=g[tt],h$={title:bs("phase"),img:l$,documents:[{type:"text",text:o(m,{wKey:tt,children:e=>bs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:s$("cond"),metadata:r$.hit_basic_dash_dodge,fields:[l(d$.cond_atk_.tag),{title:"Duration",fieldValue:c$.duration}]}}]},nt="TheRestrained",[_s,u$]=h("wengine",nt),g$=b.wengine[nt],p$=f(nt,"icon"),m$=p[nt],ws=g[nt],f$={title:_s("phase"),img:p$,documents:[{type:"text",text:o(m,{wKey:nt,children:e=>_s(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:u$("cond"),metadata:m$.dmg_daze_,fields:[l(ws.basic_dmg_.tag),l(ws.basic_daze_.tag),{title:"Duration",fieldValue:g$.duration}]}}]},ot="TheVault",[vs,$$]=h("wengine",ot),y$=b.wengine[ot],x$=f(ot,"icon"),b$=p[ot],_$=g[ot],w$={title:vs("phase"),img:x$,documents:[{type:"text",text:o(m,{wKey:ot,children:e=>vs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:$$("cond"),metadata:b$.ether_hit,fields:[l(_$.cond_dmg_.tag),{title:"Duration",fieldValue:y$.duration}]}}]},at="Timeweaver",[ks,v$]=h("wengine",at),k$=b.wengine[at],S$=f(at,"icon"),C$=p[at],qn=g[at],D$={title:ks("phase"),img:S$,documents:[{type:"text",text:o(m,{wKey:at,children:e=>ks(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(qn.passive_electric_anomBuildup_.tag),l(qn.passive_disorder_dmg_.tag)]},{type:"conditional",conditional:{label:v$("cond"),metadata:C$.hit_anomaly,fields:[l(qn.cond_anomProf.tag),{title:"Duration",fieldValue:k$.duration}]}}]},mn="TremorTrigramVessel",[Ss]=h("wengine",mn),M$=f(mn,"icon"),Cs=g[mn],T$={title:Ss("phase"),img:M$,documents:[{type:"text",text:o(m,{wKey:mn,children:e=>Ss(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Cs.exSpecial_dmg_.tag),l(Cs.ult_dmg_.tag)]}]},it="TusksOfFury",[Ds,I$]=h("wengine",it),R$=b.wengine[it],z$=f(it,"icon"),B$=p[it],An=g[it],E$={title:Ds("phase"),img:z$,documents:[{type:"text",text:o(m,{wKey:it,children:e=>Ds(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(An.passive_shield_.tag)]},{type:"conditional",conditional:{label:I$("cond"),metadata:B$.interrupt_perfdodge,fields:[l(An.cond_dmg_.tag),l(An.daze_.tag),{title:"Duration",fieldValue:R$.duration}]}}]},st="UnfetteredGameBall",[Ms,O$]=h("wengine",st),P$=b.wengine[st],V$=f(st,"icon"),q$=p[st],A$=g[st],F$={title:Ms("phase"),img:V$,documents:[{type:"text",text:o(m,{wKey:st,children:e=>Ms(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:O$("cond"),metadata:q$.anomaly_counter,fields:[l(A$.cond_crit_.tag),{title:"Duration",fieldValue:P$.duration}]}}]},fn="VortexArrow",[Ts,Ay]=h("wengine",fn),L$=f(fn,"icon"),j$=g[fn],H$={title:Ts("phase"),img:L$,documents:[{type:"text",text:o(m,{wKey:fn,children:e=>Ts(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(j$.passive_daze_.tag)]}]},ct="VortexHatchet",[Is,K$]=h("wengine",ct),Rs=b.wengine[ct],W$=f(ct,"icon"),N$=p[ct],G$=g[ct],U$={title:Is("phase"),img:W$,documents:[{type:"text",text:o(m,{wKey:ct,children:e=>Is(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:K$("cond"),metadata:N$.entering,fields:[l(G$.cond_impact_.tag),{title:"Duration",fieldValue:Rs.duration},{title:"Cooldown",fieldValue:Rs.cooldown}]}}]},$n="VortexRevolver",[zs,Fy]=h("wengine",$n),J$=f($n,"icon"),Y$=g[$n],Z$={title:zs("phase"),img:J$,documents:[{type:"text",text:o(m,{wKey:$n,children:e=>zs(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Y$.passive_exSpecial_daze_.tag)]}]},lt="WeepingCradle",[Bs,Es]=h("wengine",lt),Q$=b.wengine[lt],X$=f(lt,"icon"),Os=p[lt],ey=g[lt],ty={title:Bs("phase"),img:X$,documents:[{type:"text",text:o(m,{wKey:lt,children:e=>Bs(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:Es("cond_atk"),metadata:Os.attack}},{type:"conditional",conditional:{label:Es("cond_stacks"),metadata:Os.stacks,fields:[l(ey.cond_dmg_.tag),{title:"Duration",fieldValue:Q$.duration}]}}]},Dt="WeepingGemini",[Ps,ny]=h("wengine",Dt),oy=f(Dt,"icon"),ay=p[Dt],iy=g[Dt],sy={title:Ps("phase"),img:oy,documents:[{type:"text",text:o(m,{wKey:Dt,children:e=>Ps(`phaseDescs.${e-1}`)})},{type:"conditional",conditional:{label:ny("cond"),metadata:ay.anomaly_stack,fields:[l(iy.anomProf.tag)]}}]},rt="ZanshinHerbCase",[Vs,cy]=h("wengine",rt),ly=b.wengine[rt],ry=f(rt,"icon"),dy=p[rt],Fn=g[rt],hy={title:Vs("phase"),img:ry,documents:[{type:"text",text:o(m,{wKey:rt,children:e=>Vs(`phaseDescs.${e-1}`)})},{type:"fields",fields:[l(Fn.passive_crit_.tag),l(Fn.passive_electric_dmg_.tag)]},{type:"conditional",conditional:{label:cy("cond"),metadata:dy.apply_anom_stun,fields:[l(Fn.cond_crit_.tag),{title:"Duration",fieldValue:ly.duration}]}}]},uy={BashfulDemon:Au,BigCylinder:Ku,BlazingLaurel:Nu,BoxCutter:Zu,BunnyBand:tg,CannonRotor:sg,CinderCobalt:dg,DeepSeaVisitor:ug,DemaraBatteryMarkII:$g,DrillRigRedAxis:_g,ElectroLipGloss:Sg,ElegantVanity:Rg,FlamemakerShaker:Bg,FlightOfFancy:Vg,FusionCompiler:jg,GildedBlossom:Kg,HailstormShrine:Jg,HeartstringNocturne:ep,HellfireGears:op,Housekeeper:sp,IceJadeTeapot:dp,IdentityBase:fp,IdentityInflection:yp,KaboomTheCannon:kp,LunarDecrescent:Ip,LunarNoviluna:zp,LunarPleniluna:Ep,MagneticStormAlpha:Ap,MagneticStormBravo:Kp,MagneticStormCharlie:Np,MarcatoDesire:Yp,MyriadEclipse:tm,OriginalTransmorpher:sm,PeacekeeperSpecialized:dm,PreciousFossilizedCore:gm,PuzzleSphere:mm,QingmingBirdcage:bm,RadiowaveJourney:Sm,RainforestGourmet:Rm,ReelProjector:Bm,ReverbMarkI:Am,ReverbMarkII:Km,ReverbMarkIII:Ym,RiotSuppressorMarkVI:ef,RoaringFurnace:sf,RoaringRide:lf,SeveredInnocence:gf,SharpenedStinger:yf,SixShooter:vf,SliceOfTime:Sf,SpectralGaze:Df,SpringEmbrace:zf,StarlightEngine:qf,StarlightEngineReplica:Kf,SteamOven:Yf,SteelCushion:e$,StreetSuperstar:i$,TheBrimstone:h$,TheRestrained:f$,TheVault:w$,Timeweaver:D$,TremorTrigramVessel:T$,TusksOfFury:E$,UnfetteredGameBall:F$,VortexArrow:H$,VortexHatchet:U$,VortexRevolver:Z$,WeepingCradle:ty,WeepingGemini:sy,ZanshinHerbCase:hy};function gy(e){const{attribute:t}=e;if(t)return t}function py(e){const{q:t}=e;return["standardDmg","anomalyDmg"].includes(t)}function my(e){const{damageType1:t,damageType2:n}=e,a=[];return py(e)?(t&&a.push(t),n&&a.push(n),a):[]}const Lt={basic:"Basic",dash:"Dash",dodgeCounter:"Dodge Counter",special:"Special",exSpecial:"EX Special",chain:"Chain",ult:"Ultimate",quickAssist:"Quick Assist",defensiveAssist:"Defensive Assist",evasiveAssist:"Evasive Assist",assistFollowUp:"Assist Follow Up",anomaly:"Anomaly",disorder:"Disorder",aftershock:"Aftershock",elemental:"Elemental",sheer:"Sheer"},Cc=["crit_","crit_dmg_","impact","pen","pen_","enerRegen","anomProf","anomMas"].map(e=>{if(Gl.includes(e)){const t={...q.final.dmg_.tag,attribute:e.slice(0,-5)};return{title:o(Bt,{statKey:e}),fieldRef:t}}return e==="crit_"?{fieldRef:q.common.cappedCrit_.tag,title:o(Bt,{statKey:e})}:{fieldRef:q.final[e].tag,title:o(Bt,{statKey:e})}});Cc.push(...re.map(e=>({fieldRef:{et:"own",qt:"formula",q:"standardDmg",attribute:e,name:"standardDmgInst"},title:x(de,{color:e,children:[ne[e]," Damage"]})})),...re.map(e=>({fieldRef:{et:"own",qt:"formula",q:"sheerDmg",attribute:e,name:"sheerDmgInst"},title:x(de,{color:e,children:[ne[e]," Damage"]})})),...re.flatMap(e=>Ul.map(t=>({fieldRef:{et:"own",qt:"formula",q:"standardDmg",attribute:e,damageType1:t,name:"standardDmgInst"},title:x(de,{color:e,children:[ne[e]," ",Lt[t]," Damage"]})}))),...re.map(e=>({fieldRef:{et:"own",qt:"formula",q:"anomalyDmg",attribute:e,damageType1:"anomaly",name:"anomalyDmgInst"},title:x(de,{color:e,children:[ne[e]," Anomaly Damage"]})})),...re.map(e=>({fieldRef:{et:"own",qt:"formula",q:"anomBuildup",attribute:e,name:"anomalyBuildupInst"},title:x(de,{color:e,children:[ne[e]," Anomaly Buildup"]})})),{fieldRef:{et:"own",qt:"formula",q:"dazeBuildup",name:"dazeInst"},title:"Daze Buildup"});const co=[];Object.values(Ch).forEach(e=>Object.values(e).forEach(t=>t.documents.forEach(n=>n.type==="fields"&&n.fields.forEach(a=>qr(a)&&co.push({tag:a.fieldRef,value:a})))));Cc.forEach(e=>{co.push({tag:e.fieldRef,value:e})});const fy=kr(co),jn=new Map;function Dc(e,t){if(jn.get(e))throw new Error(`Duplicate conditional ${e}`);jn.set(e,t)}Object.values(uy).forEach(({documents:e})=>{e.forEach(t=>{t.type==="conditional"&&Dc(`${t.conditional.metadata.sheet}:${t.conditional.metadata.name}`,t.conditional)})});Object.values(Eu).forEach(e=>Object.values(e).forEach(({documents:t})=>{t.forEach(n=>{n.type==="conditional"&&Dc(`${n.conditional.metadata.sheet}:${n.conditional.metadata.name}`,n.conditional)})}));export{Cr as A,Cy as C,_o as D,vy as F,Nt as T,pt as a,fc as b,ur as c,rr as d,Eu as e,Lt as f,Jr as g,Ch as h,Wt as i,ed as j,Sy as k,ky as l,Dr as m,Kt as n,Sr as o,wy as p,Yr as q,zr as r,Rr as s,vc as t,pr as u,uy as w};
