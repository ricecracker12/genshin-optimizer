import{c9 as ce,r as m,ca as ue,cb as de,j as pe,cc as N,d as me,cd as fe,ce as P,cf as _,cg as he,ch as ge,ci as ve,cj as xe,b8 as Ce,ck as be,cl as M,s as ke,u as Be,W as D,ak as ye,a6 as b,p as s,aK as je,cm as Se,q as c,a7 as _e,at as De,z as V,N as T,B as k,T as p,cn as Ee,t as Ie,D as F,w as z,aa as Pe,E as Me,i as G,k as H,l as U,m as W,A as Te,a2 as Oe,co as Ae,ae as g,y as O}from"./index-DRpiuufh.js";import{M as J,D as Q,c as h,C as X,d as Y,a as Re,E as we,b as Le,S as qe}from"./StatDisplay-CBWFLMPN.js";import{C as $e,c as Ne,b as B,P as Ve,a as A}from"./UploadCard-BPtd51OZ.js";import{C as Fe}from"./CardActionArea-BYnxqk-T.js";import{C as Z,G as d}from"./ReadOnlyTextArea-BvNZwWuX.js";const ze=["component","direction","spacing","divider","children","className","useFlexGap"],Ge=be(),He=ce("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,e)=>e.root});function Ue(t){return fe({props:t,name:"MuiStack",defaultTheme:Ge})}function We(t,e){const o=m.Children.toArray(t).filter(Boolean);return o.reduce((n,r,a)=>(n.push(r),a<o.length-1&&n.push(m.cloneElement(e,{key:`separator-${a}`})),n),[])}const Je=t=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[t],Qe=({ownerState:t,theme:e})=>{let o=N({display:"flex",flexDirection:"column"},P({theme:e},_({values:t.direction,breakpoints:e.breakpoints.values}),n=>({flexDirection:n})));if(t.spacing){const n=he(e),r=Object.keys(e.breakpoints.values).reduce((l,u)=>((typeof t.spacing=="object"&&t.spacing[u]!=null||typeof t.direction=="object"&&t.direction[u]!=null)&&(l[u]=!0),l),{}),a=_({values:t.direction,base:r}),i=_({values:t.spacing,base:r});typeof a=="object"&&Object.keys(a).forEach((l,u,y)=>{if(!a[l]){const S=u>0?a[y[u-1]]:"column";a[l]=S}}),o=ge(o,P({theme:e},i,(l,u)=>t.useFlexGap?{gap:M(n,l)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${Je(u?a[u]:t.direction)}`]:M(n,l)}}))}return o=ve(e.breakpoints,o),o};function Xe(t={}){const{createStyledComponent:e=He,useThemeProps:o=Ue,componentName:n="MuiStack"}=t,r=()=>xe({root:["root"]},l=>Ce(n,l),{}),a=e(Qe);return m.forwardRef(function(l,u){const y=o(l),j=ue(y),{component:S="div",direction:se="column",spacing:ne=0,divider:E,children:I,className:oe,useFlexGap:re=!1}=j,ae=de(j,ze),ie={direction:se,spacing:ne,useFlexGap:re},le=r();return pe.jsx(a,N({as:S,ownerState:ie,ref:u,className:me(le.root,oe)},ae,{children:E?We(I,E):I}))})}const K=Xe({createStyledComponent:ke("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,e)=>e.root}),useThemeProps:t=>Be({props:t,name:"MuiStack"})});function ee(t){const{database:e}=D();return ye(e.chars,t)}function te(t){return b.char[t]}function pt(t,e,o,n=0){switch(e){case"eidolon":return Object.fromEntries(b.char[t].rankMap[o].params.map((r,a)=>[a+1,r]));case"basic":case"skill":case"ult":case"talent":case"technique":return Object.fromEntries(b.char[t].skillTree[e].skillParamList[n].map((r,a)=>[a+1,r[o]]));case"bonusAbility1":case"bonusAbility2":case"bonusAbility3":return Object.fromEntries(b.char[t].skillTree[e].skillParamList[n][o].map((r,a)=>[a+1,r]))}}function Ye(t,e){const n=Ze(t,e).levels;if(!(n!=null&&n.length))throw new Error(`No stat boost levels found for character ${t}`);const r=Object.entries(n[0].stats??{});if(!r.length)throw new Error(`No stats found in stat boost for character ${t}`);const[a,i]=r[0];return{statKey:a,value:i}}function Ze(t,e){const{skillTree:o}=te(t);return o[`statBoost${e}`]}function C({characterKey:t,abilityKey:e,dropDownButtonProps:o={}}){const n=ee(t),{database:r}=D(),a=e.charAt(0).toUpperCase()+e.slice(1);return s(Q,{title:`${a} Lv. ${(n==null?void 0:n[e])??1}`,disabled:!n,...o,children:!!t&&je(1,Se[e][(n==null?void 0:n.ascension)??0]).map(i=>c(J,{selected:(n==null?void 0:n[e])===i,disabled:(n==null?void 0:n[e])===i,onClick:()=>r.chars.set(t,{[e]:i}),children:[a," Lv. ",i]},`${e}_${i}`))})}function Ke(){const t=m.useContext($e),e=m.useContext(Ne);return m.useMemo(()=>t==null?void 0:t.withTag(e),[t,e])}const et=["hp","atk","def","spd","crit_","crit_dmg_","brEffect_","heal_","enerRegen_","eff_","eff_res_"];function mt({character:t,onClick:e,hideStats:o=!1}){const n=Ke()??_e(De(t,1));return s(K,{children:c(V,{children:[e?s(Fe,{onClick:e,children:s(R,{character:t})}):s(R,{character:t}),s(B,{}),!o&&s(Z,{children:et.map(r=>s(tt,{calc:n,statKey:r,characterKey:t.key},r))})]})})}function R({character:t}){const{key:e,eidolon:o,level:n,ascension:r}=t,a=Y(e),{damageType:i,path:f,rarity:l}=te(e);return c(k,{sx:{display:"flex"},children:[s(k,{component:T?T:"img",alt:"Character Icon",src:h(a,"icon"),sx:{maxHeight:"10em",width:"auto"}}),c(k,{sx:{px:2,pt:1},children:[s(p,{variant:"h5",children:s(X,{genderedKey:a})}),s(p,{children:s(Re,{stars:l,inline:!0})}),c(p,{children:["Lv.",Ee(n,r)," Eidolon: ",o]}),s(Ve,{pathKey:f}),s(Ie,{color:i,children:s(we,{ele:i})})]})]})}function tt({characterKey:t,calc:e,statKey:o}){return c(p,{sx:{display:"flex",alignItems:"center",gap:1,justifyContent:"space-between"},children:[s(Le,{statKey:o}),c("span",{children:[F(e.withTag({src:t,dst:t}).compute(Pe.final[o]).val,o).toFixed(Me(o)),z(o)]})]})}var v={},w;function st(){if(w)return v;w=1;var t=G();Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var e=t(H()),o=U(),n=(0,e.default)((0,o.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox");return v.default=n,v}var nt=st();const L=W(nt);var x={},q;function ot(){if(q)return x;q=1;var t=G();Object.defineProperty(x,"__esModule",{value:!0}),x.default=void 0;var e=t(H()),o=U(),n=(0,e.default)((0,o.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank");return x.default=n,x}var rt=ot();const $=W(rt);function ft({characterKey:t,onClose:e}){return s(Oe,{open:!!t,onClose:e,children:s(m.Suspense,{fallback:s(Te,{variant:"rectangular",width:"100%",height:1e3}),children:t&&s(at,{characterKey:t})})})}function at({characterKey:t}){const e=ee(t),o=Y(t),{database:n}=D();return s(V,{children:c(Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[s(p,{variant:"h3",children:s(X,{genderedKey:o})}),s(A,{type:"number",label:"Level",variant:"outlined",inputProps:{min:1,max:90},value:(e==null?void 0:e.level)||0,onChange:r=>n.chars.set(t,{level:parseInt(r.target.value)}),disabled:!e}),s(A,{type:"number",label:"Ascension",variant:"outlined",inputProps:{min:0,max:6},value:(e==null?void 0:e.ascension)||0,onChange:r=>n.chars.set(t,{ascension:parseInt(r.target.value)}),disabled:!e}),s(Q,{title:`Eidolon Lv. ${(e==null?void 0:e.eidolon)??0}`,fullWidth:!1,disabled:!e,children:Ae.map(r=>c(J,{selected:(e==null?void 0:e.eidolon)===r,disabled:(e==null?void 0:e.eidolon)===r,onClick:()=>n.chars.set(t,{eidolon:r}),children:["Eidolon Lv. ",r]},r))}),c(K,{spacing:1,children:[s(p,{variant:"h6",children:"Abilites"}),s(B,{}),c(d,{container:!0,gap:1,children:[s(d,{item:!0,children:s(C,{characterKey:t,abilityKey:"basic",dropDownButtonProps:{startIcon:s(g,{size:1.5,sideMargin:!0,src:h(o,"basic_0")})}})}),s(d,{item:!0,children:s(C,{characterKey:t,abilityKey:"skill",dropDownButtonProps:{startIcon:s(g,{size:1.5,sideMargin:!0,src:h(o,"skill_0")})}})}),s(d,{item:!0,children:s(C,{characterKey:t,abilityKey:"ult",dropDownButtonProps:{startIcon:s(g,{size:1.5,sideMargin:!0,src:h(o,"ult_0")})}})}),s(d,{item:!0,children:s(C,{characterKey:t,abilityKey:"talent",dropDownButtonProps:{startIcon:s(g,{size:1.5,sideMargin:!0,src:h(o,"talent_0")})}})})]}),s(p,{variant:"h6",children:"Bonus Abilities"}),s(B,{}),s(d,{container:!0,gap:1,children:Object.entries((e==null?void 0:e.bonusAbilities)??{}).map(([r,a])=>s(d,{item:!0,children:s(O,{color:a?"success":"primary",onClick:()=>{n.chars.set(t,{bonusAbilities:{...e==null?void 0:e.bonusAbilities,[r]:!a}})},startIcon:a?s(L,{}):s($,{}),children:s(g,{size:2,src:h(o,`bonusAbility${r}`),sideMargin:!0})})},r))}),s(p,{variant:"h6",children:"Stat Boosts"}),s(B,{}),s(d,{container:!0,gap:1,children:Object.entries((e==null?void 0:e.statBoosts)??{}).map(([r,a])=>{const{statKey:i,value:f}=Ye(t,r);return s(d,{item:!0,children:c(O,{color:a?"success":"primary",onClick:()=>{n.chars.set(t,{statBoosts:{...e==null?void 0:e.statBoosts,[r]:!a}})},startIcon:a?s(L,{}):s($,{}),children:[s(qe,{statKey:i,iconProps:{sx:{ml:-1,mr:.5}}}),c(k,{children:[F(f,i),z(i)]})]})},r)})})]})]})})}export{ft as C,K as S,mt as a,Ke as b,L as c,$ as d,Xe as e,pt as f,te as g,ee as u};
