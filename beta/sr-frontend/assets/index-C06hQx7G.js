import{W as y,p as e,q as n,B as h,T as g,z as d,X as T,r as c,ae as w,y as v,A as f}from"./index-DynN9NL_.js";import{u as k,a as D}from"./useInfScroll-B94Hznbt.js";import{I}from"./InfoTooltip-zkV3_ZvG.js";import{C as S}from"./CardActionArea-BwKjSsnA.js";import{C,G as u}from"./Grid-CExvuZvD.js";import{C as $}from"./CardHeader-CPLEkh9r.js";function A({teamId:a,bgTheme:i="light",onClick:o}){const{database:m}=y(),t=m.teams.get(a);return e(d,{bgt:i,sx:{height:"100%",border:"1px rgba(200,200,200,0.4) solid"},children:n(h,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[e(h,{sx:{display:"flex",flexDirection:"row"},children:e(S,{onClick:()=>o(),sx:{p:1},children:n(g,{sx:{display:"flex",gap:1,alignItems:"center"},variant:"h6",children:[e("span",{children:t.name})," ",t.description&&e(I,{title:t.description})]})})}),e(C,{children:e(u,{container:!0,columns:4,gap:1,children:t.teamMetadata.map((r,l)=>e(d,{sx:{flexGrow:1},children:n(g,{children:[(r==null?void 0:r.characterKey)??"Empty"," "]})},`${l}-${r==null?void 0:r.characterKey}`))})})]})})}const E={xs:1,sm:2,md:3,lg:3,xl:4},M={xs:5,sm:5,md:10,lg:10,xl:10};function z(){const{database:a}=y(),[i,o]=T();c.useEffect(()=>a.teams.followAny(o),[a,o]);const m=w(),{teamIds:t}=c.useMemo(()=>{const s=a.teams.keys;return i&&{teamIds:s}},[a,i]),r=k(),{numShow:l,setTriggerElement:b}=D(M[r],t.length),p=c.useMemo(()=>t.slice(0,l),[t,l]);return e(c.Suspense,{fallback:e(f,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:300}}),children:n(d,{bgt:"dark",children:[e($,{title:"Teams"}),n(C,{children:[e(v,{onClick:()=>a.teams.new(),children:"Create Team"}),n(h,{sx:{overflow:"auto",maxHeight:"50vh"},my:1,display:"flex",flexDirection:"column",gap:1,children:[e(u,{container:!0,spacing:1,columns:E,children:p.map(s=>e(u,{item:!0,xs:1,children:e(A,{teamId:s,onClick:x=>m(`${s}${x?`/${x}`:""}`)})},s))}),t.length!==p.length&&e(f,{ref:s=>{s&&b(s)},sx:{borderRadius:1},variant:"rectangular",width:"100%",height:100})]})]})]})})}function U(){return e(h,{sx:{mt:1},children:e(z,{})})}export{U as default};
